

==================================================
SECTION: payroll.rst
PATH: applications/hr/payroll.rst
==================================================

:show-content:

=======
Payroll
=======

Odoo's **Payroll** app is used to calculate employees' worked time in conjunction with other Odoo
apps, such as **Employees**, **Time Off**, **Attendances**, and **Planning**, and create
corresponding payslips.

When an employee is hired, they must sign a :doc:`contract <payroll/contracts>`. The contract
outlines how the employee is compensated, including the salary structure and rules their pay is
calculated from, when they work (their `working schedule`), and what benefits they receive.

.. important::
   It is critical to install the correct :doc:`country-specific localization
   <payroll/payroll_localizations>`, as this configures all local and national rules, regulations,
   and applicable taxes for the selected country.

In addition to the employee contract, any :doc:`salary attachments <payroll/salary_attachments>`
must be configured before running payroll.

When it is time to run payroll according to the business's schedule (monthly, weekly, bi-weekly,
etc.), :doc:`payslips <payroll/payslips>` can be created individually or in :doc:`groups
<payroll/pay_runs>`. Odoo calculates when the employees worked based on their :doc:`work entries
<payroll/work_entries>`. Work entries are created according to their :doc:`contracts
<payroll/contracts>`, based on information from the **Attendances**, **Planning**, or **Timesheets**
apps. Any errors with work entries **must** be resolved *before* continuing to process payroll.

After all issues or conflicts are resolved, payslips are :ref:`processed <payroll/process>`, and
then :ref:`employees are paid <payroll/pay-employee>`, either with a wire transfer or a physical
check.

.. note::
   It is possible to pay employees with cash, but this is not recommended.

Settings
========

Before running payroll, various settings for the **Payroll** app **must** be configured. Navigate to
:menuselection:`Payroll app --> Configuration --> Settings`. The various settings for
:ref:`accounting <payroll-accounting>`, :ref:`localizations <payroll-localizations>`, :ref:`time off
<payroll-time-off>`, and :ref:`general payroll settings <payroll-payroll-settings>` are specified
here.

.. _payroll-accounting:

Accounting
----------

Configure the following in the accounting section of the configuration menu:

- :guilabel:`Payroll Entries`: Enable this option to post payroll slips in the **Accounting** app,
  in a `Salaries` box on the main dashboard.
- :guilabel:`Payroll SEPA`: Enable this option to create :abbr:`SEPA (Single Euro Payments Area)`
  payments.
- :guilabel:`Batch Account Move Lines`: Enable this option to have a single account move line
  created from all the accounting entries of the same period. This anonymizes accounting entries and
  disables the creation of individual payments.

.. _payroll-localizations:

Localizations
-------------

*Localizations* are country-specific settings preconfigured in Odoo at the creation of the database,
which account for all taxes, fees, and allowances for that particular country.

The :guilabel:`Localization` section of the **Payroll** app :guilabel:`Settings` page includes
specific settings that need to be configured for the specific country.

The settings and options shown in this section vary, depending on the :doc:`localization enabled
<payroll/payroll_localizations>` for the database.

.. warning::
   It is **not** recommended to alter the localization settings, unless specifically required due to
   special circumstances. For example, a new law is passed that changes basic salary rules, or a
   company is exempt from specific taxes.

.. note::
   Odoo can handle multi-company configurations. This is generally done when there is a main company
   or office location, such as a headquarters, with other offices or branches located either in the
   country or internationally, that fall under that main company or headquarters. In Odoo, each
   company, including the headquarters, **must** be set up as its own company or branch using the
   multi-company method.

   Each company can have a different localization setting, since locations can vary worldwide, where
   rules and laws differ.

   For more information on companies, refer to the :doc:`companies <../general/companies>`
   documentation, or the :doc:`multi-company <../general/companies/multi_company>` documentation,
   which covers how to set up multiple companies.

.. seealso::
   :doc:`payroll/payroll_localizations`

.. _payroll-time-off:

Time off
--------

:guilabel:`Deferred Time Off`: If time off is taken *after* payslips are validated, the time off
must be applied to the following pay period to avoid cancelling then reprocessing payslips. Select
the person responsible for these specific time off situations using the drop-down menu in the
:guilabel:`Responsible` field.

.. example::
   An employee is paid on the 15th of the month and the last day of the month. Payslips are
   typically processed one day before.

   An employee's payslip is approved and processed on the 30th, but that same employee took an
   unexpected sick day on the 31st.

   Since the employee was already paid for a regular workday on the 31st, to keep the time off
   balances correct, the sick day is applied to the 1st of the next month (during the next pay
   period).

.. _payroll-payroll-settings:

Payroll
-------

The payroll section allows for the installation of a :doc:`payroll localization
<payroll/payroll_localizations>`. Click :icon:`oi-arrow-right` :guilabel:`Choose a Payroll
Localization` and a Kanban view of all available payroll localizations loads. Click
:guilabel:`Install` on the desired localization to install it. If a localization has been installed,
only a :guilabel:`Module Info` button appears for that specific localization.

Once a localization has been installed, configure the following fields:

- :guilabel:`Contract Expiration Notice Period`: Enter the number of :guilabel:`Days` before a
  contract expires, when Odoo notifies the responsible person about the upcoming expiration.
- :guilabel:`Payslip PDF Display`: Enable this option to show the payslip's PDF when the state is
  validated.
- :guilabel:`Work Permit Expiration Notice Period`: Enter the number of :guilabel:`Days` before a
  work permit expires, when Odoo notifies the responsible person about the upcoming expiration.
- :guilabel:`YTD Reset Date`: Enter the date when the :abbr:`YTD (Year To Date)` is reset to. By
  default, this field is set to January 1st.

.. seealso::
   - :doc:`payroll/contracts`
   - :doc:`payroll/salaries`
   - :doc:`payroll/work_entries`
   - :doc:`payroll/working_schedules`
   - :doc:`payroll/time_off_to_report`
   - :doc:`payroll/salary_attachments`
   - :doc:`payroll/payslips`
   - :doc:`payroll/pay_runs`
   - :doc:`payroll/commissions`
   - :doc:`payroll/payroll_analysis`
   - :doc:`payroll/headcount`
   - :doc:`payroll/work_entry_analysis`
   - :doc:`payroll/payroll_localizations`

.. toctree::
   :titlesonly:

   payroll/contracts
   payroll/salaries
   payroll/work_entries
   payroll/working_schedules
   payroll/time_off_to_report
   payroll/salary_attachments
   payroll/payslips
   payroll/pay_runs
   payroll/commissions
   payroll/payroll_analysis
   payroll/headcount
   payroll/work_entry_analysis
   payroll/payroll_localizations


==================================================
SECTION: australia.rst
PATH: applications/hr/payroll/payroll_localizations/australia.rst
==================================================

=========
Australia
=========

.. _payroll/l10n_au/payroll:

.. important::
   Odoo is currently in the process of becoming compliant with STP Phase 2 and SuperStream. An
   announcement will be made as soon as companies can use Odoo for payroll as a one-stop platform.

Setting up employees
====================

Employee settings
-----------------

Create an employee by going to :menuselection:`Employees --> New`. Go to the :guilabel:`Settings`
tab, and configure the :guilabel:`Australian Payroll` section, for example checking if they are
:guilabel:`Non-resident`, if they benefit from the :guilabel:`Tax-free Threshold`, their
:guilabel:`TFN Status`, :guilabel:`Employee Type`, etc.

.. image:: australia/payroll-employee-settings.png
   :alt: Employee settings tab for the Australian payroll localization.

Employee private information
----------------------------

In addition, some personal employee information is required for payroll compliance with Single Touch
Payroll, and to process superannuation payments. Open the employee's :guilabel:`Private Information`
tab and fill in the following fields:

- :guilabel:`Private Address`
- :guilabel:`Private Email`
- :guilabel:`Private Phone`
- :guilabel:`Date of Birth`

.. image:: australia/payroll-employee-private.png
   :alt: Employee private information tab for the Australian payroll localization.

.. note::
   Odoo will remind you to complete the required data at different stages of the process.

Super accounts and funds
------------------------

You can add the superannuation details of new employees under the employee's :guilabel:`Super
Accounts` tab. Click :guilabel:`Add a line` and make sure to include the :guilabel:`Member Since`
date, :guilabel:`Member Number`, and :guilabel:`Super Fund`.

..  tip::
    Use the :guilabel:`Proportion` field if an employee's contributions should sent to multiple
    funds at a time.

.. image:: australia/payroll-super-account.png
   :alt: Configuring a super fund and super account for the Australian payroll localization.

To create a new :guilabel:`Super Fund`, start typing its name and click :guilabel:`Create and
edit...`. Fill in its:

- :guilabel:`Address`
- :guilabel:`ABN`
- :guilabel:`Type` (APRA / SMSF)
- unique identifier (:guilabel:`USI` for APRA, :guilabel:`ESA` for SMSF)
- (for SMFS only) :guilabel:`Bank Account`

.. image:: australia/payroll-super-fund.png
   :alt: Configuring a super fund for the Australian payroll localization.

..  tip::
    Manage all super accounts and funds by going to :menuselection:`Payroll --> Configuration -->
    Super Funds` or :menuselection:`Super Accounts`.

.. important::
   Odoo is currently in the process of becoming SuperStream-compliant.

Contracts
---------

Once the employee has been created, create their employment contract by clicking the :icon:`fa-book`
:guilabel:`Contracts` smart button, or by going to :menuselection:`Employees --> Employees -->
Contracts`.

.. note::
   Only one contract can be active per employee at a time. However, an employee can be assigned
   consecutive contracts during their employment.

Employment contract creation: recommended steps
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

.. image:: australia/payroll-contract-flow.png
   :alt: Recommended steps to create an employment contract.

1. Basic contractual information
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

- Select the :guilabel:`Contract Start Date` and :guilabel:`Working Schedule` (set, or flexible for
  casual workers).
- Keep the :guilabel:`Salary Structure Type` set to :guilabel:`Australian Employee`. This structure
  covers all of the ATO's tax schedules.

.. _payroll/l10n_au/work-entry-source:

- (if using the Attendances or Planning app) Select the :guilabel:`Work Entry Source` to define how
  working hours and days are accounted for on the employee's payslip.

  - :guilabel:`Working Schedule`: work entries are automatically generated based on the employee's
    working schedule, starting from the contract's start date.

    .. example::
       An employee works 38 hours a week, their contract begins on 01/01, today's date is 16/01, and
       the user generates a pay run from 14/01 to 20/01. The working hours on the payslip will be
       automatically calculated to be 38 hours (5 * 7.36 hours) if no unpaid leave is taken.

  - :guilabel:`Attendances`: the working schedule is ignored, and work entries are only generated
    after clocking in and out of the Attendances app. Note that attendances can be imported.
  - :guilabel:`Planning`: the working schedule is ignored, and work entries are generated from
    planning shifts in the Planning app.

  .. important::
     Timesheets do not impact work entries in Odoo. If you need to import your timesheets in Odoo,
     import them by going to :menuselection:`Payroll --> Work Entries --> Work Entries` instead.

2. Salary Information tab
~~~~~~~~~~~~~~~~~~~~~~~~~

- :guilabel:`Wage Type`: select :guilabel:`Fixed Wage` for full-time and part-time employees, and
  :guilabel:`Hourly Wage` for casual workers. The latter allows you to add a :guilabel:`Casual
  Loading` percentage.

  .. note::
     For hourly workers, the :guilabel:`Hourly Wage` field should exclude casual loading.

- :guilabel:`Schedule Pay`: in Australia, only the following pay run frequencies are accepted:
  :guilabel:`Daily`, :guilabel:`Weekly`, :guilabel:`Bi-weekly` (or fortnightly),
  :guilabel:`Monthly`, and :guilabel:`Quarterly`.
- :guilabel:`Wage` /*period*: assign a wage to the contract according to their pay frequency. On
  payslips, the corresponding annual and hourly rates will be computed automatically.

3. Australia tab
~~~~~~~~~~~~~~~~

.. image:: australia/payroll-contract-australia.png
   :alt: Australia tab of a contract.

- :guilabel:`General`

  - Add the :guilabel:`Regular Pay Day` if relevant.
  - Enable :guilabel:`Report in BAS - W3` if you choose to add PAYG withholding amounts in BAS
    section W3 instead of W2 (refer to the `ATO's web page on PAYG withholding
    <https://www.ato.gov.au/businesses-and-organisations/preparing-lodging-and-paying/business-activity-statements-bas/in-detail/instructions/payg-withholding-how-to-complete-your-activity-statement-labels#W3Otheramountswithheldexcludinganyamount>`_
    for more information).

- :guilabel:`Leave loading / workplace giving`

  - Define whether your employees are :guilabel:`Eligible for Leave Loading`.
  - Set the :guilabel:`Workplace Giving Employee` amount in exchange for deductions.
  - Set the :guilabel:`Salary Sacrificed Workplace Giving` amount (e.g., receiving a benefit instead
    of a deduction).

- :guilabel:`Super contributions`

  - Add the :guilabel:`Extra Negotiated Super %` on top of the *super guarantee*.
  - Add the :guilabel:`Extra Compulsory Super %` as per industrial agreements or awards obligations.

- :guilabel:`Salary sacrifice`

  - :guilabel:`Salary Sacrifice Superannuation` allows employees to sacrifice part of their salary
    in favor of reportable employer superannuation contributions (RESC).
  - :guilabel:`Salary Sacrifice Other Benefits` allows them to sacrifice part of their salary
    towards some other form of benefit (refer to the `ATO's web page on Salary sacrificing for
    employees <https://www.ato.gov.au/individuals-and-families/jobs-and-employment-types/working-as-an-employee/salary-sacrificing-for-employees>`_
    for more information).

    .. note::
       As of Odoo 18, salary sacrificing for other benefits currently does not impact fringe
       benefits tax (FBT) reporting.

.. _payroll/l10n_au/salary-attachments:

4. Salary attachments
~~~~~~~~~~~~~~~~~~~~~

If the employee is to receive additional recurring payments every pay run, whether indefinitely or
for a set number of periods, click the :icon:`fa-book` :guilabel:`Salary Attachments` smart button
on the contract. Choose a :guilabel:`Type` and a :guilabel:`Description`.

.. note::
   Around 32 recurring salary attachment types exist for Australia. These are mostly related to
   allowances and child support. `Contact us <https://www.odoo.com/help>`_ for more information as
   to whether allowances from your industry can be covered.

5. Run the contract
~~~~~~~~~~~~~~~~~~~

.. image:: australia/payroll-contract-run.png
   :alt: Example of a running contract.

Once all the information has been completed, change the contract stage from :guilabel:`New` to
:guilabel:`Running`.

Prepare pay runs
================

Regular
-------

Pay runs are created by going to :menuselection:`Payroll --> Payslips --> Batches`. After clicking
:guilabel:`New`, enter a :guilabel:`Batch Name`, select a :guilabel:`Period`, and click
:guilabel:`Generate Payslips`.

.. image:: australia/payroll-payslips-generation.png
   :alt: Steps to generate payslips.

Employees on a pay run can be filtered down by :guilabel:`Department` and :guilabel:`Job Position`.
There is no limit to the amount of payslips that can be created in one batch. After clicking
:guilabel:`Generate`, one payslip is created per employee in the :guilabel:`Waiting` stage, in which
they can be reviewed and amended before validation.

.. image:: australia/payroll-waiting-payslips.png
   :alt: Generated payslips in the waiting stage.

On the payslip form view, there are two types of inputs:

- :guilabel:`Worked days` are computed based on the :ref:`work entry source set on the employee's
  contract <payroll/l10n_au/work-entry-source>`. :ref:`Work entries can be configured
  <payroll/l10n_au/work-entry-types>` according to different types: attendance, overtime,
  Saturday rate, Sunday rate, public holiday rate, etc.
- :guilabel:`Other inputs` are individual payments or amounts of :ref:`different types
  <payroll/l10n_au/other-input-types>` (allowances, lump sums, deductions, termination payments,
  leaves, etc.) that have little to do with the hours worked during the current pay period. The
  :ref:`previously configured salary attachments <payroll/l10n_au/salary-attachments>` are simply
  recurring other inputs attached to a contract.

.. image:: australia/payroll-payslips-inputs.png
   :alt: Worked days and other inputs of a payslip.

Under the :guilabel:`Salary Computation` tab, Odoo automatically computes payslip rules based on
employees, contracts, worked hours, other input types, and salary attachments.

The salary structure *Australian Employee* has 35 payslip rules that automatically compute and
dynamically display according to the payslip inputs.

.. example::

   .. image:: australia/payroll-payslip-salary.png
      :alt: Salary computation tab of a payslip

   The following rules apply for that pay period in the above example:

   - :guilabel:`Basic Salary`: pre-sacrifice gross salary
   - :guilabel:`Ordinary Time Earnings`: amount to which the super guarantee percentage needs to be
     applied
   - :guilabel:`Salary Sacrifice Total`: includes the $150 sacrificed to superannuation
   - :guilabel:`Taxable Allowance Payments`: includes the $10 allowance (*cents per KM* in this
     case)
   - :guilabel:`Taxable Salary`: gross salary amount minus non-taxable amounts
   - :guilabel:`Salary Withholding` and :guilabel:`Total Withholding`: amounts to be withheld from
     the taxable salary
   - :guilabel:`Net Salary`: the employee's net wage
   - :guilabel:`Concessional Super Contribution`: in this scenario, the amount sacrificed to
     superannuation, payable to the employee's super fund in addition to the super guarantee
   - :guilabel:`Super Guarantee`: as of 01 July 2024, it is computed as 11.5% of the ordinary time
     earnings amount

.. note::
   As of Odoo 18, the most recent tax schedule rates (2024-2025) have been updated for all salary
   rules and computations.

Out-of-cycle
------------

In Australia, payslips created without a batch are considered to be *out-of-cycle* runs. Create them
by going to :menuselection:`Payroll --> Payslips --> Individual Payslips`. The same payslip rules
apply, but the way these payslips are submitted to the ATO in the frame of Single Touch Payroll
(STP) is slightly different.

.. important::
   As of Odoo 18, adding an out-of-cycle payslip to an existing batch is **not** recommended.

Finalise pay runs
=================

Validate payslips
-----------------

Once all payslip data is deemed correct, click :guilabel:`Create Draft Entry` on the payslip batch.
This can also be done payslip by payslip for control reasons.

This has several impacts:

- Marking the batch and its payslips as :guilabel:`Done`.
- Creating a draft accounting entry per payslip or one entry for the whole batch, depending on your
  payroll settings. At this stage, accountants can post entries to affect the balance sheet, P&L
  report, and BAS report.
- Preparing the STP submission (or payroll data to be filed to the ATO as part of STP compliance).
  This needs to be performed by the :guilabel:`STP Responsible` user, defined under
  :menuselection:`Payroll --> Configuration --> Settings`.
- Preparing super contribution lines as part of SuperStream compliance. This needs to be done by the
  :guilabel:`HR Super Send` user selected under :menuselection:`Payroll --> Configuration -->
  Settings`.

.. image:: australia/payroll-stp-record.png
   :alt: Example of a draft payslip.

Submit payroll data to the ATO
------------------------------

.. important::
   Odoo is currently in the process of becoming compliant with STP Phase 2, and this step described
   above does not submit data yet to the ATO.

As per ATO requirements, STP submission for a pay run needs to be done on or before the payday. For
this reason, submit your STP data to the ATO first before proceeding with payment. To do so, click
:guilabel:`Submit to ATO` on the payslip batch.

On the STP record for this pay run, a few useful information is displayed:

- a warning message if important information is missing,
- an automatically generated activity for the STP responsible user, and
- a summary of payslips contained in this pay run, auditable from this view.

.. image:: australia/payroll-stp-record.png
   :alt: Example of an STP record.

Once the STP record is ready to go, click :guilabel:`Submit to ATO`, then read and accept the
related terms and conditions.

Pay employees
-------------

Once the ATO submission is complete, you can proceed to pay your employees. To facilitate the
payment matching process, remember to post the payslip-related journal entries prior to validating a
payment.

Although you may decide to pay your employees individually, we recommend creating a batch payment
from your payslip batch. To do so, click :guilabel:`Pay` on the payslip batch, and select
:guilabel:`ABA Credit Transfer` as the :guilabel:`Payment Method`.

.. image:: australia/payroll-payment-method.png
   :alt: Selecting the payment method for a payslip batch.

This has two impacts:

- Marking the batch and its payslips as :guilabel:`Paid`.
- Creating a :guilabel:`Payment Batch` linked to the payslip batch.

.. image:: australia/payroll-paid-batch.png
   :alt: Example of a paid batch of payslips.

When receiving the bank statement in Odoo, you can now match the statement line with the batch
payment in one click. The payment is not reconciled against the payslip batch, and all individual
payslips.

.. image:: australia/payroll-reconciliation.png
   :alt: Steps to reconcile a bank statement with a batch payment.

Impact on accounting
--------------------

Depending on the employee and contract configuration, the journal entry linked to a payslip will be
more or less exhaustive.

.. example::
   For instance, here is the journal entry generated by the employee Marcus Cook configured above.

   .. image:: australia/payroll-accounting-entry.png
      :alt: Example of a journal entry for a payslip

Once posted, predefined accounts will impact the company's balance sheet (PAYGW, wages, and
superannuation liabilities) and profit & loss report (wages and superannuation expenses). In
addition, the employee's gross wage and PAYG withholding will update the BAS report for the relevant
period (see Tax Grid: W1 and W2). Accounts can be adjusted to the company's chart of accounts.

.. image:: australia/payroll-bas.png
   :alt: Example of a BAS report PAYG tax witheld section.

Other payroll flows
===================

Paying super contributions
--------------------------

.. important::
   Odoo has a partnership with a clearing house to process both superannuation payments and data to
   the right funds in one click, via direct debit. Odoo is currently in the process of becoming
   compliant with SuperStream, and an announcement will be made as soon as superannuation
   contributions can be processed via Odoo's payroll solution.

Once a quarter (or more frequently, in preparation for `Payday Super
<https://www.ato.gov.au/about-ato/new-legislation/in-detail/superannuation/payday-superannuation>`_),
you have to process superannuation payments to your employees' super funds. To do so, go to
:menuselection:`Payroll --> Reporting --> Super Contributions`.

.. image:: australia/payroll-superfile.png
   :alt: Example of a super file.

When ready to pay, add the :guilabel:`Bank Journal` that will be used to pay the super from, then
click :guilabel:`Lock` to prevent the contributions from subsequent payslips from being added to
that file. Instead, a new Super file will be created.

Once the payment has been processed, it can be traced back to the Super file and matched with a bank
statement.

.. image:: australia/payroll-superfile-payment.png
   :alt: Example of a super file payment.

Terminating employees
---------------------

Employees can be terminated by going to :menuselection:`Payroll --> Reporting --> Terminate
Employee`.

The following fields must be completed:

- :guilabel:`Contract End Date`: once the termination is validated, this date will be added to the
  contract automatically, and mark the contract as :guilabel:`Expired` when the date has been
  reached.
- :guilabel:`Cessation Type Code`: a mandatory field for the ATO's STP reporting.
- :guilabel:`Termination Type`: the type of redundancy (genuine or non-genuine) affects the
  computation of unused annual and long service leave withholding.

.. image:: australia/payroll-termination.png
   :alt: Terminating the contract of an employee.

The balance of unused annual leaves and long service leaves is displayed for reference.

Confirming the termination creates an out-of-cycle payslip with the tag :guilabel:`final pay`. It
computes the worked days until the contract end date, in addition to the employee's unused annual
and long service leave entitlements.

.. image:: australia/payroll-termination-payslip.png
   :alt: Example of an out-of-cycle payslip of a terminated employee.

Odoo automatically computes unused leave entitlements based on the employee's current hourly rate
leave loading (for annual leaves only), and the remaining leave balance. However, these amounts can
be manually edited in the :guilabel:`Other Inputs` table if necessary.

Employment Termination Payments (ETP) can also be added to the :guilabel:`Other Inputs` table. Odoo
has a comprehensive list of excluded and non-excluded ETPs for companies to select from.

.. image:: australia/payroll-termination-etp.png
   :alt: Adding employment termination payments.

.. note::
   Withholding for unused leaves and ETPs is computed according to the ATO's `Schedule 7
   <https://www.ato.gov.au/tax-rates-and-codes/payg-withholding-schedule-7-tax-table-for-unused-leave-payments-on-termination-of-employment>`_
   and `Schedule 11 <https://www.ato.gov.au/tax-rates-and-codes/payg-withholding-schedule-11-tax-table-for-employment-termination-payments>`_
   and updated as of 01 July 2024.

.. tip::
   Once an employee has been terminated and the last detailed of their employment resolved, you can
   archive the employee by clicking the :icon:`fa-cog` (:guilabel:`Actions`) icon, then
   :icon:`oi-archive` :guilabel:`Archive` on the employee's form view.

Switching from another STP software to Odoo
-------------------------------------------

When switching from another STP-enabled software to Odoo, you might need to maintain the continuity
in the YTD values of your employees. Odoo allows importing employees' YTD values by going to
:menuselection:`Payroll --> Configuration --> Settings` and clicking :guilabel:`Import YTD
Balances`.

.. image:: australia/payroll-ytd-button.png
   :alt: Import YTD balances button.

For the ATO to recognize the employee records of your previous software and keep a continuity in
Odoo, you must enter the:

- :guilabel:`Previous BMS ID` (one per database)
- :guilabel:`Previous Payroll ID` (one per employee)

Ask your previous software provider if you cannot find its BMS ID or your employees' payroll IDs.

.. image:: australia/payroll-ytd-import.png
   :alt: Importing YTD balances.

This will give you the opportunity to add your employees' YTD opening balances in the current
fiscal year. The ATO reports on a lot of different types of YTD. These are represented by the 13
following :guilabel:`Salary Rules` in Odoo.

.. image:: australia/payroll-ytd-salary-rules.png
   :alt: Salary rules for an employee.

.. example::
   Let us say that the employee Marcus Cook has been transitioned from another STP-enabled software
   on September 1. Marcus has received two monthly payslips in his previous software (for July and
   August). Here are the YTD balances Marcus's company needs to transfer to Odoo:

   .. list-table::
      :header-rows: 1

      * - YTD category
        - YTD balance to transfer
      * - Gross (normal attendance)
        - $13,045.45
      * - Gross (overtime)
        - $1,000
      * - Paid leave
        - $954.55
      * - Laundry allowance
        - $200
      * - Total withholding
        - $2,956
      * - Super Guarantee
        - $1,610

If some YTD balances need to be reported with more granularity to the ATO, you can use the salary
rule's inputs.

.. example::
   For instance, the *Basic Salary* rule can contain six inputs, and three are necessary in our
   example: regular gross amounts, overtime, and paid leaves. These are all reported differently in
   terms of YTD amounts.

   .. image:: australia/payroll-ytd-basic-rule.png
      :alt: Adding YTD inputs

   The finalized YTD opening balances for Marcus Cook look like the following.

   .. image:: australia/payroll-ytd-final.png
      :alt: Example of finalized YTD opening balances

As a result, YTD computations on payslips are based on the employee's opening balances instead of
starting from zero.

STP finalisation
----------------

.. important::
   Odoo is currently in the process of becoming compliant with STP Phase 2, and the finalisation
   flows described below do not yet submit data to the ATO.

EOFY finalisation
~~~~~~~~~~~~~~~~~

Employers reporting through STP must make a finalization declaration by 14 July each year. To do so,
go to :menuselection:`Payroll --> Reporting --> STP Finalisation`.

.. image:: australia/payroll-stp-eofy-finalisation.png
   :alt: EOFY finalisation of an employee.

Both active and terminated employees to finalise are displayed.

.. image:: australia/payroll-stp-eofy-list.png
   :alt: List of employees to finalise.

From the finalisation form view, you can proceed with a final audit of all employees' payslips
during the relevant financial year. Once ready, click :guilabel:`Submit to ATO`. When you have made
the finalisation declaration, employees will see the status of their payment information change to
:guilabel:`Tax ready` on their online income statement after the end of the financial year.

Individual finalisation
~~~~~~~~~~~~~~~~~~~~~~~

Odoo also allows you to finalise employees individually during the year. This can be useful when:

- one-off payments are made after a first finalisation; and
- finalisation after termination of employment during the year.

To proceed with an individual finalisation, go to :menuselection:`Payroll --> Reporting --> STP
Finalisation`, leave the :guilabel:`EOFY Declaration` checkbox unticked, and manually add employees
to be finalised.

.. image:: australia/payroll-stp-individual.png
   :alt: Individual EOFY finalisation.

Even if you finalise an employee record partway through the financial year, the ATO will not
pre-fill the information into the employee's tax return until after the end of the financial year.

Adjustments
-----------

.. important::
   Odoo is currently in the process of becoming compliant with STP Phase 2, and the adjustment flows
   described below do not yet submit data to the ATO.

Amend finalisation
~~~~~~~~~~~~~~~~~~

If you need to amend YTD amounts for an employee after a finalisation declaration was made, it is
still possible to remove the finalisation indicator for that employee. To do so, go to
:menuselection:`Payroll --> Reporting --> STP Finalisation`, select the employee, and leave the
:guilabel:`Finalisation` checkbox unticked.

.. image:: australia/payroll-stp-amend.png
   :alt: Amending YTD amounts for an employee.

When ready, click :guilabel:`Submit to ATO` to file the finalisation update to the ATO.

Once the correct YTD details are ready for that employee after amendment, finalise that employee
again.

.. note::
   The ATO expects employers to correct errors within 14 days of detection or, if your pay cycle is
   longer than 14 days (e.g., monthly), by the date you would be due to lodge the next regular pay
   event. Finalisation amendments can be done through STP up to five years after the end of the
   financial year.

Finalising and amending finalisation for a single employee can also be useful when rehiring an
employee within the same financial year.

Full file replacements
~~~~~~~~~~~~~~~~~~~~~~

An employer can make full file replacements of pay runs to replace the last lodgement sent to the
ATO if it turns out to contain significantly inaccurate data.

To do so, open the last STP submission and click :guilabel:`Replace File`. Then, select which
payslips need to be reset by ticking the :guilabel:`Reset Payslip` checkbox.

.. image:: australia/payroll-stp-reset-payslips.png
   :alt: Replace file button.

Resetting payslips does not create new payslips or a new pay run, but instead:

- The payslips batch is reset from :guilabel:`Paid` or :guilabel:`Done` to :guilabel:`Confirmed`.
- The status of the reset payslips revert back to :guilabel:`Draft`.
- The correct payslips remain paid and matched against the original payment.
- A new STP submission is created to replace the former one. For traceability purposes, the former
  STP submission is not deleted but marked as replaced.

First, correct the reset payslips and create their draft entry. Once done, the :guilabel:`Submit to
ATO` reappears on the payslip batch to process the full file replacement.

.. image:: australia/payroll-stp-resubmit.png
   :alt: Resubmitting a payslip batch.

When ready, submit the pay run to the ATO once again. Please note that full file replacements are
only meant as a last resort to amend a substantial amount of erroneous data. When possible, the ATO
recommends correcting an incorrect payslips by submitting a correction as part of the next pay run
or via update event.

Moreover, it is not possible to submit a second full file replacement of the same submission, and a
full file replacement can only be done once every 24 hours.

Zero out YTD values
~~~~~~~~~~~~~~~~~~~

In case of a mid-year change of several key identifiers, YTD values need to be zeroed out, and then
re-posted with the updated key identifier.

For the following **company identifiers**, all employees need to be zeroed out:

- ABN
- Branch Code
- BMS ID

For the following **employee identifiers**, only individual employees can be zeroed out:

- TFN
- Payroll ID

#. Before updating any key identifiers, create a new STP submission by going to
   :menuselection:`Payroll --> Reporting --> Single Touch Payroll` and:

   - Change the :guilabel:`Submission Type` to :guilabel:`Update`.
   - Tick the :guilabel:`Zero Out YTD` checkbox.
   - Click :guilabel:`Add a line` to specify which employees.
   - Click :guilabel:`Submit to ATO`.

   .. image:: australia/payroll-stp-zero-out.png
      :alt: Creating a new STP submission to zero out YTD values.

#. Once that is done, modify the key identifier(s) to amend.

#. Finally, go back to :menuselection:`Payroll --> Reporting --> Single Touch Payroll` to create and
   submit a new :guilabel:`Update`, this time without ticking the :guilabel:`Zero Out YTD` checkbox.
   This will notify the ATO that the previously recorded YTD balances are to be adjusted to the new
   key identifiers.

Payroll links to other apps
===========================

Time Off
--------

The :doc:`Time Off app <../../../hr/time_off>` is natively integrated with the Payroll app in Odoo.
Different types of leaves will populate payslips based on the concept of *work entries*.

Go to :menuselection:`Time Off --> Configuration --> Time Off Types`, and for each type, configure
the following two fields under the :guilabel:`Payroll` section:

- :guilabel:`Work Entry Type`: defines which work entry should be selected on the :guilabel:`Worked
  Days` table of the payslip.
- :guilabel:`Unused Leave Type`: choose between :guilabel:`Annual`, :guilabel:`Long Service`, or
  :guilabel:`Personal Leave`. If :guilabel:`Personal Leave` is selected, the remaining leave balance
  for this time off type will not show up as an entitlement at the time of termination. Unused
  leaves of the type :guilabel:`Annual` will include leave loading if the employee is eligible for
  it.

.. image:: australia/payroll-time-off.png
   :alt: Configuring time off types.

Expenses
--------

The :doc:`Expenses app <../../../finance/expenses>` is also natively integrated with the **Payroll**
app in Odoo. First of all, go to :menuselection:`Expenses --> Configuration --> Settings` and enable
:guilabel:`Reimburse in Payslip`.

When an employee on your payroll submits an approved expense to be reimbursed, you can reimburse
them using two ways:

- If the expense is to be reimbursed outside of a pay run, click :guilabel:`Post Journal Entries`.
  The payment must be made manually.
- If the expense is to be reimbursed as part of the next pay run, click :guilabel:`Report in Next
  Payslip` instead.

.. image:: australia/payroll-expenses-reimburse.png
   :alt: Two ways of reimbursing an expense.

After an expense has been added to the next payslip, you can find it in the :guilabel:`Other Inputs`
table. This input type is then computed as an addition to the net salary.

.. image:: australia/payroll-expenses-payslip.png
   :alt: The expense reimbursement on a payslip.

After paying the employee, the payslip's journal item related to the employee's reimbursement is
automatically matched against the expense's vendor bill.

.. image:: australia/payroll-expenses-journal.png
   :alt: The payslip's journal item related to the employee's expense reimbursement.

Advanced configurations
=======================

.. _payroll/l10n_au/other-input-types:

Other input types
-----------------

You can access other input types by going to :menuselection:`Payroll --> Configuration --> Other
Input Types`. There are 63 other input types related to Australia. We do not recommend using the
other ones as part of your payroll solution, since they cannot be used in the frame of STP. You can
archive or delete them.

On each input type, the following fields are important:

- :guilabel:`Payment Type` classifies input types in six categories:

  #. :guilabel:`Allowance`: a separate amount you pay to your employees in addition to salary and
     wages. Some of these allowances are mandated by modern awards: laundry, transport, etc.

     .. important::
        `Contact us <https://www.odoo.com/help>`_ if you plan to use allowances subject to varied
        rates of withholding (such as *cents per KM* or *travel allowances*) to see whether Odoo
        currently covers your business case.

     .. note::
        - As of Odoo 18, some allowances such as :guilabel:`Laundry: Allowance for approved
          uniforms` are managed by two other inputs: one to lodge the amount paid up to the ATO
          limit, and the other one to lodge the amount exceeding the ATO limit. This is necessary
          for Odoo to compute PAYGW correctly.
        - Some businesses may require to shift the reporting of an allowance from :guilabel:`OTE` to
          :guilabel:`Salary & Wages` depending on the employee. In this case, you must duplicate and
          re-configure an existing other input type. For example, :guilabel:`Work-Related
          Non-Expense` allowance is :guilabel:`OTE` by default.

  #. :guilabel:`Deduction`: union fees and child support deductions are considered deductions.
  #. :guilabel:`ETP`: employment termination payments. These are either considered excluded or
     non-excluded (see `ATO's web page on ETP components taxation <https://www.ato.gov.au/individuals-and-families/jobs-and-employment-types/working-as-an-employee/leaving-your-job/employment-termination-payments-for-employees/how-etp-components-are-taxed>`_).
  #. :guilabel:`Leave`: leave-related other inputs that are not pertaining to a single pay period
     (lump sum, cashing out leaves while in service, unused leaves, etc.).
  #. :guilabel:`Lump Sum`: return to work and lump sum E (for back payments) fall under this
     category.
  #. :guilabel:`Other`: other payments with their own specific logic.

- :guilabel:`PAYGW Treatment` affects how Odoo withholds tax for this input type:
  :guilabel:`Regular`, :guilabel:`No PAYG Withholding`, and :guilabel:`Excess Only` (for
  allowances).
- :guilabel:`Superannuation Treatment`: :guilabel:`OTE`, :guilabel:`Salary & Wages`, and
  :guilabel:`Not Salary & Wages`.
- :guilabel:`STP Code`: only visible in :ref:`developer mode <developer-mode>`, this field tells
  Odoo how to report the gross value of this payment to the ATO. We do not recommend changing the
  value of this field if it was already set by default.

Grouping other input types by :guilabel:`Payment Type` can help you understand the different
scenarios in which these inputs can be used.

.. image:: australia/payroll-other-input-types.png
   :alt: Other input types grouped by payment type.

.. _payroll/l10n_au/work-entry-types:

Work entry types
----------------

A *work entry type* is a type of attendance for employees (e.g., attendance, paid leave, overtime,
etc.). A few work entry types are created by default in every Australian database.

.. image:: australia/payroll-work-entry-types.png
   :alt: Default work entry types for the Australian localization.

Before using Odoo's payroll solution for Australia, it is recommended you trim work entry types to
keep the ones you need only by going to :menuselection:`Payroll --> Configuration --> Work Entry
Types`

For each type, make sure to configure the following fields for Australia:

- :guilabel:`Is OTE`: determines whether time spent in this category can be considered ordinary time
  earnings, meaning that the superannuation guarantee rate will apply (e.g., regular attendance,
  paid leave, etc.).
- :guilabel:`Penalty Rate`: used to determine the percentage of penalty that applies to time spent
  in this category. It is important that you configure the penalty rate that applies in your state
  or industry according to the type of work (e.g., Saturday rate, Sunday rate, overtime rate, etc.).
- :guilabel:`STP Code`: only visible in :ref:`developer mode <developer-mode>`, this field tells
  Odoo how to report the time spent in this category to the ATO. We do not recommend changing the
  value of this field if it was already set by default.

.. image:: australia/payroll-work-entry-types-configuration.png
   :alt: Configuring a work entry type.

Current limitations
===================

As of Odoo 18, we do not recommend companies to use the Payroll app for the following business
flows:

- Income stream types: Foreign Employment Income
- Tax treatment category: actors & performers
- Death benefits reporting
- Reporting obligations for WPN (instead of ABN)
- Allowances subject to a varied rate of withholding (such as *cents per kilometer* allowance and
  *travel allowances*)

`Contact us <https://www.odoo.com/help>`_ if you would like to make sure whether Odoo fits your
payroll requirements in Australia.

.. _payroll/l10n_au/employment-hero:

Employment Hero integration
===========================

If your business is already up and running with Employment Hero, you can use the connector as an
alternative payroll solution. The Employment Hero module synchronizes payslip accounting entries
(e.g., expenses, social charges, liabilities, taxes) automatically from Employment Hero to Odoo.
Payroll administration is still done in Employment Hero; Odoo only records the journal entries.

Configuration
-------------

#. :ref:`Install <general/install>` the Employment Hero Payroll module (`l10n_employment_hero`).
#. Configure the Employment Hero API by going to :menuselection:`Accounting --> Configuration -->
   Settings`. More fields become visible after ticking the :guilabel:`Enable Employment Hero
   Integration` checkbox.

   .. image:: australia/payroll-employment-hero-settings.png
      :alt: Enabling the Employment Hero integration.

   - Find the :guilabel:`API Key` in the :guilabel:`My Account` section of the Employment Hero
     platform.

     .. image:: australia/payroll-employment-hero-api-key.png
        :alt: Finding the Employment Hero API key under the My Account section.

   - The :guilabel:`Payroll URL` is pre-filled with `https://keypay.yourpayroll.com.au`.

     .. warning::
        Do not change the pre-filled :guilabel:`Payroll URL`.

   - Find the :guilabel:`Business Id` in the Employment Hero URL (e.g., `189241`).

     .. image:: australia/payroll-employment-hero-business-id.png
        :alt: Finding the Employment Hero Business ID in the URL.

   - Select any Odoo journal as the :guilabel:`Payroll Journal` to post the payslip entries.

#. Configure the tax by going to :menuselection:`Accounting --> Configuration --> Taxes`. Create the
   necessary taxes for the Employment Hero payslip entries. Fill in the tax code from Employment
   Hero in the :menuselection:`Matching Employment Hero Tax` field.

The API explained
-----------------

The API syncs the journal entries from Employment Hero to Odoo and leaves them in draft mode. The
reference includes the Employment Hero payslip entry ID in brackets for the user to easily retrieve
the same record in Employment Hero and Odoo.

.. image:: australia/payroll-employment-hero-journal.png
   :alt: Employment Hero journal entries in Odoo.

By default, the synchronization happens once per week. It is possible to fetch the records manually
by going to :menuselection:`Accounting --> Configuration --> Settings` and, in the
:guilabel:`Employment Hero`, clicking :guilabel:`Fetch Payruns Manually`.

Employment Hero payslip entries also work based on double-entry bookkeeping. The accounts used by
Employment Hero are defined in the Payroll settings section.

.. image:: australia/payroll-employment-hero-accounts.png
   :alt: Finding the Employment Hero accounts.

For the API to work, you must create the same accounts as the default accounts of your Employment
Hero business (same name and same code) in Odoo. You also need to choose the correct account types
in Odoo to generate accurate financial reports.


==================================================
SECTION: belgium.rst
PATH: applications/hr/payroll/payroll_localizations/belgium.rst
==================================================

=======
Belgium
=======

.. _payroll/l10n_be/payslip_explained:

Understanding the Belgian payslip
=================================

Overview
--------

Providing employees with a clear, transparent payslip is essential for compliance and employee
satisfaction. This guide explains how to interpret a Belgian payslip, detailing key components that
impact salary calculations and deductions.

General information
-------------------

The first section of the payslip contains the employee's general details. It is crucial to verify
the accuracy of the civil status and the number of dependents, as these factors influence tax
calculations. Employers can ensure updates are made through their internal salary configurator or
employee profile management systems.

.. image:: belgium/payslip-explained-01.png
   :alt: How to read a payslip - General Information.

Work entries
------------

This section outlines time-off applications and their impact on salary. The base salary typically
remains constant unless unpaid leave is taken. If an employee has taken unpaid leave, parental
leave, or any unexpected absence, their salary will reflect the corresponding deductions.

.. image:: belgium/payslip-explained-02.png
   :alt: How to read a payslip - Work Entries.

Payroll calculation
-------------------

The core of the payslip details various salary components, deductions, and benefits. Below are the
primary elements:

- **Benefits in Kind**: If applicable, benefits in kind (such as a mobile or internet subscription
  or a laptop) are subject to taxation and impact net remuneration.

  When a company car is provided for personal use, a taxable benefit (ATN) is added to the
  employee's salary. This is determined by:

  - The catalog value and age of the vehicle
  - The vehicle's CO2 emissions

  This benefit is subject to withholding tax and will be adjusted later in the payroll process.
- **Social Security contributions**: A mandatory 13.07% deduction from gross salary is allocated to
  the National Social Security Office (ONSS). This includes:

  - Pensions: 7.5%
  - Health Insurance for Care: 3.55%
  - Health Insurance for Benefits: 1.15%
  - Unemployment: 0.87%

  Additionally, the employer contributes on average 25% of the employer's contributions to the
  National Social Security Office.
- **Employment bonus**: A reduction in employee contributions based on gross salary, which is phased
  out if the salary exceeds a specific threshold.

  .. seealso::
     `More info on job bonuses <https://www.socialsecurity.be/employer/instructions/dmfa/fr/latest/instructions/deductions/workers_reductions/workbonus.html>`_

- **Withholding taxes**: Withholding tax rates are revised annually by the `SPF Finances
  <https://finances.belgium.be/fr/entreprises/personnel_et_remuneration/precompte_professionnel/calcul>`_.

  The tax amount is influenced by:

  - Gross salary
  - Marital status (married, legally cohabiting, or single)
  - Household composition (children or other dependents)

  This serves as an advance payment on professional income tax.
- **Reduction in withholding tax**: A reduction based on gross salary, which is ignored if salary
  surpasses a specific amount.
- **Special Social Security contribution**: A household income-based tax applicable to all employees
  covered by social security.
- **Meal voucher deduction**: Employees receive meal vouchers valued for instance at 8 per workday,
  where:

  - The employer contributes 6.91
  - The employee contributes 1.09

  .. example::
     - 5 worked days -> deduction of 5.45 (:math:`5\times\text{}1.09`)
     - 22 worked days -> deduction of 23.98 (:math:`22\times\text{}1.09`)

  Variations in this deduction impact monthly net salary.
- **Representation fees**: An optional net salary component, allocated in two parts:

  - A fixed portion, independent of working hours
  - A prorated portion, adjusted for part-time schedules
- **Net salary**: The final amount deposited into the employee's bank account after deductions.

.. _payroll/l10n_be/december_pay:

December pay
============

Why a December settlement?
--------------------------

An employer must pay a vacation allowance to an employee in December under two conditions:

- If the employee has reduced their working hours during the vacation year.
- If the employee is unable to take all their vacation days before the end of the year.

In principle, employers must ensure that employees take their annual vacation before December 31.
However, certain circumstances may prevent employees from using all their vacation days. In these
cases, the employer must pay the simple vacation allowance for unused days before the end of the
year. Additionally, if the employee has not received the double vacation allowance earlier in the
year (typically in May or June), they are entitled to receive it.

Reduction of working hours
--------------------------

When an employee reduces their average working hours with the same employer, the employer must pay
the vacation allowance in December of the year in which the reduction occurs, as if the employee
had left the company.

**Possible scenarios**:

- Transition to part-time work.
- Partial career break.
- Thematic leave on a part-time basis.
- Partial return to work after a full incapacity period.

The settlement is calculated based on the previous vacation year's earnings and includes:

- **Simple vacation allowance**: 7.67% of the yearly gross salary from the previous year, including
  any fictitious salary for assimilated interruption days, minus the simple vacation allowance
  already paid during the vacation year.
- **Double vacation allowance**: 7.67% of the yearly gross salary from the previous year, including
  any fictitious salary for assimilated interruption days, minus the double vacation allowance
  already paid during the vacation year.

If all vacation days have been taken before the reduction in working hours, no additional
calculation is required.

Inability to use vacation days
------------------------------

As a general rule, all vacation days must be used within the vacation year. However, if an employee
is unable to take all their vacation due to force majeure or specific suspension reasons, the
employer must pay the following by December 31:

- **Simple vacation allowance** for unused days, based on the December salary.
- **Double vacation allowance** if it has not yet been paid, based on the December salary.

**Eligible reasons include**:

- Common illness or accident.
- Work accident or occupational disease.
- Maternity leave, paternity leave (converted maternity leave), prophylactic leave.
- Birth, adoption, or reception leave.
- Parental leave or protective maternity leave measures.

New rule (effective end of 2024)
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Employees unable to take vacation due to the above reasons (except force majeure or protective
maternity leave measures) can carry over unused days for up to 24 months. Since the vacation
allowance is already paid in December of the vacation year, no additional payment will be made when
the carried-over days are used.

Employer payment responsibilities
---------------------------------

The employer must pay any outstanding simple vacation allowance based on 7.67% of the gross salary
from the previous year. However, an exit vacation allowance based on the current year's gross salary
is not due.

If an employee reduces their working hours and continues in the same role the following year, an
additional vacation allowance calculation may be required in December.

Example calculation
-------------------

#. In 2013, an employee works full-time (5 days per week).
#. In 2014, the employee works full-time until June 30, then switches to part-time (5 half-days per
   week).
#. The employee takes vacation in August 2014 under the new part-time regime (20 half-days over 4
   weeks).
#. They receive a simple vacation allowance for 20 half-days and a double vacation allowance
   equivalent to 92% of their monthly salary.
#. In December 2014, the employee receives additional simple (7.67%) and double (7.67%) vacation
   allowances based on 2013's gross salary, minus previously paid amounts.
#. In 2015, if the employee continues part-time, they receive vacation based on part-time hours plus
   5 full-time vacation days from the 2014 vacation year.
#. A second settlement in December 2015 includes additional simple (7.67%) and double (7.67%)
   vacation allowances based on the 2014 gross salary, minus previously paid amounts.

How to do it in Odoo
--------------------

On a classic :doc:`payslip <../payslips>` issued in December, press the :guilabel:`Compute December
Holiday Pay` button to open a configuration wizard.

Based on the allocated and requested time off, the :guilabel:`Simple Holiday Pay N-1` and
:guilabel:`Double Holiday Pay N-1` for the December payslip are computed (and editable for manual
encoding). Click :guilabel:`Validate` to confirm.

.. image:: belgium/december-pay-02.png
   :alt: December Pay Amount.

After validation, two additional inputs are stored on the payslip, and the payslip is re-computed to
take those new remunerations into account.

The simple holiday pay is included into the gross remuneration.

.. image:: belgium/december-pay-04.png
   :alt: December Pay Simple.

The double holiday pay is computed separately and included into the net amount.

.. image:: belgium/december-pay-05.png
   :alt: December Pay Double.

.. _payroll/l10n_be/holiday_attests:

Departure: holiday attests
==========================

Overview
--------

In Belgium, when an employee leaves a company, the employer is required to provide vacation
attestations. These documents help the new employer determine the employee's vacation entitlements
and any vacation pay due. Odoo facilitates the automatic generation of these attestations based on
payroll and time-off data.

Types of attestations
---------------------

Odoo generates two types of vacation attestations:

#. **For the previous year (N-1)**: If the employee has not yet taken all the vacation days from the
   previous year.
#. **For the current year (N)**: Covering the vacation rights accrued in the year of departure.

Each attestation includes details such as:

- The period the employee was employed.
- Agreed working time and any modifications.
- Gross amounts of single and double vacation pay paid.
- Social security contributions paid by the employer.
- Number of vacation days already taken.
- Additional (European) vacation pay and days.

Calculation logic in Odoo
-------------------------

Odoo computes the attestations based on payroll and leave data. The main calculations include:

#. **Retrieving payroll and leave records**

   - The system identifies the employee's payroll records for the current and previous years.
   - It retrieves validated leave requests and allocations.

#. **Computing gross remuneration**

   - The gross annual salary for both the current and previous years is computed from payroll
     records.
   - The average monthly salary is calculated for unpaid leave adjustments.

#. **Time-off calculations**

   - The number of vacation days taken and allocated in the current year is determined.
   - Unpaid leave days are accounted for separately.

#. **Fictitious remuneration calculation**

   - If unpaid leave was taken, Odoo computes a fictitious remuneration adjustment using the
     formula:

     .. math::
        :class: overflow-scroll

        \text{Fictitious Remuneration} = (\text{Unpaid Leave Days} \times
        \text{Average Monthly Salary} \times 3) \div (13 \times 5)

#. **Generating the final attestation**

   - Odoo creates a payroll entry reflecting the vacation pay due.
   - The attestation document is generated and can be printed or exported.

Two payslips are created:

#. **Payslip for the current year** (`termination_payslip_n`)

   This payslip covers the employee's last salary period in the year of termination.

#. **Payslip for the previous year** (`termination_payslip_n1`)

   The one accounts the amount of money converted from the untaken time off of previous year.

Each payslip is generated using the appropriate payroll structure, ensuring correct calculations for
all entitlements and deductions.

Before computing the final payment, the system gathers necessary payroll data:

#. **Annual gross salary calculation**

   To estimate the employee's **annual gross salary**, the system looks for the most recent
   validated monthly payslip. If a payslip is found, the **gross salary** from that payslip is
   multiplied by 12 to get an annual estimate. If no payslip exists, the annual gross salary is set
   to **zero**.

#. **European leave recovery**

   The system retrieves all **European leave days (LEAVE216)** taken by the employee during the
   current year. It then calculates the **total amount paid for these leaves** and determines how
   much should be deducted.

   The deduction follows these principles:

   - If an employee has taken **European holidays (additional vacation days)**, the amount paid in
     advance must be recovered.
   - The recovery is either:

     - Deducted from **the double vacation pay (85%)** for the next year.
     - Or, if the employee leaves, deducted from the final termination payslip.

   - If leave has been taken, the **termination certificate** must specify:

     - The **number of European leave days** already granted.
     - The **gross allowance** corresponding to these days.

   To ensure fairness, the system first checks whether a deduction has already been applied in the
   **double vacation pay**. If so, only the remaining amount is deducted from the final payslip.

   Once the required values are determined, they are recorded in the payslip as
   **additional payroll inputs**:

   - **Gross salary reference**: Includes the final salary amount plus any fictitious remuneration.
   - **European leave deduction**: Deducts the previously paid European leave amounts.
   - **Other inputs**: Allocates time off taken, taxable amounts, and any outstanding allocations.

   After setting these values, the system **computes the payslip** to ensure all deductions and
   payments are correctly applied.

   This process ensures that the final **termination payslip** takes into account all salary
   components, including **annual gross pay, European leave recovery, and any unpaid entitlements**.
   Odoo retrieves past payslips and time-off records to ensure compliance with
   **Belgian payroll regulations**.

By automating this process, Odoo minimizes manual intervention, reducing errors and ensuring
employees receive the correct termination payments.

How does it work in Odoo?
-------------------------

In Odoo, to access the holiday attests process, go to the employee form view and click on
:icon:`fa-cog` :guilabel:`(Action)` then :guilabel:`Departure: Holiday Attests` or navigate to
:menuselection:`Payroll --> Reporting --> Departure: Holiday Attests`.

In the wizard that appears, you can see all the payslips over the current and last year, the time
off requests and allocations. You can also encode the unpaid time off you would like to declare on
that holiday attest.

Once you're ready, click the :guilabel:`Validate & Compute holiday attests` button. Two payslips are
generated for each considered period (N and N-1).

Once validated, two :file:`.pdf` documents are generated. One **classic payslip** and one **holiday
attests** for the future employer.

.. example::

   .. image:: belgium/departure-attests-02.png
      :alt: Departure Holiday Attests Payslips.

   .. image:: belgium/departure-attests-03.png
      :alt: Departure Holiday Attests Time off.

   .. image:: belgium/departure-attests-04.png
      :alt: Departure Holiday Attests Unpaid.

   .. image:: belgium/departure-attests-05.png
      :alt: Departure Holiday Attests Payslips.

   In our example, the employee also took one European time off during the N-year.

   For year N-1, you can see that all legal time off were taken.

   .. image:: belgium/departure-attests-06.png
      :alt: Departure Holiday Attests Attest N-1.

   .. image:: belgium/departure-attests-07.png
      :alt: Departure Holiday Attests Payslip N-1.

   For year N, you can also see the number off additional time off (European) and already taken legal
   time off are taken into account as well.

   .. image:: belgium/departure-attests-08.png
      :alt: Departure Holiday Attests Attest N.

   .. image:: belgium/departure-attests-09.png
      :alt: Departure Holiday Attests Payslip N.

Important Notes
---------------

By using Odoo's automated attestation generation, companies can ensure compliance with Belgian
labor laws while reducing manual administrative work.

.. important::
   - The feature is only available for companies registered in Belgium.
   - If the notice period is not set for an employee, Odoo will prompt for this information.
   - Employers must ensure vacation attestations are provided before the employee needs to submit
     them to their new employer or the ONEM.

.. _belgium_payroll/notice_period:

Departure: notice period & termination fees
===========================================

This documentation explains how the employee departure process works in the application, focusing
on the notice period calculation and severance pay when the employee does not serve their notice
period.

Overview
--------

This module helps manage employee departures by determining the correct notice period based on
seniority, departure reasons, and specific country regulations (Belgium). It also calculates
severance pay when the employee does not work during their notice period.

Key features
------------

- Automatic calculation of notice period start and end dates.
- Consideration of public holidays and company-specific schedules.
- Calculation of severance pay based on company policies and government rules.
- Generation of a final payslip including termination fees.

Notice period calculation
-------------------------

The notice period depends on several factors:

- The employee's seniority in the company.
- The reason for departure (resignation, dismissal, retirement, etc.).
- Whether the employee works during the notice period or not.
- The salary level before January 1, 2014 (for some cases).

The notice period starts on the first Monday after the departure date unless a specific rule applies
(e.g., a mandatory waiting period of three days for certain dismissals).

Notice duration rules
---------------------

The following table shows the duration of the notice period based on the length of service:

For resigned employees
~~~~~~~~~~~~~~~~~~~~~~

+---------------------+-----------------------+
| Seniority (months)  | Notice Period (weeks) |
+=====================+=======================+
| 0 - 3               | 1                     |
+---------------------+-----------------------+
| 3 - 6               | 2                     |
+---------------------+-----------------------+
| 6 - 12              | 3                     |
+---------------------+-----------------------+
| 12 - 18             | 4                     |
+---------------------+-----------------------+
| 18 - 24             | 5                     |
+---------------------+-----------------------+
| 24 - 48             | 6                     |
+---------------------+-----------------------+
| 48 - 60             | 7                     |
+---------------------+-----------------------+
| 60 - 72             | 9                     |
+---------------------+-----------------------+
| 72 - 84             | 10                    |
+---------------------+-----------------------+
| 84 - 96             | 12                    |
+---------------------+-----------------------+
| 96+                 | 13                    |
+---------------------+-----------------------+

For dismissed employees
~~~~~~~~~~~~~~~~~~~~~~~

+---------------------+-----------------------+
| Seniority (months)  | Notice Period (weeks) |
+=====================+=======================+
| 0 - 3               | 1                     |
+---------------------+-----------------------+
| 3 - 4               | 3                     |
+---------------------+-----------------------+
| 4 - 5               | 4                     |
+---------------------+-----------------------+
| 5 - 6               | 5                     |
+---------------------+-----------------------+
| 6 - 9               | 6                     |
+---------------------+-----------------------+
| 9 - 12              | 7                     |
+---------------------+-----------------------+
| 12 - 15             | 8                     |
+---------------------+-----------------------+
| 15 - 18             | 9                     |
+---------------------+-----------------------+
| 18 - 21             | 10                    |
+---------------------+-----------------------+
| 21 - 24             | 11                    |
+---------------------+-----------------------+
| 24 - 36             | 12                    |
+---------------------+-----------------------+
| 36 - 48             | 13                    |
+---------------------+-----------------------+
| 48 - 60             | 15                    |
+---------------------+-----------------------+
| 60 - 72             | 18                    |
+---------------------+-----------------------+
| 72 - 84             | 21                    |
+---------------------+-----------------------+
| 84 - 96             | 24                    |
+---------------------+-----------------------+
| 96 - 108            | 27                    |
+---------------------+-----------------------+
| 108 - 120           | 30                    |
+---------------------+-----------------------+
| 120 - 132           | 33                    |
+---------------------+-----------------------+
| 132 - 144           | 36                    |
+---------------------+-----------------------+
| 144 - 156           | 39                    |
+---------------------+-----------------------+
| 156 - 168           | 42                    |
+---------------------+-----------------------+
| 168 - 180           | 45                    |
+---------------------+-----------------------+
| 180 - 192           | 48                    |
+---------------------+-----------------------+
| 192 - 204           | 51                    |
+---------------------+-----------------------+
| 204 - 216           | 54                    |
+---------------------+-----------------------+
| 216 - 228           | 57                    |
+---------------------+-----------------------+
| 228 - 240           | 60                    |
+---------------------+-----------------------+
| 240 - 252           | 62                    |
+---------------------+-----------------------+
| 252 - 264           | 63                    |
+---------------------+-----------------------+
| 264 - 276           | 64                    |
+---------------------+-----------------------+
| 276 - 288           | 65                    |
+---------------------+-----------------------+
| 288+                | 66+                   |
+---------------------+-----------------------+

Special case: employees hired before 2014
-----------------------------------------

For employees who started before January 1, 2014, the notice period calculation is divided into two
parts:

Part 1: Seniority acquired before December 31, 2013
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

- **Lower-level employees** (annual gross salary  32,254): The notice period is 3 months for the
  first 5 years of seniority, increasing by 1.5 months per additional year.
- **Higher-level employees** (annual gross salary > 32,254): The notice period is 1 month per
  started year of seniority, with a minimum of 3 months.

Part 2: Seniority acquired from January 1, 2014 onwards
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

The standard notice period rules from 2014 apply to seniority acquired after this date.

The total notice period is the sum of both periods calculated separately.

Severance pay calculation
-------------------------

If an employee does not serve their notice period, severance pay is calculated based on:

- The remaining notice duration.
- The employee's last salary.
- Additional compensation such as bonuses, stock options, and insurance contributions.

The severance pay consists of:

- The current salary, which corresponds either to the full notice period that should normally be
  observed or the remaining part of it.
- Benefits acquired during the contract (e.g., meal vouchers, company car, mobile phone usage).

The current salary is determined as follows:

- The employee's gross monthly salary at the time of dismissal.
- All recurring bonuses, except for one-time bonuses (e.g., team work bonus, seniority bonus).
- Additional compensation for overtime hours worked over a longer period.
- Variable salary (average over the last twelve months).

The system automatically generates a termination payslip including these calculations, ensuring
compliance with Belgian labor laws.

How does it work in Odoo?
-------------------------

In Odoo, to access the departure process, go to the employee form view and click on :icon:`fa-cog`
:guilabel:`(Action)` then :guilabel:`Departure: Notice Period and payslip` or navigate to
:menuselection:`Payroll --> Reporting --> Departure: Notice Period`.

In the wizard that appears, select the reason for departure, provide a description of the departure,
and specify the dismissal date. The employee's seniority is calculated based on their contract
history, and the notice period is determined accordingly. You can also indicate whether the employee
will be working during the notice period.

.. image:: belgium/departure-notice-02.png
   :alt: Departure Notice Wizard.

If the employee is working during the notice period, there are no termination fees to calculate, and
the notice period will be recorded on the employee's form. Click the :guilabel:`Validate` button.

.. note::
   If the employee is working partially or not at all, the wizard will generate and calculate a
   termination fees payslip. Click the :guilabel:`Validate & Compute termination fees` button.

The payslip takes into account all the salaries and benefits the employee would have received over
the course of a year to calculate a virtual annual remuneration. This amount is then prorated based
on the notice period to convert it into a gross salary.

A detailed summary is provided on the payslip.

.. example::
   .. image:: belgium/departure-notice-04.png
      :alt: Departure Notice: Termination Fees Payslip 1.

   .. image:: belgium/departure-notice-05.png
      :alt: Departure Notice: Termination Fees Payslip 2.

Conclusion
----------

This module simplifies the departure process by providing clear and automatic calculations for the
notice period and severance pay. It helps HR teams ensure compliance and streamline the exit process
for employees.

.. _payroll/l10n_be/dimona:

DIMONA
======

What is the Dimona?
-------------------

Obligation
~~~~~~~~~~

All employers, both in the public and private sectors, are required to electronically communicate
the entry and exit of their personnel to the National Social Security Office (Royal Decree of
November 5, 2002).

This involves the immediate declaration of employment, also known as DIMONA (Dclaration Immdiate -
Onmiddellijke Aangifte). Its purpose is to immediately notify social security institutions of the
beginning and end of an employment relationship between the worker and the employer.

The declarations submitted by the employer and immediately checked by the NSSO feed into a database
called the *personnel file*. The employer can access it in a secure environment. There are numerous
search criteria: they can be based on characteristics and combinations of characteristics.

Failure to comply with this reporting obligation may result in criminal penalties as provided for
in Article 181 of the Social Penal Code.

Furthermore, in case of omission of declaration, the employer will owe the NSSO a solidarity
contribution.

Concept and terminology
~~~~~~~~~~~~~~~~~~~~~~~

Employer-worker relationship
****************************

The relationship between the "employer" and the "worker" couple. This relationship includes stable
data (employer identification number, worker's national identification social security number
(NISS), start date of the relationship, and optionally end date), which will be maintained even in
case of creation, closure, modification, or cancellation of a period. This relationship begins with
the worker's first engagement and ends at the end of their last occupation. In the personnel file,
"employer-worker" relationships constitute the first level of consultation. The second level
encompasses all Dimona periods;

Dimona period
*************

A period is created with each IN declaration, thus at the beginning of each new occupation. It is
closed by an exit date at the end of each occupation. The employer-worker relationship, on the
other hand, is maintained until the end of the last occupation. Several Dimona periods may or may
not succeed each other within the same employer-worker relationship.

Any changes generated by an OUT declaration, a modification (UPDATE), or a cancellation (CANCEL)
occur at this second level.

This Dimona period is identified by a "period identification number". It is assigned to each IN
declaration and constitutes the unique identification key of a period for submitting OUT,
modification, or cancellation declarations.

Dimona number
*************

A unique number assigned by the NSSO to each Dimona declaration (IN, OUT, UPDATE, CANCEL,...). For
an IN declaration, it is the period identification number. When declarations are submitted via file
transfer, multiple Dimona numbers are created: one number per employment relationship included in
the structured message;

Dimona characteristics
**********************

Mandatory data of a Dimona declaration. There are four: the industry sector number, worker type,
sub-entity (reserved for certain public sector employers), and user (for temporary workers).
Characteristics are always linked to a period. In case of different characteristics, multiple
periods can coexist;

Receipt confirmation
********************

Confirms for web users that the declaration has been received (appears immediately on the screen);

Receipt acknowledgment
**********************

Electronic message for batch senders indicating whether the file is usable for the NSSO. This
"receipt acknowledgment" contains the ticket number (:dfn:`file identification number`) and the file
status: accepted or rejected depending on whether the file is readable or not;

Notification
************

Electronic message with feedback on the processing of the declaration. The notification is the
immediate result of form and content checks. It can be of three types: positive (Dimona accepted),
negative (Dimona rejected), or provisional (only in case of problems with worker identification).
The provisional notification will always be followed by a positive or negative notification.

For the declaration of students under a student contract (STU), the notification will also contain
a warning if the student is declared for more than 475 hours. If the declaration was made via a
secure channel, the exact number of days of excess will be communicated.

For the daily declaration of occasional workers in the hospitality industry, the notification will
also contain a warning if the worker is declared for more than 50 days and/or for the employer
quota, if more than 100 days of occasional work have been declared.

Once you have received this notification, you have five working days to contest the accuracy of the
data mentioned therein. At the end of this period, these data will be considered final. For any
disputes, you must contact the Eranova Contact Center (tel: 02 511 51 51, email:
contactcenter@eranova.fgov.be).

Note that if the employer is affiliated with an approved social secretariat or a full-service
secretariat, they may not receive any notification. In this case, notifications are electronically
transmitted to the social secretariat or full-service secretariat, even for declarations that the
employer has submitted personally. However, the employer has access to the personnel file, where
they can view all data.

Channels
~~~~~~~~

The Dimona declaration must be submitted in the form of an electronic message via one of the
following channels:

- web
- personnel file
- file transfer
- web service (REST)
- Dimona Mobile

The choice of one channel over another has no impact on the declaration. Therefore, you can freely
choose the channel you will use.

Any declaration modifications can also be made through any of these four channels. The channel
through which the original declaration was submitted plays no role.

A Dimona declaration cannot be submitted via SMS.

Dimona in Odoo
--------------

Manual
~~~~~~

In Odoo, when you have the Belgian Payroll Localization installed, as soon as you have a contract
set to the running stage, it creates an activity for the HR responsible that they need to introduce
the Dimona for today with the correct link to the Dimona Platform (the web channel mentioned in
the Channels section of this article).

.. image:: belgium/dimona-01.png
   :alt: Dimona Activity.

Automated
~~~~~~~~~

In Odoo, when you have the Belgian Payroll Localization installed, it is also possible to install
the module Belgium - Payroll - Dimona. This module will allow you to perform the 4 main actions
needed in the Dimona (as seen in Section 1 of this article):

#. Open the dimona
#. Update the dimona
#. Close the dimona
#. Cancel the Dimona

These actions answer the different use case explained in Section 1.

Contract and employee data
**************************

Basically, it checks the contract and employee data needed to create, update, close or cancel.

Error handling
**************

If some information is missing or wrongly configured, the system will return errors and you can
take corrective action in order to make sure your Dimona is correctly sent, updated, closed or
canceled.

Synchronization status
**********************

The status of sync and errors are shown in the chatter of the contract.

Scheduled action
****************

Finally, the cron checks every day, for all contracts that have the status dimona waiting and
triggers the necessary actions to update the dimona status accordingly.

Technical configuration (outside Odoo)
**************************************

Regarding the technical configuration, everything is described in the module information with all
the technical prerequisites. If your customer or partner need further assistance with that, they
need to contact their IT department or representatives as this is not part of Odoo configuration.

Functional configuration (within Odoo)
**************************************

From the Odoo configuration point of view, navigate to :menuselection:`Payroll app --> Configuration
--> Settings` and in the :guilabel:`Belgian Localization` section for :guilabel:`ONSS`, configure
the following:

- :guilabel:`ONSS Company ID`: VAT Number of the Company
- :guilabel:`Registration Number`: 9 digits code received from the NSSO (ONSS - RSZ)
- :guilabel:`DMFA Employer Class`: 3 digits code received from the NSSO (ONSS - RSZ)
- :guilabel:`Expeditor Number ONSS`: Not Mandatory (see technical documentation of the module for
  more information)
- :guilabel:`PEM Certificate`, :guilabel:`PEM Passphare`, :guilabel:`KEY file`: check the module
  information for explanation

.. _payroll/l10n_be/dmfa:

DmfA - Multifunctional Declaration
==================================

Overview
--------

DmfA stands for "Dclaration Multifonctionnelle" or "Multifunctionele Aangifte." It has replaced
the quarterly ONSS declaration since the first quarter of 2003. Through this declaration, employers
submit salary and working time data for their employees.

These data are processed in a way that allows all social security institutions to work with the
same information. The declaration is called "multifunctional" because it is used not only for
social security contribution calculations and reductions but also as a data source for institutions
managing social security rights and benefits.

Sectors utilizing DmfA data include:

- Health insurance
- Unemployment benefits
- Pensions
- Occupational risks (Fedris)
- Family allowances
- Annual leave

All employers registered with ONSS must submit a DmfA declaration.

Relationship with Dimona and DRS
--------------------------------

DmfA is closely linked to two other mandatory declarations:

Dimona (immediate declaration)
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Dimona records the start and end of an employment relationship with an employee.

DRS (social risks declaration)
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

During an employment relationship, various social risks may arise, such as termination, workplace
accidents, or long-term illness. When a social risk occurs, social security institutions require
additional information beyond that provided by DmfA and Dimona.

DRS is now primarily an electronic declaration, though paper submissions remain possible.

Who submits the DmfA declaration?
---------------------------------

Self-declaration options
~~~~~~~~~~~~~~~~~~~~~~~~

Employers can submit their DmfA declaration themselves via:

1. **Web Submission:** Suitable for employers with a small workforce. Declarations are entered
   directly through the social security portal.
2. **Batch Submission:** Designed for large employers or organizations handling multiple
   declarations (e.g., social secretariats, payroll software providers). Declarations are submitted
   via file transfer (FTP, SFTP, etc.).

Advantages of web submission
~~~~~~~~~~~~~~~~~~~~~~~~~~~~

- **Automatic access to the company's employee list**: Based on Dimona data. If an employee is
  missing, they must first be declared via Dimona. After 24 hours, the employee list is updated,
  allowing for an accurate DmfA submission.
- **Automatic calculation of net payable amount**: Once all required data is entered, the system
  calculates the total payable amount.
- **Reduction calculations**: The system calculates applicable reductions, except for reductions
  under code "0001" (personal contribution reductions for low-income workers). Employers need to
  check the relevant boxes and, if necessary, provide additional details.

Advantages of batch submission
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

- **Submission of large volumes of declarations**: Ideal for organizations managing multiple
  payrolls.
- **Quick response on acceptance status**: Employers receive immediate feedback on whether their
  declaration has been accepted.
- **Error reporting**: The system generates a report on detected anomalies, regardless of
  acceptance status.
- **Automatic correction of calculation errors**: When possible, errors are corrected
  automatically, and employers are notified of adjustments.

Third-Party submission options
------------------------------

Employers who do not wish to submit the DmfA themselves can delegate the task to:

#. **Accredited Social Secretariats**: These organizations handle payroll and declaration tasks
   on behalf of employers.
#. **Service Providers**: These may be companies or individuals with whom the employer has a
   contractual agreement to manage payroll declarations securely.

For more information on accredited social secretariats or service providers, please refer to the
relevant `official DmfA documentation
<https://www.socialsecurity.be/site_fr/employer/applics/dmfa/index.htm>`_.

Configuration
-------------

The declaration is generated under :menuselection:`Payroll app --> Reporting --> Belgium --> DmfA`
as is supposed to work properly after several required configuration steps.

Company
~~~~~~~

To generate a valid DmfA declaration, specific company and employer-related information is required,
(under :menuselection:`Payroll app --> Configuration --> Settings`). These include:

- :guilabel:`ONSS Company ID`
- :guilabel:`ONSS Registration Number`
- :guilabel:`DMFA Employer Class`
- :guilabel:`ONSS Certificate`: certificate for signature file generation (required for batch
  declarations)
- VAT :guilabel:`Company Number`
- :guilabel:`Revenue Code`
- :guilabel:`FFE Employer Type` (Fonds de Fermeture d'Entreprise)

Employee
~~~~~~~~

Additionally, each employee must be assigned to a valid working address, identified with a DmfA
code, in their employee record. This operating unit must be linked to a valid ONSS identification
number to ensure compliance with declaration requirements. Failing to configure this properly may
result in errors during the declaration submission process.

On the employee form, the :guilabel:`Work Address` must be defined.

Under :menuselection:`Payroll app --> Configuration --> DMFA: Work Locations`, you can link the work
address to a ONSS identification number.

.. image:: belgium/dmfa-07.png
   :alt: DmfA - Work Location ONSS ID.

Work entry type
~~~~~~~~~~~~~~~

A DmfA code should be defined for each work entry type that is declared. Under
:menuselection:`Payroll app --> Configuration --> Work Entries --> Work Entry Types`, specify the
:guilabel:`DMFA code`.

Potential configuration errors
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

During the declaration generation process, configuration issues may arise, triggering errors such
as:

- Terminated employees without or with invalid start/end notice period
- Invalid NISS number for some employees
- Work addresses not linked to an ONSS identification code
- Work entry type missing a corresponding DmfA code
- Other inconsistencies in employer or employee records

Employers should ensure accurate configuration to avoid delays and rejection of their declarations.

Web declaration
~~~~~~~~~~~~~~~

.. image:: belgium/dmfa-03.png
   :alt: DmfA - Web Declaration.

A web declaration generates a PDF summarizing the company's general information, as well as all
employee data that must be manually entered into the system. This includes:

For the company:

.. image:: belgium/dmfa-01.png
   :alt: DmfA - PDF Company.

For a specific employee:

.. image:: belgium/dmfa-02.png
   :alt: DmfA - PDF Employee.

- **Occupations**: Work schedules, part-time codes, parental leave, exploitation unit, reference
  working hours.
- **Services**: Aggregated work performance (in days and hours) for the quarter, categorized by
  occupation and type. The codification of working time in the DmfA declaration ensures accurate
  reporting of employee activities. Each code corresponds to a specific type of working time or
  absence. For a complete and detailed list of codes, please refer to the official social security
  website: `socialsecurity.be <https://www.socialsecurity.be/employer/instructions/dmfa/fr/latest/instructions/fill_in_dmfa/dmfa_fillinrules/servicedatadeclaration/workingtimecodification.html>`_

  - **1**: All performances covered by a salary subject to ONSS contributions, excluding legal and
    additional vacation for workers.
  - **2**: Legal vacation days for workers.
  - **3**: Additional vacation days for workers.
  - **4**: Compensatory rest days.
  - **5**: Days of illness or non-occupational accident.
  - **6**: Family leave days.
  - **7**: Maternity or paternity leave days.
  - **8**: Strike days.
  - **9**: Temporary unemployment for economic reasons.
  - **10**: Temporary unemployment for bad weather.
  - **11**: Temporary unemployment for force majeure.
  - **12**: Professional training days.
  - **13**: Suspension for disciplinary reasons.
  - **14**: Additional vacation days for employment start or resumption.
  - **15**: Flexible vacation days.

- **Remunerations**: Aggregated by code per occupation:

  - **1**: Regular salary amounts excluding certain indemnities.
  - **2**: Bonuses and similar benefits granted independently of actual working days.
  - **3**: Severance payments expressed in working hours.
  - **7**: Simple vacation pay for exiting employees (subject to contributions).
  - **10**: Personal use of a company vehicle and other mobility benefits.
  - **11**: Simple vacation pay for exiting employees (not subject to contributions).
  - **12**: Advance vacation pay paid by a previous employer (not subject to contributions).

- **Contributions**: Employer and employee contributions, such as:

  - **256**: Asbestos fund contribution.
  - **255**: Special work accident contribution.
  - **495**: Total employer + 13.07% employee contribution.
  - **809**: Enterprise closure fund contribution.
  - **810**: Special enterprise closure fund contribution.
  - **831**: Auxiliary Joint Committee for Employees (CP200) contribution.
  - **855**: Wage restraint contribution.
  - **856**: Special social security contribution.
  - **859**: Temporary unemployment contribution.

Batch declaration
~~~~~~~~~~~~~~~~~

.. image:: belgium/dmfa-05.png
   :alt: DmfA - Web Declaration.

Batch declarations require technical knowledge, including SSH keys, SFTP servers, and electronic
signatures. Employers should refer to the `official batch documentation
<https://www.socialsecurity.be/site_fr/employer/applics/dmfa/batch/home.htm>`_ and `process overview
<https://www.socialsecurity.be/site_fr/employer/applics/dmfa/batch/outline.htm>`_.

A batch submission generates three files:

#. **Declaration file** (e.g., FI.DMFA.112768.20250109.00014.R.1.1)
#. **Launch file** (e.g., GO.DMFA.112768.20250109.00014.R.1)
#. **Electronic signature file** (e.g., FS.DMFA.112768.20250109.00014.R.1.1) (only for real
   declarations, not tests)

The full process includes creating, sending, validating, and potentially correcting declarations.
Rejections and anomalies must be addressed before final acceptance.

.. image:: belgium/dmfa-09.png
   :alt: DmfA - Web Declaration.

#. **Creation of the Declaration**

   - Create an XML document containing employee benefit data, remuneration, and contributions for
     the company.
   - More information on XML files can be found in the *Specifications* page.

#. **Sending the Declaration**

   - Use FTP or SFTP for sending the file. Access requires prior authorization for secure zone
     access by a local manager.
   - Detailed instructions are available on the `Introduce and Modify (via batch)
     <https://www.socialsecurity.be>`_.

#. **File Acknowledgment Receipt**

   - **Positive Receipt**: Indicates the file can be processed. However, this does not guarantee
     acceptance.
   - **Negative Receipt**: Indicates issues with the file structure or access rights.

#. **Notification and Ticket Number for the Declaration**

   - A positive notification is sent for each accepted declaration.
   - Negative notification: Provides information on encountered anomalies.

#. **Sending PID**

   - Employers and SSA will receive PID and version numbers via batch for declarations.

#. **Modification Notification with System Corrections**

   - If corrections are made, a modification notification is sent with corrected values.

.. _payroll/l10n_be/double_holiday_pay:

Double holiday pay
==================

Double holiday pay is an additional bonus paid to employees and workers during their annual leave.
The amount depends on the employee's or worker's salary.

How is double holiday pay calculated?
-------------------------------------

For employees, double holiday pay amounts to 92% of their gross salary for the month when they
take their main annual leave. This amount is calculated based on the number of months worked or
considered equivalent in the previous year.

Impact of additional or European leave
--------------------------------------

If you take additional or European leave, your employer will pay you regular holiday pay for that
leave. However, the following year, this amount will be deducted from your double holiday pay. This
is because additional leave is considered an advance on the next year's legal leave.

Factors affecting the calculation
---------------------------------

#. **Months Worked**: The calculation is based on the number of months you worked in the previous
   year.
#. **Absences**: If you had unpaid absences, they may reduce your double holiday pay.
#. **Variable Revenues**: Bonuses and commissions earned in the previous year can impact the total
   amount of double holiday pay.
#. **Withholding Taxes**: The double holiday pay is subject to income tax deductions, which depend
   on your annual earnings and family situation.

Withholding tax calculation
---------------------------

The withholding tax is calculated using a progressive rate system. The process involves:

#. **Identify the Employee's Annual Taxable Revenue**:

   - Compute the annualized salary, including benefits in kind (e.g., company car, internet, mobile
     phone, laptop).
   - Apply reductions for dependent children.

#. **Apply Tax Rates**:

   - Use predefined tax brackets to determine the base withholding tax rate.
   - If applicable, apply a reduction based on the number of dependent children.

Tax brackets
~~~~~~~~~~~~

The withholding tax is applied progressively based on the following brackets (as of 2025):

+--------------+--------------+------------+
| Lower Bound  | Upper Bound  | Tax Rate   |
+==============+==============+============+
| 0.00         | 10,415.00    | 0.00%      |
+--------------+--------------+------------+
| 10,415.01    | 13,330.00    | 19.17%     |
+--------------+--------------+------------+
| 13,330.01    | 16,960.00    | 21.20%     |
+--------------+--------------+------------+
| 16,960.01    | 20,340.00    | 26.25%     |
+--------------+--------------+------------+
| 20,340.01    | 23,020.00    | 31.30%     |
+--------------+--------------+------------+
| 23,020.01    | 25,710.00    | 34.33%     |
+--------------+--------------+------------+
| 25,710.01    | 31,070.00    | 36.34%     |
+--------------+--------------+------------+
| 31,070.01    | 33,810.00    | 39.37%     |
+--------------+--------------+------------+
| 33,810.01    | 44,770.00    | 42.39%     |
+--------------+--------------+------------+
| 44,770.01    | 58,460.00    | 47.44%     |
+--------------+--------------+------------+
| 58,460.00    |             | 53.50%     |
+--------------+--------------+------------+

Tax exemption
~~~~~~~~~~~~~

A withholding tax exemption is granted when the normal annual gross income does not exceed a
specific threshold, which is determined based on the number of dependent children [2].

A disabled dependent child counts as two.

The method involves referring to a two-column table:

- **Column 1**: Indicates the number of dependent children.
- **Column 2**: Specifies the maximum allowable normal annual gross income, based on the number of
  dependent children listed in Column 1, which must not be exceeded to qualify for full or partial
  exemption from withholding tax.

After determining the annual gross income, two scenarios may arise:

#. If the annual income exceeds the threshold, no exemption is granted.
#. If the annual income does not exceed the threshold, an exemption will be applied.

The amount of this exemption corresponds to the difference between the annual gross income and the
threshold amount.

Of course, if this difference exceeds the base withholding tax amount, no withholding tax will
be due.

+-----------------+------------------------+
| No. of Children | Max Revenue (EUR)      |
+=================+========================+
| 1               | 18,400.00              |
+-----------------+------------------------+
| 2               | 21,930.00              |
+-----------------+------------------------+
| 3               | 28,270.00              |
+-----------------+------------------------+
| 4               | 35,330.00              |
+-----------------+------------------------+
| 5               | 42,390.00              |
+-----------------+------------------------+
| 6               | 49,450.00              |
+-----------------+------------------------+
| 7               | 56,510.00              |
+-----------------+------------------------+
| 8               | 63,570.00              |
+-----------------+------------------------+
| 9               | 70,630.00              |
+-----------------+------------------------+
| 10              | 77,690.00              |
+-----------------+------------------------+
| 11              | 84,750.00              |
+-----------------+------------------------+
| 12              | 91,810.00              |
+-----------------+------------------------+

Tax reductions
~~~~~~~~~~~~~~

When there is no justification for fully or partially exempting the exceptional allowance from
withholding tax, it is still possible to grant a reduction in withholding tax.

To determine eligibility for this reduction, one must check whether the normal annual gross salary
exceeds a certain higher threshold, which varies according to the number of dependent children [3].
This threshold is higher than the one used for exemption purposes.

A disabled child counts as two.

The method involves referring to a three-column table:

- **Column 1**: Indicates the number of dependent children (up to a maximum of 5).
- **Column 2**: Specifies the percentage reduction in withholding tax, based on the number of
  dependent children listed in Column 1, which must not be exceeded to qualify for the reduction.
- **Column 3**: Shows the threshold amount that must not be exceeded, corresponding to the number
  of dependent children listed in Column 1.

Two scenarios may arise:

#. If the threshold amount is exceeded, no reduction will be granted.
#. If the threshold amount is not exceeded, a reduction will be applied to the withholding
   tax amount, up to a percentage rate determined in Column 2.

For employees with dependent children, tax reductions apply as follows:

+-----------------+------------------+----------------+
| No. of Children | Reduction (%)    | Max Revenue    |
+=================+==================+================+
| 1               | 7.5%             | 28,245.00      |
+-----------------+------------------+----------------+
| 2               | 20.0%            | 28,245.00      |
+-----------------+------------------+----------------+
| 3               | 35.0%            | 31,070.00      |
+-----------------+------------------+----------------+
| 4               | 55.0%            | 36,720.00      |
+-----------------+------------------+----------------+
| 5+              | 75.0%            | 39,550.00      |
+-----------------+------------------+----------------+

Final tax calculation
~~~~~~~~~~~~~~~~~~~~~

The final withholding tax amount is:

.. math::
   :class: overflow-scroll

   \text{Tax} = \text{Gross Double Holiday} \times \text{Applicable Tax Rate} -
   \text{Reduction (if applicable)}

The resulting tax is deducted from the gross double holiday salary to determine the net amount
payable to the employee.

The calculation considers work duration, absences, variable revenue, and applicable withholding
taxes. Odoo automates these calculations to ensure compliance with Belgian labor laws and tax
regulations.

Generate a batch in Odoo
------------------------

Navigate to :menuselection:`Payroll App --> Payslips --> Batches` and create a new record with valid
dates (here december 2024)

Then click the **Generate Payslips** button, select the CP200 salary structure type and the
Thirteen Month salary structure. You can also filter eligible employees by department and / or
job position.

.. image:: belgium/double-holiday-02.png
   :alt: Double Holiday Batch Wizard.

Once validated, a payslip is generated for each employee.

.. image:: belgium/double-holiday-03.png
   :alt: Double Holiday Payslips.

You can now check the different payslips before validation. Once validated, the PDF files are
generated and posted on employee portals as for classic payslips.

.. image:: belgium/double-holiday-04.png
   :alt: Double Holiday PDF.

Conclusion
----------

Double holiday pay is a significant benefit that rewards employees for their work in the previous
year. Understanding how it is calculated helps in better financial planning for the holiday period.

.. _payroll/l10n_be/eco_vouchers:

Eco vouchers
============

Overview
--------

Eco vouchers are a tax-free employee benefit designed to support the purchase of
environmentally-friendly products and services. These vouchers are ordered via external providers
and are exempt from social security contributions.

Eligibility & allocation
------------------------

Employees who have worked during the **reference period (01/06/N-1 - 31/05/N)** are eligible for
up to **250** in eco vouchers, which are granted at the beginning of **July**.

.. example::
   For 2025, employees must have worked between **01/06/2024 and 31/05/2025** to qualify.

For employees who join during the reference period, the voucher amount is prorated based on their
worked days.

.. example::
   An employee hired on **06/01**, having worked **6 out of 12 months**, would receive:

   .. math::
      :class: overflow-scroll

      250\text{} \times (6/12) = 125\text{}

For part-time employees, the amount is adjusted as follows:

.. list-table::
   :header-rows: 1

   * - Work Regime
     - Voucher Amount ()
   * - 4/5
     - 250
   * - 3/5
     - 200
   * - 1/2
     - 125
   * - < 1/2
     - 100

.. example::
   If an employee starts on **1st September** in **full-time** and then switches to **half-time** on
   **1st April 2024**, the calculation will be:

   .. math::
      :class: overflow-scroll

      250\text{} \times (7/12) + 125\text{} \times (2/12) = 166\text{}

Exceptions & adjustments
------------------------

If an employee worked full-time for the entire reference period but did not receive **250**,
certain non-assimilated leave days may have affected the calculation.

The following leave types are **not** considered for eco-voucher entitlement:

- **Unpaid leaves**
- **Sick leave compensated by mutual insurance** (after 30 days of work incapacity)

Usage & validity
----------------

Eco vouchers are valid for **24 months** from the date of issuance.

.. seealso::
   The list of eligible products and services that can be purchased with eco vouchers is available
   here:

   - `Eco-Voucher Eligible Products <https://cnt-nar.be/sites/default/files/documents/fr/Liste-F-23.pdf>`_

.. _belgium_payroll/end_of_year_bonus:

End of year bonus
=================

This document explains the calculation of the thirteenth-month salary (year-end bonus) in Belgium
within Odoo. The calculation considers the employee's contracts, working time rates, and applicable
taxes.

Calculation of the thirteenth-month salary
------------------------------------------

Eligibility criteria
~~~~~~~~~~~~~~~~~~~~

- The employee must have worked for at least **six complete months** in the year.
- Both full-time and part-time employees are eligible, with prorated calculations based on work
  time.

Salary calculation
~~~~~~~~~~~~~~~~~~

The thirteenth-month salary is computed as follows:

#. **Determine the basic salary**:

   - Retrieve the employee's contractual wage.
   - Identify the applicable work rate.

#. **Compute eligible months**:

   - If explicitly provided (`MONTHS` input), use the given number of months.
   - Otherwise, calculate the number of complete months worked.
   - Prorate the salary for partial-year work.

#. **Adjust for absences**:

   - Deduct unpaid absences to obtain the presence prorata.
   - Consider up to 60 days of sick leave as paid time off.

#. **Include variable revenues**:

   - If explicitly provided (`VARIABLE` input), use the given value.
   - Otherwise, calculate the average variable revenue over the last year.

#. **Final amount**:

   - The final thirteenth-month amount is the sum of the prorated fixed salary and average variable
     revenues.

Withholding tax calculation
---------------------------

The withholding tax is calculated using a progressive rate system. The process involves:

#. **Identify the employee's annual taxable revenue**:

   - Compute the annualized salary, including benefits in kind (e.g., company car, internet, mobile
     phone, laptop).
   - Apply reductions for dependent children.

#. **Apply Tax Rates**:

   - Use predefined tax brackets to determine the base withholding tax rate.
   - If applicable, apply a reduction based on the number of dependent children.

Tax brackets
~~~~~~~~~~~~

The withholding tax is applied progressively based on the following brackets (as of 2025):

+--------------+--------------+------------+
| Lower Bound  | Upper Bound  | Tax Rate   |
+==============+==============+============+
| 0.00         | 10,415.00    | 0.00%      |
+--------------+--------------+------------+
| 10,415.01    | 13,330.00    | 23.22%     |
+--------------+--------------+------------+
| 13,330.01    | 16,960.00    | 25.23%     |
+--------------+--------------+------------+
| 16,960.01    | 20,340.00    | 30.28%     |
+--------------+--------------+------------+
| 20,340.01    | 23,020.00    | 35.33%     |
+--------------+--------------+------------+
| 23,020.01    | 25,710.00    | 38.36%     |
+--------------+--------------+------------+
| 25,710.01    | 31,070.00    | 40.38%     |
+--------------+--------------+------------+
| 31,070.01    | 33,810.00    | 43.41%     |
+--------------+--------------+------------+
| 33,810.01    | 44,770.00    | 46.44%     |
+--------------+--------------+------------+
| 44,770.01    | 58,460.00    | 51.48%     |
+--------------+--------------+------------+
| 58,460.00    |             | 53.50%     |
+--------------+--------------+------------+

Tax exemption
~~~~~~~~~~~~~

A withholding tax exemption is granted when the normal annual gross income does not exceed a
specific threshold, which is determined based on the number of dependent children [2].

A disabled dependent child counts as two.

The method involves referring to a two-column table:

- **Column 1**: Indicates the number of dependent children.
- **Column 2**: Specifies the maximum allowable normal annual gross income, based on the number of
  dependent children listed in Column 1, which must not be exceeded to qualify for full or partial
  exemption from withholding tax.

After determining the annual gross income, two scenarios may arise:

#. If the annual income exceeds the threshold, no exemption is granted.
#. If the annual income does not exceed the threshold, an exemption will be applied.

The amount of this exemption corresponds to the difference between the annual gross income and the
threshold amount.

Of course, if this difference exceeds the base withholding tax amount, no withholding tax will
be due.

+-----------------+------------------------+
| No. of Children | Max Revenue (EUR)      |
+=================+========================+
| 1               | 18,400.00              |
+-----------------+------------------------+
| 2               | 21,930.00              |
+-----------------+------------------------+
| 3               | 28,270.00              |
+-----------------+------------------------+
| 4               | 35,330.00              |
+-----------------+------------------------+
| 5               | 42,390.00              |
+-----------------+------------------------+
| 6               | 49,450.00              |
+-----------------+------------------------+
| 7               | 56,510.00              |
+-----------------+------------------------+
| 8               | 63,570.00              |
+-----------------+------------------------+
| 9               | 70,630.00              |
+-----------------+------------------------+
| 10              | 77,690.00              |
+-----------------+------------------------+
| 11              | 84,750.00              |
+-----------------+------------------------+
| 12              | 91,810.00              |
+-----------------+------------------------+

Tax reductions
~~~~~~~~~~~~~~

When there is no justification for fully or partially exempting the exceptional allowance from
withholding tax, it is still possible to grant a reduction in withholding tax.

To determine eligibility for this reduction, one must check whether the normal annual gross salary
exceeds a certain higher threshold, which varies according to the number of dependent children [3].
This threshold is higher than the one used for exemption purposes.

A disabled child counts as two.

The method involves referring to a three-column table:

- **Column 1**: Indicates the number of dependent children (up to a maximum of 5).
- **Column 2**: Specifies the percentage reduction in withholding tax, based on the number of
  dependent children listed in Column 1, which must not be exceeded to qualify for the reduction.
- **Column 3**: Shows the threshold amount that must not be exceeded, corresponding to the number
  of dependent children listed in Column 1.

Two scenarios may arise:

#. If the threshold amount is exceeded, no reduction will be granted.
#. If the threshold amount is not exceeded, a reduction will be applied to the withholding
   tax amount, up to a percentage rate determined in Column 2.

For employees with dependent children, tax reductions apply as follows:

+-----------------+------------------+----------------+
| No. of Children | Reduction (%)    | Max Revenue    |
+=================+==================+================+
| 1               | 7.5%             | 28,245.00      |
+-----------------+------------------+----------------+
| 2               | 20.0%            | 28,245.00      |
+-----------------+------------------+----------------+
| 3               | 35.0%            | 31,070.00      |
+-----------------+------------------+----------------+
| 4               | 55.0%            | 36,720.00      |
+-----------------+------------------+----------------+
| 5+              | 75.0%            | 39,550.00      |
+-----------------+------------------+----------------+

Final tax calculation
~~~~~~~~~~~~~~~~~~~~~

The final withholding tax amount is:

.. math::
   :class: overflow-scroll

   \text{Tax} = \text{Gross Thirteenth Month} \times \text{Applicable Tax Rate} -
   \text{Reduction (if applicable)}

The resulting tax is deducted from the gross thirteenth-month salary to determine the net amount
payable to the employee.

The calculation considers work duration, absences, variable revenue, and applicable withholding
taxes. Odoo automates these calculations to ensure compliance with Belgian labor laws and tax
regulations.

How to do it in Odoo
--------------------

Navigate to :menuselection:`Payroll app --> Payslips --> Batches` and create a new record with valid
dates (here december 2024).

Then click the :guilabel:`Generate Payslips` button, select the :guilabel:`CP200: Belgian Employee`
:guilabel:`Salary Structure Type` and the :guilabel:`CP200: Employees 13th Month` :guilabel:`Salary
Structure`. You can also filter eligible employees by :guilabel:`Department` and / or :guilabel:`Job
Position`.

.. image:: belgium/end-of-year-bonus-02.png
   :alt: End of Year Bonus Batch Wizard.

Once validated, a payslip is generated for each employee.

.. image:: belgium/end-of-year-bonus-03.png
   :alt: End of Year Bonus Payslips.

You can now check the different payslips before validation. Once validated, the PDF files are
generated and posted on employee portals as for classic payslips.

.. image:: belgium/end-of-year-bonus-04.png
   :alt: End of Year Bonus PDF.

.. _payroll/l10n_be/holiday_pay_recovery:

Holiday pay recovery
====================

This document explains how Odoo calculates the recovery of holiday pay (both simple and double) for
employees in Belgium who have changed employers. When an employee moves from one company to another,
their previous employer may have already paid their holiday pay for the previous year. This amount
needs to be recovered by the new employer, and this guide outlines how this is managed in Odoo.

Understanding holiday pay in Belgium
------------------------------------

In Belgium, employees are entitled to annual leave and corresponding holiday pay, which consists of:

- **Simple holiday pay**: Regular salary payments for the days of leave taken.
- **Double holiday pay**: An additional payment, typically equal to approximately 92% of the gross
  monthly salary, given when employees take their annual leave.

When an employee changes jobs, their previous employer may have already paid these amounts. To avoid
double payment, the new employer needs to recover the amounts already paid.

Recovery of simple holiday pay
------------------------------

The recovery of simple holiday pay in Odoo is based on the following criteria:

#. The recovery applies if the employee has taken leave in the current year and their previous
   employer already paid the holiday pay.
#. The calculation considers the number of leave days taken and the hours worked per week.
#. The recovery process is split into:

   - **Year N**: The current year's holiday pay recovery.
   - **Year N-1**: The recovery of holiday pay from the previous year.

The system checks:

- If the employee's first contract date with the company was in the previous year.
- If the employee has a pending holiday pay recovery amount.
- If the recovery has not already been processed.
- If the employee has taken annual leave.

If all conditions are met, Odoo calculates the amount to be deducted from the payroll to account
for the holiday pay already received from the previous employer.

Recovery of double holiday pay
------------------------------

The recovery of double holiday pay follows these steps:

#. The system verifies the employee's contract and determines their employment duration.
#. The gross salary is calculated based on the employee's contract.
#. The number of months worked in the previous year is identified.
#. A threshold amount is computed as follows:

   .. math::
      :class: overflow-scroll

      \text{Threshold} = \text{Current monthly salary} \times \text{Months worked in previous year}
      \times \text{Occupation rate} \times 7.67%

   If the amount on the holiday certificate from the previous employer is lower than this threshold,
   no limit applies.

#. The system recovers the lower of:

   - The calculated threshold.
   - The actual amount paid by the previous employer.

If the employee has worked for more than 12 months in the current company, no double holiday pay
needs to be recovered.

How to configure in Odoo
------------------------

In the employee form view, under the :guilabel:`Settings` tab, you can enter the various amounts
from holiday attests provided by the new employee.

.. image:: belgium/holiday-pay-recovery-01.png
   :alt: Holiday Pay Recovery Configuration.

For simple holiday pay recovery, you need to enter:

- The :guilabel:`Number of days` for paid leave
- The :guilabel:`Amount to recover` by the employee

.. note::
   The :guilabel:`Recovered Amount` field displays the amount already recovered.

For double holiday pay recovery, you must enter a **line for each employer's holiday attest**. Each
line should include:

- The :guilabel:`# Months` (number of months) the employee worked for that employer
- The :guilabel:`Amount` provided to the employee
- The :guilabel:`Occupational Rate`

Odoo uses this data to compute a **recovery limit**. If the employee now has a lower salary, the
full amount cannot be recovered.

.. tip::
   Be careful not to mix holiday attests for the current year (N) and the previous year (N-1).

For simple holiday pay recovery, the system deducts the amount from each legal time-off period
until:

#. The **total amount** has been fully recovered, or
#. The **number of time-off days** has been matched (if the employee's current salary is lower than
   before).

.. image:: belgium/holiday-pay-recovery-02.png
   :alt: Holiday Pay Recovery Simple Payslip.

Once the **payslip** is validated and paid, the recovered simple holiday pay is reflected in the
employee form view.

.. image:: belgium/holiday-pay-recovery-03.png
   :alt: Holiday Pay Recovery Simple Amount.

On the double holiday payslip, click :guilabel:`Compute Double Pay Recovery` to open a wizard that
helps calculate the recoverable amount.

In the :guilabel:`Double Pay Recovery Computation` wizard, you'll find:

- The relevant holiday attests listed in the :guilabel:`Occupation Lines`
- The :guilabel:`Double Pay To Recover` amount based on the threshold

This amount is **editable** if manual adjustments are needed.

.. image:: belgium/holiday-pay-recovery-05.png
   :alt: Holiday Pay Recovery Double Wizard.

Once validated, the double pay recovery is applied to the payslip.

.. image:: belgium/holiday-pay-recovery-06.png
   :alt: Holiday Pay Recovery Double Amount.

Odoo automates the recovery of both **simple** and **double** holiday pay, ensuring compliance with
**Belgian labor laws**. By analyzing contract details, employment duration, and past payments, Odoo
calculates the necessary deductions and prevents duplicate holiday pay payments.

.. _payroll/l10n_be/individual_accounts:

Individual accounts
===================

Introduction
------------

The individual account provides workers with a detailed overview of their earnings, deductions
(such as social security contributions, withholding tax, etc.), and the working days performed, on
a pay period basis. Additionally, it contains all relevant administrative data related to
remuneration.

Required information in the individual account
----------------------------------------------

The individual account must include several mandatory details as determined by Royal Decree.

**Employer identification:**

- Name, address, ONSS number, ONVA number
- Relevant joint committee (or sub-committee)
- Name of the holiday fund for workers
- Insurer for work-related accidents
- Approved social secretariat
- Relevant affiliation numbers

**Worker identification:**

- Name, address, date of birth, gender, tax status
- Type of employment contract, job title, professional qualification
- Workplace location (or note if working at multiple locations)
- Start and end date of employment
- Employee ID number, starting salary
- Remuneration components and payment periodicity

**Remuneration components:**

- Per pay period (daily, weekly, bi-weekly, or monthly):

  - Number of working days and hours (regular, additional, and overtime)
  - Days of work interruption and reasons (illness, vacations, public holidays, replacement days,
    compensatory rest days, etc.)
  - Fixed or hourly salary, variable remuneration, bonuses, meal vouchers, eco vouchers, holiday
    pay (including early holiday pay if applicable), severance pay, year-end bonuses (as per
    sectoral or other collective labor agreements), benefits in kind and their estimated value
  - Gross amount of all remuneration components
  - Amounts subject to social and tax deductions
  - Various social and tax deductions: personal ONSS contributions, withholding tax, special
    social security contributions
  - Net amount payable to the worker
  - Other payments made by the employer, including reimbursement of travel expenses, allowances,
    and other payments

- Per quarter:

  - Number of actual working days
  - Days of work interruption by reason
  - Total remuneration subject to social security contributions
  - Employee social security contribution amounts

- Per year:

  - Total amounts subject to social security contributions
  - Employee social security contribution amounts
  - Taxable remuneration and other amounts
  - Withholding tax amount

Responsibility for establishing and updating the individual account
-------------------------------------------------------------------

Belgian employers using **Odoo Payroll** can generate the individual accounts of their workers.

However, to ensure accurate record-keeping, employers must:

- Ensure payment of sector-mandated year-end bonuses
- Ensure that all public holidays, legal vacation days, and compensatory rest days are taken
  before the end of the year
- Plan collective vacation and replacement public holidays in advance
- Pay workers their holiday pay (including early holiday pay if applicable)
- Distribute due eco vouchers
- Pay any required travel expenses between home and work

If these obligations are met, the corresponding data will be included in the individual account.

Storage and retention period of the individual account
------------------------------------------------------

The individual account is a social document that must be kept by the employer for a specified
period after its creation.

Employers may store individual accounts:

- At the ONSS-registered address
- At a workplace
- At their home or registered office if located in Belgium; otherwise, at the residence of a
  designated agent in Belgium
- At the office of the approved social secretariat, if affiliated

Records must be kept legible and in a format allowing efficient oversight. The retention period is
**five years** from the end of the annual closing of the account.

When must workers receive a copy of their individual account?
-------------------------------------------------------------

Each worker must receive a copy of their individual account:

- **During employment:** Before March 1 of the following year
- **At the end of employment:** Within two months following the end of the quarter in which the
  contract ended
- **If additional payments occur after contract termination:** A copy reflecting the additional
  payment must be provided within two months of the payment

Additionally, employers must issue a **simplified individual account** with certain worker and
employer details within two months of the worker's employment start date.

Any modifications to mandatory details, such as job function or workplace location, must be
communicated in writing (e.g., an updated simplified individual account) within one month of the
effective change date.

Generate individual accounts in Odoo
------------------------------------

Navigate to :menuselection:`Payroll app --> Reporting --> Belgium --> Individual Accounts`.

Then select the reference year and click the :guilabel:`Populate` button. The :file:`.pdf` are
displayed as soon as they are available and are generated 30 by 30, this could take some time
according to the number of employees.

On the first page, the :guilabel:`Employer Information` and the :guilabel:`Employee Information` is
listed.

.. image:: belgium/individual-account-03.png
   :alt: Individual Account PDF Header.

The next page displays all the employee worked days and payslip lines, month by month, split by
structure (e.g., End of year bonus and monthly pay).

.. image:: belgium/individual-account-04.png
   :alt: Individual Account PDF Month by Month.

The next page displays the same information quarter by quarter and summarized for the whole year.

.. image:: belgium/individual-account-05.png
   :alt: Individual Account PDF Quarter by Quarter.

Once all PDF files are generated, they can be posted to the employee documents portal if the
**Documents** application is :doc:`installed and properly configured
<../../../productivity/documents>`.

Select the checkbox of each employee whose documents you want to post, and click the :guilabel:`Post
PDF` button.

.. _payroll/l10n_be/273_sheets:

Intellectual property and 273 sheets
====================================

Introduction
------------

The 273S declaration is used for the **Prepayment on Mobile Income (Pr.M)**, which concerns the
taxation of **Author's Rights** and **Neighboring Rights** (also known as **Revenus Mobilier**).
These are specific types of income that are subject to particular tax treatment in certain
jurisdictions.

This document provides users with essential information about how the 273S declaration functions
within Odoo for reporting income derived from these rights, including applicable tax rates and
conditions.

Tax rates and calculation
-------------------------

The net income from Author's Rights and Neighboring Rights is taxable at a specific rate of **15%**.
However, the effective tax rate can vary based on the application of flat-rate deductions. These
flat rates reduce the taxable amount, leading to a lower effective tax rate for lower incomes.

Key points of taxation:

- **Effective tax rate**:

  - For incomes below the first flat-rate threshold, the effective tax rate can be as low as
    **7.5%**.
  - For incomes reaching the flat-rate ceiling of **37,500 EUR** (indexed annually), the rate can
    increase to **12%**.

- **Additional taxes**: Income from Author's Rights and Neighboring Rights must be declared in the
  personal income tax declaration. As a result, municipal surcharges may also apply to the tax due.

The **prepayment** of the tax is handled via a withholding tax on the income. The debtor of the
income (e.g., the employer or company paying the royalties) must submit the 273S declaration to the
tax authorities. This withholding tax rate is generally **15%**, but for incomes exceeding the
indexed ceiling of **37,500 EUR**, the rate increases to **30%**.

Benefits of Author's Rights in employment contracts
---------------------------------------------------

Companies can offer tax-advantageous remuneration to their directors or employees by granting
**Author's Rights**. These rights are subject to a **15% withholding tax**, but there are flat-rate
deductions that make this tax treatment very favorable, especially when incomes are lower.

Important considerations:

- **Creative works**: To qualify for Author's Rights protection, the work must be creative,
  original, and fixed in a tangible form. Simple ideas or concepts are not eligible.
- **Exploitation requirement**: From January 1, 2023, a new regulation mandates that transferred or
  licensed protected works must be exploited, meaning they must be used for public communication,
  execution, representation, or reproduction.
- **Eligibility for tax benefits**: To benefit from the favorable tax regime, the rights holder
  must meet specific criteria, such as:

  - Holding an "Artistic Work Certificate."
  - Licensing or transferring rights to a third party for public communication or reproduction.

- **Income ratio restrictions**: The proportion of income from Author's Rights in relation to
  regular salary will be capped at **30%**, with **70%** of the total income being subject to
  regular income tax.
- **Income cap**: The absolute ceiling for qualifying income under this regime remains
  **37,500 EUR** (indexed at **70,220 EUR** for the 2024 income year).

If your average income from the last four years exceeds this ceiling, you will no longer be
eligible for the advantageous tax regime.

- **Ruling Request**: For greater clarity on the scope and remuneration of the transfer of Author's
  Rights, an advanced agreement with the tax authorities (referred to as a **ruling**) can be
  requested.

Tax treatment of Author's Rights income
---------------------------------------

Since 2008, income from the transfer or licensing of Author's Rights has benefited from a favorable
tax treatment. Specifically, the income is subject to:

- **15% Withholding Tax** up to an indexed ceiling of **70,220 EUR** (2023 income year).
- **Flat-Rate Deductions**:

  - **50% flat-rate deduction** applies to the first **18,720 EUR** of income.
  - **25% flat-rate deduction** applies to the next **18,730 EUR** (from **18,720 EUR to 37,450
    EUR**).

Example of tax impact:

For example, if a company director receives **10,000 EUR** in Author's Rights income, they will pay
**750 EUR** in tax (15% of the income after the flat-rate deductions), leaving them with a net
income of **9,250 EUR**. This results in an effective tax rate of **7.5%** on the Author's Rights
income.

Odoo integration for Declaration 273S
-------------------------------------

Odoo users can efficiently manage the submission of the **273S Declaration** for Author's Rights
and Neighboring Rights income via the **Odoo Payroll** module. Here's a quick overview of how this
can be done:

Set up Author's Rights in Odoo
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

On the employees form view, make sure the :guilabel:`Intellectual Property` checkbox is enabled, and
the allocated salary percentage is specified as well.

Once a payslip is generated, the :abbr:`IP (intellectual property)` part is computed based on the
intellectual property percentage and the gross salary. The tax is computed accordingly based on the
revenue amount.

.. image:: belgium/273s-07.png
   :alt: Intellectual Property Payslip 1.

.. image:: belgium/273s-08.png
   :alt: Intellectual Property Payslip 2.

Generate the 273S form
~~~~~~~~~~~~~~~~~~~~~~

Odoo can generate the 273S form automatically based on the income data entered into the system.
Ensure that all required details, including the amount of income subject to the tax, are accurately
entered.

Navigate to :menuselection:`Payroll app --> Reporting --> Belgium --> 273S Sheet` to create a
:guilabel:`New` record.

Select the reference :guilabel:`Year` and :guilabel:`Month`, then click :guilabel:`Export XML file`
to generate the declaration. Click :guilabel:`Export PDF File` to generate the printed details.

.. image:: belgium/273s-03.png
   :alt: 273S Wizard File Generation.

On the first PDF section, the company information and the global declaration is listed.

.. image:: belgium/273s-04.png
   :alt: 273S PDF Company Info.

On the second section, the employees specific information is listed.

.. image:: belgium/273s-05.png
   :alt: 273S PDF Employee Info.

File the 273S Declaration
~~~~~~~~~~~~~~~~~~~~~~~~~

After generating the XML file, the company or the debtor of the income can submit it to the tax
authorities directly from MyMinfin. Keep track of the filing and payment deadlines to ensure timely
submission and compliance.

Conclusion
----------

The **273S Declaration** is an essential tool for companies and individuals benefiting from the
favorable tax regime on Author's Rights and Neighboring Rights. By leveraging Odoo's tax management
features, users can ensure compliance while optimizing their tax liabilities.

For further assistance, please consult a tax professional.

.. _payroll/l10n_be/representation_fees:

Representation fees
===================

Introduction
------------

Representation fees must be **allocated on the payslip** between **serious and non-serious
representation costs**. By default, the threshold is set at **283.73**, but it can be adjusted
based on what the company can **legally justify**.

The representation fees is configured on the employee's contract form in the :guilabel:`Expense
Fees` field.

On the payslip, two or one line are displayed in the case the representation fees amount exceeds
the threshold or not.

Breakdown of the threshold
--------------------------

Only part of the representation costs are pro-rated because certain costs are **fully covered** by
the company. These fixed costs include:

.. math::
   :class: overflow-scroll

   \text{}283.73\text{ Total} = \begin{cases}
   + \text{ 148.73 (Tax, since 2021 - coronavirus)} \\
   + \text{ 30 (Internet)} \\
   + \text{ 25 (Phone)} \\
   + \text{ 80 (Car management fees)} \\
   \end{cases}

The **serious portion** of the representation costs is **not prorated**, while the
**non-serious portion** is prorated based on working time.

Navigate to :menuselection:`Payroll app --> Configuration --> Salary --> Rule Parameters`, and
search for the `CP200: Representation Fees Threshold` record. Then, adapt the current value or
introduce a new one from a given date.

.. image:: belgium/representation-fees-01.png
   :alt: Representation Fees Threshold.

.. note::
   It is possible to define, based on job position, which jobs are eligible to certain criteria in
   the :guilabel:`Payroll` tab.

   .. image:: belgium/representation-fees-04.png
      :alt: Representation Fees Job Position.

Calculation of representation fees
----------------------------------

Conditions for payment
~~~~~~~~~~~~~~~~~~~~~~

Representation fees are only granted if:

- The employee **receives a basic salary**, and
- The employee has **worked at least part of the time**, unless a **salary simulation** is in
  progress.

If the employee is on **full leave** (without any working days), they are **not eligible** for
representation fees.

Determining the work time rate
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

- The number of **working days per week** is extracted from the employee's contract.
- If the employee has periods of **incapacity for work** (e.g., illness), the calculation adjusts
  the **work time rate** accordingly:

  - The total **incapacity hours** are determined.
  - If the company follows a **biweekly schedule**, the incapacity hours are divided by **two**.
  - The incapacity **rate** is calculated as:

    .. math::
       :class: overflow-scroll

       \text{incapacity rate} = 1 - \frac{\text{incapacity hours}}{\text{total weekly hours}}

  - The **final work time rate** is then adjusted by multiplying it with the incapacity rate.

Applying the threshold and pro-rating rules
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

- The **default threshold (283.73)** is applied unless adjusted by the company.
- If the employee has **worked a full-time schedule**, they receive the **full representation fees**
  without reduction.
- If the employee works **part-time** (contractual or due to time credit), only the **non-serious
  portion** of the fees is prorated.

  - The prorated formula for non-serious expenses is:

    .. math::
       :class: overflow-scroll

       \text{adjusted amount} = \text{threshold} + (\text{total fees} - \text{threshold}) \times
       \frac{\text{work time rate}}{100}

- If the employee has **missing workdays**, the final amount is further adjusted:

  - First calculate the **daily reduction**:

    .. math::
       :class: overflow-scroll

       \text{daily reduction} = \frac{(\text{total amount} - \text{threshold}) \times 3}{13 \times \text{days per week}}

  - Then calculate the **final amount**:

    .. math::
       :class: overflow-scroll

       \text{final amount} = max(0, \text{total amount} - \text{daily reduction} \times
       \text{missing days})

Final calculation
~~~~~~~~~~~~~~~~~

- If the employee meets all conditions, the final representation fees amount is
  **rounded to two decimal places** for payroll purposes.
- Employees working a full schedule receive **full reimbursement**, while those working
  **reduced hours** have the **non-serious portion prorated** accordingly.

Conclusion
----------

This calculation ensures **fair allocation** of representation fees by distinguishing between
**fixed serious costs** and **prorated non-serious costs**. The company can adjust the
**threshold (283.73 by default)** based on **justifiable business expenses**.

Employees working **full-time** receive their full representation fees, while those working
**part-time or with absences** only receive a **pro-rated portion** of the non-serious fees.

.. _payroll/l10n_be/sick_time_off:

Sick time off and relapse
=========================

In Belgium, sick leave is managed according to two main regimes:

- **With guaranteed salary**: The employer continues to pay the worker's salary for a specified
  period.
- **Without guaranteed salary**: The worker receives benefits from the mutual insurance company
  after the guaranteed salary period.

Sick leave with guaranteed salary
---------------------------------

The guaranteed salary is a period during which the employer continues to pay the salary of the
worker who is unable to work.

**Employees**: The employer pays 100% of the salary during the first full month of incapacity.
After this period, if the incapacity continues, the worker falls under the mutual insurance regime.

Sick leave without guaranteed salary
------------------------------------

After the guaranteed salary period, the ONEM (National Employment Office) or the mutual insurance
company takes over.

- **Long-term illness**: An incapacity lasting more than 30 days leads to benefits from the mutual
  insurance company.
- **Relapse**: If a worker returns to work and then becomes ill again for the same reason within
  14 days, this may be considered a relapse, and the rules for guaranteed salary may be adjusted.

Management in Odoo
------------------

In Odoo, sick leave is automatically managed if the absences are related to the *Sick Time Off*
work entry type.

- **Recording time off**: The employee records their absence through the **Time Off** module.
- **Automation of work entries**: If the request is approved, Odoo automatically generates the
  corresponding Work Entries.
- **Impact on payroll**: The guaranteed salary is automatically calculated according to the rules
  configured based on the worker's status (employee).
- **Compensation after the guaranteed salary**: Once the guaranteed salary period has expired, Odoo
  adjusts the Work Entries to reflect the transition to the mutual insurance company.

Thus, Odoo ensures a smooth and compliant management of sick leave according to Belgian regulations.

.. _payroll/l10n_be/social_balance_sheet:

Social Balance Sheet
====================

Introduction
------------

The *Social Balance Sheet* was introduced by the law of December 22, 1995, as part of measures for
the implementation of the multi-year employment plan. Companies required to file annual accounts
(including some that are not obligated to publish such accounts - see the
`National Bank of Belgium website <https://www.nbb.be>`_ for details) must also prepare and submit a
Social Balance Sheet to the National Bank of Belgium.

The Royal Decree of August 4, 1996, incorporates the Social Balance Sheet into the annual accounts,
specifically as an annex. This makes it an integral part of a company's financial statements.

Contents of the Social Balance Sheet
------------------------------------

The content of the Social Balance Sheet is determined by the Royal Decree of January 30, 2001,
implementing the Company Code. The Social Balance Sheet consists of several sections:

- Sections I and II: Information on employed persons and personnel movements during the fiscal year.
- Section III: Initiatives related to training.

Since the Social Balance Sheet is part of a company's annual accounts, the works council receives
this information as part of its mission regarding economic and financial information.

Additionally, the works council receives data on employment-related benefits along with annual
employment-related information (Trillium). These details were fully integrated into the Social
Balance Sheet until 2008.

Scope of the Social Balance Sheet
---------------------------------

The Social Balance Sheet contains specific data related to workforce composition, staff turnover,
and training programs. Some organizations not required to publish annual accounts must still file a
separate Social Balance Sheet. This applies primarily to certain hospitals and private legal
entities employing at least 20 full-time equivalents (FTEs).

Any company, association, or foundation with at least 20 workers on an annual average (in FTE) must
complete and submit the Social Balance Sheet.

The Social Balance Sheet is part of:

- "Other documents to be filed under the Company and Associations Code" (for companies);
- "Explanatory Notes" (for associations and foundations).

Obligations by entity type
--------------------------

Companies, associations, and foundations required to publish a Social Balance Sheet
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

For Belgian companies employing at least one FTE:

- **Standardized model**: This schema includes a "Social Balance Sheet" section, which must be
  completed.
- **Specific model**: If the model used does not include a Social Balance Sheet, it must be
  provided separately.

For Belgian associations and foundations employing at least 20 FTEs:

- **Standard model**: Includes a "Social Balance Sheet" section that must be completed.
- **Specific model**: A separate Social Balance Sheet must be submitted if the chosen model does
  not include one.

Associations and foundations with fewer than 20 FTEs may voluntarily complete the Social Balance
Sheet but are not legally required to do so.

For foreign companies, such as branches of foreign corporations and foreign non-profit organizations
(ASBL) with activities in Belgium, the Social Balance Sheet applies only to their Belgian
operations.

The Social Balance Sheet is made publicly available by the Central Balance Sheet Office as part of
the financial statements submission.

Entities required to file a separate Social Balance Sheet
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Certain organizations that do not need to publish annual accounts must still submit a Social Balance
Sheet to the Central Balance Sheet Office. This data is used exclusively for statistical purposes
and is not made publicly available. Submission in these cases is free of charge.

This exception applies to:

- **Hospitals**, unless they are structured as limited liability companies or large ASBLs, which
  must submit full financial statements, including the integrated Social Balance Sheet.
- **Private legal entities** that are not required to submit annual accounts but have at least 20
  employees.

The required model depends on the entity type:

- **Hospitals** must use the full or abridged Social Balance Sheet model based on their size.
- **Foreign entities** must use the full or abridged Social Balance Sheet model, based on the size
  of their Belgian establishments.
- **Private legal entities** with at least 50 employees must use the full model, while those with
  20-49 employees may use the abridged model.

Social Balance Sheet models
---------------------------

The latest versions of the Social Balance Sheet models can be found at the following links:

- **Full Model**

  - PDF: `Full Social Balance Sheet PDF <https://www.nbb.be/doc/ba/models/social%20balance/release_2021_fr_bilan_social_c_20121201.pdf>`_
  - Word: `Full Social Balance Sheet Word <https://www.nbb.be/doc/ba/models/social%20balance/release_2021_fr_bilan_social_c_20121201.docx>`_

- **Abridged Model**

  - PDF: `Abridged Social Balance Sheet PDF <https://www.nbb.be/doc/ba/models/social%20balance/release_2021_fr_bilan_social_a_20121201.pdf>`_
  - Word: `Abridged Social Balance Sheet Word <https://www.nbb.be/doc/ba/models/social%20balance/release_2021_fr_bilan_social_a_20121201.docx>`_

Assistance in completing the Social Balance Sheet
-------------------------------------------------

For guidance on completing the Social Balance Sheet, refer to the following resources:

- **CNC Opinion S100**: `Questions and Answers on the Social Balance Sheet <https://www.nbb.be/doc/ba/models/social%20balance/avis_cnc_s100.pdf>`_
- **CNC Opinion 2009/12**: `Social Balance Sheet and Statutory Workers <https://www.nbb.be/doc/ba/models/social%20balance/avis_cnc_2009_12.pdf>`_
- **Explanatory Note**: `Information on Training Activities <https://www.nbb.be/doc/ba/models/social%20balance/notice_formations_fr_4%20avril%202008.pdf>`_

Submitting a separate Social Balance Sheet
------------------------------------------

A separate Social Balance Sheet must be submitted online as a PDF via the **Filing** application.
The model can be selected under :guilabel:`Other Documents`, with options for :guilabel:`Abridged
Social Balance Sheet` or :guilabel:`Full Social Balance Sheet`.

For further details, visit the National Bank of Belgium's website: `www.nbb.be <https://www.nbb.be/>`_.

Generating Social Balance Sheet in Odoo
---------------------------------------

Navigate to :menuselection:`Payroll app --> Reporting --> Belgium --> Social Balance Sheet` and
select the reference :guilabel:`Period`.

.. image:: belgium/social-balance-sheet-01.png
   :alt: Social Balance Sheet Wizard.

Then click :guilabel:`Export to PDF` or :guilabel:`Export to XLSX` to generate the social balance
sheets containing all the data available in your Odoo database.

The different pieces of information are split by gender, or by working schedule (Part Time, Full
Time, Full Time equivalent), for the whole period, and month by month, as requested by the National
Bank of Belgium.

.. image:: belgium/social-balance-sheet-02.png
   :alt: Social Balance Sheet PDF Header.

.. image:: belgium/social-balance-sheet-03.png
   :alt: Social Balance Sheet PDF Content.

.. image:: belgium/social-balance-sheet-04.png
   :alt: Social Balance Sheet XLSX Content.

.. _payroll/l10n_be/social_security_certificate:

Social Security certificate
===========================

The Social Security certificate in Odoo provides a detailed breakdown of all social charges paid by
the employee or employer, categorized by type (e.g., year-end bonus, private car reimbursement,
double holiday pay, etc.). This report is particularly useful for audit companies and for verifying
that the declared amounts align with accounting entries.

Accessing the Social Security certificate
-----------------------------------------

To generate the Social Security certificate, follow these steps:

#. Navigate to :menuselection:`Payroll app --> Reporting --> Belgium --> Social Security
   Certificate`.
#. Select the reference :guilabel:`Period`.
#. Choose the data :guilabel:`Aggregation Level`:

   - :guilabel:`Whole Company`
   - :guilabel:`By Department`
   - :guilabel:`By Employee`

.. image:: belgium/social-security-certificate-01.png
   :alt: Social Security Certificate Wizard.

Exporting the report
--------------------

Once the selections are made, you can export the report in different formats:

- Click :guilabel:`Export to PDF` to generate a printable version of the Social Security
  certificate.
- Click :guilabel:`Export to XLSX` to generate an Excel file containing all relevant data.

.. image:: belgium/social-security-certificate-02.png
   :alt: Social Security Certificate PDF Header.

.. image:: belgium/social-security-certificate-03.png
   :alt: Social Security Certificate PDF Content.

.. image:: belgium/social-security-certificate-04.png
   :alt: Social Security Certificate XLSX Content.

This feature ensures full transparency and compliance with social security regulations in Belgium.

.. _payroll/l10n_be/time_off:

Time off
========

.. _payroll/l10n_be/legal_time_off:

Legal time off
--------------

This guide provides an overview of the basic rules governing legal holiday entitlements in Belgium
for employers using Odoo.

Holiday entitlement calculation
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Your holiday entitlement for the current year (N) is determined by the number of months worked in
Belgium during the previous year (N-1).

**Calculation details:**

- Employees earn **2 days of leave per month** based on a 6-day work week.
- The entitlement is adjusted for a 5-day work week: :math:`(\text{Total Days} \div 6) \times 5`.

.. example::
   If an employee worked **7 months** in the previous year (N-1):

   - **6-day work week:** :math:`7 \times 2 = 14 \text{ days}`
   - **5-day work week:** :math:`14 \div 6 \times 5 = 11.67 \text{ days}`

**Partial Month Calculation:**

- Worked **1st to 10th**: Full month counted.
- Worked **11th to 19th**: Half month counted.
- Worked **20th onwards**: Month not counted.

**Rounding Rules:**

- Less than **0.35**: Round to **0**.
- Between **0.35 - 0.74**: Round to **0.5**.
- **0.75 and above**: Round to **1**.

For a full-time employee, this typically results in **11.5 days of legal holiday** entitlement.

Maximum holiday entitlement
~~~~~~~~~~~~~~~~~~~~~~~~~~~

Employees are entitled to a maximum of **4 weeks** of holiday based on their working schedule. If an
employee switches between full-time and part-time work, their entitlement is adjusted accordingly.

**Calculation details:**

- **5-day work week**: :math:`4 \times 5 = 20 \text{ days}`
- **4-day work week**: :math:`4 \times 4 = 16 \text{ days}`
- **3-day work week**: :math:`4 \times 3 = 12 \text{ days}`

.. example::
   If an employee joined **Odoo on January 1, 2024**, and plans to switch to a **3-day work week
   from April 1, 2024**:

   **Step 1: Calculate holiday entitlement for 2024**

   - The employee worked **9 months in 2023**.
   - **6-day work week basis**: :math:`9 \times 2 = 18 \text{ days}`
   - Adjusted for **5-day work week**: :math:`18 \div 6 \times 5 = 15 \text{ days}`

   **Step 2: Verify maximum holiday entitlement**

   - For a **5-day work week**, the maximum entitlement is **20 days**.
   - Since the employee is entitled to **15 days**, they remain within the limit.

   **Step 3: Adjust entitlement for the new work schedule**

   - From April 1, 2024, the employee moves to a **3-day work week**.
   - Maximum entitlement for a **3-day work week**: :math:`3 \times 4 = 12 \text{ days}`.
   - If no leave is taken before April 1, the employee may take up to **12 days** from
     their 15-day entitlement.
   - The **remaining 3 days** will be settled at the end of the year.

This ensures compliance with Belgian legal leave regulations and allows employers to manage holiday
entitlements effectively within Odoo.

Legal time off allocation
~~~~~~~~~~~~~~~~~~~~~~~~~

This is possible to generate the legal time off for all your employees at the beginning of a new
year using the wizard in :menuselection:`Payroll app --> Reporting --> Belgium --> Paid Time Off
Allocation`.

Based on your employees occupation over last year, the number of available time off is pre-computed
for each employee.

.. image:: belgium/paid-time-off-allocation-01.png
   :alt: Paid Time Off Allocation Wizard.

Once validated, a draft allocation is generated for each single employee, waiting a manual
confirmation that can be done in batch.

.. image:: belgium/paid-time-off-allocation-02.png
   :alt: Paid Time Off Allocations.

.. _payroll/l10n_be/european_time_off:

European time off
-----------------

How does it work?
~~~~~~~~~~~~~~~~~

If you were not subject to Belgian ONSS contributions before joining our company and do not have
entitlement to legal holidays, or if your entitlement is incomplete, you can apply for European
leave.

To qualify for European leave in a given year, you must work for at least 3 months during that year,
whether with us or another employer. Once you have met this requirement, you will earn 5 days of
European leave. Subsequently, you will accumulate additional days of vacation each month as follows:

- After 3 months: 5 days
- After 4 months: 7 days
- After 5 months: 9 days
- After 6 months: 10 days
- After 7 months: 12 days
- After 8 months: 14 days
- After 9 months: 15 days
- After 10 months: 17 days
- After 11 months: 19 days

.. important::
   The total of legal leave and European leave cannot exceed 20 days per year. You must use all your
   legal holidays before taking European leave.

   European leave entitlement expires on December 31st of the year it is earned and cannot be
   carried over to the following year. To qualify for European leave in a new year, you must
   complete another 3 months of work.

How are these days paid?
~~~~~~~~~~~~~~~~~~~~~~~~

European leaves are paid holidays taken in advance of your "Double Holiday Pay" (the June extra pay)
for the following year. Essentially, the more European leave days you take in a given year, the less
you will receive as June extra pay in the following year.

.. _payroll/l10n_be/working_schedule_change:

Working schedule change
=======================

This guide explains how to modify an employee's working time schedule in the Belgian payroll module
of Odoo. Changing an employee's working hours affects their wage calculation, time-off allocation,
and contract terms.

Steps to change an employee's working schedule
----------------------------------------------

#. Navigate to the employee's contract (:menuselection:`Payroll app --> Contracts`), and select the
   contract of the employee whose working schedule you want to modify.
#. Click on :icon:`fa-cog` :guilabel:`(Action)` and select :guilabel:`Working Schedule Change`. The
   wizard displays the current contract details and allows you to set new working time parameters.
#. Set the new working schedule:

   - Choose the new :guilabel:`Working Schedule` from the available resource calendars.
   - Define the :guilabel:`Start Date` for the change (mandatory).
   - If applicable, specify an :guilabel:`End Date`.
   - If the :guilabel:`Part Time` checkbox is selected, any difference between the reference
     calendar and the employee's new calendar will be covered using the *Absence Work Entry Type*.
     This ensures that the employee's monthly salary remains the same, regardless of the number of
     absence days in a given month. This setup is required for configuring *Time Credit*, *Parental
     Leave*, or *Medical Half-Time* correctly.

#. Adjust the employee's wage:

   - The wizard automatically computes the full-time equivalent wage based on the new working
     schedule.
   - You can review and modify the new wage if necessary.

#. Manage time off allocation:

   - Select the relevant :guilabel:`Time Off Type`.
   - Odoo automatically adjusts the employee's time-off entitlement based on the new working
     schedule using the following formula:

     .. math::
        :class: overflow-scroll

        \text{New Time Off Allocation} = \max(\min(\text{ Computed Allocation},
        \text{ Max Allocation}) + \text{ Leaves Taken}, \text{ Leaves Taken})

     - **Computed Allocation** is the expected leave allocation based on the new schedule.
     - **Max Allocation** is the maximum number of days allowed under the new working time.
     - **Leaves Taken** ensures the employee does not receive fewer days than already used.

#. Decide on a follow-up contract

   - If the working time change is temporary, you can enable :guilabel:`Post Change Contract
     Creation` to automatically create a contract that resumes the previous working schedule after
     the specified end date.

#. Validate the changes

   - Click :guilabel:`Validate` to apply the new working schedule.
   - If the new schedule is the same as the current one, an error will be displayed.
   - The system will create a new contract with the updated working time and wage.
   - If a previous contract existed, it will be closed with an end date before the new contract
     begins.

Result
------

- The employee's new working schedule is recorded.
- Wage and time-off entitlements are adjusted accordingly.
- A follow-up contract is created if applicable.

.. image:: belgium/working-schedule-change-03.png
   :alt: Working Schedule Change New Contracts.

.. _payroll/l10n_be/work_entries_exports:

Work entries exports
====================

What are work entries?
----------------------

In the context of payroll, *work entries* typically refer to records or documentation related to an
employee's work hours and earnings for a specific pay period. These entries are crucial for
accurately calculating and processing employee compensation.

Work entries in the context of payroll are essential for both employees and employers. They provide
a transparent and accurate record of an employee's compensation and deductions, ensuring that
employees are paid correctly and that tax and legal requirements are met. Payroll software and
systems are commonly used to manage and automate these work entries, making the payroll process more
efficient and accurate.

Main concepts
-------------

General
~~~~~~~

In Odoo, work entries mainly refer to *time entries* (attendance tracking), these are work entries
that consist of time records, which include the number of hours worked by an employee during a
given pay period. These entries may specify regular working hours, overtime hours, and any other
relevant time-related information, such as breaks, paid time off, unpaid time off, parental leave,
credit-time, etc.

Work entries serve a dual role in payroll management. First, they enable organizations to
independently compute employee payslips. Second, they facilitate the transmission of pertinent data
to external payroll service providers, who then use this information to calculate and generate the
payslips.

Work entries
~~~~~~~~~~~~

- They have a Name: used to identify the type of entry (e.g., Attendance, Paid Time Off, etc.).
- They have a Payroll Code: used in Odoo's salary rules computations
- They have an External Code: used to provide the correct Work Entry code to an external payroll
  service provider.
- They are generated based on the configuration of the contract and the time off types
- They have a duration, a start and end date, a state and are always linked to an employee.

Work entry types
~~~~~~~~~~~~~~~~

- They are the main source of configuration for your work entries. Thanks to your different types
  of work entries, you'll be able to differentiate the time records of your employees.
- They have a name.
- They contain a code, external code, payroll code and a color for visual tracking.
- They allow other types of configurations such as how they are displayed in payslips, decide
  whether this type of work entry should be considered as paid or unpaid (eg. unpaid leave), decide
  whether this type of work entry has a link with time off, is valid for some advantages or how it
  should be reflected in your reporting.

Time off types
~~~~~~~~~~~~~~

As mentioned above, since work entry types can be linked to a time off type, you are also able to
define the work entry type for each time-off type. On the time off type you have a many2one
relation with the work entry type.

Steps to generate the work entries of your staff
------------------------------------------------

#. Create all the employees
#. Create a contract and set its status to :guilabel:`Running` for each employee.

   In the contract, choose the :guilabel:`Work Entry Source`. It tells the system how work entries
   for an employee should be generated. It can be based on:

   - :guilabel:`Working Schedule`: Odoo uses the predefined working hours and days set in the
     employee's working schedule to generate work entries. This is useful for regular, predictable
     shifts.
   - :guilabel:`Attendances`: Work entries are generated from the employee's attendance records
     (i.e., when they check-in and check-out).
   - :guilabel:`Planning`: Work entries are created based on the validated shifts or slots allocated
     to the employee in the **Planning** app (often used for scheduling roles like retail shifts,
     restaurants, etc.).

#. Generate the work entries each month

   Odoo automatically creates the work entries in the **Payroll** app based on the work entry source
   of the contract and the different time-offs taken. You can edit the work entries manually. You
   can always decide to regenerate work entries manually but be careful if you already made some
   manual changes, Odoo will regenerate the work entries based on what it knows (e.g., your working
   schedule and time off).
#. Managing conflicts

   Conflicts are pointing to entries that can't be validated without your intervention. This means
   you'll have to qualify the entry and decide which is the correct entry to be defined for the time
   period if you want to be able to generate the payslip or validate the entries. Conflicts arise
   when there are overlapping entries or when Odoo detects that there is a time off request still
   pending for validation. For instance, if an employee is marked as attending work and at the same
   time there's a paid leave request to be validated for the same period, that's a conflict.

   Conflicts can be managed by filtering on the conflicting entries and resolving the discrepancy.
   Since **Odoo 16.4**, Odoo filters by default on conflicting entries. For prior versions, you can
   still filter manually on conflicting entries or use the conflicting menu item.
#. Once the conflict is resolved you can either proceed to generate the payslips for your employees
   or export your work entries to the right entity.

Export work entries
-------------------

.. tip::
   This section is about exporting work entries to SD Worx, but the configuration and behavior is
   similar for other exports to Partena, Group S and UCM.

Introduction
~~~~~~~~~~~~

This sheet is here to help you learn how Odoo's **SD Worx** (`l10n_be_hr_payroll_sd_worx`) module
simplifies payroll by enabling easy export of work entries. This guide provides quick steps to
generate :file:`.txt` files for direct import into SD Worx calendars, saving time and ensuring
accuracy.

First and foremost, it's important to understand there is no direct integration between Odoo and
SD Worx. There is no automatic exchange of information, either way. Odoo does not communicate
directly with SD Worx, and the reverse is also true.

How does it work?
~~~~~~~~~~~~~~~~~

In reality, Odoo provides a standardized export in .txt format for employees' work entries,
allowing the generation of a file that conforms to a specific format for inputting these entries
into the SD Worx software.

What does it mean in terms of data management?
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Since there is no direct integration between both systems, it implies that certain data will need
to be manually entered into both systems. For instance, when you create a new employee in Odoo,
you'll also need to manually create the employee in SD Worx (and vice versa). This manual data
entry requirement extends to various aspects such as contracts, work schedules, salary details,
and personal information about employees.

Essentially, all the information necessary for SD Worx to calculate salaries and generate payslips
must be manually inputted into both systems.

What's the advantage of exporting to SD worx?
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Odoo is an integrated software that can comprehensively handle all variable payroll elements,
including employee personal information, contract details, various time-off types, and other work
entry categories. Through Odoo's integration capabilities, you can access all this crucial data in
one centralized location, making it easily accessible for your HR team and employees.

This integration not only ensures data accuracy but also maintains consistency, reducing the
likelihood of errors when transmitting work entry information to your external payroll provider.
With the module in place, a single click generates a :file:`.txt` file that's ready for direct
import into SD Worx, streamlining the entire data transmission process.

Steps to set up the SD Worx module
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

.. important::
   You must be logged into a Belgian company for the following steps to work.

#. :ref:`install <general/install>` the **Belgium - Payroll - Export to SD Worx**
   (`l10n_be_hr_payroll_sd_worx`) module.
#. Go to :menuselection:`Payroll app --> Configuration --> Settings` to fill in the :guilabel:`SD
   Worx code` field. This is the company's SD Worx code, you get it directly from the SD worx
   software. When you create a company, it has a unique identifier which you need to set in the
   field.
#. For each employee, under the :guilabel:`Settings` tab, fill in the :guilabel:`SDWorx code` field.
#. For work entry types, under the :guilabel:`Settings` tab, fill in the :guilabel:`SDWorx code`
   field as well.

You can now export your work entries in the SD Worx :file:`.txt` format by opening the wizard under
:menuselection:`Payroll app --> Reporting --> Belgium --> Export Work Entries to SDWorx`.

The file contains a series of lines such as the following line of text:
`1111110000024K2023042370100360`

Each line represents a work entry, and the structure is outlined below:

- `111111` -> Company SD Worx code
- `0000024` -> Employee SD Worx code
- `K` -> Delimiter
- `20230423` -> Date
- `7010` -> SD Worx work entry code
- `0360` -> Duration (edited)

Once the :file:`.txt` file is exported, it can be directly imported in this format into the SD Worx
software. Doing so updates the calendars of each collaborator.

.. _payroll/l10n_be/274xx_sheets:

274.XX sheets
=============

This section provides an overview of Declaration 274, its components, and how it is handled within
Odoo.

Declaration 274.10
------------------

Withholding tax is an advance payment on professional income tax. It is calculated based on
guidelines established by the tax administration. While reducing withholding tax is generally not
allowed, employees may request to pay more in order to better match their final tax liability.

Withholding tax must be deducted from both employees' and company directors' income. If the
withholding tax is insufficient, advance tax payments must be made to avoid additional tax
penalties.

In practice, some employees do not inform their employer of personal changes (e.g., having a child),
which can affect tax calculations.

Withholding tax must be declared and paid either quarterly or monthly using form 274. These
declarations must be submitted via the FINPROF application by the 15th of the month following the
reporting period.

Taxable income and corresponding withholding tax must be recorded in fiscal remuneration forms
281.x and summary statements 325x. Employers failing to report these correctly may be subject to a
309% penalty on undisclosed amounts.

The tax administration compares the declared amounts in form 274 with the amounts reported in the
fiscal forms. If withholding tax payments are insufficient, the company may be charged the
difference. If a 274 form is submitted without corresponding tax payment, additional tax penalties
will apply.

It is crucial to adhere to all administrative guidelines to avoid unexpected tax charges.

Declarations 274.32, 274.33, 274.34
-----------------------------------

Withholding tax exemptions for research employees
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Companies employing scientific researchers may qualify for withholding tax reductions under
specific conditions:

- **Form 281.32** applies to civil engineers and PhD holders.
- **Form 281.33** applies to employees holding a master's degree.
- **Form 281.34** applies to employees holding a bachelor's degree.

Employers engaged in scientific research may be eligible for an exemption from withholding tax
payments. To qualify, they must register their R&D projects with Belspo. From August 1, 2023, this
registration must occur before the project begins.

Tax exemption details
~~~~~~~~~~~~~~~~~~~~~

This tax incentive allows companies to retain 80% of the withholding tax deducted from researchers'
salaries. However, the exemption rate differs for researchers based on their qualifications:

- PhD and master's degree holders: Full 80% exemption.
- Bachelor's degree holders: 50% of the full exemption amount.
- For non-SME companies, this limit is further reduced to 25%.

The exemption applies only to the portion of working time dedicated to scientific research, covering
fundamental research, industrial research, or experimental development.

This exemption does not affect the net salary of employees.

Capping rules
~~~~~~~~~~~~~

The total exemption granted to researchers with a bachelor's degree is limited to 25% of the
exemption granted to PhD and master's degree holders. For small companies (as defined in Article 15
 1-6 of the Companies Code), this limit is doubled. These rules have remained unchanged since
January 1, 2020.

How it works in Odoo
--------------------

Odoo automates the calculation and declaration of withholding tax exemptions using predefined
payroll structures. Below is an explanation of how the system processes these exemptions.

Navigate to :menuselection:`Payroll app --> Reporting --> 274.XX Sheets` to create a
new declaration.

Select the reference :guilabel:`Year` and :guilabel:`Month`, and the different amounts are computed
accordingly.

#. **Payroll calculation**

   - Odoo calculates gross salary and total withholding tax.
   - It accounts for specific payroll components, including December double bonuses.

#. **Filtering eligible payslips**

   - Payslips linked to research-related contracts are considered.
   - Employees are categorized based on their qualifications (PhD, master's, or bachelor's degrees).

#. **Exemption calculation**

   - The withholding tax exemption is calculated at 80% of the withheld amount.
   - Exemptions for bachelor's degree holders are capped according to regulations.

#. **Final adjustments**

   - The system ensures compliance with legal capping rules.
   - If necessary, adjustments are made based on the total exemption granted.

Click on :guilabel:`Export XML file` to generate the file to post on FINPROF portal and the
structured communication to link to your payment.

.. image:: belgium/274xx-03.png
   :alt: 274.XX XML file.

Click on :guilabel:`Create 274.XX Sheets` to generate the :file:`.pdf` files of those declarations.

.. note::
   In order to for the exemption to work properly, the *Certificate Level* should be correctly
   configured on the employee's form.

   The *Time Percentage R&D* rate should be specified on the employee's contract form as well.

If the accounting application is installed and running properly, you can also post directly the
different amounts in your accounting entries with the :guilabel:`Post Journal Entries` button.

.. note::
   If the *Post Journal Entries* is not present on the wizard, you need to configure the journal and
   the different accounts for each amount type from :menuselection:`Payroll app --> Configuration
   --> Settings`.

   In the :guilabel:`Belgian Localization` section, complete each of the :guilabel:`Witholding
   Taxes Exemption` journal entry accounts.

Employers using Odoo can efficiently manage and report withholding tax exemptions, ensuring
compliance with regulatory requirements.

For further details, consult the Odoo finance documentation or your tax adviser.

.. _payroll/l10n_be/28110_declaration:

281.10 Declaration
==================

Introduction
------------

The Belgian fiscal declaration 281.10 is an annual statement that employers must submit to the tax
authorities, detailing the salaries and benefits provided to each employee. This declaration ensures
accurate tax calculations and compliance with Belgian tax regulations.

Generating the declaration in Odoo
----------------------------------

Odoo provides a streamlined process for generating the 281.10 declaration, offering both a
comprehensive XML file for electronic submission and individual PDF files for record-keeping.

Global XML declaration
~~~~~~~~~~~~~~~~~~~~~~

To generate the global XML file in Odoo, navigate to :menuselection:`Payroll app --> Reporting -->
281.10 Sheet`.

Then, create a new record by selecting the reference :guilabel:`Year`.

.. important::
   The :guilabel:`Sending Type` and :guilabel:`Treatment Type` options are currently experimental
   and should be kept at their default values to ensure a valid original declaration.

Click the :guilabel:`Populate` button to generate the eligible employees, then click the
:guilabel:`Create XML` button. A green indicator will appear to confirm successful file generation.

Individual PDF declaration
~~~~~~~~~~~~~~~~~~~~~~~~~~

To generate individual PDF files for each employee, click the :guilabel:`Populate` button. A line is
generated for each employee who received a payslip during the reference year.

.. note::
   The PDF files are generated automatically in batches of 30, so the process may take some time to
   complete.

Once all PDF files are generated, they can be posted to the employee documents portal if the
**Documents** application is :doc:`installed and properly configured
<../../../productivity/documents>`.

Select the employees whose documents you want to post, then click the :guilabel:`Post PDF` button.

Once posted, employees can access the PDF from their documents portal via the :icon:`fa-file-text`
:guilabel:`Documents` smart button on their profile.

Submitting the XML declaration
------------------------------

After generating the XML file, it must be submitted to the Belgian tax authorities. Ensure you are
familiar with the `official submission process
<https://finances.belgium.be/fr/E-services/Belcotaxonweb/documentation-technique>`_.

The XML files containing the fiscal data to be sent via the Belcotax-on-web (BOW) application must
be converted to the .bow format.

This conversion requires the use of a validation module available under the *Technical
Documentation* section.

The validation module has two prerequisites:

- Java 8 must be installed.
- The certificate authority that signed the validation module must be recognized.

.. _payroll/l10n_be/28145_declaration:

281.45 Declaration
==================

Introduction
------------

The Belgian fiscal declaration 281.45 is an annual statement that entities must submit to the tax
authorities, detailing the amounts of author's rights and neighboring rights paid to beneficiaries.
This declaration ensures accurate tax reporting and compliance with Belgian tax regulations.

Generating the declaration in Odoo
----------------------------------

Odoo provides a streamlined process for generating the 281.45 declaration, offering both a
comprehensive XML file for electronic submission and individual PDF files for record-keeping.

Global XML declaration
~~~~~~~~~~~~~~~~~~~~~~

To generate the global XML file in Odoo, navigate to :menuselection:`Payroll app --> Reporting -->
281.45 Sheet`.

Then, create a new record by selecting the reference :guilabel:`Year`.

.. important::
   The :guilabel:`Sending Type` and :guilabel:`Treatment Type` options are currently experimental
   and should be kept at their default values to ensure a valid original declaration.

Click the :guilabel:`Populate` button to generate the eligible employees, then click the
:guilabel:`Create XML` button. A green indicator will appear to confirm successful file generation.

Individual PDF declaration
~~~~~~~~~~~~~~~~~~~~~~~~~~

To generate individual PDF files for each employee, click the :guilabel:`Populate` button. A line
is generated for each employee who received a payslip during the reference year.

.. note::
   The PDF files are generated automatically in batches of 30, so the process may take some time to
   complete.

Once all PDF files are generated, they can be posted to the employee documents portal if the
**Documents** application is :doc:`installed and properly configured
<../../../productivity/documents>`.

Select the employees whose documents you want to post, then click the :guilabel:`Post PDF` button.

Once posted, employees can access the PDF from their documents portal via the :icon:`fa-file-text`
:guilabel:`Documents` smart button on their profile.

Submitting the XML declaration
------------------------------

After generating the XML file, it must be submitted to the Belgian tax authorities. Ensure you are
familiar with the `official submission process
<https://finances.belgium.be/fr/E-services/Belcotaxonweb/documentation-technique>`_.

The XML files containing the fiscal data to be sent via the Belcotax-on-web (BOW) application must
be converted to the :file:`.bow` format.

This conversion requires the use of a validation module available under the *Technical
Documentation* section.

The validation module has two prerequisites:

- Java 8 must be installed.
- The certificate authority that signed the validation module must be recognized.


==================================================
SECTION: commissions.rst
PATH: applications/hr/payroll/commissions.rst
==================================================


===========
Commissions
===========

Commissions are payments made to employees that are earned as part of their salary. The payments are
awarded after a sale has been made, and the amount depends on how much the sale was. Typically the
amount is either a percentage of the sale, or a set commission based on a structure created by the
company.

To pay an employee a commission they earned, a separate commission paycheck must be issued to the
employee. In Odoo, a commission payslip is referred to as a *warrant payslip*.

Create warrant payslips
=======================

Warrant payslips are generated directly from the :guilabel:`Payslips Batches` dashboard, which is
accessed by navigating to :menuselection:`Payroll app --> Payslips --> Batches`.

First, click the :guilabel:`Generate Warrant Payslips` button in the top-left corner. Doing so
reveals a :guilabel:`Generate Warrant Payslips` pop-up window, in which the necessary information
**must** be filled out.

Set the time frame the commission was earned, in the two fields next to :guilabel:`Period`. Click
into each field, and a calendar pop-up window loads. Navigate to the desired date and click on it
to select it.

Using the drop-down menu, select the :guilabel:`Department` in the corresponding field. When a
department is selected, the employees listed for that department appear in the :guilabel:`Employee`
section, below.

If a file is needed for the record, upload a file to the :guilabel:`Import File` field, such as a
sales invoice, using the :guilabel:`Upload your file` button. Any file type is accepted.

Under the :guilabel:`Employee` section, enter the individual :guilabel:`Commission Amount` for each
employee in the far-right column. To remove an employee, click the :icon:`fa-trash-o`
:guilabel:`(trash)` icon to remove the line.

Add a new commission by clicking :guilabel:`Add a Line`, and entering the :guilabel:`Employee` and
the appropriate :guilabel:`Commission Amount`.

Once all the commissions are properly entered, click the :guilabel:`Generate Payslips` button to
create the warrant payslips in a group, which is reffered to as a *pay run* in Odoo, or click
:guilabel:`Export` to export a CSV file of the commissions.

:ref:`Process the pay run <payroll/pay-run-process>` in the same way as a typical batch to complete
the payment process.

.. image:: commissions/commission-details.png
   :alt: Enter the commission details.

.. seealso::
   :doc:`Commissions <../../sales/sales/commissions>`


==================================================
SECTION: contracts.rst
PATH: applications/hr/payroll/contracts.rst
==================================================

=========
Contracts
=========

Every employee in Odoo is required to have a running contract in order to be paid. A contract
outlines the terms of an employee's position, compensation, working hours, and any other relevant
terms.

.. important::
   Contract documents (PDFs) are uploaded and organized using the **Documents** application, and are
   signed using the **Sign** application. Ensure these applications are installed to send and sign
   contracts. Please refer to the :doc:`../../productivity/documents` and
   :doc:`../../productivity/sign` documentation for more information.

.. _payroll/contract-dashboard:

Contracts dashboard
===================

Both the **Payroll** and **Employees** apps display *identical employee contract information*.

To access the contracts dashboard from the **Employees** app, navigate to :menuselection:`Employees
app --> Employees --> Contracts`. To access the contracts dashboard from the **Payroll** app,
navigate to :menuselection:`Payroll app --> Contracts --> Contracts`.

The :guilabel:`Contracts` dashboard displays all employee contracts in a default list view, grouped
by :guilabel:`Status`. The available status groupings are :guilabel:`New`, :guilabel:`Running`,
:guilabel:`Expired`, and :guilabel:`Cancelled`. Each grouping displays the number of contracts
within the grouping.

.. image:: contracts/contracts-overview.png
   :alt: Contracts dashboard view showing running contracts and contracts with issues.

.. note::
   Any changes made to contracts in the **Employees** app is reflected in the **Payroll** app, and
   vice versa. Contract information remains identical, regardless of where the contract information
   is accessed.

.. _payroll/new-contract:

Create a contract
=================

To create a new contract, click the :guilabel:`New` button on the :ref:`Contracts dashboard
<payroll/contract-dashboard>`, and a blank contract form appears.

.. _payroll/gen-info:

General information section
---------------------------

Enter the following information in the top-half of the blank contract form:

- :guilabel:`Contact Reference`: Type in the name or title for the contract, such as `John Smith
  Contract`. This field is **required**.
- :guilabel:`Employee`: Using the drop-down menu, select the employee the contract is for.
- :guilabel:`Contract Start Date`: Select the date the contract goes into effect. Contracts can be
  created retroactively, or be created to begin at a future date. The current date populates this
  required field by default, but can be modified.
- :guilabel:`Contract End Date`: If the contract has a firm end date, enter the date in this field.
  Leave this field blank if the contract runs indefinitely, or until a new contract is made (when
  the employee has a change to their job title, salary, or benefits).
- :guilabel:`Working Schedule`: Select one of the available working schedules the employee is
  expected to work, from the drop-down menu. The selected working schedule determines how :doc:`work
  entries <work_entries>` are generated, which determines the employees schedule and compensation.
  If this field is left blank, this allows the employee to work as many or as few hours as desired
  every week, with no restrictions.

  .. tip::
     The :guilabel:`Working Schedule` drop-down menu displays all the working schedules for the
     selected company. To modify or add to this list, go to :menuselection:`Payroll app -->
     Configuration --> Working Schedules`. Click :guilabel:`New`, and create a new working schedule,
     or click on an existing working schedule and make edits.

.. _payroll/work-entry-source:

- :guilabel:`Work Entry Source`: Using the drop-down menu, select how the :doc:`work entries
  <work_entries>` are generated. This field is **required**. Click the radio button next to the
  desired selection. The options are:

  - :guilabel:`Working Schedule`: Work entries are generated based on the selected
    :guilabel:`Working Schedule`.
  - :guilabel:`Attendances`: Work entries are generated based on the employee's check-in records in
    the **Attendances** app. (This requires the **Attendances** app to be installed).
  - :guilabel:`Planning`: Work entries are generated based on the planned schedule for the employee
    from the **Planning** app. (This requires the **Planning** app to be installed).

- :guilabel:`Salary Structure Type`: Select one of the salary structure types from the drop-down
  menu. The default salary structure types are :guilabel:`Employee` or :guilabel:`Worker`. A
  :ref:`new salary structure type <payroll/new-structure-type>` can be created, if needed.
- :guilabel:`Department`: Select the department the employee is working within, using the drop-down
  menu.
- :guilabel:`Job Position`: Select the employee's specific job position using the drop-down menu.

  .. note::
     If the selected :guilabel:`Job Position` has a contract template linked to it with a specific
     :guilabel:`Salary Structure Type`, the :guilabel:`Salary Structure Type` changes to the one
     associated with that :guilabel:`Job Position`.

- :guilabel:`Contract Type`: Using the drop-down menu, select the type of contract being created.
  The default options are :guilabel:`Permanent`, :guilabel:`Temporary`, :guilabel:`Seasonal`,
  :guilabel:`Full-Time`, :guilabel:`Intern`, :guilabel:`Student`, :guilabel:`Apprenticeship`,
  :guilabel:`Thesis`, :guilabel:`Statutory`, and :guilabel:`Employee`.
- :guilabel:`Wage on Payroll`: Enter the employee's monthly wage in this field.

  .. tip::
     The :guilabel:`Working Schedule` drop-down menu displays all the working times for the selected
     :guilabel:`Company`. To modify or add to this list, go to :menuselection:`Payroll app -->
     Configuration --> Working Times`, and either :guilabel:`Create` a new working time, or click on
     an existing working time, then edit it by clicking :guilabel:`Edit`.

- :guilabel:`HR Responsible`: Select the person who is responsible for validating the contract using
  the drop-down menu. This field is required.

  .. note::
     The :guilabel:`HR Responsible` field only appears if the  **Salary Configurator**
     (`hr_contract_salary`) module and the **Sign** app are both installed.

.. figure:: contracts/required-fields.png
   :alt: New contract form to be filled in when creating a new contract.

Salary information tab
----------------------

The :guilabel:`Salary Information` tab is where the specific details of how much and how often the
employee is paid. Fill in the following fields in this tab:

- :guilabel:`Wage Type`: Using the drop-down menu, select what kind of pay the employee receives.
  The two default options are :guilabel:`Fixed Wage` or :guilabel:`Hourly Wage`. Select
  :guilabel:`Fixed Wage` for salaried employees, and select :guilabel:`Hourly Wage` for employees
  who are paid based on their logged worked hours.
- :guilabel:`Schedule Pay`: Using the drop-down menu, select how often the employee is paid. The
  default options are :guilabel:`Annually`, :guilabel:`Semi-annually`, :guilabel:`Quarterly`,
  :guilabel:`Bi-monthly`, :guilabel:`Monthly`, :guilabel:`Semi-monthly`,  :guilabel:`Bi-weekly`,
  :guilabel:`Weekly`, or :guilabel:`Daily`.
- :guilabel:`Wage`: Enter the amount the employee receives each pay period. The first field allows
  for a wage to be entered, the second field displays how often the pay is issued to the employee.
  The second field *cannot* be modified, and is updated when the :guilabel:`Schedule Pay` field
  changes.
- :guilabel:`Yearly Cost (Real)`: This field automatically updates after the :guilabel:`Schedule
  Pay` and :guilabel:`Wage` fields are entered. This amount is the total yearly cost for the
  employer. This field can be modified. However, if this is modified, the :guilabel:`Wage` field
  updates, accordingly. Ensure both the :guilabel:`Wage` and :guilabel:`Yearly Cost (Real)` are
  correct if this field is modified.
- :guilabel:`Monthly Cost (Real)`: This field automatically updates after the :guilabel:`Schedule
  Pay` and :guilabel:`Wage` fields are entered. This amount is the total monthly cost for the
  employer. This field **cannot** be modified, and is calculated based on the :guilabel:`Yearly Cost
  (Real)`.

.. figure:: contracts/salary-info.png
   :alt: The Salary Information tab filled out.

Details tab
-----------

The :guilabel:`Details` tab of the contract houses the contract template information, accounting
information (refer to the :doc:`country-specific localization document <payroll_localizations>` for
more information), any part time work information, and notes. Fill out the following fields in this
tab:

- :guilabel:`Contract Template`: Using the drop-down menu, select a :ref:`contract template
  <payroll/contract-template>` to use when making an offer to an applicant.
- :guilabel:`Originated Offer`: This field automatically populates with the original offer sent to
  the employee. This field is **not** modifiable, and is only populated if applicable.
- :guilabel:`Part Time`: Tick the checkbox if the contract is for part time work. Once enabled, a
  percentage field appears next to the checkbox. The percentage **cannot** be modified, and
  automatically updates based on the selected :guilabel:`Working Schedule` in the top-half of the
  contract, compared to the typical working schedule for the company (typically 40 hours/week).


  - :guilabel:`Standard Calendar`: This field is automatically populated with the default working
    schedule for the company. In most cases, this is :guilabel:`Standard 40 hours/week`.
  - :guilabel:`Part Time Work Entry Type`: Using the drop-down menu, select the work entry type that
    generates the balance of a full-time working schedule.

  .. example::
     An employee contract is being created for a part-time employee who works 20 hours a week.

     To configure this, the employee's :guilabel:`Working Schedule` is set to :guilabel:`20
     Hours/Part time` in the :ref:`general information section <payroll/gen-info>`. In the
     :guilabel:`Details` tab, the :guilabel:`Part Time` checkbox is ticked, and the percentage is
     set to `50`. The :guilabel:`Standard Calendar` is set to :guilabel:`Standard 40 hours/week`,
     and the :guilabel:`Part Time Work Entry Type` is set to :guilabel:`Unpaid`.

     When a typical work week is processed in the **Payroll** app, the employee generates twenty
     (20) hours of regular work entries under the work entry type `Attendance`, and another twenty
     (20) hours of work entries under the work entry type `Unpaid`, for a total of forty (40) hours
     worth of work entries.

- :guilabel:`Notes`: Enter any relevant notes for the contract in this field.

.. figure:: contracts/details-tab.png
   :alt: The Details tab filled out.

Signatories tab
---------------

The :guilabel:`Signatories` tab is where the default contract templates are selected, for both new
and updated contracts.

Using the drop-down menu, select the default contract template to use when creating a new or updated
contract, in the respective fields.

Once a PDF template is selected, any mapped signature fields in the file appear in a list, below the
selection, identifying who must sign the document. These fields **cannot** be updated.

Any changes to the template and signatories but be done in the **Sign** app, where contract
templates are uploaded, modified, and stored.

.. important::
   The :guilabel:`PDF Template` fields are only visible if the **Sign** app is installed, along with
   the :guilabel:`hr_contract_salary` and :guilabel:`hr_contract_salary_payroll` :doc:`modules
   <../../general/apps_modules>`.

.. figure:: contracts/signatories.png
   :alt: The Signatories tab with the roles specified for signing.

Personal documents tab
----------------------

Occasionally, additional paperwork may be required when creating a contract, such as legal documents
declaring the employee is able to work in the country. When this situation occurs, Odoo allows for
one image file of the necessary document to be attached to a contract in the :guilabel:`Personal
Documents` tab.

Click the :guilabel:`Upload your file` button, navigate to the desired document, and click
:guilabel:`Select` to attach the file to the contract. The file name appears on the
:guilabel:`Image` line.

.. note::
   This tab **only** appears after an :guilabel:`Employee` is selected. Additionally, only image
   files can be attached in this field at this time.

Salary attachments
------------------

After an employee is selected for the contract, a :icon:`fa-book` :guilabel:`Salary Attachments`
smart button appears at the top of the page.

For new employees who do not currently have a contract, the smart button displays :guilabel:`New`.
If the contract is being updated for a current employee who already has salary attachments
configured, the smart button displays the number of salary attachments currently running.

:doc:`Create or update any necessary salary attachments <salary_attachments>` for the contract,
before sending.

Send a contract
===============

After a contract has been created and configured, the next step is to send it to the employee or
applicant. Click the :guilabel:`Generate Offer` button, and the :guilabel:`Offer for (Employee)`
form loads.

The :guilabel:`Offer for (Employee)` form displays all the basic information from the contract, as
well as a link the employee can use to sign the contract. The last field on the form is a
:guilabel:`Validity Days Count` field. This indicates how long the offer is valid. Enter the desired
number of days in the field. The default is `30` days.

Click :guilabel:`Send By Email` and a pop-up email window loads, using a preconfigured default email
template. Click :guilabel:`Send` to send the offer.

.. Important::
   In order to send a contract using the :guilabel:`Generate Offer` button, there **must** be an
   employee signature field on the contract PDF being sent.

.. image:: contracts/send-contract.png
   :alt: Send the contract to the employee via one of the buttons.

Contract status
===============

When creating and sending out a contract, the default status of the contract is :guilabel:`New`.

Once there is a minimum of one completed signature on the document, the status changes to
:guilabel:`Partially Signed`. Internal users, such as HR and recruitment employees, are alerted in
the database when there is a signature requested of them.

After all required parties have signed the contract, the status changes to :guilabel:`Fully Signed`.

All status changes happen automatically as the document is signed.

.. _payroll/contract-template:

Contract templates
==================

Contract *templates* eliminate the need to configure new contracts every time an employee is
hired.

Having multiple contract templates allows for faster contract creation for different types of
employment positions that are commonly filled, such as full time, part time, seasonal, etc.

Contract templates are created through the **Payroll** app configuration menu, and stored in the
**Documents** app.

.. important::
   To access contract templates, the **Salary Configurator** (`hr_contract_salary`) module **must**
   be :ref:`installed <general/install>`.

To view all contract templates, navigate to :menuselection:`Payroll app --> Configuration -->
Templates`.

The :guilabel:`Contract Templates` page lists all existing templates. Click a template line to open
and edit it.

To create a new contract template, click the :guilabel:`New` button. Then, enter the following
information on the blank contract template form that appears:

- :guilabel:`Contract Reference`: Enter a brief description for the template. This should be clear
  and easily understood, as this name appears in the **Recruitment** application, as well.
- :guilabel:`Working Schedule`: Select the desired working schedule the contract applies to from the
  drop-down menu. If a new working schedule is needed, create a :ref:`new working schedule
  <payroll/new-working-schedule>`.
- :guilabel:`Work Entry Source`: Select :ref:`how the work entries are generated
  <payroll/work-entry-source>`.
- :guilabel:`Salary Structure Type`: Select the :ref:`salary structure type
  <payroll/structure-types>` from the drop-down menu.
- :guilabel:`Department`: Select the department the contract template applies to from the drop-down
  menu. If blank, the template applies to all departments.
- :guilabel:`Job Position`: Select the :doc:`job position <../recruitment/new_job>` the contract
  template applies to from the drop-down menu. If blank, the template applies to all job positions.
- :guilabel:`Contract Type`: Select the type of contract from the drop-down menu. This list is the
  same as the *employment type*.
- :guilabel:`Wage on Payroll`: Enter the monthly wage in the field.
- :guilabel:`HR Responsible`: Select the employee responsible for validating contracts, using this
  template, from the drop-down menu.

.. image:: contracts/contract-template.png
   :alt: A new contract template form, with the fields filled in.

Salary information tab
----------------------

- :guilabel:`Wage Type`: Select either :guilabel:`Fixed Wage` or :guilabel:`Hourly Wage` from the
  drop-down menu.
- :guilabel:`Schedule Pay`: Using the drop-down menu, select how often the employee is paid. Options
  include :guilabel:`Annually`, :guilabel:`Semi-annually`, :guilabel:`Quarterly`,
  :guilabel:`Bi-monthly`, :guilabel:`Monthly`, :guilabel:`Semi-monthly`, :guilabel:`Bi-weekly`,
  :guilabel:`Weekly`, or :guilabel:`Daily`.
- :guilabel:`Wage`: Enter the gross wage. The time period presented in this field is based on what
  is selected for the :guilabel:`Scheduled Pay` field. It is recommended to populate the
  :guilabel:`Yearly Cost (Real)` field *first*, since that entry updates this field automatically.
- :guilabel:`Yearly Cost (Real)`: Enter the total yearly cost the employee costs the employer. When
  this value is entered, the :guilabel:`Monthly Cost (Real)` is automatically updated.
- :guilabel:`Monthly Cost (Real)`: This field is **not** editable. The value is automatically
  populated after the :guilabel:`Yearly Cost (Real)` is entered.

.. important::
   The :guilabel:`Schedule Pay`, :guilabel:`Wage`, and :guilabel:`Yearly Cost (Real)` fields are all
   linked. If any of these fields are updated, the other two fields automatically update to reflect
   the change. It is best practice to check these three fields if any modifications have been made,
   to ensure they are accurate.

.. image:: contracts/salary-information.png
   :alt: The salary information tab, with the fields filled in.

Benefits and deductions
~~~~~~~~~~~~~~~~~~~~~~~

Depending on the :doc:`payroll localization <payroll_localizations>` for the company, the entries
presented in this section either vary, or may not appear at all. For example, some entries may
pertain to retirement accounts, health insurance benefits, and commuter benefits.

Enter the monetary amounts or percentages to specify how much of the employee's salary goes to the
various benefits and deductions.

Signatories tab
---------------

This tab outlines which documents the employee must sign to either accept a new offer or an updated
contract.

- :guilabel:`New Contract PDF Template`: Select the default document that a new employee has to sign
  to accept an offer.
- :guilabel:`Contract Update PDF Template`: Select the default document that a current employee has
  to sign to update their contract.

.. seealso::
   - :doc:`../../productivity/documents`
   - :doc:`../../productivity/sign`


==================================================
SECTION: egypt.rst
PATH: applications/hr/payroll/payroll_localizations/egypt.rst
==================================================

=====
Egypt
=====

The Egypt **Payroll** localization package enables payroll processing that fully complies with
Egyptian labor laws. It calculates progressive income tax, employee- and employer-paid social
security, and core salary components, including housing and transportation allowances.

Configuration
=============

:ref:`Install <general/install>` the following modules to get all the features of the Egypt
**Payroll** localization:

.. list-table::
   :header-rows: 1

   * - Name
     - Technical name
     - Description
   * - :guilabel:`Egypt - Payroll`
     - `l10n_eg_hr_payroll`
     - Payroll module includes all salary rules, leave logic, and compensation rules compliant with
       Egyptian Labor Law.
   * - :guilabel:`Egypt - Payroll with Accounting`
     - `l10n_eg_hr_payroll_account`
     - Adds account mappings related to payroll calculations.

.. seealso::
   :doc:`Egypt fiscal localization documentation <../../../finance/fiscal_localizations/egypt>`

Egyptian employee contracts
===========================

Once an employee has been :doc:`created in the database <../../employees/new_employee>`, a
:ref:`contract must be created <payroll/new-contract>`.

To check if the user already has a contract, navigate to the **Employees** app, then click on the
employee's Kanban card. The :icon:`fa-book` :guilabel:`Contracts` smart button displays a red zero
when no contract exists. Otherwise, it displays :guilabel:`In contract since (contract start date)`
in green.

.. note::
   Contracts can also be found by navigating to :menuselection:`Employees app --> Employees -->
   Contracts`. All contracts appear in a list view, grouped by status.

Populate the following contractual information in the :guilabel:`Salary Information` tab of the
contract:

- :guilabel:`Social Insurance Reference Amount`: Used as the base amount for calculating the
  :ref:`social insurance employee and employer portions
  <payroll/payroll_localizations/social-insurance>`.
- :guilabel:`Number of Leave Days`: Used for calculating the :ref:`provision amount for the annual
  leave for the employee <payroll/payroll_localizations/provisions>`.
- :guilabel:`Provision Number of Days`: Corresponds with the number of days used in the calculation
  of the :ref:`provision value of the end of service for the employee
  <payroll/payroll_localizations/provisions>`.
- :guilabel:`Total Number of Days`: Refers to the number of days used to calculate the
  :ref:`end-of-service benefit paid to the employee when their employment with the company ends
  <payroll/payroll_localizations/end-of-service>`.

.. _payroll/payroll_localizations/social-insurance:

Social insurance
================

Social insurance rules calculate the contribution amounts that are to be paid by the employer and
employee to the :abbr:`NOSI (National Organization for Social Insurance)`. This is only available
for Egyptian employees.

The employer contributes 18.75% of the social insurance reference amount for the employee. On the
other hand, the employee contributes 11% of their insurance reference amount, and that amount gets
deducted from the payslip amount.

.. important::
   The social insurance reference amount is set per employee in their contracts.

Leaves
======

The following leave types are available to employees working in Egypt: :ref:`Annual leave
<payroll/payroll_localizations/annual>`, :ref:`Sick leave <payroll/payroll_localizations/sick>`,
:ref:`Unpaid leave <payroll/payroll_localizations/unpaid>`, and :ref:`Other leave types
<payroll/payroll_localizations/other>`.

.. _payroll/payroll_localizations/annual:

Annual leave
------------

Employees are eligible for 21 days of annual leave, and if the employee requires more days, they
have to be :ref:`requested from HR managers <time_off/request-allocation>` accordingly.

.. important::
   Since the annual leave is fully paid, it is not connected to a salary rule, but it will appear on
   the worked days on the payslip form and on the PDF printout.

.. _payroll/payroll_localizations/sick:

Sick leave
----------

Three cases exist for sick leaves in terms of the amount to be deducted from the employee:

- :guilabel:`Fully paid`: first 30 calendar days each year (affects only working entries; no payroll
  deduction).

  **Payroll computation** =(Daily Wage)

- :guilabel:`75% paid`: next 60 days; payroll rule deducts 25% of an employee's salary.

  **Payroll computation** =(Daily Wage * 0.25)

- :guilabel:`0% paid`: after 90 days; payroll rule deducts 100% of an employee's salary.

  **Payroll computation** =(Daily Wage * 0.00)

.. _payroll/payroll_localizations/unpaid:

Unpaid leave
------------

Deductions are applied on the employee's salary based on the number of unpaid leave days taken, and
it is calculated by dividing the monthly salary for the employee by 30 to get the daily salary and
then multiplying it by the number of unpaid leave days taken.

.. _payroll/payroll_localizations/other:

Other leave types
-----------------

These are leave types considered fully paid and do not affect the end payslip, but are tracked in
the working entries:

- Maternity leave
- Hajj leave
- Death leave

Income tax
==========

In Egypt, employees are subject to a progressive income tax system, where tax rates increase with
higher annual income brackets.

Tax brackets
------------

Depending on the annual income of the employee, the following rates apply:

.. list-table::
   :header-rows: 1
   :stub-columns: 1

   * - Taxable Amount
     - <600k
     - 600k - 699k
     - 700k - 799k
     - 800k - 899k
     - 900k - 1.2M
     - >1.2M
   * - 0%
     - 1-40k
     - -
     - -
     - -
     - -
     - -
   * - 10%
     - More than 40k to 55k
     - 1 - 55k
     - -
     - -
     - -
     - -
   * - 15%
     - More than 55k to 70k
     - More than 55k to 70k
     - 1 - 70k
     - -
     - -
     - -
   * - 20%
     - More than 70k to 200k
     - More than 70k to 200k
     - More than 70k to 200k
     - 1 - 200k
     - -
     - -
   * - 22.5%
     - More than 200k to 400k
     - More than 200k to 400k
     - More than 200k to 400k
     - More than 200k to 400k
     - 1 - 400k
     - -
   * - 25%
     - More than 400k
     - More than 400k
     - More than 400k
     - More than 400k
     - More than 400k
     - 1 - 1.2M
   * - 27.5%
     - -
     - -
     - -
     - -
     - -
     - More than 1.2M

Exemptions
----------

Employees are eligible to an EGP 20,000 personal exception on their gross income.

Overtime
========

Depending on the time of day and the time at which the overtime is recorded in, the additional
amount to be paid to the employee can be as follows:

- During daytime hours on working days, the amount is 1.35x times the employee's hourly wage.
- During nighttime hours on working days, the amount is 1.70x times the employee's hourly wage.
- On rest days and public holidays: The amount is 2.0x times the employee's hourly wage.

.. note::
   Overtime hours are registered as other inputs directly on payslips.

.. _payroll/payroll_localizations/provisions:

Provisions
==========

Provisions are the amounts computed by the employer to account for the payments made to the employee
for :abbr:`EOS (end-of-service)` benefits or annual leave. And it is computed on a monthly basis.

End of service benefit provision
--------------------------------

It is computed by dividing the end of service Provision Number of Days by 12 and multiplying the
result by the daily salary for the employee.

.. math::
   :class: overflow-scroll

   \text{Payroll computation} = \frac{\text{Provision Number of Days}}{12} \times \frac{\text{Wage} + \text{Allowances}}{30}

Annual leave provision
----------------------

It is computed by dividing the number of leave days by 12 and multiplying the result by the daily
salary for the employee.

.. math::
   :class: overflow-scroll

   \text{Payroll computation} = \frac{\text{Number of Leave Days}}{12} \times \frac{\text{Wage} + \text{Allowances}}{30}

.. _payroll/payroll_localizations/end-of-service:

End of service
==============

At the end of the service slip that is generated for the employee, there are the following points
that are unique only to the payslip:

Unused leaves compensation
--------------------------

The number of available annual leaves is shown on the employee's record. It is based on the annual
leave type defined in the Payroll settings. It is calculated as the total remaining allocations for
that specific leave type assigned to the employee.

That number is then multiplied by the daily rate for the employee and added as an allowance on their
payslip.

End of service benefit
----------------------

It is calculated by multiplying the daily wage of the employee by the number of days for the end of
service that is set in the employee's contract.

.. math::
   :class: overflow-scroll

   \text{Payroll computation} = \frac{\text{Wage + Allowances}}{30} \times \text{End of Service Number of Days}

Out of contract
===============

Out-of-contract days are the days that fall within the payslip period but are not included in the
employee's contract period. The corresponding amount is added as a deduction on the payslip and is
calculated by multiplying the number of out-of-contract days by the employee's daily wage.

.. math::
   :class: overflow-scroll

   \text{Payroll computation} = \frac{\text Wage + Allowances}{\text{Days in the Month}} \times \text{Out of Contract Days}


==================================================
SECTION: employment_hero.rst
PATH: applications/hr/payroll/payroll_localizations/employment_hero.rst
==================================================

=======================
Employment Hero Payroll
=======================

The `Employment Hero <https://employmenthero.com/>`_ module synchronises payslip accounting entries
(e.g., expenses, social charges, liabilities, taxes) automatically from Employment Hero to Odoo.
Payroll administration is still done in Employment Hero, but the **journal entries** are done in
Odoo.

.. important::
   KeyPay was rebranded as **Employment Hero** in March 2023.

.. _employment_hero/configuration:

Configuration
-------------

#. :ref:`Activate <general/install>` the :guilabel:`Employment Hero Payroll` module
   (`l10n_employment_hero`).
#. Configure the **Employment Hero API** by going to :menuselection:`Accounting --> Configuration
   --> Settings`. More fields become visible after clicking on :guilabel:`Enable Employment Hero
   Integration`.

   .. image:: employment_hero/employment-hero-integration.png
      :alt: Enabling Employment Hero Integration in Odoo Accounting displays new fields in the
            settings

   - The API Key can be found in the :guilabel:`My Account` section of the Employment Hero platform.

     .. image:: employment_hero/employment-hero-myaccount.png
        :alt: "Account Details" section on the Employment Hero dashboard

   - The **Payroll URL** is left empty by default to avoid any confusion. Please fill it according
     to the documentation specific to the localization.

     .. note::
        Employment hero is available for :ref:`Australia <payroll/l10n_au/employment-hero>`,
        :ref:`Malaysia <malaysia/employment-hero>`,
        :ref:`New Zealand <new-zealand/employment-hero>`,
        :ref:`Singapore <singapore/employment-hero>`,
        and the :ref:`United Kingdom <localization/united-kingdom/employment-hero>`.

   - The **Business ID** can be found in the Employment Hero URL. (i.e., `189241`)

     .. image:: employment_hero/employment-hero-business-id.png
        :alt: The Employment Hero Business ID number is in the URL

   - Choose any Odoo journal to post the payslip entries.
#. Configure the tax by going to :menuselection:`Accounting --> Configuration --> Taxes`. Create the
   necessary taxes for the Employment Hero payslip entries. Fill in the tax code from
   **Employment Hero** in the :guilabel:`Matching Employment Hero Tax` field.

How does the API work?
----------------------

The API syncs the journal entries from Employment Hero to Odoo and leaves them in draft mode. The
reference includes the Employment Hero payslip entry ID in brackets for the user to easily retrieve
the same record in Employment Hero and Odoo.

.. image:: employment_hero/employment-hero-journal-entry.png
   :alt: Example of a Employment Hero Journal Entry in Odoo Accounting (Australia)

By default, the synchronisation happens once per week. The records can be fetched manually by going
to :menuselection:`Accounting --> Configuration --> Settings` and, in the :guilabel:`Enable
Employment Hero Integration` option, click on :guilabel:`Fetch Payruns Manually`.

Employment Hero payslip entries also work based on double-entry bookkeeping.

The accounts used by Employment Hero are defined in the section :guilabel:`Payroll settings`.

.. image:: employment_hero/employment-hero-chart-of-accounts.png
   :alt: Chart of Accounts menu in Employment Hero

For the API to work, create the same accounts as the default accounts of the Employment Hero
business (**same name and same code**) in Odoo. The correct account types must be chosen in Odoo to
generate accurate financial reports.


==================================================
SECTION: headcount.rst
PATH: applications/hr/payroll/headcount.rst
==================================================

================
Headcount report
================

The *Headcount report* in the **Payroll** app shows the number of employees on payroll and allows
headcount comparisons between different periods of time.

Create a headcount report
=========================

Create a headcount report to see the number of employees at a specific time or compare headcounts
across periods.

To create a headcount report, navigate to :menuselection:`Payroll app --> Reporting --> Headcount`
and click :guilabel:`New`.

- Report name: generated automatically as `Headcount for (Company Name) on the (YYYY-MM-DD)` and
  **cannot** be modified.
- :guilabel:`Company`: populated automatically (works in both single and multi-company databases)
- :guilabel:`From`/:guilabel:`To` dates: defaults to current date (from) and blank (to). Adjust
  these to define the period to analyze.

.. image:: headcount/new-headcount.png
   :alt: A headcount report form filled out for the third quarter of 2025.

Next, click :guilabel:`Populate` to generate the report.

At the top of the form, a :icon:`fa-people` :guilabel:`Employees` smart button appears. Clicking the
button displays the total number of employees for the selected period.

View all headcount reports
==========================

See how the company headcount has changed over time by viewing all headcount reports in a list view.

To view all headcount reports, navigate to :menuselection:`Payroll app --> Reporting --> Headcount`.

View employees in a headcount
-----------------------------

TO get an overall view of employees and their salary impact on the company, view all employee
records of a specific headcount report.

To view the employees of a specific headcount report, click the :icon:`fa-people`
:guilabel:`Employees` smart button at the top of a headcount report.

All employees from the headcount appear in a list view, grouped by :guilabel:`Department`.

-  :guilabel:`Employee`: the employee's full name
-  :guilabel:`Department`: the department their job position is in
-  :guilabel:`Job Title`: their role
-  :guilabel:`Employer Cost`: how much the company pays the employee each pay-period
- :guilabel:`Wage on Payroll`: the dollar amount on payroll reports


==================================================
SECTION: hong_kong.rst
PATH: applications/hr/payroll/payroll_localizations/hong_kong.rst
==================================================

=========
Hong Kong
=========

.. _payroll/l10n_hk/payroll:

.. important::
   Ensure the :guilabel:`Hong Kong - Payroll` (`l10n_hk_hr_payroll`) module is installed before
   proceeding.

.. _payroll/l10n_hk/create_employees:

Create employees
================

Go to the :menuselection:`Employees` app and click :guilabel:`New`. Then, configure the following
fields:

- Under the :guilabel:`Work Information` tab

  - :guilabel:`Working Hours`: :guilabel:`HK Standard 40 hours/week` option **must** be selected.

- Under the :guilabel:`Private Information` tab

  - :guilabel:`Surname, Given Name, Name in Chinese`: name of the employee.
  - :guilabel:`Private Address`: address of the employee.
  - :guilabel:`Bank Account Number`: employee's bank account number.
  - :guilabel:`Current Rental`: employee's rental records (if rental allowance is applicable).
  - :guilabel:`Autopay Type`: :guilabel:`BBAN`, :guilabel:`SVID`, :guilabel:`EMAL`, etc.
  - :guilabel:`Autopay Reference`: autopay reference number.
  - :guilabel:`Identification No`: HKID of the employee.
  - :guilabel:`Gender`: gender of the employee.

  .. important::
     For the :guilabel:`Bank Account Number`, this account should be set as :guilabel:`Trusted`
     before further processing.

     To achieve this, click on the right-arrow button next to :guilabel:`Bank Account Number` field.
     Set the :guilabel:`Send Money` to :guilabel:`Trusted` by clicking on the toggle.

  .. note::
     To populate the :guilabel:`Current Rental`, click on the :guilabel:`History` button.
     Then, click on :guilabel:`New`. Fill in the relevant details and save the rental record. Upon
     saving the record, the rental contract :guilabel:`state` will be visible (at the top-right
     corner) and can be set to :guilabel:`Running`.

- Under the :guilabel:`HR Settings` tab:

  - :guilabel:`Volunteer Contribution Option`: select either :guilabel:`Only Mandatory
    Contribution`, :guilabel:`With Fixed %VC`, or :guilabel:`Cap 5% VC`.
  - :guilabel:`MPF Manulife Account`: account number, if applicable.

.. _payroll/l10n_hk/manage_contracts:

Manage contracts
================

Once the new employee has been created, click the :guilabel:`Contracts` smart button on the
employee record, or navigate to :menuselection:`Employees app --> Employees --> Contracts`.

.. note::
   Only **one** contract can be active simultaneously per employee, but an employee can be assigned
   consecutive contracts during their employment.

The following are critical for setting up a contract:

- :guilabel:`Salary Structure Type`: set as :guilabel:`CAP57: Hong Kong Employee`.
- :guilabel:`Contract Start Date`: start date of employment.
- :guilabel:`Working Schedule`: set as :guilabel:`HK Standard 40 hours/week` (from employee record).
- :guilabel:`Work Entry Source`: select either :guilabel:`Working Schedule`, :guilabel:`Attendances`
  or :guilabel:`Planning`. This field determines how the work entries are accounted for in the
  payslip.

  - :guilabel:`Working Schedule`: the work entries are generated automatically based on the
    employee's working schedule.
  - :guilabel:`Attendances`: the work entries are generated based on the check-in/out period logged
    in the *Attendances*.
  - :guilabel:`Planning`: the work entries are generated from planning shifts only.

- Under the :guilabel:`Salary Information` tab

  - :guilabel:`Wage Type`: select :guilabel:`Fixed Wage` for Full-time or Part-time employees, or
    :guilabel:`Hourly Wage` for employees who are paid hourly.
  - :guilabel:`Schedule Pay`: the frequency of payslip issuance.
  - :guilabel:`Wage`: :guilabel:`Monthly` or :guilabel:`Hourly` depending on the :guilabel:`Wage
    Type`.
  - :guilabel:`Internet Subscription`: this is an **optional** field to provide additional internet
    allowance on top of the current salary package.

.. important::
   Timesheets do **not** impact work entries in Odoo.

Once all information has been setup, set the contract status to :guilabel:`Running` by clicking the
:guilabel:`Running` button in the top-right of the page.

.. image:: hong_kong/hk-contract.png
   :alt: Hong Kong employment contract.

.. _payroll/l10n_hk/running_payslips:

Generate payslips
=================

Once the employees, and their contracts, are configured, payslips can be generated in the *Payroll*
app.

Odoo provides **four** different salary structures under CAP57 regulation:

#. :guilabel:`CAP57: Employees Monthly Pay`: to process the monthly employee salary.
#. :guilabel:`CAP57: Payment in Lieu of Notice`: to process final payment upon contract termination
   using :abbr:`ADW (Average Daily Wage)`.
#. :guilabel:`CAP57: Long Service Payment`: applicable to employees with more than five years of
   service upon contract termination.
#. :guilabel:`CAP57: Severance Payment`: applicable to employees with more than two years of service
   upon contract termination.

Before running the payslips, the accounts used in the salary rule can be adjusted by navigating to
:menuselection:`Payroll app --> Configuration --> Rules`.

.. image:: hong_kong/hk-salary-rules.png
   :alt: Hong Kong Salary Rules.

Odoo can create pay runs in two ways: via :ref:`batch <payroll/l10n_hk/batch_payslips>` or
:ref:`individual <payroll/l10n_hk/individual_payslips>` payslips.

.. _payroll/l10n_hk/batch_payslips:

Batch payslips
--------------

This method of payslip generation is used for recurring payments, since multiple employee payslips
can be managed at once. Go to :menuselection:`Payroll app --> Payslips --> Batches`.

#. Click on :guilabel:`New`.
#. Enter a :guilabel:`Batch Name` (e.g. `2024 - Jan`) and :guilabel:`Period` (e.g. `01/01/2024` -
   `01/31/2024`).
#. Click on :guilabel:`Generate Payslips`.
#. Choose which :guilabel:`Salary Structure` to use for this batch. The department filter allows the
   batch to only apply to a specific group of employees.
#. Click on :guilabel:`Generate`.
#. A :guilabel:`Payslips` smart button is created automatically.

Next, click :guilabel:`Create Draft Entry` to generate a draft journal entry found in the
:guilabel:`Other Info` tab of each payslip. A :guilabel:`Confirmation` pop-up window appears asking
:guilabel:`Are you sure you want to proceed?`. Click :guilabel:`Ok` to create the journal entries.

.. _payroll/l10n_hk/individual_payslips:

Individual payslips
-------------------

Go to :menuselection:`Payroll app --> Payslips --> All Payslips`.

This method of payslip generation is commonly used to handle non-recurring payments (e.g.
:guilabel:`CAP57: Payment in Lieu of Notice`, :guilabel:`CAP57: Long Service Payment` or
:guilabel:`CAP57: Severance Payment`).

#. Click on :guilabel:`New`.
#. Select an :guilabel:`Employee`. When selected, the :guilabel:`Contract` is filled out
   automatically.
#. Add a pay :guilabel:`Period`.
#. Select a salary :guilabel:`Structure` (e.g. :guilabel:`CAP57: Employees Monthly Pay`).
#. The :guilabel:`Worked Days & Inputs` tab automatically compute the worked days/hours and time off
   leaves that are applicable.
#. Additional payslip items can be added at this time (e.g. :guilabel:`Commissions`,
   :guilabel:`Deductions`) under the :guilabel:`Other Inputs` section.
#. Click on :guilabel:`Compute Sheet` button to generate the payslip lines. This button updates
   the :guilabel:`Salary Computation` tab.

.. note::
   If the work entry for an employee was amended, click the :icon:`fa-cog` :guilabel:`(gear)` icon,
   then click :guilabel:`Recompute Whole Sheet` to refresh the payslip's :guilabel:`Worked Days &
   Inputs` tab.

The :guilabel:`Salary Computation` tab shows the detailed breakdown of the computation, based on
the salary rules configured for each structure type.

#. :guilabel:`Rent Allowance`: amount derived from the employee's active rental record.
#. :guilabel:`Basic Salary`: amount of base salary provided (after rent allowance deduction).
#. :guilabel:`713 Gross`: net payable amount considering *Commission*, *Internet Allowance*,
   *Reimbursements*, *Back-pay*, *Deduction*, etc.
#. :guilabel:`MPF Gross`: net payable amount from 713 gross after consideration of additional
   allowances, deductions, and end-of-year payment.
#. :guilabel:`Employee Mandatory Contribution`: employee MPF Contribution.
#. :guilabel:`Employer Mandatory Contribution`: employer MPF Contribution.
#. :guilabel:`Gross`: net payable amount from MPF gross after consideration of MPF deductions.
#. :guilabel:`Net Salary`: final payable amount to be paid to the employee.

.. important::
   There are no MPF contributions for the first month. Both employee and employer contribution
   starts on second month.

.. image:: hong_kong/hk-salary-computation.png
   :alt: Hong Kong Salary computation.

Under the :guilabel:`Other Inputs` section in :guilabel:`Worked Days & Inputs` tab, there are
additional manual input types:

- :guilabel:`Back Pay`: additional salary payout can be included under this category.
- :guilabel:`Commission`: the commission earned during the period can be manually entered here.
- :guilabel:`Global Deduction`: a lump-sum deduction from the entire payslip.
- :guilabel:`Global Reimbursement`: a lump-sum reimbursement to the entire payslip.
- :guilabel:`Referral Fee`: the additional bonus offered for any form of business-related referral.
- :guilabel:`Moving Daily Wage`: to override the :abbr:`ADW (Average Daily Wage)` value used for
  leaves computation.
- :guilabel:`Skip Rent Allowance`: if set, the rental allowance is excluded from the current
  payslip.
- :guilabel:`Custom Average Monthly Salary`: to override the average monthly salary used for
  end-of-year payment (rule is only applicable to payslips generated in December).
- :guilabel:`Lieu of Notice Period (Months)`: only applicable to :guilabel:`CAP57: Payment in Lieu
  of Notice` salary structure. By default, the final payout is set as 1-month. Use the
  :guilabel:`Count` field under the :guilabel:`Other Inputs` section to set a different notice
  period duration.

Once the payslips are ready, click on :guilabel:`Compute Sheet`, followed by :guilabel:`Create Draft
entry` to generate a draft journal entry found in the :guilabel:`Other Info` tab of the payslip.

Pay employees
=============

Once the draft journal entries have been posted, the company can now pay the employees. The user can
choose between **two** different *payment methods*:

- From the employee's payslip (:menuselection:`Payroll app --> Payslips --> All Payslips`), once the
  payslip's journal entry has been posted, click :guilabel:`Register Payment`. The process is the
  same as :doc:`paying vendor bills <../../../finance/accounting/payments>`. Select the desired bank
  journal and payment method, then later reconcile the payment with the corresponding bank statement.
- For batch payments (:menuselection:`Payroll app --> Payslips --> Batches`), once all draft journal
  entries from the batch are confirmed, click :guilabel:`Mark as Paid` to post the payment journal
  entry. Then :doc:`create a payment <../../../finance/accounting/payments>` in the *Accounting* app,
  and reconcile accordingly.

Attendances and hourly wage
===========================

To configure the contract for an employee paid hourly using the *Attendances* app for hours
tracking, navigate to :menuselection:`Payroll app --> Contracts --> Contracts`.
Create a new :ref:`contract <payroll/l10n_hk/manage_contracts>`. It is important to remember to set the
:guilabel:`Work Entry Source` as :guilabel:`Attendances`, and :guilabel:`Wage Type` as
:guilabel:`Hourly Wage`.

To record the hours logged by the employee using *Attendances* app:

#. Go to :menuselection:`Attendances app`.
#. The employee can check-in/out, via the kiosk mode and the time will be logged automatically.
#. In the :menuselection:`Payroll app`, review the attendance work entries generated from
   :menuselection:`Payroll app --> Work Entries --> Work Entries`.
#. Next, generate the :ref:`payslips <payroll/l10n_hk/running_payslips>` and process the payment.

.. image:: hong_kong/hk-attendance-work-entry.png
   :alt: Hong Kong Attendance Work Entry.

.. image:: hong_kong/hk-attendance-payslip.png
   :alt: Hong Kong Attendance Payslip.

Time Off with Payroll
=====================

The work entry types and time off types are fully integrated between the *Time Off* and
*Payroll* apps. There are several default time off types and work entry types specific to
Hong Kong which are installed automatically along with the *Hong Kong - Payroll* module.

Go to :menuselection:`Payroll app --> Configuration --> Work Entry Types` and click :guilabel:`New`.

There are two checkboxes to be considered when setting up the work entry type:

- :guilabel:`Use 713`: Include this leave type as part of 713 computation.
- :guilabel:`Non-full pay`: 80% of the :abbr:`ADW (Average Daily Wage)`.

.. image:: hong_kong/hk-work-entry-type.png
   :alt: Hong Kong Work Entry Type.

.. seealso::
   :ref:`Creating and configuring work entry types <payroll/work-entry-types>`

Understanding 713 Ordinance
===========================

The *Hong Kong - Payroll* module is compliant with 713 Ordinance which relates to the
:abbr:`ADW (Average Daily Wage)` computation to ensure fair compensation for employees.

The ADW computation is as follows:

.. figure:: hong_kong/hk-adw.png
   :alt: Hong Kong ADW Formula.

   :abbr:`ADW (Average Daily Wage)` equals the total wage in a 12-month period, minus the wages of
   non-full pay, divided by the total days in a 12-month period minus the days of non-full pay.

.. note::
   For 418 compliance, there is no automated allocation of the *Statutory Holiday* entitlement to
   the employees. As soon as 418 requirements are met, manually allocate the leaves, via the *Time
   Off* app.

.. note::
   Before generating payslips, ensure the statuses are :guilabel:`Done` to validate the outcome.

.. list-table::
   :header-rows: 1

   * - Period
     - Days
     - Wage
     - Commission
     - Total
     - ADW
     - Leave Value
   * - Jan
     - 31
     - $20200
     - $0
     - $20200
     - $651.61 ($20200/31)
     - N/A
   * - Feb
     - 28
     - $20200
     - $5000
     - $25200
     - $769.49 ($45400/59)
     - N/A
   * - Mar (One Day Annual Leave)
     - 31
     - $20324.33
     - $0
     - $20324.33
     - $730.27 ($65724.33/90)
     - $769.49
   * - Apr (One Day 80% Sick Leave)
     - 30
     - $20117.56
     - $0
     -
     -
     - $584.22 ($730.27*0.8)

.. example::
   Here is an example demonstrating the 713 logic:

   - **Jan**: Generate a payslip with a monthly wage of $20200. The :abbr:`ADW (Average Daily Wage)`
     is always computed on a cumulative basis of the trailing 12-months.
   - **Feb**: Generate a similar payslip, but add an :guilabel:`Other Input Type` for the
     :guilabel:`Commission`.
   - **Mar**: Apply for **one** full-paid annual leave in March. The salary compensation for the
     leave taken is based on :abbr:`ADW (Average Daily Wage)` thus far.

     .. image:: hong_kong/hk-march-713.png
        :alt: Hong Kong March 713.

   - **Apr**: Apply for a 1-day non-full pay leave in April. Since this is a non-full pay leave, the
     :abbr:`ADW (Average Daily Wage)` is computed accordingly.

     .. image:: hong_kong/hk-apr-713.png
        :alt: Hong Kong April 713.

.. note::
   The value of :abbr:`ADW (Average Daily Wage)` is computed in the backend, and not be visible to
   the user.

.. seealso::
   - `HK 713 Ordinance <https://www.labour.gov.hk/eng/public/wcp/ConciseGuide/Appendix1.pdf>`_
   - `HK 418 Ordinance <https://www.workstem.com/hk/en/blog/418-regulations/>`_

Generate reports
================

Before generating the below reports, setup the following in :menuselection:`Settings app -->
Payroll`.

Configure the following in the :guilabel:`Accounting` section:

- Tick the :guilabel:`Payroll HSBC Autopay` checkbox.

  - :guilabel:`Autopay Type`: Set as :guilabel:`H2H Submission`.
  - Select the :guilabel:`Bank Account` to use.

Configure the following in the :guilabel:`HK Localization` section:

- :guilabel:`Employer's Name shows on reports`
- :guilabel:`Employer's File Number`
- :guilabel:`Manulife MPF Scheme`

.. image:: hong_kong/hk-report-setup.png
   :alt: Hong Kong Payroll Settings.

IRD report
----------

There are a total of **four** IRD reports available:

- :guilabel:`IR56B`: employer's Return of Remuneration and Pensions.
- :guilabel:`IR56E`: notification of Commencement of Employment.
- :guilabel:`IR56F`: notification of Ceasation of Employment (remaining in HK).
- :guilabel:`IR56G`: notification of Ceasation of Employment (departing from HK permanently).

Go to :menuselection:`Payroll app --> Reporting`, and select one of the :guilabel:`IR56B/E/F/G
Sheet` options:

#. Click on :guilabel:`New`.
#. Fill in the relevant information for the IRD report.
#. Click on :guilabel:`Populate`, and the :guilabel:`Eligible Employees` smart button appears.
#. The :guilabel:`Employee Declarations` status is :guilabel:`Draft` and changed to
   :guilabel:`Generated PDF` status once the schedule runs.
#. Once the PDF is generated, the IRD form may be downloaded.

.. image:: hong_kong/hk-ir56b.png
   :alt: Hong Kong IR56B report.

.. note::
   The scheduled action called *Payroll: Generate pdfs* can be manually triggered. It is set by
   default to run the PDF generation monthly.

Manulife MPF sheet
------------------

Go to :menuselection:`Payroll app --> Reporting --> Manulife MPF Sheet`.

#. Click on :guilabel:`New`.
#. Select the relevant :guilabel:`Year`, :guilabel:`Month`, and :guilabel:`Sequence No.`.
#. Click on :guilabel:`Create XLSX`.
#. The *Manulife MPF XLSX* file is then generated, and available for download.

.. image:: hong_kong/hk-manulife-sheet.png
   :alt: Hong Kong Manulife Sheet.

.. note::
   Odoo will not be developing further reports for other MPF trustee as there will soon be an
   eMPF platform setup by the local government.

.. seealso::
   `eMPF <https://www.mpfa.org.hk/en/empf/overview>`_

HSBC autopay report
-------------------

If *HSBC Autopay* is selected as the batch payment method, click on :guilabel:`Create HSBC Autopay
Report`, and fill in the mandatory fields:

.. image:: hong_kong/hk-generate-autopay.png
   :alt: Hong Kong HSBC Autopay wizard.

This creates an :file:`.apc` file format which can be uploaded to the HSCB portal for processing.


==================================================
SECTION: jordan.rst
PATH: applications/hr/payroll/payroll_localizations/jordan.rst
==================================================

======
Jordan
======

The Jordan **Payroll** localization offers a comprehensive solution for managing payroll in
compliance with Jordanian labor laws. It supports income tax calculations using progressive tax
brackets, social security contributions from both employees and employers and basic salary
calculations, including allowances such as housing and transportation.

.. _payroll/jordan_apps:

Apps & modules
==============

:ref:`Install <general/install>` the following modules to get all the features of the Jordan
**Payroll** localization:

.. list-table::
   :header-rows: 1

   * - Name
     - Technical name
     - Dependencies
     - Description
   * - :guilabel:`Jordan - Payroll`
     - `l10n_jo_hr_payroll`
     - - hr_payroll
       - hr_payroll_holidays
     - Includes all salary rules, leave logic, and compensation rules compliant with Jordan Labor
       Law.
   * - :guilabel:`Jordan - Payroll with Accounting`
     - `l10n_jo_hr_payroll_account`
     - - hr_payroll_account
       - l10n_jo
       - l10n_jo_hr_payroll
     - Links payroll and accounting by creating journal entries to record payroll in the company's
       books.

Before configuring the Jordan localization, refer to the general :doc:`payroll <../../payroll>`
documentation, which includes the basic information for all localizations, as well as all universal
settings and fields.

.. seealso::
   :doc:`Jordan fiscal localization documentation <../../../finance/fiscal_localizations/jordan>`

General configurations
======================

First, the company must be configured. Navigate to :menuselection:`Settings app --> Users &
Companies --> Companies`. From the list, select the desired company, and configure the following
fields:

- :guilabel:`Company Name`: Enter the business name in this field.
- :guilabel:`Address`: Complete the full address, including the :guilabel:`City`, :guilabel:`Zip
  Code`, and :guilabel:`Country` fields.

  .. Note::
     Jordan does not use the :guilabel:`State` field, this remains blank. The :guilabel:`Zip Code`
     refers to the Jordanian `Postal Code`.

- :guilabel:`Tax ID`: Enter the company's tax identification number.
- :guilabel:`Company ID` : Enter the business's registry number.
- :guilabel:`Currency`: By default, :abbr:`JOD (Jordanian Dollars)` is selected. If not, select
  :guilabel:`JOD` from the drop-down menu.

Employees
=========

Every employee being paid must have their employee profiles configured for the Jordan payroll
localization. Additional fields are present after configuring the database for Jordan.

To update an employee form, open the :menuselection:`Employees` app and click on the desired
employee record. On the employee form, configure the required fields in the related tabs.

Work tab
--------

Enter the :guilabel:`Work Address` for the employee in the :guilabel:`Location` section of the
:guilabel:`Work` tab.

Personal tab
------------

Ensure the employee has a minimum of one :ref:`trusted bank account <employees/private-contact>`
listed in the :guilabel:`Bank Accounts` field in the :guilabel:`Private Contact` section.

These accounts are used to pay the employee. Payroll **cannot** be processed for employees without a
*trusted* :ref:`bank account <employees/private-contact>`. If no trusted bank account is set, a
warning appears on the **Payroll** dashboard and an error occurs when attempting to run payroll.

If the employee is **not** a resident of Jordan, tick the :guilabel:`Non-resident` box. This
indicates the employee is *not* eligible for personal exemptions.

Under the :guilabel:`Family` section, ensure the :guilabel:`Has Dependants` box is ticked if the
employee has any dependants, such as a spouse, children, or parents. This ensures they receive an
additional exemption on their taxable salary.

By default, the :guilabel:`Is Eligible for EOS` checkbox is ticked, in the :guilabel:`Personal
Information` section, indicating the employee is eligible for end of service benefits. If the
employee is **not** eligible, ensure the box is unchecked.

Additionally, if the employee is blind, tick the :guilabel:`Is Blind` checkbox. This ensures the
employee's entire salary is tax-exempt.

Payroll tab
-----------

Contract overview section
~~~~~~~~~~~~~~~~~~~~~~~~~

This section holds information that drives salary calculations. Ensure the following fields are
configured:

- :guilabel:`Contract`: Ensure the contract dates are populated. The contract start date populates
  the first field, and if the contract has a set end date, that is populated in the second field.
- :guilabel:`Wage Type`: Select how the employee is paid.

  - Select :guilabel:`Fixed Wage` for salaried employees who receive the same amount each pay
    period.
  - Select :guilabel:`Hourly Wage` for employees paid based on hours worked.

  .. tip::
     Set a default :guilabel:`Wage Type` in the salary :ref:`Structure Type
     <payroll/structure-types>` to configure employees in bulk. If needed, the default can be
     overridden on individual employee records if exceptions are needed.

- :guilabel:`Wage`: Enter the monthly wage in this field, in :abbr:`JOD (Jordanian Dollars)`.
- :guilabel:`Employee Type`: Select what kind of employee the contract is for, such as
  :guilabel:`Employee` or :guilabel:`Freelance`.
- :guilabel:`Contract Type`: Determines how the employee is paid and classified, such as
  :guilabel:`Permanent`, :guilabel:`Temporary`, :guilabel:`Seasonal`.
- :guilabel:`Pay Category`: Select :guilabel:`Jordan: Employee` for this field. This defines when
  the employee is paid, their default working schedule, and the work entry type it applies to.

.. image:: jordan/jo-payroll-overview.png
   :alt: The contract overview section of the employee form of the payroll tab.

Schedule section
~~~~~~~~~~~~~~~~

- :guilabel:`Work Entry Source`: Defines how :doc:`work entries <../work_entries>` are generated for
  payroll during the specified pay period. The options are:

  - :guilabel:`Working Schedule`: Based on the employee's assigned :ref:`working schedule
    <employees/schedule>` (e.g., 40 hours per week).
  - :guilabel:`Attendances`: Based on :doc:`approved checked-in hours
    <../../attendances/management>` in the **Attendances** app.
  - :guilabel:`Planning`: Based on :ref:`scheduled shifts <planning/shifts>` in the **Planning**
    app.

- :guilabel:`Extra Hours`: Tick the checkbox to allow the **Attendances** app to add any extra work
  entries logged by the employee.
- :guilabel:`Working Hours`: Using the drop-down menu, select :guilabel:`Jordan Working Schedule`,
  which consists of a Sunday - Thursday, 40-hour work week.

Allowances section
~~~~~~~~~~~~~~~~~~

The following sections of benefits are considered common ones offered by Jordanian employers. This
information needs to be populated with the information selected by the employee.

.. note::
   The benefits listed in this section are considered the ones most commonly offered by companies.
   If other employee benefits exist that require regular paycheck deductions, they can be added as
   *inputs*.

Enter the monthly allowance amount for :guilabel:`Housing`, :guilabel:`Transportation`, and
:guilabel:`Other` allowances.

If the employee is tax exempt, enter the annual amount that is not subject to taxes in the
:guilabel:`Tax Exemption` field.

If the employee's salary is based on commission, tick the :guilabel:`Is Commission based` checkbox.

Annual leave provision section
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Every year, employees receive days off. Enter the number of days in the :guilabel:`Number of Leave
days` field. The default value is 14.

Social Insurance
================

Social insurance rules calculate the contribution amounts that are to be paid by the employer and
employee to the :abbr:`Social Security Corporation (SSC)`. This is only available for Jordanian
employees.

The employer contributes 14.25% of the employee's salary to the :abbr:`Social Security Corporation
(SSC)`, while the employee contributes 7.5% of their salary, which is deducted from their payslip.

For both employer and employee contributions, the base amount on which they are calculated is bound
by a cap that gets updated every year.

Leaves
======

The following leave types are available to employees working in Jordan:

- :guilabel:`Annual leave`: Employee's are eligible for 21 days of annual leave, and if the employee
  requires more days, they have to be requested from HR managers accordingly.

.. important::
   Since the annual leave is fully paid, it is not connected to a salary rule, but it will appear on
   the worked days on the payslip form and on the PDF printout.

- :guilabel:`Sick leave`: Employee's working in Jordan are entitled to 14 days of paid sick leave
  per year, with the possibility of an additional 14 days if hospitalized. No deductions are applied
  to the employee in those cases.

- :guilabel:`Other leave types`: These leave types are fully paid and do not affect the final
  payslip, but are tracked for reporting purposes:

  - :guilabel:`Maternity leave`
  - :guilabel:`Paternity Leave`
  - :guilabel:`Pilgrimage Leave`
  - :guilabel:`Study leave`

Income Tax
==========

In Jordan, employees are subject to a progressive income tax system, where tax rates increase with
higher annual income brackets.

Tax brackets
------------

Depending on the annual income of the employee, the following rates apply:

.. list-table::
   :header-rows: 1
   :stub-columns: 0

   * - Taxable Bracket
     - Range
   * - 5%
     - 0-5,000
   * - 10%
     - 5,001 - 10,000
   * - 15%
     - 10,001 - 15,000
   * - 20%
     - 15,001 - 20,000
   * - 25%
     - 20,001 - 1,000,000
   * - 30%
     - More than 1,000,000

.. note::
   Tax brackets are applied progressively. This means each portion of an employee's income is taxed
   at its respective rate within each bracket, rather than their entire income being taxed at the
   rate of the highest bracket they fall into.

Exemptions
----------

Several factors contribute to exempting part of an employee's gross income, including:

- **Jordanian residency**: Residents are entitled to a yearly exemption of 12,000 JOD.
- **Blindness**: Individuals who are blind are **fully** exempt from income tax.
- **Dependents**: An additional 12,000 JOD exemption per year for employees with dependents.

Overtime
========

Employees are entitled to additional pay for overtime worked, depending on when the overtime hours
are worked:

- On working days: Overtime is paid at 1.25 times the regular hourly wage.
- On rest days: Overtime is compensated at 1.5 times the regular hourly wage.

These percentages are recorded in the input parameters model.

.. note::
   The number of overtime hours is registered as other inputs directly on payslips.

Provisions
==========

Provisions are the amounts computed by the employer to account for the payments made to the employee
for :abbr:`end-of-service (EOS)` benefits or annual leaves. It is computed on a monthly basis.

- **End of service benefit provision**: This is computed by dividing the monthly gross salary by 12

  .. math::

     \frac{\text{Basic} + \text{Allowances}}{12}

- **Annual leave provision**: This is computed by dividing the gross salary by 30 to get the daily
  salary, then multiplying that by the number of leave days, and dividing the result by 12.

  .. math::

     \left(\frac{\text{Basic} + \text{Allowances}}{30}\right)
     \times
     \left(\frac{\text{Number of Leave Days}}{12}\right)

End of Service
==============

At the end of the employee's service, if they are eligible for end-of-service benefits, they should
receive the following two benefits:

- **Unused leaves compensation**: The Annual Leave Balance is shown on the employee's record. It is
  based on the annual leave type defined in the **Payroll** app settings and is calculated as the
  total remaining allocations for that specific leave type assigned to the employee.

  The balance represents the total remaining leave allocated to the employee but does not reflect
  the portion of leave days the employee has earned up to the current month.

  When calculating the benefit value, the deserved leave balance is determined based on the portion
  of the year worked. The benefit value is then calculated by multiplying this deserved balance by
  the employee's daily rate.

  .. example::
     If an employee is entitled to 14 leave days per year and has worked for 6 months, they deserve
     7 leave days so far. If their daily rate is 50 JOD, the benefit value is: 7 days  50 JOD = 350
     JOD

  .. important::
     The flow mentioned above requires the allocation for the annual leave to be given fully upfront
     in the beginning of the year for that employee

- **End of Service Benefit**: The calculation begins by determining the total number of days the
  employee has worked at the company, starting from their joining date up to their last working day.

  The total service duration is calculated out of a 365-day year.

  The resulting period in years is then multiplied by the employee's gross salary, which includes
  the basic salary and the allowances defined in the payroll tab on the employee record.

  .. math::

   (\text{Basic} + \text{Allowances}) \times \left(\frac{\text{Number of Days}}{365}\right)

Payroll configuration
=====================

Several sections within the **Payroll** app installs a Salary Structure, Structure Type, Rules, and
Parameters specific to Jordan.

Salary structures & structure types
-----------------------------------

When the **l10n_jo_hr_payroll** module is :ref:`installed <payroll/jordan_apps>`, a new
:guilabel:`Salary Structure` gets installed, :guilabel:`Jordan: Monthly Pay`. This structure
includes one :guilabel:`Structure Type`, :guilabel:`Jordan: Employee`.

The :guilabel:`Salary Structure` contains all the individual :ref:`salary rules
<payroll/jordan_apps>` that informs the **Payroll** app how to calculate employee payslips.

.. image:: jordan/jo-structure-types.png
   :alt: The United States salary structure in the salary structures list.

.. _payroll/jordan_rules:

Salary rules
------------

To view the salary rules that inform the salary structure what to do, navigate to
:menuselection:`Payroll app --> Configuration --> Structures` and expand the :guilabel:`Jordan:
Employee` entry to reveal the :guilabel:`Jordan: Monthly Pay` structure type. Click
:guilabel:`Jordan: Monthly Pay` to view the detailed salary rules.

.. image:: jordan/jo-rules-top-half.png
   :alt: The top portion of the US salary rules.

Each rule defines how pay is calculated, taking into account factors such as allowances, deductions,
and taxes.

Rule parameters
---------------

Some calculations require specific rates associated with them, or wage caps. *Rules Parameters* are
capable of listing a value, either a percentage or a fixed amount, to reference in the salary rules.

.. example::
   The percentage rate for employee Social Security deductions is set in the `Jordan Social Security
   Employee Deduction Rate %` parameter.

Most rules pull information stored in the parameters module to get the rate of the rule (a
percentage) and the cap (a dollar amount).

To view rule parameters, navigate to :menuselection:`Payroll app --> Configuration --> Rule
Parameters`. Here, all rule parameters are displayed with their linked :guilabel:`Salary Rules`,
which can be accessed. Review the parameters associated with a rule by looking for the
:guilabel:`Name` of the rule, and make any edits as needed.

.. important::
   Odoo adds updated rule parameters for the current calendar year. It is **not** recommended to
   edit rule parameters **unless a national parameter has changed**, and is different from the rule
   parameters created by Odoo. Check with all national regulations *before* making any changes to
   rule parameters.

Run Jordan payroll
==================

Before running payroll, the payroll officer must validate employee :doc:`work entries
<../work_entries>` to confirm pay accuracy and catch errors. This includes checking that all time
off is approved and any overtime is appropriate.

Work entries sync based on the employee's :doc:`contract <../contracts>` configuration. Odoo pulls
from the assigned working schedule, attendance records, planning schedule, and approved time off.

Any :ref:`discrepencies or conflicts <payroll/conflicts>` must be resolved, then the work entries
can be :ref:`regenerated <payroll/regenerate-work-entries>`.

Once everything is correct, draft payslips can be :ref:`created individually <payroll/process>` or
in :doc:`groups <../pay_runs>`, referred to in the **Payroll** app as *Pay Runs*.

.. image:: jordan/jo-work-entries.png
   :alt: The work entries for a pay run, with some time off entered in the work entries.

.. note::
   To cut down on the payroll officer's time, it is typical to process payslips in batches, either
   by wage type (fixed salary vs hourly), pay schedule (weekly, bi-weekly, monthly, etc.),
   department (direct cost vs. administration), or any other grouping that best suits the company.

The process of running payroll includes different actions that need to be executed to ensure that
the amount withheld from payroll taxes is correct, the amount that the employee receives as their
net salary is correct, and the computation of hours worked reflects the employee's actual hours
worked, among others.

When running a payroll batch, check that the period, company, and employees included are correct
*before* starting to analyze or validate the data.

Once the payslips are drafted, review them for accuracy. Check the :guilabel:`Worked Days & Inputs`
tab, and ensure the listed worked time is correct, as well as any other inputs. Add any missing
inputs, such as commissions, tips, reimbursements, that are missing.

Next, check the various totals (gross pay, employee taxes, benefits, employer taxes, net salaries),
then click :guilabel:`Compute Sheet` to update the salary calculations, if there were edits. If
everything is correct, click :guilabel:`Validate`.

.. image:: jordan/jo-check-payslips.png
   :alt: The worked days tab of a payslip.

Accounting check
----------------

The accounting process when running payroll has two components: :ref:`creating journal entries
<payroll/jo-journal>`, and :ref:`registering payments <payroll/jo-register>`.

.. _payroll/jo-journal:

Journal entry creation
~~~~~~~~~~~~~~~~~~~~~~

After payslips are confirmed and validated, journal entries are posted either individually, or in a
batch. The journal entry is created first as a draft.

.. important::
   It must be decided if journal entries are done individually or in batches *before* running
   payroll.

.. image:: jordan/jo-draft.png
   :alt: All payslips in a draft state.

Thirteen accounts from the Jordan :abbr:`CoA (Chart of Accounts)` are included with the Jordan
payroll localization:

- `500301 Basic Salary`: Tracks the basic wages paid to employees.
- `500302 Housing Allowance`: Captures housing allowance payments provided to employees.
- `500303 Transportation Allowance`: Captures transportation allowance payments to employees.
- `500308 Staff Other Allowances`: Covers employee allowances that do not fit any other available
  categories.
- `500310 Salary Deductions`: Reflects deductions applied to employee salaries (e.g., advances,
  fines, statutory deductions).
- `500305 Leave Salary`: Records salaries actually paid to employees while on paid leave.
- `201022 Social Security Payable`: Holds both employee and employer amounts payable for social
  insurance contributions.
- `200502 Leave Days Provision`: Accrues the cost of paid leave; the balance is reduced when leave
  is taken, and any leave not taken may be paid out when the employee leaves the company.
- `200503 End of Service Provision`: Accumulates the end-of-service benefit monthly, so the amount
  can be paid (partially or fully) when the employee leaves, per service length and reason.
- `200101 Payables`: Shows amounts payable to employees as salaries (unpaid salary liability at
  period end).
- `500202 End of Service Indemnity`: Captures company expenses set aside to fund end-of-service
  benefits (expense-side counterpart to the provision).
- `200307 Employee Income Tax`: Accumulates the income tax amount withheld from the employee's
  salary.
- `500311 Social Security Expenses`: Captures The total expense amount from payments to the social
  insurance authority.

.. note:: The :abbr:`CoA (Chart of Accounts)` configuration is done by default when installing the
   Jordan payroll localization. The account codes and names can be edited to suit the company's
   needs.

If everything seems correct on the journal entry draft, post the journal entries.

.. image:: jordan/jo-done.png
   :alt: Journal entries posted.

.. _payroll/jo-register:

Register Payments
-----------------

After the :ref:`journal entries <payroll/journal>` are validated, Odoo can generate payments.

Payments can be :guilabel:`Grouped by Partner` if there is a partner associated with a salary rule.

.. image:: jordan/jo-paid.png
   :alt: Payslips with a status of paid.

Close Payroll
-------------

If there are no errors, payroll is completed for the pay period.

Reports
=======

No additional payroll reports unique to the Jordan payroll localization exist. All reports are the
standard preconfigured reports included with the **Payroll** app.


==================================================
SECTION: mexico.rst
PATH: applications/hr/payroll/payroll_localizations/mexico.rst
==================================================

======
Mexico
======

.. |PAC| replace:: :abbr:`PAC (Proveedor Autorizado de Certificacin / Authorized Certification
   Provider)`
.. |RFC| replace:: :abbr:`RFC (Registro Federal de Contribuyentes)`
.. |CFDI| replace:: :abbr:`CFDI (Comprobante Fiscal Digital por Internet)`
.. |IMSS| replace:: :abbr:`IMSS (Instituto Mexicano del Seguro Social)`

The Mexico payroll localization covers salary computations for employees, including employee and
employer payroll taxes.

Before configuring the Mexico localization, review the general :doc:`payroll documentation
<../../payroll>`, which covers basic configurations and settings applicable to all localizations.

.. _payroll/mexico_apps:

Apps & modules
==============

:ref:`Install <general/install>` the following modules to get all the features of the Mexico payroll
localization:

.. list-table::
   :header-rows: 1

   * - Name
     - Technical name
     - Dependencies
     - Description
   * - :guilabel:`Mexico - Payroll`
     - `l10n_mx_hr_payroll`
     - - hr_payroll
       - hr_work_entry_holidays
       - hr_payroll_holidays
     - Adds the required fields to manage employee payroll and time off data.
   * - :guilabel:`Mexico - Payroll CFDI`
     - `l10n_mx_hr_payroll_account_edi`
     - - l10n_mx_hr_payroll_account
       - l10n_mx_edi
     - Adds the ability to sign |CFDI| payroll documents with the government.
   * - :guilabel:`Mexico - Payroll with Accounting`
     - `l10n_mx_hr_payroll_account`
     - - hr_payroll_account
       - l10n_mx
       - l10n_mx_hr_payroll
       - l10n_mx_edi
     - Adds the required rules and parameters to manage local payroll calculations.

.. tip::
   Installing the :guilabel:`Mexico - Payroll CFDI` module automatically installs both the
   :guilabel:`Mexico - Payroll` and :guilabel:`Mexico - Payroll with Accounting` modules.

.. seealso::
   :doc:`Configure the Mexico fiscal localization <../../../finance/fiscal_localizations/mexico>`

Company configurations
======================

First, the company must be configured. Navigate to :menuselection:`Settings app --> Users &
Companies --> Companies`. From the list, select the desired company, and configure the following
fields:

- :guilabel:`Company Name`: Enter the business name in this field.
- :guilabel:`Address`: Complete the full address, including the :guilabel:`City`, :guilabel:`State`,
  :guilabel:`Zip Code`, and :guilabel:`Country`.

  .. important::
     The state selected in the company's address is associated as the *work address* by default for
     the employee, and the one used to calculate payroll taxes.

- :guilabel:`RFC`: Enter the company's :abbr:`RFC (Registro Federal de Contribuyentes, or Federal
  Taxpayer Registry)` number.
- :guilabel:`Company ID` : This field is not used in the Mexico localization, and should remain
  blank.
- :guilabel:`Currency`: By default, :abbr:`MXN (Mexican pesos)` is selected. If not, select
  :guilabel:`MXN` from the drop-down menu.
- :guilabel:`Phone`: Enter the company phone number.
- :guilabel:`Email`: Enter the email used for general contact information.

.. warning::
   Ensure the information is accurate, as it is used when calculating various taxes.

Employees
=========

Every employee being paid must have their employee profiles configured for the Mexico payroll
localization. Additional fields are present after configuring the database for Mexico.

To update an employee form, open the :menuselection:`Employees` app and click on the desired
employee record. On the employee form, configure the required fields in the related tabs.

Work tab
--------

Enter the :guilabel:`Work Address` for the employee in the :guilabel:`Location` section of the
:guilabel:`Work` tab.

.. important::
   The state selected in this address determines which salary rules Odoo applies when calculating
   taxes.

Personal tab
------------

Ensure the employee has a minimum of one :ref:`trusted bank account <employees/private-contact>`
listed in the :guilabel:`Bank Accounts` field in the :guilabel:`Private Contact` section.

These accounts are used to pay the employee. Payroll **cannot** be processed for employees without a
*trusted* :ref:`bank account <employees/private-contact>`. If no trusted bank account is set, a
warning appears on the **Payroll** dashboard and an error occurs when attempting to run payroll.

Ensure the :guilabel:`Legal Name` and :guilabel:`Gender` fields are populated and configured in the
:guilabel:`Personal Information` section.

Ensure the following fields are properly populated in the :guilabel:`Citizenship` section:

- :guilabel:`Nationality (Country)`: The employee's country of citizenship.
- :guilabel:`SSN No (Social Security Number)`: A personal 11-digit :abbr:`NSS (Nmero de Seguridad
  Social)` number.
- :guilabel:`RFC (Registro Federal de Contribuyentes)`: A personal 13-digit alphanumeric tax
  identification number.
- :guilabel:`CURP (Clave nica de Registro de Poblacin)`: A personal 18-character alphanumeric
  code.

.. image:: mexico/personal.png
   :alt: Where all personal information is located on the employee profile.

Payroll tab
-----------

Contract overview section
~~~~~~~~~~~~~~~~~~~~~~~~~

This section holds information that drives salary calculations. Ensure the following fields are
configured:

- :guilabel:`Contract`: The time period the contract is valid for. If the second field is left
  blank, the contract runs indefinitely.
- :guilabel:`Wage Type`: Select how the employee is paid.

  - Select :guilabel:`Fixed Wage` for salaried employees who receive the same amount each pay
    period.
  - Select :guilabel:`Hourly Wage` for employees paid based on hours worked.

  .. tip::
     Set a default :guilabel:`Wage Type` in the salary :ref:`Structure Type
     <payroll/structure-types>` to configure employees in bulk. If needed, the default can be
     overridden on individual employee records if exceptions are needed.

- :guilabel:`Wage`: Enter the amount and frequency the employee is paid.
- :guilabel:`Contract Type`: Determines how the employee is paid and classified, such as
  :guilabel:`Indefinite Term Employment Contract`, :guilabel:`Hourly Wage Employment`,
  :guilabel:`Seasonal Employment Contract`.

  .. important::
     The :guilabel:`Contract Type` field is visible on payslips.

- :guilabel:`Pay Category`: Select :guilabel:`Mexico: Employee.` for this field. This defines when
  the employee is paid, their default working schedule, and the work entry type it applies to.
- :guilabel:`Regime Type`: Select the correct regime type (Rgimen de Contratacin) for the
  employee. The selected regime type determines the employee's benefits, taxes, and social security
  contributions.

Schedule section
~~~~~~~~~~~~~~~~

- :guilabel:`Work Entry Source`: Select :guilabel:`Working Schedule`, which creates :doc:`work
  entries <../work_entries>`  based on the employee's assigned :ref:`working schedule
  <employees/schedule>` (e.g., 40 hours per week).

  .. note::
     The Mexico payroll localization is currently not able to create work entries from the
     **Attendances** or **Planning** apps.

- :guilabel:`Extra Hours`: Tick the checkbox to allow the **Attendances** app to add any extra work
  entries logged by the employee.
- :guilabel:`Working Hours`: Using the drop-down menu, select the default work schedule. This is
  particularly important for employees available to receive overtime pay (typically hourly
  employees, not salaried).

Options section
~~~~~~~~~~~~~~~

Enter the :guilabel:`Holiday Bonus Rate` percentage given annually ot the employee in the
corresponding field. The percentage is calculated from the employee's base salary.

If the employee is contributing to a :guilabel:`Savings Fund`, enter the monthly amount to be
contributed. The employer typically matches this amount, and the money is placed in a savings
account that is accessible once a year to the employee.

Vouchers section
~~~~~~~~~~~~~~~~

Some companies may offer extra benefits in the form of vouchers, which are paid to employees for
food and transportation costs. If the company provides these benefits, configure the following
fields:

- :guilabel:`Payment Period`: Using the drop-down menu, select how often the vouchers are paid out.
  The default options are either :guilabel:`Last Day of the Month`, if employees are paid at the end
  of the month, or :guilabel:`In the period`, if the vouchers are broken up and evenly distributed
  according to the payment schedule, such as weekly or bi-weekly.
- :guilabel:`Meal Vouchers`: Enter the monthly amount paid to the employee towards food expenses.
- :guilabel:`Transport Vouchers`: Enter the monthly amount paid to the employee towards
  transportation, such as bus fare or parking fees.
- :guilabel:`Gasoline Vouchers`: Enter the monthly amount paid to the employee for their vehicle's
  gas.

.. note::
   The monetary amount for the vouchers is the *monthly amount* given to employees. If the
   :guilabel:`Payment Period` is set to :guilabel:`In the period`, Odoo calculates the voucher
   amount for each pay period.

   For example, if an employee is paid weekly, and their :guilabel:`Meal Voucher` is set to $100,
   the employee receives $25 in every weekly paycheck.

.. image:: mexico/payroll-tab.png
   :alt: The payroll tab of an employee form, filled out for Mexico.

Infonavit / Fonacot tab
-----------------------

Infonavit section
~~~~~~~~~~~~~~~~~

:abbr:`INFONAVIT (Instituto del Fondo Nacional de la Vivienda para los Trabajadores)` is a
government institution that assists employees with affordable mortgage credits, which can be used to
buy, build, or remodel a home, or pay off an existing mortgage.

Add an Infonavit credit
***********************

To create an :abbr:`INFONAVIT (Instituto del Fondo Nacional de la Vivienda para los Trabajadores)`
credit, click :guilabel:`Add a line`, and a :guilabel:`Create an Infonavit Credit` pop-up window
loads.

By default, the :guilabel:`Status` field is populated with :guilabel:`In Progress`. This indicates
the credit is active.

Next, select the :guilabel:`Type` of credit, either a :guilabel:`Fixed Monetary Fee`, a
:guilabel:`Percentage`, or a :guilabel:`Discount Factor`. After this field is configured, a
corresponding field appears on the form.

Enter the :guilabel:`Monthly Insurance` to be paid directly to the debt. If any additional funds are
contributed by the employee, enter the additional amount in the :guilabel:`Extra Fixed Monthly
Contribution` field.

The last field corresponds to the :guilabel:`Type` selected. Enter the :guilabel:`Fixed Monetary
Fee`, :guilabel:`Percentage`, or  :guilabel:`Discount Factor` in the field.

Once all fields are configured, click the :guilabel:`Save & Close` button, and the credit is added
to the :abbr:`INFONAVIT (Instituto del Fondo Nacional de la Vivienda para los Trabajadores)`
section.

.. image:: mexico/infonavit.png
   :alt: The INFONAVIT section filled out for an employee.

.. important::
   Once :abbr:`INFONAVIT (Instituto del Fondo Nacional de la Vivienda para los Trabajadores)`
   credits are fully paid, the payroll officer **must** change the :guilabel:`Status` of each
   completed line item to :guilabel:`Closed`.

   If the payroll officer does **not** change the status, money will continue to be contributed to
   the employee's account in all subsequent paychecks.

Fonacot section
~~~~~~~~~~~~~~~

:abbr:`FONACOT (Fondo Nacional para el Consumo de los Trabajadores)` is a Mexican government program
that provides employees with low-cost loans for various needs, such as home improvements, education,
or emergencies.

The :abbr:`FONACOT (Fondo Nacional para el Consumo de los Trabajadores)` section is where employee
repayments are configured.

Add a Fonacot credit
********************

To add a line to the :abbr:`FONACOT (Fondo Nacional para el Consumo de los Trabajadores)` section,
click :guilabel:`Add a line`, and a blank line loads. The :guilabel:`Status` is set to :guilabel:`In
Progress`, by default.

Enter the monthly payment amount in the :guilabel:`Import` field. If the employee wishes to make any
additional payments each month, enter the value in the :guilabel:`Extra Monthly Contribution` field.

.. important::
   Once :abbr:`FONACOT (Fondo Nacional para el Consumo de los Trabajadores)` loans are paid off, the
   payroll officer **must** change the :guilabel:`Status` of each completed line item to
   :guilabel:`Closed`.

   If the payroll officer does **not** change the status, money will continue to be taken out of the
   employee's account in all subsequent paychecks.

Payroll configuration
=====================

Several sections within the **Payroll** app installs a *salary structure*, *structure type*,
*rules*, and *rule parameters* specific to Mexico.

Prior to running payroll, the :abbr:`CFDI (Comprobante Fiscal Digital por Internet)` must also be
configured.

CFDI configuration
------------------

The :abbr:`CFDI (Comprobante Fiscal Digital por Internet)` is a **required** electronic tax receipt
that acts as a digital invoice. The :abbr:`CFDI (Comprobante Fiscal Digital por Internet)` **must**
be certified by a :abbr:`PAC (Authorized Certification Provider)` *before* being submitted to the
Mexican Tax Administration (:abbr:`SAT (Servicio de Administracin Tributaria)`).

This document serves as proof of income, expenses, and payroll, and requires both a :abbr:`UUID
(Universally Unique Identifier)` and a digital signature, to comply with Mexican tax laws.

First, navigate to :menuselection:`Payroll app --> Configuration --> Settings`, and scroll to the
:guilabel:`CFDI` section.

Enter the :guilabel:`Employer IMSS ID` in the corresponding field, and select the appropriate
:guilabel:`Risk Type` using the drop-down menu. If no risk is associated with the company, select
:guilabel:`Does Not Apply`.

.. note::
   Mexico assigns different :guilabel:`Risk Types` based on several factors, including information
   cross-referenced from previously submitted employee and employer. Consult the company's payroll
   officer to determine the correct risk type.

Salary structures & structure types
-----------------------------------

When the **l10n_mx_hr_payroll** module is :ref:`installed <payroll/mexico_apps>`, a new
:guilabel:`Salary Structure` gets installed, :guilabel:`Mexico: Employee`. This structure includes
two :guilabel:`Structure Types`, a :guilabel:`Mexico: Regular Pay`, and a :guilabel:`Mexico:
Christmas Bonus`.

The :guilabel:`Salary Structure` contains all the individual :ref:`salary rules
<payroll/mexico_rules>` for each :guilabel:`Structure Type`, which informs the **Payroll** app how
to calculate employee payslips.

.. image:: mexico/structure-types.png
   :alt: The Mexico salary structures in the salary structures list.

.. _payroll/mexico_rules:

Salary rules
------------

To view the salary rules that inform the salary structure what to do, navigate to
:menuselection:`Payroll app --> Configuration --> Structures` and expand the :guilabel:`Mexico:
Employee` group to reveal the two available structure types. Click :guilabel:`Mexico: Regular Pay`
to view the detailed regular pay salary rules.

.. image:: mexico/mx-rules-top-half.png
   :alt: The top portion of the US salary rules.

Each rule defines how pay is calculated, taking into account factors such as bonuses, allowances,
vouchers, and taxes.

Rule parameters
---------------

Some calculations require specific rates associated with them, such as bonuses and holidays. *Rule
Parameters* are capable of listing a value, either a percentage or a fixed amount, to reference in
the salary rules.

Most rules pull information stored in the parameters module to get the rate of the rule (a
percentage) and the cap (a dollar amount).

To view rule parameters, navigate to :menuselection:`Payroll app --> Configuration --> Rule
Parameters`. Here, all rule parameters are displayed with their linked :guilabel:`Salary Rules`,
which can be accessed. Review the parameters associated with a rule by looking for the
:guilabel:`Name` of the rule, and make any edits as needed.

In Mexico, all companies are **required** to configure the following rule parameters:

- :guilabel:`Mexico: Risk Bonus Rate` (Prima de Riesgo del IMSS): The :guilabel:`Risk Bonus Rate` is
  referred to as the *Occupational Risk Premium (Prima de Riesgo de Trabajo)*. This is the amount
  the company must contribution to the :abbr:`IMSS (Instituto Mexicano del Seguro Social)`, aka the
  *Mexican Social Security Institute*. This amount is based on the company's *accident rate*, which
  is calculated using multiple factors, including the number of accidents the company has reported,
  and the general level of risk the type of company works with. The rate is determined by the
  :abbr:`IMSS (Instituto Mexicano del Seguro Social)` for each company, therefore this rate **must**
  be updated when configuring the Mexico payroll localization.
- :guilabel:`Mexico: Christmas Bonus` (Das de Aguinaldo): In Mexico, an annual Christmas bonus is
  given to all employees. The bonus must be for a minimum of 15 days of pay. Companies that provide
  a higher bonus **must** modify this value. In Odoo, all employees of a company recieve the same
  amout of paid days for their Chirstmas bonus.
- :guilabel:`Mexico: Holiday Table` (Tabla de vacaciones): This rule outlines the number of vacation
  days an employee is allocated, based on their years of service. This **must** be modified, if
  needed, to reflect the company's paid vacation policy.

.. example::
   The :guilabel:`Mexico: Risk Bonus Rate` of a company is different from the one added by default
   in Odoo. To update this, navigate to :menuselection:`Payroll app --> Configuration --> Rule
   Parameters`, then, filter the results by :guilabel:`Mexico: Risk Bonus Rate`, and edit the
   :guilabel:`Parameter Value`.

.. important::
   Odoo adds updated rule parameters for the current calendar year. It is **not** recommended to
   edit rule parameters (other than the four that must be reviewed and updated, listed above)
   **unless a national or state parameter has changed**, and is different from the rule parameters
   created by Odoo. Check with all local and national regulations *before* making any changes to
   rule parameters.

.. _payroll/run_mexico:

Run Mexico payroll
==================

Before running payroll, the payroll officer must validate employee :doc:`work entries
<../work_entries>` to confirm pay accuracy and catch errors. This includes checking that all time
off is approved and any overtime is appropriate.

Work entries sync based on the employee's :doc:`contract <../contracts>` configuration. Odoo pulls
from the assigned working schedule, attendance records, planning schedule, and approved time off.

Any :ref:`discrepencies or conflicts <payroll/conflicts>` must be resolved, then the work entries
can be :ref:`regenerated <payroll/regenerate-work-entries>`.

Once everything is correct, draft payslips can be :ref:`created individually <payroll/process>` or
in :doc:`groups <../pay_runs>`, referred to in the **Payroll** app as *Pay Runs*.

.. image:: mexico/mexico-work-entries.png
   :alt: The work entries for a pay run, with some time off entered in the work entries.

.. note::
   To cut down on the payroll officer's time, it is typical to process payslips in batches, either
   by wage type (fixed salary vs hourly), pay schedule (weekly, bi-weekly, monthly, etc.),
   department (direct cost vs. administration), or any other grouping that best suits the company.

The process of running payroll includes different actions that need to be executed to ensure that
the amount withheld for funds and government institutions is correct, the amount that the employee
receives as their net salary is correct, and the computation of hours worked reflects the employee's
actual hours worked, among others.

When running a payroll batch, check that the period, company, and employees included are correct
*before* starting to analyze or validate the data.

Once the payslips are drafted, review them for accuracy. Check the :guilabel:`Worked Days` and
:guilabel:`Salary Inputs` tabs, and ensure the listed worked time is correct, as well as any other
inputs. Add any missing inputs, such as commissions, bonuses, and :abbr:`ISR (Impuesto Sobre la
Renta)` adjustments that are missing.

Next, check the various totals (gross pay, vouchers, IMSS contributions, :abbr:`CEAV (Cesanta en
Edad Avanzada y Vejez)`, taxes, and gross pay), then click :guilabel:`Compute Sheet` to update the
salary calculations, if there were edits. If everything is correct, click :guilabel:`Validate`.

.. image:: mexico/check-payslips.png
   :alt: The worked days tab of a payslip.

Accounting check
----------------

The accounting process when running payroll has two components: :ref:`creating journal entries
<payroll/journal-mx>`, and :ref:`registering payments <payroll/register-mx>`.

.. _payroll/journal-mx:

Journal entry creation
~~~~~~~~~~~~~~~~~~~~~~

After payslips are confirmed and validated, journal entries are posted either individually, or in a
batch. The journal entry is created first as a draft.

.. important::
   It must be decided if journal entries are done individually or in batches *before* running
   payroll.

.. image:: mexico/create-draft-entry.png
   :alt: All payslips in a draft state.

Twenty-two accounts from the Mexico :abbr:`CoA (Chart of Accounts)` are included with the payroll
localization:

- :guilabel:`110.01.01 Employment subsidy to apply`
- :guilabel:`210.02.01 Provision for vacation to pay`
- :guilabel:`211.01.01 Provision for employer IMSS to pay`
- :guilabel:`211.02.01 Provision for SAR to pay`
- :guilabel:`216.01.01 Withholding or income tax for wages and salaries`
- :guilabel:`216.11.01 IMSS withholding tax`
- :guilabel:`601.01.01 Wages and salaries`
- :guilabel:`601.07.01 Holiday Bonus`
- :guilabel:`601.15.01 Pantry`
- :guilabel:`601.19.01 Savings fund`
- :guilabel:`601.26.01 IMSS quota`
- :guilabel:`601.27.01 Contributions to infonavit`
- :guilabel:`601.28.01 Contributions to the SAR`
- :guilabel:`201.01.02 Employee Reimbursement`
- :guilabel:`205.06.02 Other Various Short-Term Credits (Fonacot)`
- :guilabel:`210.03.01 Provision for bonus to pay`
- :guilabel:`210.04.01 Provision for savings fund to pay`
- :guilabel:`211.03.01 Provision for infonavit to pay`
- :guilabel:`601.12.01 Bonus`
- :guilabel:`601.16.02 Transport (gasoline vouchers)`
- :guilabel:`601.16.01 Transport (support)`
- :guilabel:`601.74.01 Commissions on sales`

.. note::
   The :abbr:`CoA (Chart of Accounts)` configuration is done by default when a company is located in
   Mexico. The account codes and names can be edited to suit the company's needs. If there is no
   :abbr:`CoA (Chart of Accounts)` account associated with a salary rule (used in a salary
   structure), Odoo uses the account `Salary Expenses` to create the journal entry, regardless of
   the nature of the move.

If everything seems correct on the journal entry draft, post the journal entries.

.. image:: mexico/post-entries.png
   :alt: Journal entries posted.

.. _payroll/register-mx:

Register Payments
-----------------

After the :ref:`journal entries <payroll/journal-mx>` are validated, Odoo can generate payments.

.. important::
   To generate payments from payslips,employee's **must** have a *trusted* bank account. If the
   employee's bank account is *not* marked as `trusted`, CFDI files **cannot** be generated through
   Odoo.

.. image:: mexico/paid.png
   :alt: Payslips with a status of paid.

Generate CFDI XML files
-----------------------

After payslips have bee processed and paid, a :abbr:`CFDI (Comprobante Fiscal Digital por Internet)`
XML file must be generated, which is then electronically submitted to Mexico's :abbr:`SAT (Servicio
de Administracin Tributaria)`.

To create the :abbr:`CFDI (Comprobante Fiscal Digital por Internet)` file, open the individual
payslip, and click the :guilabel:`Generate CFDI` button.

Once the file has been created and sent, a record is stored in the chatter.

Close Payroll
-------------

If there are no errors, payroll is completed for the pay period.

Run Christmas bonus payroll
===========================

To run the annual Christmas bonus, follow the same workflow for :ref:`regular Mexico payroll
<payroll/run_mexico>`, using the :guilabel:`Mexico: Christmas Bonus` salary structure.


==================================================
SECTION: pay_runs.rst
PATH: applications/hr/payroll/pay_runs.rst
==================================================

========
Pay runs
========

*Pay runs* are used to generate multiple :doc:`payslips <payslips>` at once and process them in a
group, rather than create and process individual payslips. This method not only helps the payroll
department pay employees in less time, but it also helps keep payslips organized.

Typically, a company's payroll department :ref:`creates a new pay run <payroll/new-pay-run>` for
each salary structure, for every pay period (usually weekly, bi-weekly, or monthly). If desired, pay
runs can be further organized by department, job position, etc.

Once a pay run is made, :ref:`payslips are added to the pay run <payroll/add-payslips>`, then the
pay run is processed, and employees are paid.

View pay runs
=============

To view all the pay runs in the database, navigate to :menuselection:`Payroll app --> Payslips -->
Pay Runs` to display all payslip pay runs that have been created. These payslip pay runs are
displayed in a list view, grouped by :icon:`oi-group` :guilabel:`Status` (either :guilabel:`Ready`,
:guilabel:`Done`, or :guilabel:`Paid`), by default.

Each pay run displays the name, the dates it includes, the number of payslips, and the total
:guilabel:`employer cost`, :guilabel:`gross`, and :guilabel:`net` amounts for all payslips.

.. image:: pay_runs/pay-runs.png
   :alt: View displaying all pay runs created.

.. _payroll/new-pay-run:

Create a new pay run
====================

New pay runs can be created from the :ref:`Work Entry <payroll/work-entry-pay-run>`, :ref:`Employee
Payslips <payroll/payslips-pay-run>`, or :ref:`Pay Runs <payroll/pay-runs-pay-run>` dashboards.

.. _payroll/work-entry-pay-run:

Work entry dashboard
--------------------

To create a pay run from the work entry dashboard, navigate to :menuselection:`Payroll app --> Work
Entries --> Work Entries`. The current time period is displayed, with the current day highlighted in
yellow.

All employees appear in a default Gantt view, with all work entries displayed. If necessary,
navigate to the desired time period.

Once all :ref:`missing work entries are added <payroll/new-work-entry>` and all :ref:`conflicts are
resolved <payroll/conflicts>`, click the :guilabel:`Generate Pay Run` button. The pay run is created
for all employees, with a status of :guilabel:`Ready`.

.. image:: pay_runs/work-entries-pay-run.png
   :alt: The work entries dashboard with the GeneratePay Runs button visible.

.. _payroll/payslips-pay-run:

Employee payslips dashboard
---------------------------

To create a pay run from the payslips dashboard, navigate to :menuselection:`Payroll app -->
Payslips --> Payslips`. All payslips for all employees are displayed in a default list view, in
chronological order.

.. _payroll/new-pay-run-pop-up:

Click the :guilabel:`Pay Run` button and a :guilabel:`New Pay Run` pop-up window loads. Select the
:guilabel:`Salary Structure` using the drop-down menu. If no :guilabel:`Salary Structure` is
selected, the pay run applies to *all* salary structures. Next, select the :guilabel:`Pay Schedule`,
which is *how often* employees are paid. The default options are :guilabel:`year`,
:guilabel:`half-year`, :guilabel:`quarter`, :guilabel:`2 months`, :guilabel:`month`,
:guilabel:`half-month`, :guilabel:`2 weeks`, :guilabel:`week`, or :guilabel:`day`.

Last, using the calendar selector, set the first day the pay run covers in the first blank
:guilabel:`Period` field. The second field is automatically populated based on the selection in the
:guilabel:`Pay Schedule` field.

.. example::
   A company pays its employees every month. To configure the pay run for November, the
   :guilabel:`Pay Schedule` is set to :guilabel:`month`, and the first :guilabel:`Period` field is
   set to `Nov 1`. Once entered, the second field is automatically populated with `Nov 30`.

   .. image:: pay_runs/new-pay-run.png
      :alt: A monthly pay run configured for November.

When the :guilabel:`New Pay Run` pop-up window is configured, click :guilabel:`Continue`, and the
pop-up window changes to a :guilabel:`Select Employees` window. All employees who match the
parameters set in the :guilabel:`New Pay Run` pop-up window appear in the list. Select the desired
employees to add to the pay run, or click the box next to :guilabel:`Employees` to select *all*
employees in the list.

.. image:: pay_runs/select-employees.png
   :alt: The pay run employee selection pop-up window.

Once all desired employees are selected, click :guilabel:`Select`. The pop-up window closes, and the
pay run appears on the screen.

.. _payroll/pay-runs-pay-run:

Pay runs dashboard
------------------

To create a pay run from the pay runs dashboard, navigate to :menuselection:`Payroll app -->
Payslips --> Pay Runs`. Click the :guilabel:`New` button and a :guilabel:`New Pay Run` pop-up window
loads.

 Follow the same directions as if creating a :ref:`pay run form the payslips dashboard
 <payroll/new-pay-run-pop-up>`.

.. _payroll/add-payslips:

Add a payslips to a pay run
===========================

Once a :ref:`pay run has been created <payroll/new-pay-run>`, payslips are added as part of the pay
run creation. If needed, additional payslips can be created individually, and added to a pay run
after it has been created.

To add a new payslip, navigate to :menuselection:`Payroll app --> Payslips --> Payslips`. Click the
:guilabel:`New Off-Cycle` button and a blank :guilabel:`Employee Payslips` form loads.
:ref:`Configure the payslip form <payroll/new-payslip>`, and ensure the :guilabel:`Pay Run` field is
populated.

Once the form is configured, click :guilabel:`Compute Sheet` to calculate the payslip and add it to
the selected pay run.

.. _payroll/pay-run-process:

Process a pay run
=================

After a :ref:`pay run has been created <payroll/new-pay-run>`, and :ref:`all required payslips have
been added <payroll/add-payslips>`, the pay run must then be processed, and employees paid.

Open the desired pay run by navigating to :menuselection:`Payroll app --> Payslips --> Pay Runs`,
and clicking on the desired pay run.

For a pay run to be processed, it must have a status of :guilabel:`Ready`. That means the pay run
has been created and payslips have been added, but the payslips have *not* been processed.

Click the :guilabel:`Create Draft Entry` button, then click :guilabel:`OK` in the
:guilabel:`Confirmation` pop-up window to confirm and create a draft of all the individual payslips
in the pay run. After this occurs, the pay run status changes to :guilabel:`Done`, and moves to the
corresponding grouping on the :guilabel:`Pay Runs` dashboard.

.. tip::
   At any time, the pay run needs to be reverted back to a status of :guilabel:`Ready`, click the
   :guilabel:`Revert` button. This action does **not** remove any payslips that have already been
   added to the pay run, instead, the status changes back to :guilabel:`Ready`.

   After any desired changes have been made, click :guilabel:`Create Draft Entry` and the pay run
   status changes to :guilabel:`Done`.

   It is important to note, that if any payslips in the pay run have a status of :guilabel:`Paid`,
   the pay run **cannot** revert to a status of :guilabel:`Ready`.

Once the status has changed to :guilabel:`Done`, the payments must be logged in the database. Click
the :guilabel:`Payment Report` button, and a pop-up window loads, where the payment report details
are entered.

Using the drop-down menu, select the :guilabel:`Export Format` for the payment report. The universal
option is :guilabel:`CSV`, while all other available options depend on the installed :doc:`payroll
localization <payroll_localizations>`.

Next, select the :guilabel:`Payment Date` using the calendar selector. This is the date the
paychecks are issued.

Some :doc:`payroll localizations <payroll_localizations>` cause a :guilabel:`Bank Journal` field to
also appear. If visible, select the journal the payslips are logged on, using the drop-down menu.

Once the pop-up window is configured, click the :guilabel:`Generate` button. The :guilabel:`Payment
Report` button changes to a :icon:`fa-download` :guilabel:`Download (filetype)` button. To save a
copy of the payment report, click the :icon:`fa-download` :guilabel:`Download (filetype)` button,
select the location for the file, then click :guilabel:`Save`.

.. note::
   If the screen is enlarged beyond a certain amount, the :icon:`fa-download` :guilabel:`Download
   (filetype)` button is hidden from view. In this scenario, click the :icon:`fa-ellipsis-v`
   :guilabel:`(vertical ellipsis)` icon to view and select the :icon:`fa-download`
   :guilabel:`Download (filetype)` option.

After the report is created, click the :guilabel:`Mark as paid` button to mark the payslips as paid
in the database.

.. tip::
   Odoo automatically creates the name of the pay run according to the various selections made when
   creating the pay run (salary structure, pay schedule, etc). In some situations, a company may
   want to rename the pay runs, for better organization and a clearer understanding of what pay
   slips are part of each pay run.

   For example, a company pays its employees monthly, for both hourly and salaried employees.

   The names for their four August 2025 pay runs are:

   - `Aug 1-14 2025 - Hourly`
   - `Aug 1-14 2025 - Salary`
   - `Aug 15-31 2025 - Hourly`
   - `Aug 15-31 2025 - Salary`


==================================================
SECTION: payroll_analysis.rst
PATH: applications/hr/payroll/payroll_analysis.rst
==================================================

================
Payroll analysis
================

The *Payroll Analysis* report displays the total net wage for the company, for the last 365 days.
This report allows companies to view their payroll costs and identify any trends.

To view the *Payroll Analysis* report, navigate to :menuselection:`Payroll app --> Reporting -->
Payroll`.

:guilabel:`Net Wage` is the default metric displayed in the report, but other measures can be
displayed if desired, such as *gross wage* or *days of paid time off*. Click the
:guilabel:`Measures` :icon:`fa-caret-down` button to view a drop-down menu of other metrics to
display. Click on the desired measure to display the results.

.. image:: payroll_analysis/payroll-report.png
   :alt: Payroll overview report showing payroll for the last 365 days.

.. _payroll_analysis/multiple:

View multiple metrics
=====================

It is possible to view multiple metrics at one time by viewing the report in the *pivot table* view.
This can aid management to determine other trends, such as which departments do not take time off,
or which departments have the highest payroll costs.

.. note::
   **Only one** measure is able to be displayed in the default :icon:`fa-area-chart`
   :guilabel:`Graph` view. Multiple measures are **only** possible in the :icon:`oi-view-pivot`
   :guilabel:`Pivot` view.

To display the data in a pivot table, click on the :icon:`oi-view-pivot` :guilabel:`Pivot` button.

The default information displayed includes the number of payslips (:guilabel:`# Payslip`), the
number of :guilabel:`Days of Paid Time Off` and :guilabel:`Days of Unpaid Time Off`, along with the
:guilabel:`Net Wage` and :guilabel:`Gross Wage`. All the information is organized by department.

To display more information on the report, click the :guilabel:`Measures` :icon:`fa-caret-down`
button to reveal a drop-down menu. Click on any metric to display it on the pivot table.

.. image:: payroll_analysis/pivot.png
   :alt: Pivot table view with the various metrics on display.

Use case: comparing payroll costs
=================================

Managers can compare payroll costs, and determine which departments have raised their payroll costs,
either by hiring more employees, or by raising salaries.

To compare previous periods of time, first view the *Payroll Analysis* report in a :ref:`pivot table
<payroll_analysis/multiple>`. Then, click the :icon:`fa-caret-down` :guilabel:`(Toggle Search
Panel)` icon in the search bar, and click  :guilabel:`Start Date` :icon:`fa-caret-down` to reveal a
list of time periods (months, quarters, and years). Click on a desired time period, and a
:icon:`fa-adjust` :guilabel:`Comparison` section appears in the search bar. Click on one of the two
available options, either :guilabel:`Start Date: Previous Period`, or :guilabel:`Start Date:
Previous Year`.

The report now displays three columns of information for every displayed measure: a column for the
current time period, a column for the previous time period, and a :guilabel:`Variation` column,
which displays the difference between the two time periods in a color-coded percentage (green for
increases, red for decreases.)

.. example::
   In this example, the data shows an overall increase in the number of payslips. Since the company
   pays all employees every two weeks, an increase in the number of payslips (:guilabel:`#
   Payslips`) means that more employees were hired, in this example, a 500% increase.

   Additionally, both the :guilabel:`Net Wage` and :guilabel:`Gross Wage` increased. The department
   :guilabel:`RD US` showed the largest growth, with both metrics increasing by approximately 350%.

   .. image:: payroll_analysis/comparison.png
      :alt: Pivot table view comparing two years of data.

.. seealso::
   :doc:`../../essentials/reporting`


==================================================
SECTION: payroll_localizations.rst
PATH: applications/hr/payroll/payroll_localizations.rst
==================================================

:show-content:

=====================
Payroll localizations
=====================

*Localizations* are country-specific settings preconfigured in Odoo at the creation of the database,
which account for all taxes, fees, and allowances for that particular country.

*Payroll localizations* refer to the specific process of adapting payroll systems, policies, and
compliance measures to align with the specific labor laws, tax regulations, and social security
requirements of a particular country or region.

This ensures that employee salaries, benefits, deductions, and contributions are processed
accurately and in full compliance with local legal and financial obligations.

Localization also includes integrating country-specific payroll elements such as benefits, holidays,
termination rules, and reporting requirements, helping businesses avoid legal risks while ensuring
employees receive their correct compensation.

Install localization package
============================

A country-specific localization module :ref:`must be installed <general/install>` to properly
configure and process payroll. To install the required module, first open the **Apps** app.

Clear out the default :icon:`fa-filter` :guilabel:`Apps` filter, then type the name of the desired
country into the search bar. All available modules for that country are presented.

.. example::
   Some countries only have one localization module, while other have multiple modules. This is
   typically when other software is neede to process payroll, and importing and exporting data is
   required.

   For example. when searching for **Payroll** modules for `Egypt`, the following modules appear in
   the search, and must be installed: `Egypt - Payroll` and `Egypt - Payroll with Accounting`.

   Refer to the :ref:`country-specific documentation <payroll_localizations/countries-list>` for a
   complete list of the related **Payroll** modules required for each specific country.

.. tip::
   To see if any localization modules have been installed on the database, navigate to
   :menuselection:`Payroll app --> Configuration --> Settings`. In the :guilabel:`Settings` page, if
   a localization module was installed, a :guilabel:`(Country) Localization` section appears.

.. warning::
   It is **not** recommended to alter the localization settings, unless specifically required.

.. note::
   Odoo can handle a multi-company configuration. This is generally done when there is a main
   company or office location, such as a headquarters, and there are other offices/branches around
   the country or globe, that fall under that main company or headquarters. In Odoo, each company,
   including the headquarters, must be set up as their own company/branch using the multi-company
   method.

   Each individual company can have a different localization setting, since locations can vary
   anywhere in the world, where rules and laws differ.

   For more information on companies, refer to the :doc:`Companies <../../general/companies>`
   documentation, which covers how to set up companies.

.. _payroll_localizations/countries-list:

List of countries
=================

Payroll localization modules are available for the countries listed below.

.. note::
   New countries are frequently added to this list, as Odoo keeps expanding and improving existing
   localizations and related documentation.

- :doc:`Australia <payroll_localizations/australia>`
- :doc:`Belgium <payroll_localizations/belgium>`
- Bangladesh
- :doc:`Egypt <payroll_localizations/egypt>`
- :doc:`Hong Kong <payroll_localizations/hong_kong>`
- India
- Indonesia
- :doc:`Jordan <payroll_localizations/jordan>`
- Kenya
- Lithuania
- Luxembourg
- Malaysia
- :doc:`Mexico <payroll_localizations/mexico>`
- Morocco
- Netherlands
- Pakistan
- Poland
- Romania
- :doc:`Saudi Arabia <payroll_localizations/saudi_arabia>`
- Slovakia
- Switzerland
- :doc:`Trkiye <payroll_localizations/turkey>`
- :doc:`United Arab Emirates <payroll_localizations/united_arab_emirates>`
- :doc:`United States <payroll_localizations/united_states>`

.. toctree::
   :titlesonly:

   payroll_localizations/australia
   payroll_localizations/belgium
   payroll_localizations/egypt
   payroll_localizations/hong_kong
   payroll_localizations/jordan
   payroll_localizations/mexico
   payroll_localizations/saudi_arabia
   payroll_localizations/turkey
   payroll_localizations/united_arab_emirates
   payroll_localizations/united_states
   payroll_localizations/employment_hero


==================================================
SECTION: payslips.rst
PATH: applications/hr/payroll/payslips.rst
==================================================

========
Payslips
========

*Payslips* are individual records of payment, containing all the details of how the pay was
calculated (hours, deductions, other inputs, etc.), and generated by payroll officers through the
**Payroll** application. Payslips can be created and processed individually, or multiple payslips
can be processed at one time, in a single batch.

.. _payroll/new-payslip:

Create a payslip
================

A new payslip can be created from either the :ref:`Payslips To Pay <payroll/to-pay>` page or the
:ref:`Employee Payslips <payroll/all-payslips>` page.

Navigate to :menuselection:`Payroll app --> Payslips`, and click either :guilabel:`To Pay` or
:guilabel:`All Payslips`. Click the :guilabel:`New` button in the top-left corner, and a blank
payslip form loads.

Payslip form
------------

Fill out the following information on the payslip form:

- :guilabel:`Employee`: Using the drop-down menu, select the employee in this field. This field is
  **required**. Once a selection is made, other fields may auto-populate according to the employee
  record.

  .. note::
     It is recommended to **only** create payslips for employees that are already in the database.
     If there is no current employee record (and therefore no employee contract) it is recommended
     to create the new employee in the **Employees** application *before* creating payslips for that
     employee. Refer to the :doc:`new employee <../employees/new_employee>` documentation for
     instructions on how to add an employee.

- :guilabel:`Contract`: The current contract for the selected employee populates this field. This
  field is **required**.

  .. important::
     All employees are required to have a contract in order to generate payslips. Additionally,
     *only one* contract can be in the running stage for each employee, therefore the current
     contract populates this field, and it is **not** recommended to make changes to this field.

- :guilabel:`Batch`: Using the drop-down menu, select the payslip batch this new payslip should be
  added to, if applicable.
- :guilabel:`Structure`: The structure linked to the employee's contract auto-populates this field
  by default. If desired, use the drop-down menu to select a different structure.
- :guilabel:`Period`: The first day to the last day of the *current* month auto-populates the
  :guilabel:`Period` fields by default. The dates can be changed, if desired.

  To change the start date, click on the first date in the :guilabel:`Period` field to reveal a
  pop-up calendar. Navigate to the desired month, and click on the desired day to select that
  specific date.

  Repeat this process to modify the end date for the payslip. These fields are **required**.

.. note::
   Typically, after making a selection in the :guilabel:`Employee` field, Odoo auto-populates all
   other required fields (besides the :guilabel:`Period` field), but **only** if that information is
   already on that employee's form in the **Employees** app.

.. important::
   If modifications to auto-populated fields are made, it is recommended to check with the
   accounting department to ensure every entry that affects the **Accounting** application is
   correct.

.. image:: payslips/new-payslip.png
   :alt: The top fields for a new payslip all filled out for a February payslip.

.. _payroll/worked-days-inputs:

Worked days & inputs tab
~~~~~~~~~~~~~~~~~~~~~~~~

The :guilabel:`Worked Days & Inputs` tab details the number of days and hours the employee worked
during the specified :guilabel:`Period` of time on the top portion of the payslip form, and is
calculated based on the selected :guilabel:`Contract` and :guilabel:`Structure` fields.

The :guilabel:`Worked Days` section is automatically populated and lists all the individual
attendance records for the time period, including both worked time and any time off taken.

Each individual entry lists the :guilabel:`Type`, :guilabel:`Description`, :guilabel:`Number of
Days`, :guilabel:`Number of Hours`, and the total :guilabel:`Amount`.

Additional records cannot be created for the :guilabel:`Worked Days & Inputs` as it is
auto-populated according to the employee's attendance records or working schedule on their
:ref:`employee record <employees/work-info-tab>`.

The :guilabel:`Other Inputs` section is where additional inputs are listed, such as deductions,
reimbursements, and expenses.

Each individual item lists the :guilabel:`Type`, :guilabel:`Description`, and :guilabel:`Count`. To
add a new input, click :guilabel:`Add a line`, and using the drop-down menu, select the
:guilabel:`Type`. Next, enter a brief :guilabel:`Description`, and last, enter the
:guilabel:`Count`.

.. image:: payslips/worked-days-tab.png
   :alt: The fields filled out in the worked days and inputs tab.

Salary computation tab
~~~~~~~~~~~~~~~~~~~~~~

The :guilabel:`Salary Computation` tab is where all the individual salary rules are listed and
calculated, including everything from the employee's salary, to all the deductions and allowances,
such as taxes, expenses, benefit contributions, and any other items associated with the installed
:doc:`payroll localization <payroll_localizations>`.

When the payslip is first created, this tab remains blank. Click the :guilabel:`Compute Sheet`
button in the upper-left corner, and the :guilabel:`Salary Computation` tab is populated.

.. important::
   It is **not** possible to make edits to this tab, as the calculations are based on other entries
   on the payslip.

.. tip::
   The :guilabel:`Compute Sheet` button does not disappear from view after it is clicked, so the
   payslip can be recalculated at any point prior to :ref:`processing it <payroll/process>`.

   If any changes need to be made to the :ref:`Worked Days & Inputs <payroll/worked-days-inputs>`
   tab, click the :guilabel:`Compute Sheet` button to recalculate the payslip.

.. image:: payslips/salary-comp-tab.png
   :alt: The fields filled out in the salary computation tab.

Other info tab
~~~~~~~~~~~~~~

The :guilabel:`Other Info` tab houses information that is required, but not associated with any
inputs or calculations, as the other tabs do.

The :guilabel:`Payslip Name` is auto-populated according to the employee name and the time period
the payslip is for. Make any desired edits to the name in this field. This field is **required**.

The :guilabel:`Company` field is also automatically populated according to the employee's record,
and cannot be modified.

The end date selected in the :guilabel:`Period` field in the top half of the form populates both the
:guilabel:`Close Date` and :guilabel:`Date Account` fields, by default. The :guilabel:`Close Date`
is the date the payment is issued to the employee, while the :guilabel:`Date Account` is the end
date the payslip covers. Modify the dates, if needed.

The :guilabel:`Salary Journal` field is populated by default, and **cannot** be edited. This is the
accounting journal the paycheck is logged in.

If there are any additional notes or information needed for the payslip, add them to the
:guilabel:`Add an Internal Note...` field.

.. image:: payslips/other-info-tab.png
   :alt: The fields filled out in the other info tab.

.. _payroll/process:

Process a payslip
=================

When all the necessary information on the payslip is entered, the payslip can be processed. First, a
:ref:`draft of the journal entry <payroll/draft-entry>` is created, followed by a :ref:`payment
report <payroll/payment-report>`, and finally, the employee is :ref:`paid <payroll/pay-employee>`.

.. tip::
   Before processing payslips, it is best practice to check the *Warnings* section of the
   **Payroll** app dashboard. Here, all possible issues concerning payroll appear.

   To view the warnings, navigate to :menuselection:`Payroll app --> Dashboard`. The warnings appear
   in the top-left corner of the dashboard.

   .. image:: payslips/warnings.png
      :alt: The dashboard view of the Payroll app, with the warnings box visible.

   Warnings are grouped by type, such as `Employees Without Running Contracts` or `Employees Without
   Bank account Number`. Click on a warning to view all entries associated with that specific issue.

   If the warnings are not resolved, at any point in the payslip processing process, an error may
   occur. Errors appear in a pop-up window, and provide details for the error, and how to resolve
   them.

.. _payroll/draft-entry:

Create draft entry
------------------

Once everything on the payslip form is correct, click the :guilabel:`Create Draft Entry` button to
create the payslip. A :guilabel:`Confirmation` pop-up window appears, asking :guilabel:`Are you sure
you want to proceed?` Click :guilabel:`OK` to confirm.

Once the payslip draft is created, the status changes to :guilabel:`Done`, a :icon:`fa-usd`
:guilabel:`Journal Entry (Draft)` smart button appears at the top, and additional buttons appear in
the top-left corner.

.. note::
   After creating a draft entry, Odoo considers the payslip as confirmed.

Click the :icon:`fa-usd` :guilabel:`Journal Entry (Draft)` smart button to view the detailed
accounting journal entry. Click :guilabel:`Post` to post the entry. Using the breadcrumb menu,
return to the payslip.

After the journal entry is posted, the smart button at the top changes to :icon:`fa-usd`
:guilabel:`Journal Entry (Posted)`

.. note::
   Employees cannot be :ref:`paid <payroll/pay-employee>` until the journal entry is posted.

.. _payroll/payment-report:

Create payment report
---------------------

Once the payslip status has changed to :guilabel:`Done`, a payment report must be created. A payment
report is a document that contains all the necessary information to transfer the employee's earnings
from the company's bank account to theirs. These are submitted by the payroll department to the
appropriate institution.

Click the :guilabel:`Create Payment Report` and a pop-up window loads. Using the drop-down menu,
select the :guilabel:`Export Format` for the payment report. The two default options available are
:guilabel:`NACHA` and :guilabel:`CSV`. :guilabel:`NACHA` stands for the :abbr:`National Automated
Clearing House Association (NACHA)`, and this selection creates a compatible ACH file which is sent
to the company's bank.

.. note::
   Other options may be available depending on the :doc:`payroll localization
   <payroll_localizations>` installed in the database.

   If :guilabel:`CSV` is selected, all other fields are hidden from view.

Next, select the desired :guilabel:`Bank Journal` the paycheck is logged to. Last, using the
calendar selector, set the date the paycheck is issued in the :guilabel:`Effective Date` field.

Once the pop-up window is configured, click the :guilabel:`Generate` button, and the file appears on
the payslip form, in a new :guilabel:`Payment Report` field.

.. _payroll/pay-employee:

Pay employee
------------

Next, the payment must be sent to the employee. To do this, click the :guilabel:`Pay` button in the
upper-left corner. Doing so reveals a :guilabel:`Pay` pop-up form.

All the necessary information is pre-populated on the form according to the payslip configuration,
but modifications can be made, if necessary, to any of the fields *except* the :guilabel:`Amount`.
This is populated according to the payslip calculations, and **cannot** be modified.

- :guilabel:`Journal`: The accounting journal the payslip is logged to.
- :guilabel:`Payment Method`: Using the drop-down menu, select how the employee is being paid. The
  default options are:

  - :guilabel:`Manual Payment`: Select this if paying the employee in a method *other* than A
    :guilabel:`Check` or :guilabel:`NACHA`.
  - :guilabel:`Check`: Select this when issuing a check directly to the employee.
  - :guilabel:`NACHA`: Select this if using the :abbr:`National Automated Clearing House Association
    (NACHA)` to transfer the payment to the employee, via direct deposit.

- :guilabel:`Group Payments`: If the employee has multiple payslips for the same time period (for
  example, payroll, reimbursement, and commission checks), tick the checkbox to group all payments
  into one payment.
- :guilabel:`Payment Date`: Using the calendar selector, select the date the employee is to be paid.

Once the pop-up :guilabel:`Pay` form is complete, click the :guilabel:`Create Payments` button, and
the payment is processed.

After the payment is processed, and there is confirmation that the checks have been issued, or the
funds have been directly deposited to the employee's bank account, click the :guilabel:`Mark as
paid` button to mark the payslip as paid.

.. image:: payslips/pay.png
   :alt: Banking information can be entered in an employee's card.

.. important::
   In order for a payslip to be paid, the employee **must** have a bank account entered in the
   :ref:`private information tab <employees/private-info>` of their employee record, *and* the bank
   account must be marked as :guilabel:`Trusted`.

   If there is no bank information, or if the bank is not listed as :guilabel:`Trusted`, payslips
   cannot be paid, and an error appears when the :guilabel:`Pay` button is clicked. Edit the
   employee record, and add banking information, or trust the bank account, as needed.

Refund a payslip
================

When refunding a payment, the refund is achieved by creating a payslip for a negative amount of the
original payslip.

.. example::
   An employee is paid $5,000.00 USD in a paycheck, in error. When refunding the payslip, a new
   payslip is created in the amount of $-5,000.00.

If a payment needs to be refunded, navigate to the individual payslip being refunded, and click the
:guilabel:`Refund` button, located at the top-left of the screen. The :guilabel:`Refund Payslip`
dashboard loads, with all refund payslips appearing in a list view.

.. note::
   Since refunds are uncommon, typically only the one payslip being refunded appears in the list.

By default, the refund payslip has a status of :guilabel:`Waiting`. This refund payslip is processed
:ref:`in the same way a regular payslip is processed <payroll/process>`.

Print a payslip
===============

To print a payslip, click the :guilabel:`Print` button in the upper-left corner of the individual
payslip record. A PDF file is downloaded, and the payslip appears in the chatter, and the file is
attached to the payslip record.

.. image:: payslips/payslip-chatter.png
   :alt: The new payslip is emailed to the employee and the email appears in the chatter.

.. _payroll/all-payslips:

View all payslips
=================

To view all payslips, regardless of status, go to :menuselection:`Payroll app --> Payslips --> All
Payslips`. The :guilabel:`Employee Payslips` page loads, displaying all payslips, organized by
batch, in a default nested list view.

Click the :guilabel:` (right arrow)` next to an individual batch name to expand the list, and view
all the payslips in that particular batch, along with all the payslip details.

The number of payslips in the batch is written in parenthesis after the batch name. The
:guilabel:`Status` for each individual payslip appears on the far-right side, indicating one of the
following status options:

- :guilabel:`Draft`: the payslip is created, and there is still time to make edits, since the
  amounts are not calculated.
- :guilabel:`Waiting`: the payslip has been calculated, and the salary details can be found in the
  *Salary Computation* tab.
- :guilabel:`Done`: the payslip is calculated and ready to be paid.
- :guilabel:`Paid`: the employee has been paid.

.. image:: payslips/all-payslips.png
   :alt: View all payslips organized by batches. Click on the arrow to expand each batch.

Click on an individual payslip to view the details for that payslip on a separate page. Using the
breadcrumb menu, click :guilabel:`Employee Payslips` to go back to the list view of all payslips.

A new payslip can be created from the :guilabel:`Employee Payslips` page, by clicking the
:guilabel:`New` button in the upper-left corner. Doing so reveals a separate blank payslip form
page. On that blank payslip form page, enter all the necessary information, as described in the
:ref:`Create a payslip <payroll/new-payslip>` section.

Payslips can also be exported to an Excel spreadsheet. To export **all** payslips, click on the
:icon:`fa-cog` :guilabel:`(gear)` icon at the end of the words :guilabel:`Employee Payslips` in the
top-left corner. This reveals a drop-down menu. Click :icon:`fa-upload` :guilabel:`Export All` to
export all payslips to a spreadsheet.

To export only select payslips, first select the payslips to be exported from the list. Then, click
the checkbox to the left of each individual payslip to select it. As payslips are selected, a smart
button appears in the top-center of the page, indicating the number of selected payslips. Then,
click the :icon:`fa-cog` :guilabel:`Actions` icon in the top-center of the page, and click
:icon:`fa-upload` :guilabel:`Export`.

.. note::
   Both *To Pay* and *All Payslips* display all the detailed information for each payslip.

.. _payroll/to-pay:

View payslips to pay
====================

To only view the payslips awaiting to be processed, navigate to :menuselection:`Payroll app -->
Payslips --> To Pay`.

.. image:: payslips/all-pay-slips.png
   :alt: View all payslips that need to be paid on the Payslips To Pay page.

Each payslip lists the :guilabel:`Reference` number for the individual payslip, the
:guilabel:`Employee` name, the :guilabel:`Batch Name`, the :guilabel:`Company`, the :guilabel:`Basic
Wage`, :guilabel:`Gross Wage`, :guilabel:`Net Wage`, and the :guilabel:`Status` of the payslip.

Click on an individual payslip entry to view the details for that individual payslip.

Process the payslips :ref:`in the same way a regular payslip is processed <payroll/process>`, or in
a batch.


==================================================
SECTION: salaries.rst
PATH: applications/hr/payroll/salaries.rst
==================================================

========
Salaries
========

In Odoo, salaries are calculated and determined by five factors: salary :ref:`structure types
<payroll/structure-types>`, salary :ref:`structures <payroll/structures>`, :ref:`rules
<payroll/rules>`, :ref:`rule parameters <payroll/rule-parameters>`, and :ref:`other input types
<payroll/other-input>`. Together, these determine how each employee's pay is calculated.

Each *structure type* contains one or more *structures* within it. Each *structure* contains a set
of *rules*, and every *rule* uses *parameters* to define how specific amounts are calculated.
Additional inputs, (such as bonuses or deductions) can also be included to adjust the final salary.

When payslips are calculated, Odoo calculates the employee's worked time from their :doc:`work
entries <work_entries>`, then applies the relevant structure, rules, and parameters from the
employee's assigned structure type to determine their total pay.

.. _payroll/structure-types:

Structure types
===============

In Odoo, a *structure type* groups related salary structures. When a contract specifies a structure
type, **only** the structures within that type are used to calculate the employee's pay. Each
structure type houses individual structures within them, each containing a set of rules for
processing a timesheet entry.

Structure types define key aspects of payroll configuration, including how often employees are paid,
their working hours, the default salary structure, and whether wages are fixed (salary-based) or
variable (hourly-based).

.. example::
   A structure type called `Employee` contains two different structures within it: a `Regular Pay`
   structure which includes all the separate rules for processing regular pay, and an `End of Year
   Bonus` structure, which includes the rules **only** for the end of year bonus. Both belong to the
   same `Employee` structure type.

View existing *structure types* by navigating to :menuselection:`Payroll app --> Configuration -->
Structure Types`.

Two default structure types are preconfigured in Odoo: :guilabel:`Employee` and :guilabel:`Worker`.

Typically, :guilabel:`Employee` is used for salaried employees, which is why the :guilabel:`Default
Wage Type` is a :guilabel:`Fixed Wage`, and :guilabel:`Worker` is typically used for employees paid
by the hour, so the wage type is :guilabel:`Hourly Wage`.

.. note::
   If using a country-specific :doc:`payroll localizations <payroll_localizations>`, it is
   recommended to use the structure in the corresponding country localization document.

.. image:: salaries/structure-type.png
   :alt: List of all currently configured structure types available to use.

.. _payroll/new-structure-type:

New structure type
------------------

If the default structure types do not meet the company's needs, go to :menuselection:`Payroll app
--> Configuration --> Structure Types` and click :guilabel:`New` to create a custom structure type.

.. warning::
   When creating a new salary structure type, ensure all local and national laws are accounted for.
   Confirm with the accounting department when configuring payroll structures, to ensure all
   requirements are met.

Proceed to enter the following information in the fields:

- :guilabel:`Structure Type`: Enter the name for the new structure type, such as `Employee` or
  `Worker`.
- :guilabel:`Country`: Select the country that the new structure type applies to from the drop-down
  menu.
- :guilabel:`Wage Type`: Select the wage type for the structure:

  - :guilabel:`Fixed Wage`: For salaried employees who receive the same wage every pay period.
  - :guilabel:`Hourly Wage`: For employees paid based on hours worked during a pay period.

- :guilabel:`Default Scheduled Pay`: Select the typical pay schedule for the new structure type from
  the drop-down menu. This indicates how often this specific type of structure is paid out.
- :guilabel:`Default Working Hours`: Select the default working hours for the new structure type
  from the drop-down menu. All available working hours for the currently selected company appear in
  the drop-down menu. The default working hours are the :guilabel:`Standard 40 hours/week` option.
  If the needed working hours do not appear in the list, a :ref:`new set of default working hours
  can be created <payroll/new-default-working-hours>`.
- :guilabel:`Regular Pay Structure`: Type in the name for the regular pay structure. It is used as
  the default option when generating payslips.
- :guilabel:`Default Work Entry Type`: Select the default work entry type which is used to create
  all work entries for the employee.

.. image:: salaries/new-structure.png
   :alt: New structure type form to fill out when creating a new structure type.

.. _payroll/new-default-working-hours:

New default working hours
-------------------------

To make new default working hours, type the name for the new working hours in the :guilabel:`Default
Working Hours` field on the new structure type form. Click :guilabel:`Create and edit`. A default
working hours form pops up. The default working hours form has two sections: a general information
section, and a tab listing all the individual working hours by day and time. When the form is
completed, click :guilabel:`Save & Close`.

- :guilabel:`Name`: Type in the name for the new default working hours. This should be descriptive
  and clear to understand, such as `Standard 20 Hours/Week`.
- :guilabel:`Flexible Hours`: Check the checkbox to let employees adjust their start and end times
  while maintaining the same total daily hours.
- :guilabel:`Company Full Time`: Enter the number of hours per week an employee needs to work to be
  considered a full-time employee. Typically, this is approximately 40 hours, and this number
  affects what types of benefits an employee can receive, based on their employment status
  (full-time vs part-time).
- :guilabel:`Average Hour Per Day`: Auto-populated based on the working hours in the
  :guilabel:`Working Hours` tab. This entry affects resource planning by determining how many
  resources can be used per workday.
- :guilabel:`Work Time Rate`: This percentage is auto-generated based on the entry for the
  :guilabel:`Company Full Time` and the working hours configured in the :guilabel:`Working Hours`
  tab. This number should be between `0.00%` and `100%`, so if the percentage is above `100%`, it is
  an indication that the working times and/or :guilabel:`Company Full Time` hours need adjustment.
- :guilabel:`Company`: Select the company that can use these new default working hours from the
  drop-down menu. Leave this field blank if the hours are available for all companies.
- :guilabel:`Timezone`: Select the time zone to be used for the new default working hours from the
  drop-down menu.
- :guilabel:`Working Hours` Tab: This tab is where each day's specific working hours are listed.
  When a new default working hour form is created, the :guilabel:`Working Hours` tab is
  pre-populated with a default 40-hour week, with each day divided into three timed sections.

  Each day includes morning (8:0012:00), lunch (12:0013:00), and afternoon (13:0017:00) periods,
  configured using the 24-hour time format.

  To adjust any of these hours, click the field and modify the time using the drop-down menus, or
  type the desired time directly.

  .. note::
     Working hours are company-specific, and cannot be shared between companies.

  .. tip::
     If the working hours are not consistent each week, and the hours are on a bi-weekly schedule
     instead, click the :guilabel:`Switch to 2 week calendar` button at the top of the new default
     working hours form. This changes the :guilabel:`Working Hours` tab to display two weeks of
     working times that can be adjusted.

.. _payroll/structures:

Structures
==========

*Salary structures* are the different situations in which an employee could be paid within a
specific *structure*, and are specifically defined by various rules.

The number of structures a company needs for each structure type depends on how many different ways
employees are paid, and how their pay is calculated. A common example of an additional structure is
a `Bonus`.

To view all the various structures for each structure type, go to :menuselection:`Payroll app -->
Configuration --> Structures`.

Each :ref:`structure type <payroll/structure-types>` lists the various structures associated with
it. Each structure contains a set of rules that define it.

.. image:: salaries/salary-structure.png
   :alt: All available salary structures.

Click on a structure to view its :guilabel:`Salary Rules`. These rules define how the payslip will
be computed for the employee.

.. note::
   After installing a :doc:`payroll localization <payroll_localizations>`, relevant structures are
   installed and appear in this list.

.. image:: salaries/structure-regular-pay-rules.png
   :alt: Salary structure details for Regular Pay, listing all the specific Salary Rules.

.. _payroll/rules:

Salary rules
============

Each *structure* has a set of salary *rules* used to compute the various amounts considered in the
pay. These rules are configured by the localization and affect the computation of the salaries.

.. warning::
   Modification or creation of rules should **only** be done when necessary.

To view all the rules, go to :menuselection:`Payroll app --> Configuration --> Rules`. Click on a
structure (such as :guilabel:`Regular Pay`) to view all the rules.

Add a new rule
--------------

To make a new rule, click :guilabel:`New` and a blank :guilabel:`Salary Rules` form loads. Enter the
following information in the top half of the form:

- :guilabel:`Rule Name`: Enter a name for the rule. This is the name displayed in the payslip.
- :guilabel:`Code`: Enter a code to be used for the new rule. This is case sensitive and is used as
  the *rule ID*. This field is **required**.
- :guilabel:`Category`: Using the drop-down menu, select the category the rule applies to, or enter
  a new category. The category is used to group rules and access their total sum.
- :guilabel:`Salary Structure`: Using the drop-down menu, select the salary structure the rule
  applies to, or enter a new one. This field is **required**.
- :guilabel:`Sequence`: Enter a number indicating *when* the rule is calculated, in the sequence of
  all other rules. Rules are processed one after another based on their sequence number. Rules with
  a lower sequence number are calculated first, and their results can be used by rules with a higher
  sequence number. This field is **required**.
- :guilabel:`Appears on Payslip`: Check the checkbox to have the rule visible on the employee
  payslip PDF.
- :guilabel:`Contributes to Employer Cost`: Check the checkbox to include the rule when computing
  the *employer cost* of a payslip.

General tab
~~~~~~~~~~~

Fill out the following sections of the :guilabel:`General` tab. These configurations determine
*when* and *how* the rule is calculated.

Conditions
**********

- :guilabel:`Condition Based on`: Using the drop-down menu, select if the rule is calculated and
  displayed as a line in the payslip form view. Choose from one of the following options:

  - :guilabel:`Always True`: The rule is always calculated. No other configurations are needed for
    this section.
  - :guilabel:`Salary Input`: This introduces a dynamic benefit to the structure. This appears as a
    field in the *Payroll* tab of the *Employee* form, the *Inputs* tab of the payslip, or both. The
    value of this field is added to the amount of the rule. If selected, the following additional
    fields appear and must be configured:

    - :guilabel:`Input on`: Specify where this field should appear and which object it should belong
      to, the :guilabel:`Employee`, the :guilabel:`Payslip`, or both. If both are selected, the
      value on the payslip automatically defaults to the value from the employee record, but it can
      be overwritten directly on the payslip for a specific payroll run.
    - :guilabel:`Section`: This groups several inputs into one expandable section on the form view.
      Only one option is available by default, :guilabel:`Inputs`.
    - :guilabel:`Unit`: Click the corresponding radio button to determine how the benefit is
      displayed. The available options are:

      - :guilabel:`Monetary`: A number with currency.
      - :guilabel:`Quantity`: A number.
      - :guilabel:`Percentage`: A number with a % sign.
      - :guilabel:`Checkbox`: Indicates boolean values.

    - :guilabel:`Input Description`: Enter a short explanation of when the input is applicable.
    - :guilabel:`Default Value`: Enter the default value, either a monetary amount, quantity, or
      percentage. This is determined by what is selected for the :guilabel:`Unit`. If necessary, add
      a :guilabel:`Suffix` in the field to the right of this value, such as `per km`.

      .. note::
         If :guilabel:`Checkbox` is selected for the :guilabel:`Unit`, this field changes to
         :guilabel:`Selected by Default`. Click the checkbox to have the rule active by default.

     - :guilabel:`Depends On`: Select another rule that has a salary input, and use its value to
       determine whether this rule should be hidden.

  - :guilabel:`Other Input`: Select this to check if a payslip line exists with the same *type*.
    When selected, a :guilabel:`Condition Other Input` field appears. Using the drop-down menu,
    select the type of input the rule is based on, such as :guilabel:`Deduction`,
    :guilabel:`Reimbursement`, etc.
  - :guilabel:`Python Expression`: Select this to have the rule calculated using a Python script.
    The script is evaluated using the local dictionary. The right side lists the
    :guilabel:`Available variables` and the :guilabel:`Output`:

    - :guilabel:`Available variables`:

      - :guilabel:`payslip`: The `hr.payslip` object.
      - :guilabel:`employee`: The `hr.employee` object.
      - :guilabel:`version`: The `hr.version` object.
      - :guilabel:`result_rules`: A dictionary containing the rules amounts, quantities, rates and
        totals (previously computed).
      - :guilabel:`categories`: A dictionary containing the computed salary rule categories (the sum
        of the amount of all the rules belonging to that category):

        - :guilabel:`total`: rule total
        - :guilabel:`amount`: rule amount
        - :guilabel:`quantity`: rule quantity
        - :guilabel:`rate`: rule rate
        - :guilabel:`ytd`: rule year to date value

      - :guilabel:`worked_days`: A dictionary containing the computed worked days, where each key is
        a work entry type code, and each value is a `worked_days` object. This object contains many
        variables, with the most important ones being:

        - :guilabel:`number_of_days`: The number of days registered in the payslip duration with
          this work entry type.
        - :guilabel:`number_of_hours`: The number of hours registered in the payslip duration with
          this work entry type.
        - :guilabel:`is_paid`: Whether or not this work entry type is added as an unpaid work entry
          on this payslip structure.

      - :guilabel:`inputs`: A dictionary containing the computed inputs where *key* is the other
        input type code and *value* is the sum of the payslip input lines with the same code.

    - :guilabel:`Output`:

      - :guilabel:`result`: The boolean is *True* if the rule should be calculated, or *False* if
        otherwise.

- :guilabel:`Domain`: Select this option to apply the rule *only* if it matches the configured
  :guilabel:`Applicability Domain`. Configure the :guilabel:`Applicability Domain` that appears
  beneath this option when selected.

Computation
***********

This section determines the final value of the rule, which consists of the base amount, the
quantity, and the rate. The total of the rule is `total = amount * quantity * (rate/100)`.

.. important::
   This field does **not** appear if the :guilabel:`Condition Based on` field is set to
   :guilabel:`Salary Input`.

Using the drop-down menu, select one of the following options for the :guilabel:`Amount Type` field:

- :guilabel:`Percentage (%)`: Defines the values for the total calculation. When selected, configure
  the following fields:

  - :guilabel:`Percentage based on`: A Python expression is evaluated using the `localdict`, and its
    value is assigned to the rule amount.
  - :guilabel:`Quantity`: A Python expression is evaluated using the `localdict`, and its value is
    assigned to the rule quantity.
  - :guilabel:`Percentage (%)`: A decimal number assigned to the rule rate.

- :guilabel:`Fixed Amount`: The amount and quantity is defined, with a rate of 100%.

  - :guilabel:`Quantity`: A Python expression is evaluated using the `localdict`, and its value is
    assigned to the rule quantity.
  - :guilabel:`Fixed Amount`: Enter a decimal number which is assigned to the rule amount.

- :guilabel:`Other Input`: Select this to fetch the rule amount from the payslip input lines that
  have the same *other input type* with rate of `100%` and quantity of `1.0`. When selected, an
  :guilabel:`Amount Other Input` field appears beneath it. Using the drop-down menu, select the
  *type* of input it is, such as :guilabel:`Deduction`, :guilabel:`Tips`, or :guilabel:`Expenses`.

- :guilabel:`Python Code`: This is the more complex version of the :guilabel:`Percentage (%)`
  option, where a whole Python script is written then evaluated using the `localdict`. This includes
  a list of :guilabel:`Available variables` and an :guilabel:`Output` list.

  - :guilabel:`Available variables`:

    - :guilabel:`payslip`: hr.payslip object
    - :guilabel:`employee`: hr.employee object
    - :guilabel:`version`: hr.version object
    - :guilabel:`result_rules`: A dict containing the rules amounts, quantities, rates and totals
      (previously computed), where the key is the rule code, and the value is dict with the
      following keys:

      - :guilabel:`total`: rule total
      - :guilabel:`amount`: rule amount
      - :guilabel:`quantity`: rule quantity
      - :guilabel:`rate`: rule rate
      - :guilabel:`ytd`: rule year to date value

    - :guilabel:`categories`: A dict containing the computed salary rule categories (sum of amount
      of all rules belonging to that category) where key is the category code and value is the sum
      of the rules total values.
    - :guilabel:`worked_days`: A dict containing the computed worked days where *key* is the work
      entry type code and *value* is the `worked_days` object contain many variables, but most
      important ones are:

      - :guilabel:`number_of_days`: The number of days registered in the payslip duration with this
        work entry type.
      - :guilabel:`number_of_hours`: The number of hours registered in the payslip duration with
        this work entry type.
      - :guilabel:`is_paid`: Dictates whether or not this work entry type is added as unpaid work
        entry on this payslip structure.

    - :guilabel:`inputs`: A dict containing the computed inputs Where *key** is the other input type
      code and *value* is the sum of the payslip input lines with the same code.

  - :guilabel:`Output`:

    - :guilabel:`result`: float, base amount of the rule
    - :guilabel:`result_rate`: float, which defaults to 100.0 (%)
    - :guilabel:`result_qty`: float, quantity, which defaults to 1
    - :guilabel:`result_name`: string, name of the line. This defaults to the name field of the
      salary rule (useful if the name depends or should depend on something computed in the rule).

Company contribution
********************

Using the drop-down menu, select the eventual third party involved in the salary payment to the
employees.

Display tab
~~~~~~~~~~~

This section determines the appearance of the rule on the payslip PDF available to the employee, and
defines the rule aesthetics.

First, select a :guilabel:`Color` for the rule using the color picker. Next, check the
:guilabel:`Title` checkbox to **only** display the salary rule's *title* and *description*, and hide
any numerical values.

Check the :guilabel:`Indented`, :guilabel:`Space Above`, :guilabel:`Bold`, :guilabel:`Underline`,
and :guilabel:`Italic` checkboxes to activate the options.

Finally, enter a :guilabel:`Description` for the rule, which is displayed below the rule name.

Accounting tab
~~~~~~~~~~~~~~

This section determines how the rule affects the various accounting journals and how the Net salary
is calculated for employees. Configure the following fields in this section:

- :guilabel:`Debit Account`: Using the drop-down menu, select the debit account for the rule.
- :guilabel:`Credit Account`: Using the drop-down menu, select the credit account for the rule.
- :guilabel:`Split on names`: Enable this option to split the accounting entries for this rule
  according to the payslip line name. Splitting the entries provides more visibility for deductions
  and reimbursements, or for salary adjustments.
- :guilabel:`Excluded from Net`: Check this checkbox to exclude the rule's calculations from the net
  salary rule in journal entries. A specific debit and credit account should be set to independently
  classify it.
- :guilabel:`Set employee on account line`: Check this checkbox to have the employee's name visible
  on the journal items.

.. important::
   This tab is **only** available if the **Accounting** app is installed.

.. _payroll/rule-parameters:

Rule parameters
===============

Rule parameters inform Odoo how to calculate each line of a payslip. To view the configured rule
parameters, navigate to :menuselection:`Payroll app --> Configuration --> Rule Parameters`.

All rule parameters are displayed. Click on an individual rule parameter to view the details.

Each rule parameter displays the name of the rule, the code, when the rule is active, and the
parameter value.

.. example::
   The rule parameters for overtime pay inform Odoo that employees receive time and a half when
   working over 40 hours.

.. _payroll/other-input:

Other input types
=================

When creating payslips, it is sometimes necessary to add other entries for specific circumstances,
like tips, commissions, expenses, or deductions. These other inputs can be found by navigating to
:menuselection:`Payroll app --> Configuration --> Other Input Types`.

.. image:: salaries/other-input.png
   :alt: A list of other input types for payroll that can be selected when creating a new entry for
         a payslip.

If a new input type is needed that does not appear on the list, click the :guilabel:`New` button to
create a new input type. Enter the :guilabel:`Description`, the :guilabel:`Code`, and select which
structure it applies to in the :guilabel:`Availability in Structure` field.

Check the :guilabel:`Available in attachments` checkbox if the input should be a salary attachment.

.. important::
   The :guilabel:`Code` is used in the salary rules to compute payslips. If the
   :guilabel:`Availability in Structure` field is left blank, it indicates that the new input type
   is available for all payslips and is not exclusive to a specific structure.

.. image:: salaries/input-type-new.png
   :alt: A new Input Type form filled in.


==================================================
SECTION: salary_attachments.rst
PATH: applications/hr/payroll/salary_attachments.rst
==================================================

==================
Salary adjustments
==================

Salary adjustments are portions of earnings taken directly out of a payslip for a specific purpose,
whether voluntary or required.

When the deduction is voluntary, they are typically considered *deductions*. When the deduction is
court-ordered, or involuntary, it is sometimes referred to as a *wage garnishment*. In Odoo, these
are all universally called *salary adjustments*.

Note that salary adjustments can also be used to give recurring amounts of money to employees, like
a bonus divided into multiple payments.

.. _payroll/salary-adjustment/types:

Salary adjustment types
=======================

To view the currently configured salary adjustment types, navigate to :menuselection:`Payroll app
--> Configuration --> Other Input Types`. This displays *all* other salary inputs, not only the
various salary adjustments.

The three default salary adjustment types that appear in this list are: :guilabel:`Attachment of
Salary`, :guilabel:`Assignment of Salary`, and :guilabel:`Child Support`.

Each salary adjustment type displays the :guilabel:`Name` of the adjustment type, and the
:guilabel:`Code` used when calculating payslips.

.. image:: salary_attachments/adjustment-types.png
   :alt: The default salary adjustment types.

Create new salary adjustment types
----------------------------------

.. danger::
   Upon installation of the **Payroll** application, the preconfigured default salary adjustment
   types are linked to a variety of rules that are linked to various salary structures, as well as
   the installed :ref:`localization package <fiscal_localizations/packages>`.

   It is **not** recommended to alter or modify **any** of the preconfigured salary adjustment
   types, especially if they have been previously used on payslips in the database. Doing so may
   affect various salary rules, and can prevent the creation of payslips.

   A new salary adjustment type *can* be created, but this should only be done when absolutely
   necessary. A salary adjustment type **must** be linked to a salary rule to be considered in the
   salary computation.

To make a new type of salary adjustment, click the :guilabel:`New` button, and a blank
:guilabel:`Payslip Other Input Types` form loads. Enter the :guilabel:`Description` for the new
salary adjustment type in the corresponding field. Next, tick the :guilabel:`Available in
adjustments` checkbox, indicating it is available to use as a salary adjustment. Enter the
:guilabel:`Code` used in the salary rules to compute payslips. Lastly, if the salary adjustment type
should **only** be used in a specific payroll structure, use the drop-down menu in the
:guilabel:`Available in Structure` field, and select the specific structure.

.. _payroll/salary-adjustment/create:

Create a salary adjustment
==========================

All salary adjustments must be configured separately for each employee, for each type of salary
adjustment. To view the currently configured salary adjustments, navigate to :menuselection:`Payroll
app --> Employees --> Salary Adjustments`.

All salary adjustments appear in a default list view, and displays the name of the
:guilabel:`Employees`, the :guilabel:`Start Date`, a descriptive :guilabel:`Note`, the salary
adjustment :guilabel:`Type`, and the :guilabel:`Amount`. An :guilabel:`Until` column appears as
well, which details when the salary adjustment ends, either a monetary amount to be reached, or
:guilabel:`Indefinite` if the adjustment has no end.

At the end of each line is a status tag, with a green :guilabel:`Running` tag for active
adjustments, or :guilabel:`Closed` for adjustments that have ended.

To create a new salary adjustment, click the :guilabel:`New` button in the top-left corner, and a
blank :guilabel:`Salary Adjustment` form loads. Enter the following information on the form:

- :guilabel:`Employees`: Using the drop-down menu, select the desired employees. Multiple employees
  can be listed in this field.
- :guilabel:`Type`: Using the drop-down menu, select the specific :ref:`salary adjustment type
  <payroll/salary-adjustment/types>`.
- :guilabel:`Payslip Amount`: Enter the amount taken out of each paycheck in this field.
- :guilabel:`Negative Amount`: Tick this checkbox if the salary adjustment is taken into account as
  a negative value.
- :guilabel:`Duration`: Select the length of time for the salary adjustment. The options are:

  - :guilabel:`One Time`: Only one payment is taken from the employee's paycheck.
  - :guilabel:`Limited`: The employee is paying a specific monetary amount in total, divided up
    among multiple paychecks.
  - :guilabel:`Unlimited`: The employee is making recurring payments towards something with no end
    point, such as contributions to a retirement fund, or a donation to a charity.
  - :guilabel:`from`: Using the calendar selector, select the date the salary adjustment goes into
    effect.

  .. note::
     If the :guilabel:`Duration` field is set to :guilabel:`Limited`, an :guilabel:`until (amount)
     paid` field appears. Enter the monetary amount that must be reached, before the salary
     adjustment ends.

- :guilabel:`Note`: Enter a short description of the salary adjustment.

.. image:: salary_attachments/salary-adjustment-form.png
   :alt: The salary adjustment form with all fields filled out.

Since the salary adjustment form auto-saves as the fields are populated, after making a salary
adjustment for an individual employee, there is no further action required.

If creating salary adjustments for multiple employees on a single salary adjustment form, after the
form is filled out, click the :guilabel:`Create Individual Attachments` button. This creates
separate salary adjustments for each of the employees listed in the :guilabel:`Employees` field.

After the separate salary adjustments have been created, the screen returns to the :guilabel:`Salary
Adjustment` dashboard, but with a :guilabel:`Note` filter, populated with the information filled in
the :guilabel:`Note` field on the salary adjustment form. All the salary adjustments have a status
of :guilabel:`Running`, since they are currently active. Clear the filter in the search box to view
the default :guilabel:`Salary Adjustment` dashboard in its entirety.

Manage salary adjustments
=========================

Salary adjustments can have one of two statuses, *Running* or *Closed*. To view the current status
of all salary adjustments, navigate to :menuselection:`Payroll app --> Employees --> Salary
Adjustments`.

All salary adjustments appear in chronological order, by :guilabel:`Start Date`, with the most
recent appearing at the top. To view the salary adjustments by a particular metric, such as the
:guilabel:`Status`, or :guilabel:`Type`, click on the column title to sort by that specific column.

.. image:: salary_attachments/adjustments-list.png
   :alt: All salary adjustments, organized by start date.

Closed salary adjustments
-------------------------

When a salary adjustment is created, it has a status of :guilabel:`Running`. Once the salary
adjustment is finished (the *Until* amount entered on the :ref:`salary adjustment form
<payroll/salary-adjustment/create>` has been paid in full), the status automatically changes to
*Closed*, and the employee no longer has money taken out of future paychecks.

If a salary adjustment has been fulfilled, but has not automatically changed to *Closed*, the record
can be manually updated. To change the status, open the *Salary Adjustment* dashboard by navigating
to :menuselection:`Payroll app --> Employees --> Salary Adjustments`.

Click on the record to update, and the detailed :guilabel:`Salary Adjustment` form loads. On the
individual :guilabel:`Salary Adjustment` record, click the :guilabel:`Mark as Completed` button in
the upper-left corner, and the status changes to :guilabel:`Closed`.

.. example::
   The following is an example of when a payroll manager may need to manually change a salary
   adjustment from :guilabel:`Running` to :guilabel:`Closed`.

   Rose Smith has a salary adjustment for a lawsuit settlement, where she is required to pay
   $3,000.00. A salary adjustment is created that takes $250.00 a month out of Rose's paycheck, to
   go towards this settlement payment.

   After six months, Rose has paid $1,500.00 from her salary. She receives a tax refund, and uses
   the money to pay off the remainder of the lawsuit settlement. After sending the relevant
   documentation to the payroll manager, showing the settlement has been paid in full, the payroll
   manager manually changes the status of her salary adjustment to :guilabel:`Closed`.


==================================================
SECTION: saudi_arabia.rst
PATH: applications/hr/payroll/payroll_localizations/saudi_arabia.rst
==================================================

============
Saudi Arabia
============

.. |WPS| replace:: :abbr:`WPS (Wages Protection System)`
.. |GOSI| replace:: :abbr:`GOSI (General Organization for Social Insurance)`
.. |MHRSD| replace:: :abbr:`MHRSD (Ministry of Human Resources and Social Development)`
.. |MoL| replace:: :abbr:`MoL (Ministry of Labor)`

The Saudi Arabia payroll localization covers salary computations for employees, including national
and provincial regulations.

Before configuring the Saudi Arabia localization, refer to the general :doc:`payroll
<../../payroll>` documentation, which includes the basic information for all localizations, as well
as all universal settings and fields.

.. _payroll/saudi_apps:

Apps & modules
==============

:ref:`Install <general/install>` the following modules to get all the features of the Saudi Arabia
payroll localization:

.. list-table::
   :header-rows: 1

   * - Name
     - Technical name
     - Dependencies
     - Description
   * - :guilabel:`Saudi Arabia - Payroll`
     - `l10n_sa_hr_payroll`
     - - hr_payroll
       - hr_contract_reports
       - hr_work_entry_holidays
       - hr_payroll_holidays
     - Provides Saudi Arabia payroll basics, including salary structures (Basic/Gross/Net).
   * - :guilabel:`Saudi Arabia - Payroll with Accounting`
     - `l10n_sa_hr_payroll_account`
     - - hr_payroll_account
       - l10n_sa
       - l10n_sa_hr_payroll
     - Links payroll and accounting by creating journal entries (per payslip if needed) to record
       payroll in the company's books.

.. seealso::
   :doc:`Configure the Saudi Arabia fiscal localization
   <../../../finance/fiscal_localizations/saudi_arabia>`

General configurations
======================

First, the company must be configured. Navigate to :menuselection:`Settings app --> Users &
Companies --> Companies`. From the list, select the desired company, and configure the following
fields:

- :guilabel:`Company Name`: Enter the business name in this field.
- :guilabel:`Address`: Complete the full address, including the :guilabel:`City`, :guilabel:`State`,
  :guilabel:`Zip Code`, and :guilabel:`Country`.
- :guilabel:`VAT Number`: Enter the company's unique 15-digit :abbr:`VAT (Value Added Tax)` number.
- :guilabel:`Company ID` : Enter the business's MoL number.
- :guilabel:`Currency`: By default, :abbr:`SAR (Saudi riyal)` is selected. If not, select
  :guilabel:`SAR` from the drop-down menu.
- :guilabel:`Phone`: Enter the company phone number.
- :guilabel:`Email`: Enter the email used for general contact information.

Employees
=========

Every employee being paid must have their employee profiles configured for the Saudi Arabia payroll
localization. Additional fields are present after configuring the database for Saudi Arabia.

To update an employee form, open the :menuselection:`Employees` app and click on the desired
employee record. On the employee form, configure the required fields in the related tabs.

Work tab
--------

Enter the :guilabel:`Work Address` for the employee in the :guilabel:`Location` section of the
:guilabel:`Work` tab.

Personal tab
------------

Select the correct :guilabel:`Nationality (Country)` for the employee, using the drop-down menu. The
selected nationality determines the GOSI rate.

Ensure the employee has a minimum of one :ref:`trusted bank account <employees/private-contact>`
listed in the :guilabel:`Bank Accounts` field in the :guilabel:`Private Contact` section.

The employee's *bank account* is their :abbr:`IBAN (International Bank Account Number)`, which is
how employees receive their salary according to :abbr:`WPS (Wages Protection System)` regulations.

Payroll **cannot** be processed for employees without a *trusted* :ref:`bank account
<employees/private-contact>`. If no trusted bank account is set, a warning appears on the
**Payroll** dashboard and an error occurs when attempting to run payroll.

.. image:: saudi_arabia/bank-sa.png
   :alt: Where bank account information is located on the employee profile.

Payroll tab
-----------

Contract overview section
~~~~~~~~~~~~~~~~~~~~~~~~~

This section holds information that drives salary calculations. Ensure the following fields are
configured:

- :guilabel:`Contract`: The Validity of the compensation conditions can be updated depending on the
  needs.
- :guilabel:`Wage Type`: Select how the employee is paid.

  - Select :guilabel:`Fixed Wage` for salaried employees who receive the same amount each pay
    period.
  - Select :guilabel:`Hourly Wage` for employees paid based on hours worked.

  .. tip::
     Set a default :guilabel:`Wage Type` in the salary :ref:`Structure Type
     <payroll/structure-types>` to configure employees in bulk. If needed, the default can be
     overridden on individual employee records if exceptions are needed.

- :guilabel:`Contract Type`: Determines how the employee is paid and classified, such as
  :guilabel:`Permanent`, :guilabel:`Temporary`, :guilabel:`Seasonal`.
- :guilabel:`Pay Category`: Select :abbr:`KSA (Kingdom of Saudi Arabia)` :guilabel:`Employee` for
  this field. This defines when the employee is paid, their default working schedule, and the work
  entry type it applies to.

.. image:: saudi_arabia/payroll-overview-sa.png
   :alt: The contract overview section of the employee form of the payroll tab.

Schedule section
~~~~~~~~~~~~~~~~

- :guilabel:`Work Entry Source`: Defines how :doc:`work entries <../work_entries>` are generated for
  payroll during the specified pay period. The options are:

  - :guilabel:`Working Schedule`: Based on the employee's assigned :ref:`working schedule
    <employees/schedule>` (e.g., 40 hours per week).
  - :guilabel:`Attendances`: Based on :doc:`approved checked-in hours
    <../../attendances/management>` in the **Attendances** app.
  - :guilabel:`Planning`: Based on :ref:`scheduled shifts <planning/shifts>` in the **Planning**
    app.

- :guilabel:`Extra Hours`: Tick the checkbox to allow the **Attendances** app to add any extra work
  entries logged by the employee.
- :guilabel:`Working Hours`: Using the drop-down menu, select the default work schedule. This is
  particularly important for employees available to receive overtime pay (typically hourly
  employees, not salaried).

.. _payroll/saudi_payroll_info:

Saudi payroll information section
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Enter the employee's unique 10-digit :guilabel:`Saudi National / IQAMA ID` number in this field.
This number is issued to Saudi citizens by the :guilabel:`Ministerial Agency of Civil Affairs`, and
is used for exporting WPS reports.

The :guilabel:`Annual Leave Balance` field is not editable, and displays the employee's available
annual vacation days.

Allowances section
~~~~~~~~~~~~~~~~~~

This section determines the various benefits the employee receives. Enter the monthly Saudi riyal
amount the employee receives from the company for :guilabel:`Housing`, :guilabel:`Transportation`,
and :guilabel:`Other` costs.

Enter the annual amount paid by the company for a Saudi :guilabel:`Iqama` (`iqama` is the Arabic
word for `residence permit`). An :guilabel:`Iqama` is an official residency and identification card,
similar to a visa, and it is . It is required for **all** foreign nationals to have a valid
:guilabel:`Iqama` to work, live, and access various services in Saudi Arabia.

Enter the annual amount the employer pays for the employee's :guilabel:`Medical Insurance` in the
corresponding field.

If the employee needs a :guilabel:`Work Permit`, enter the annual fees the company pays.

End of service provision section
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

In Saudi Arabia, each employee earns a percentage of their annual salary for each year they have
worked with a company. This amount is computed based on their salary. When they leave the company,
they receive this compensation in one lump sum.

Enter the :guilabel:`Number of Days` the employee earns in annual compensation, in the corresponding
field. The company sets this amount aside every year, so it is available when the employee leaves.

Payroll configuration
=====================

Several sections within the **Payroll** app installs a Salary Structure, Structure Type, Rules, and
Parameters specific to Saudi Arabia. Additionally, some other configurations are required to run
Saudi Arabia payroll.

.. _payroll/saudi_payroll_settings:

Payroll settings
----------------

Navigate to :menuselection:`Payroll --> Configuration --> Settings` to access the **Payroll** app
settings required for Saudi Arabia.

First, the company bank account must be configured to pay employees, per WPS regulations. Click into
the drop-down space beneath the :guilabel:`Establishment Bank Account` field, and click
:guilabel:`Create...`. This opens a :guilabel:`Create Establishment's Bank Account` pop-up window.
:ref:`Configure the company's bank account  <employees/private-contact>`, and ensure it is marked as
*trusted*. Click :guilabel:`Save` to save the information and close the window.

Next, enter the company's :guilabel:`MoL Establishment ID`. This ID number is provided by Saudi
Arabia's Ministry of Labor.

Finally, select the :ref:`time off type <time_off/time-off-types>` that is used to calculate the
:guilabel:`Annual Leave Balance` set in the :ref:`employee's profile <payroll/saudi_payroll_info>`.

Salary structures & structure types
-----------------------------------

When the **l10n_sa_hr_payroll** module is :ref:`installed <payroll/saudi_apps>`, a new
:guilabel:`Salary Structure` gets installed, :guilabel:`KSA Employee`. This structure includes two
:guilabel:`Structure Types`, :guilabel:`Saudi Arabia: Monthly Pay`, and :guilabel:`SA Salary Advance
And Loan Structure`.

The :guilabel:`Salary Structure` contains all the individual :ref:`salary rules <payroll/usa_apps>`
that informs the **Payroll** app how to calculate employee payslips.

.. image:: saudi_arabia/structure-types-sa.png
   :alt: The Saudi Arabia salary structure in the salary structures list.

.. _payroll/saudi_rules:

Salary rules
------------

To view the salary rules that inform the salary structure what to do, navigate to
:menuselection:`Payroll app --> Configuration --> Structures` and expand the :guilabel:`KSA
Employee` group to reveal the two available structure types. Click :guilabel:`Saudi Arabia: Monthly
Pay` to view the detailed salary rules for that structure type.

.. image:: saudi_arabia/sa-rules-top-half.png
   :alt: The top portion of the US salary rules.

Each rule defines how pay is calculated, taking into account factors such as allowances, deductions,
and company contributions.

Rule parameters
---------------

Some calculations require specific rates associated with them, or wage caps. *Rules Parameters* are
capable of listing a value, either a percentage or a fixed amount, to reference in the salary rules.

Most rules pull information stored in the parameters module to get the rate of the rule (a
percentage) and the cap (a dollar amount).

To view rule parameters, navigate to :menuselection:`Payroll app --> Configuration --> Rule
Parameters`. Here, all rule parameters are displayed with their linked :guilabel:`Salary Rules`,
which can be accessed. Review the parameters associated with a rule by looking for the
:guilabel:`Name` of the rule, and make any edits as needed.

The Saudi Arabia payroll localization comes with four rule parameters:

- :guilabel:`Saudi GOSI Company Contribution`: This rule parameter determines the calculation of the
  GOSI contributions the employer must make for Saudi Arabia employees.
- :guilabel:`Non-Saudi GOSI Company Contribution`: This rule parameter determines the calculation of
  the GOSI contributions the employer must make for each non-Saudi Arabian employee.
- :guilabel:`Saudi GOSI Employee Contribution`: This rule parameter determines the calculation of
  the GOSI contributions the employee must make, and is deducted from their pay.
- :guilabel:`Saudi Arabia Overtime Rate`:  This rule parameter determines the overtime rate for
  employees.

.. important::
   Odoo adds updated rule parameters for the current calendar year. It is **not** recommended to
   edit rule parameters **unless a national or provincial parameter has changed**, and is different
   from the rule parameters created by Odoo. Check with all local and national regulations *before*
   making any changes to rule parameters.

.. _payroll/saudi_run_payroll:

Run Saudi Arabia payroll
========================

Before running payroll, the payroll officer must validate employee :doc:`work entries
<../work_entries>` to confirm pay accuracy and catch errors. This includes checking that all time
off is approved and any overtime is appropriate.

Work entries sync based on the employee's :doc:`contract <../contracts>` configuration. Odoo pulls
from the assigned working schedule, attendance records, planning schedule, and approved time off.

Any :ref:`discrepancies or conflicts <payroll/conflicts>` must be resolved, then the work entries
can be :ref:`regenerated <payroll/regenerate-work-entries>`.

Once everything is correct, draft payslips can be :ref:`created individually <payroll/process>` or
in :doc:`groups <../pay_runs>`, referred to in the **Payroll** app as *Pay Runs*.

.. image:: saudi_arabia/work-entries-sa.png
   :alt: The work entries for a pay run, with some time off entered in the work entries.

.. note::
   To cut down on the payroll officer's time, it is typical to process payslips in batches, either
   by wage type (fixed salary vs hourly), pay schedule (weekly, bi-weekly, monthly, etc.),
   department (direct cost vs. administration), or any other grouping that best suits the company.

The process of running payroll includes different actions that need to be executed to ensure that
the amount that the employee receives as their net salary is correct, any deductions or allocations
are correct, and the computation of hours worked reflects the employee's actual hours worked, among
others.

When running a payroll batch, check that the period, company, and employees included are correct
*before* starting to analyze or validate the data.

Once the payslips are drafted, review them for accuracy. Check the :guilabel:`Worked Days & Inputs`
tab, and ensure the listed worked time is correct, as well as any other inputs. Add any missing
inputs, such as commissions, tips, reimbursements, that are missing.

Next, check the various totals (gross pay, allowances, contributions, etc.), then click
:guilabel:`Compute Sheet` to update the salary calculations, if there were edits. If everything is
correct, click :guilabel:`Validate`.

.. image:: saudi_arabia/check-payslips-sa.png
   :alt: The worked days tab of a payslip.

Accounting check
----------------

The accounting process when running payroll has two components: :ref:`creating journal entries
<payroll/journal_saudi>`, and :ref:`registering payments <payroll/register_saudi>`.

.. _payroll/journal_saudi:

Journal entry creation
~~~~~~~~~~~~~~~~~~~~~~

After payslips are confirmed and validated, journal entries are posted either individually, or in a
batch. The journal entry is created first as a draft.

.. important::
   It must be decided if journal entries are done individually or in batches *before* running
   payroll.

.. image:: saudi_arabia/draft.png
   :alt: All payslips in a draft state.

Fifteen accounts from the Saudi Arabia :abbr:`CoA (Chart of Accounts)` are included with the payroll
localization:

- `400003 Basic Salary`: Tracks the basic wages paid to employees.
- `400004 Housing Allowance`: Captures housing allowance payments provided to employees.
- `400005 Transportation Allowance`: Captures transportation allowance payments to employees.
- `400012 Staff Other Allowances`: Covers employee allowances that do not fit standard categories.
- `106012 Prepaid Employee Expenses`: Logged as prepaid assets for employer-paid items that are
  *not* wages (for example, `Iqama` fees and medical insurance) and expensed as consumed.
- `201006 Leave Days Provision`: Accrues the cost of paid leave; the balance is reduced when leave
  is taken, and any leave not taken may be paid out at end of service.
- `201022 GOSI Employee Payable`: Holds amounts payable for social insurance contributions to the
  GOSI, including both employee and employer portions.
- `202001 End of Service Provision`: Accumulates the end-of-service benefit monthly so the amount
  can be paid (partially or fully) when the employee leaves, per service length and reason.
- `400007 Leave Salary`: Records salaries actually paid to employees while on paid leave.
- `400008 End of Service Indemnity`: Captures company expenses set aside to fund end-of-service
  benefits (expense-side counterpart to the provision).
- `400009 Medical Insurance`: Accounts for employer expenses related to employee medical insurance
  premiums.
- `400010 Life Insurance`: Tracks employer expenses for life/occupational insurance or the
  employer's portion of social insurance.
- `400014 Visa Expenses`: Used to track employer costs for non-Saudi Arabian employees' visas and
  related processing/renewal fees.
- `400074 Salary Deductions`: Reflects deductions applied to employee salaries (e.g., advances,
  fines, statutory deductions).
- `201002 Payables`: Shows amounts payable to employees as salaries (unpaid salary liability at
  period end).

If everything seems correct on the journal entry draft, post the journal entries.

.. image:: saudi_arabia/validated.png
   :alt: Journal entries posted.

.. _payroll/register_saudi:

Register Payments
-----------------

After the :ref:`journal entries <payroll/journal_saudi>` are validated, Odoo can generate payments.

.. important::
   To generate payments from payslips,employees **must** have a *trusted* bank account. If the
   employee's bank account is *not* marked as `trusted`, WPS files **cannot** be generated through
   Odoo.

Payments can be :guilabel:`Grouped by Partner` if there is a partner associated with a salary rule.

.. image:: saudi_arabia/paid.png
   :alt: Payslips with a status of paid.

Close Payroll
-------------

If there are no errors, payroll is completed for the pay period.

Employee loans and advances
===========================

Employees are able to request :ref:`loans <payroll/loans>` or :ref:`advances <payroll/advances>`
against their salaries. *Loans* are handled by creating salary adjustments, whereas *advances* are
created and managed manually.

.. _payroll/loans:

Employee loans
--------------

Employees can take out *loans* against their salary and repay the loan with automatic deductions
from future paychecks. These loans are handled by :ref:`creating a salary adjustment
<payroll/salary_adjust_saudi>` to log the total loan amount and set up a repayment plan, and
:ref:`creating a payslip for the total loan amount <payroll/loan_payslip_saudi>`. The employee then
:ref:`repays the loan <payroll/repay_saudi>` in the increments configured in the salary adjustment.

.. _payroll/salary_adjust_saudi:

Create a salary adjustment
~~~~~~~~~~~~~~~~~~~~~~~~~~

When an employee requests a loan, first a *salary adjustment* is made, where the total loan amount
and repayment plan is configured.

To create the loan and repayment schedule, navigate to :menuselection:`Payroll app --> Employees -->
Salary Adjustments`. Click :guilabel:`New`, and a blank :guilabel:`Salary Adjustment` form loads.

Configure the following fields on the form:

- :guilabel:`Employees`: Using the drop-down menu, select the employee taking out the loan.
- :guilabel:`Type`: Using the drop-down menu, select :guilabel:`Loan Deduction`.
- :guilabel:`Payslip Amount`: Enter the :abbr:`SAR (Saudi riyal)` amount to be repaid each payslip.
- :guilabel:`Duration`: Tick the :guilabel:`Limited` option, which reveals a :guilabel:`until`
  (amount) :guilabel:`paid` field. First, using the calendar selector, enter the date the repayment
  begins. Next, enter the total loan amount in the field after :guilabel:`until`. Once both fields
  are configured, Odoo calculates when the loan is fully repaid, and displays the date as follows:
  `end in # years: (date)`.
- :guilabel:`Note`: Enter any details about the loan in this field.

.. image:: saudi_arabia/loan.png
   :alt: A salary adjustment form filled out for an employee loan.

.. _payroll/loan_payslip_saudi:

Generate a loan payslip
~~~~~~~~~~~~~~~~~~~~~~~

After creating the salary adjustment, a button labeled :guilabel:`Create Loan Payslip` appears above
the form. Click :guilabel:`Create Loan Payslip`, and Odoo automatically generates a payslip
configured for the employee loan, in the amount set up in the :ref:`salary adjustment
<payroll/salary_adjust_saudi>`.

Review the payslip to ensure all the fields and tabs are correct. The :guilabel:`Structure` should
be :guilabel:`SA Salary Advance And Loan Structure`. The :guilabel:`Salary Inputs` tab should list a
:guilabel:`Loan Deduction`, and the :guilabel:`Total` should be the full amount of the loan.

Click into the :guilabel:`Other Info` tab, and enter the date the employee receives the payment in
the :guilabel:`Payment Date` field.

Once the payslip form is correct, click :guilabel:`Compute Sheet`, then click :guilabel:`Create
Draft Entry`, and click :guilabel:`OK` in the confirmation pop-up window. Next, click
:guilabel:`Pay` to mark the payment as paid, then click :guilabel:`Create Payment Report` to
:ref:`generate the WPS report <payroll/reports_saudi>`.

.. image:: saudi_arabia/loan-payslip.png
   :alt: A configured loan payslip.

.. _payroll/repay_saudi:

Loan repayment to employer
~~~~~~~~~~~~~~~~~~~~~~~~~~

From the date set on the :ref:`salary attachment <payroll/salary_adjust_saudi>`, all future
paychecks have the configured repayment amount taken out, to go towards the loan. Once the loan is
fully paid, the deductions end.

.. note::
   The deductions should end after the total is repaid, according to the salary adjustment. To
   ensure payments *stop* being taken out of the employee's paychecks after the loan has been
   repaid, open the salary adjustment record. If the salary adjustment still has a status of
   :guilabel:`Running`, click the :guilabel:`Mark as Completed` button, and the status changes to
   :guilabel:`Closed`, and payments stop.

.. _payroll/advances:

Salary advances
---------------

Employees can request an advance of their salary, outside of the regular pay cycle. This process is
done by paying the employee with a :ref:`manually created payslip <payroll/advance_slip>`, then the
employee repays the advance either :ref:`in full <payroll/repay_full>` in the next payslip, or in
:ref:`multiple payments <payroll/repay_partial>` in subsequent paychecks until the total is repaid.

.. _payroll/advance_slip:

Create advance payslip
~~~~~~~~~~~~~~~~~~~~~~

To issue an advanced payment, navigate to :menuselection:`Payroll app --> Payslips --> Payslips`.
Click the :guilabel:`New Off-Cycle` button and a blank :guilabel:`Employee Payslips` form loads.

Configure the following fields on the payslip:

- :guilabel:`Employees`: Using the drop-down menu, select the employee taking out the advance.

  .. note::
     Once the :guilabel:`Employee` is selected, the :guilabel:`Employee Record` field populates with
     the most recent employee version (contract).

- :guilabel:`Structure`: Using the drop-down menu, select :guilabel:`SA Salary Advance And Loan
  Structure`.

Next, click :guilabel:`Add a line` in the :guilabel:`Salary Inputs` tab. Select :guilabel:`Salary
Advance` for the :guilabel:`Type`. Next, enter any relevant description in the :guilabel:`Notes`
field, such as `Advance for auto repair`. Last, enter the amount being advanced in the
:guilabel:`Amount` field.

Once these fields have been configured, click :guilabel:`Compute Sheet`, then click
:guilabel:`Create Draft Entry`, and click :guilabel:`OK` in the confirmation pop-up window. Click
:guilabel:`Pay` to mark the payment as paid, then click :guilabel:`Create Payment Report` to
:ref:`generate the WPS report <payroll/reports_saudi>`.

.. image:: saudi_arabia/advance.png
   :alt: A configured loan payslip.

.. _payroll/repay_full:

Automatic repayment in full
~~~~~~~~~~~~~~~~~~~~~~~~~~~

When the employee's next payslip is generated (using the `Saudi Arabia: Monthly Pay` structure), a
line is added under the `Other Inputs` tab, titled `Advanced Recovery`.

The amount is based on the advance previously taken by the employee. If the employee cannot repay
the full amount in the paycheck, the repayment can be broken up into :ref:`multiple payments
<payroll/repay_partial>`.

.. _payroll/repay_partial:

Multiple payments
~~~~~~~~~~~~~~~~~

When an employee cannot repay an advance in full in a future payslip, the employee can make partial
payments until the advance is repaid. To do this, the amount being deducted from the employee's
paycheck must be manually modified.

Open the employee's payslip, and under the :guilabel:`Salary Inputs` tab, modify the amount
specified on the :guilabel:`Advanced Recovery` line.

Odoo automatically calculates the remainder of the advance, and adds an :guilabel:`Advanced
Recovery` line for the balance in the subsequent payslip. If the employee cannot pay the second
payment in full, the :guilabel:`Advanced Recovery` line can be edited in the following payslip.

.. _payroll/reports_saudi:

WPS reports
===========

The WPS report is a mandatory report all Saudi Arabian companies are required to provide the
government. The report confirms employee wages, including when and how much they were paid. The WPS
report can be generated either per payslip or per pay run.

.. note::
   This report is structured in accordance with the technical guidelines issued by the MHRSD.

.. important::
   To run the WPS report, the :guilabel:`Establishment Bank Account` and :guilabel:`Ministry of
   Labor Establishment ID` fields **must** be :ref:`configured <payroll/saudi_payroll_settings>` for
   the company.

   Ensure the :guilabel:`Establishment Bank Account` has the :guilabel:`Bank Establishment ID`,
   and :guilabel:`Bank SARIE Code` fields configured, and the bank is marked as :guilabel:`Trusted`.

   Ensure all employees included in the report have a :guilabel:`Saudi National / IQAMA ID` set on
   their employee profile.

First, :ref:`payslips or pay runs are generated <payroll/saudi_run_payroll>`, then the :ref:`journal
entries are posted <payroll/journal_saudi>`.

Click the :guilabel:`Payment Report` button on the :guilabel:`Pay Runs` dashboard, the individual
pay run, or an individual payslip, and a payment report pop-up window loads.

:guilabel:`Saudi WPS` is selected in the :guilabel:`Export Format` field, by default, and the
:guilabel:`Payment Date` and :guilabel:`WPS Value Date` fields are both populated according to the
selected payslips or pay runs.

The :guilabel:`WPS Debit Date` is an optional field, and specifies the date the company physically
pays the employees (transfers funds from the company account to employee accounts).

Once all fields are configured, click :guilabel:`Generate`, and the WPS report is created.


==================================================
SECTION: time_off_to_report.rst
PATH: applications/hr/payroll/time_off_to_report.rst
==================================================

==================
Time off to report
==================

Payroll is often processed a few days before the end of a pay period, so that employees can be paid
in a timely manner. When work schedules are predictable, this method often works. However, sometimes
employees take time off unexpectedly, especially sick time. When this occurs, there can be
discrepancies in payroll that must be addressed.

.. example::
   The payroll department for a medium-sized company processes paychecks every two weeks, on
   Wednesdays. Each employee is paid on the Friday after.

   One employee is sick on the last Thursday and Friday of the two-week pay period. Since they have
   automatically generated work entries based on their working schedule, and payroll is processed on
   Wednesdays, the paycheck they receive incorrectly states that they were paid for a regular work
   day for all ten days of the two-week pay period.

   Instead of cancelling the paycheck and reissuing it, causing delays for the employee and more
   work for the payroll department, Odoo allows for the deferral of the time off taken, to the
   following pay period.

   This ensures all time off balances are correct, and the employee is properly compensated for
   their time.

.. _payroll/time-off-dashboard:

Time off dashboard
==================

When time off requests are submitted for a time period that was already processed on a payslip, the
time off requests appear in the *Time Off* page of the **Payroll** app. To access this, navigate to
:menuselection:`Payroll app --> Work Entries --> Time Off to Report`.

The :guilabel:`Time Off` page default filter is :guilabel:`To Defer`, and displays all requests with
a :guilabel:`Payslip State` of :guilabel:`To defer to next payslip`. This is because the employee
was *already paid* for that time as worked time, and it was logged as regular time spent at work.

.. image:: time_off_to_report/time-off-to-report.png
   :alt: A list of all time off requests that were not approved before payslips were generated.

Defer multiple time off entries
===============================

In order to keep the employee's time off balances correct, the time off request **must** be applied
to the following pay period. This not only ensures time off request balances are current, it also
eliminates the need to redo work entries, cancel paychecks, and reissue paychecks.

To select the work entries to defer, tick the box to the left of the work entry line on the
:ref:`Time Off page <payroll/time-off-dashboard>`. To select all work entries in the list, tick the
box to the left of the :guilabel:`Employee` column title, at the top of the list.

Once any work entry is selected, two buttons appear at the top of the report: a :guilabel:`(#)
selected` button, and an :icon:`fa-gear` :guilabel:`Actions` button. The :guilabel:`(#) selected`
button indicates how many entries are currently selected.

When all the desired work entries are selected, click the :icon:`fa-gear` :guilabel:`Actions`
button, and a menu appears with several choices. Click :guilabel:`Defer to Next Month` in the list,
and all selected entries are deferred to the following month.

Defer individual time off entries
=================================

Time off requests appearing on the :ref:`Time Off page <payroll/time-off-dashboard>` can be deferred
individually. Click on an individual time off request, and the details for that request load.

The specific details for the time off request appear on the left-hand side, and all of the
employee's submitted time off requests appear on the right-hand side (including the request in the
details on the left-hand side).

To defer the time off request to the next payslip, click the :guilabel:`Report to Next Month` button
in the upper-left corner. Once processed, the :guilabel:`Report to Next Month` button disappears,
and the :guilabel:`Payslip State` changes from :guilabel:`To defer to next payslip` to
:guilabel:`Computed in Current Payslip`.

.. image:: time_off_to_report/single-defer.png
   :alt: The time off details for an individual request that needs to be deferred.


==================================================
SECTION: turkey.rst
PATH: applications/hr/payroll/payroll_localizations/turkey.rst
==================================================

=======
Trkiye
=======

The Trkiye payroll localization covers salary computations for employees, including both employee
and employer payroll taxes. It accounts for federal and state regulations.

Before configuring the Trkiye localization, refer to the general :doc:`payroll <../../payroll>`
documentation, which includes the basic information for all localizations, as well as all universal
settings and fields.

.. _payroll/turkey_apps:

Apps & modules
==============

:ref:`Install <general/install>` the following modules to get all the features of the Trkiye
payroll localization:

.. list-table::
   :header-rows: 1

   * - Name
     - Technical name
     - Dependencies
     - Description
   * - :guilabel:`Trkiye - Payroll`
     - `l10n_tr_hr_payroll`
     - - hr_payroll
     - Includes all salary rules, leave logic, and compensation rules compliant with Trkiye labor
       laws.
   * - :guilabel:`Trkiye - Payroll with Accounting`
     - `l10n_tr_hr_payroll_account`
     - - hr_payroll_account
       - l10n_tr_hr_payroll_account
       - l10n_tr_hr_payroll
     - Links payroll and accounting by creating journal entries (per payslip if needed) to record
       payroll in the company's books.

General configurations
======================

First, the company must be configured. Navigate to :menuselection:`Settings app --> Users &
Companies --> Companies`. From the list, select the desired company, and configure the following
fields:

- :guilabel:`Company Name`: Enter the business name in this field.
- :guilabel:`Address`: Complete the full address, including the :guilabel:`City`, :guilabel:`State`,
  :guilabel:`ZIP`, and :guilabel:`Country`.
- :guilabel:`Tax ID`: Enter the company's tax ID.
- :guilabel:`Company ID` : Enter the business's ID number.
- :guilabel:`Currency`: By default, :abbr:`TRY (Turkish lira)` is selected. If not, select
  :guilabel:`TRY` from the drop-down menu.
- :guilabel:`Phone`: Enter the company phone number.
- :guilabel:`Email`: Enter the email used for general contact information.

Employees
=========

Every employee being paid must have their employee profiles configured for the Trkiye payroll
localization. Additional fields are present after configuring the database for Trkiye.

To update an employee form, open the :menuselection:`Employees` app and click on the desired
employee record. On the employee form, configure the required fields in the related tabs.

Work tab
--------

Enter the :guilabel:`Work Address` for the employee in the :guilabel:`Location` section of the
:guilabel:`Work` tab.

Personal tab
------------

Ensure the employee has a minimum of one :ref:`trusted bank account <employees/private-contact>`
listed in the :guilabel:`Bank Accounts` field in the :guilabel:`Private Contact` section.

These accounts are used to pay the employee. Payroll **cannot** be processed for employees without a
*trusted* :ref:`bank account <employees/private-contact>`. If no trusted bank account is set, a
warning appears on the **Payroll** dashboard and an error occurs when attempting to run payroll.

Payroll tab
-----------

.. _payroll/turkey_contract:

Contract overview section
~~~~~~~~~~~~~~~~~~~~~~~~~

This section holds information that drives salary calculations. Ensure the following fields are
configured:

- :guilabel:`Contract`: Ensure a contract start date is entered in the first field.
- :guilabel:`Wage Type`: Select how the employee is paid.

  - Select :guilabel:`Fixed Wage` for salaried employees who receive the same amount each pay
    period.
  - Select :guilabel:`Hourly Wage` for employees paid based on hours worked.

  .. tip::
     Set a default :guilabel:`Wage Type` in the salary :ref:`Structure Type
     <payroll/structure-types>` to configure employees in bulk. If needed, the default can be
     overridden on individual employee records if exceptions are needed.

- :guilabel:`Net to Gross`: Leave this box unchecked if the gross salary is based on a fixed gross
  and a dynamically computed net (Gross to Net). Activate this option if the gross salary is based
  on a fixed net and a dynamically computed gross (Net to Gross).
- :guilabel:`Wage`: If :guilabel:`Net to Gross` is unchecked, this field displays :guilabel:`Wage`.
  If it is checked, this field displays :guilabel:`Net Wage`. Enter the monthly amount earned by the
  employee.
- :guilabel:`Employee Type`: May affect the working hours for the employee.
- :guilabel:`Contract Type`: Determines how the employee is paid and classified, such as
  :guilabel:`Permanent`, :guilabel:`Temporary`, or :guilabel:`Student`.
- :guilabel:`Pay Category`: Select :guilabel:`Trkiye: Employee` for this field. This defines when
  the employee is paid, their default working schedule, and the work entry type it applies to.

.. image:: turkey/contract-tr.png
   :alt: The contract overview section of the employee form of the payroll tab.

Schedule section
~~~~~~~~~~~~~~~~

- :guilabel:`Work Entry Source`: Defines how :doc:`work entries <../work_entries>` are generated for
  payroll during the specified pay period. The options are:

  - :guilabel:`Working Schedule`: Based on the employee's assigned :ref:`working schedule
    <employees/schedule>` (e.g., 40 hours per week).
  - :guilabel:`Attendances`: Based on :doc:`approved checked-in hours
    <../../attendances/management>` in the **Attendances** app.
  - :guilabel:`Planning`: Based on :ref:`scheduled shifts <planning/shifts>` in the **Planning**
    app.

- :guilabel:`Working Hours`: Using the drop-down menu, select the default work schedule. This is
  particularly important for employees available to receive overtime pay (typically hourly
  employees, not salaried).

Payroll configuration
=====================

Several sections within the **Payroll** app install a Salary Structure, Structure Type, Rules, and
Parameters specific to Trkiye.

Salary structures & structure types
-----------------------------------

When the **l10n_tr_payroll** module is :ref:`installed <payroll/turkey_apps>`, a new
:guilabel:`Salary Structure` gets installed, :guilabel:`Trkiye: Regular Pay`. This structure
includes one :guilabel:`Structure Type`, :guilabel:`Trkiye: Employee`.

The :guilabel:`Salary Structure` contains all the individual :ref:`salary rules
<payroll/turkey_rules>` that informs the **Payroll** app how to calculate employee payslips.

.. image:: turkey/structure-types-tr.png
   :alt: The Trkiye salary structure in the salary structures list.

.. _payroll/turkey_rules:

Salary rules
------------

To view the salary rules that inform the salary structure what to do, navigate to
:menuselection:`Payroll app --> Configuration --> Structures` and expand the :guilabel:`Trkiye:
Employee` group to reveal the :guilabel:`Trkiye: Monthly Pay` structure type. Click
:guilabel:`Trkiye: Monthly Pay` to view the detailed salary rules.

.. image:: turkey/tr-rules-top-half.png
   :alt: The top portion of the Trkiye salary rules.

Each rule defines how pay is calculated, taking into account factors such as commissions, bonuses,
taxes, and insurance.

.. _payroll/turkey_rule-parameters:

Rule parameters
---------------

Some calculations require specific rates associated with them, or wage caps. *Rules Parameters* are
capable of listing a value, either a percentage or a fixed amount, to reference in the salary rules.

Most rules pull information stored in the parameters module to get the rate of the rule (a
percentage) and the cap (a monetary amount).

To view rule parameters, navigate to :menuselection:`Payroll app --> Configuration --> Rule
Parameters`. Here, all rule parameters are displayed with their linked :guilabel:`Salary Rules`,
which can be accessed. Review the parameters associated with a rule by looking for the
:guilabel:`Name` of the rule, and make any edits as needed.

Ensure the following rules parameters are up to date with current rules and regulations:

- :guilabel:`Trkiye Minimum Wage`
- :guilabel:`Trkiye SSI Base Amount Ceiling`
- :guilabel:`Trkiye Tax Exemption Amount`
- :guilabel:`Trkiye Stamp Tax Percentage`
- :guilabel:`Trkiye Tax Bracket Rates`
- :guilabel:`Trkiye SSI Company Contribution`

.. example::
   The minimum wage is updated, and is different from the one added by default in Odoo. To update
   this, navigate to :menuselection:`Payroll app --> Configuration --> Rule Parameters`, then click
   the rule parameter :guilabel:`Trkiye Minimum Wage`. Click :guilabel:`Add a line` and add the new
   :guilabel:`Parameter Value` (minimum wage), and reference the date the change goes into effect.

.. important::
   Odoo adds updated rule parameters for the current calendar year. It is **not** recommended to
   edit rule parameters **unless a parameter has changed**, and is different from the rule
   parameters created by Odoo. Check with all local and national regulations *before* making any
   changes to rule parameters.

Trkiye taxes
=============

The following sections explain in detail the various employer and employee taxes specific to
Trkiye.

Social insurance
----------------

Social insurance rules calculate the contribution amounts that are to be paid by the employer and
employee to the :abbr:`SSI (Social Security Institution)`. This is **only** available for Trkiye
employees.

Social insurance consists of two main categories:

- **Social Insurance**: Employers contribute 15% of their employee's salaries to the :abbr:`SSI
  (Social Security Institution)`, while employees contribute 14% of their salaries, which is
  deducted from their payslips.
- **Unemployment Insurance**: Employers contribute 2% of their employee's salaries to the
  :abbr:`SSI (Social Security Institution)`, while employees contribute 1% of their salary, which is
  deducted from their payslips.

.. important::
   Employer and employee contributions for both categories are calculated according to a salary
   maximum that is revised each year. Therefore, it is necessary to check the corresponding
   :ref:`rule parameters <payroll/turkey_rule-parameters>` to ensure all taxes are current.

Income tax
----------

Employees in Trkiye are subject to a progressive income tax system, where tax rates increase with
higher annual income levels.

To calculate the deductible tax amount for the current month, the following is done:

#. **Compute year-to-date gross amount**: This serves as the base amount for calculating the
   employee's taxable salary.
#. **Determine year-to-date taxable amount**: The taxable amount is compared to progressive tax
   brackets to compute the year-to-date tax amount due.
#. **Subtract prior month's tax**: The amount taxed in previous months is subtracted from the
   year-to-date tax to obtain the pre-exemption tax amount due for the current month.
#. **Deduct exemption amount**: The exemption amount is deducted from the pre-exemption tax to
   determine the final tax due amount post-exemptions.

Tax brackets
~~~~~~~~~~~~

As of 2025, and depending on the annual income of the employee, the following rates apply:

.. list-table::
   :header-rows: 1
   :stub-columns: 0

   * - Taxable Bracket
     - Range
   * - 15%
     - 0.00 - 158,000.00
   * - 20%
     - 158,000.00 - 330,000.00
   * - 27%
     - 330,000.00 - 800,000.00
   * - 35%
     - 800,000.00 - 4,300,000.00
   * - 40%
     - above 4,300,000.00

.. note::
   Tax brackets are applied progressively. This means each portion of an employee's income is taxed
   at its respective rate within each bracket, rather than their entire income being taxed at the
   highest rate they fall into.

.. important::
   Turkish employees benefit from a monthly personal income tax **exemption**, which is adjusted
   each year. For 2025, the exemption amount is TRY 3,315.70 per month, from January through July.

Stamp Tax
~~~~~~~~~

Stamp tax is applied to gross salary payments in Trkiye. The standard rate is 0.759% (i.e. 7.59 per
thousand), which is withheld from the employee's gross wage and remitted to the tax authority
:abbr:`GIB (Gelir daresi Bakanlii,)` by the employer.

The base amount for the stamp tax is the total gross salary amount (including bonuses or extras).

.. important::
   Turkish employees receive a personal stamp tax **exemption**, the value of which is updated
   annually. As of 2025, the exemption amount is TRY 197.38 per month, from January through July.
   This applies to gross earnings up to the legal minimum wage level before calculating stamp tax.

Net to gross
------------

On an employee record, if the option :guilabel:`Net to Gross` is enabled in the :ref:`contract
section <payroll/turkey_contract>` of the payroll tab, the net salary is fixed, and specified in the
:guilabel:`Net Wage` field, while the gross wage is recalculated each month, and increases
throughout the year.

The gross wage is what tax calculations are based on, so for these employees, the monthly *net* wage
does **not** change, but the monthly *gross* amount is recalculated each month, changing the taxes
with it.

In this scenario, the least amount of taxes are paid in the beginning of the year, and taxes
increase as the year progresses.

.. example::
   On January 31st, an employee's year-to-date total income is 10,000. The income tax is calculated
   based on the 10,000, which in this example is 800. In February, the employee's year-to-date
   gross is 20,000, and the taxes are calculated based on that figure, for a total of 2,000.

   Since the employee already paid 800 in January, the taxes due for February are 1,200 because
   the employee already paid 800 toward that total (2,000 - 800 = 1,200).

Gross to net
------------

On an employee record, if the option :guilabel:`Net to Gross` is **not** enabled in the
:ref:`contract section <payroll/turkey_contract>` of the payroll tab, the gross salary is calculated
based on the :guilabel:`Wage` field.

The gross wage then has all the salary rules computed, to determine the *net* wage. The taxes are
then computed based on the gross wage. In this scenario, unlike with net to gross, taxes are more
consistent and do not change that much, from month to month.

.. note::
   The gross from net calculation depends on the salary rules defined in the :guilabel:`Trkiye:
   Monthly Pay` salary structure. Changes made to those rules affect the computed amount.

Run Trkiye payroll
===================

Before running payroll, the payroll officer must validate employee :doc:`work entries
<../work_entries>` to confirm pay accuracy and catch errors. This includes checking that all time
off is approved and any overtime is appropriate.

Work entries sync based on the employee's :doc:`contract <../contracts>` configuration. Odoo pulls
from the assigned working schedule, attendance records, planning schedule, and approved time off.

Any :ref:`discrepancies or conflicts <payroll/conflicts>` must be resolved, then the work entries
can be :ref:`regenerated <payroll/regenerate-work-entries>`.

Once everything is correct, draft payslips can be :ref:`created individually <payroll/process>` or
in :doc:`groups <../pay_runs>`, referred to in the **Payroll** app as *Pay Runs*.

.. image:: turkey/work-entries-tr.png
   :alt: The work entries for a pay run, with some time off entered in the work entries.

.. note::
   To cut down on the payroll officer's time, it is typical to process payslips in batches, either
   by wage type (fixed salary vs hourly), pay schedule (weekly, bi-weekly, monthly, etc.),
   department (direct cost vs. administration), or any other grouping that best suits the company.

The process of running payroll includes different actions that need to be executed to ensure that
the amount withheld from payroll taxes is correct, the amount that the employee receives as their
net salary is correct, and the computation of hours worked reflects the employee's actual hours
worked, among others.

When running a payroll batch, check that the period, company, and employees included are correct
*before* starting to analyze or validate the data.

Once the payslips are drafted, review them for accuracy. Check the :guilabel:`Worked Days & Inputs`
tab, and ensure the listed worked time is correct, as well as any other inputs. Add any missing
inputs, such as commissions, tips, reimbursements, that are missing.

Next, check the various totals (gross pay, employee taxes, benefits, employer taxes, net salaries),
then click :guilabel:`Compute Sheet` to update the salary calculations, if there were edits. If
everything is correct, click :guilabel:`Validate`.

.. image:: turkey/check-payslip-tr.png
   :alt: The worked days tab of a payslip.

Accounting check
----------------

The accounting process when running payroll has two components: :ref:`creating journal entries
<payroll/journal-tr>` and :ref:`registering payments <payroll/register-tr>`.

.. _payroll/journal-tr:

Journal entry creation
~~~~~~~~~~~~~~~~~~~~~~

After payslips are confirmed and validated, journal entries are posted either individually, or in a
batch. The journal entry is created first as a draft.

.. important::
   It must be decided if journal entries are done individually or in batches *before* running
   payroll.

.. image:: turkey/create-draft-entry-tr.png
   :alt: All payslips in a draft state.

.. _payroll/register-tr:

Register Payments
-----------------

After the :ref:`journal entries <payroll/journal-tr>` are validated, Odoo can generate payments.

.. important::
   To generate payments from payslips, employees **must** have a *trusted* bank account. If the
   employee's bank account is *not* marked as `trusted`, payments **cannot** be generated through
   Odoo.

Payments can be :guilabel:`Grouped by Partner` if there is a partner associated with a salary rule.

.. image:: turkey/paid-tr.png
   :alt: Payslips with a status of paid.

Close Payroll
-------------

If there are no errors, payroll is completed for the pay period.


==================================================
SECTION: united_arab_emirates.rst
PATH: applications/hr/payroll/payroll_localizations/united_arab_emirates.rst
==================================================

====================
United Arab Emirates
====================

.. |UAE| replace:: :abbr:`UAE (United Arab Emirates)`
.. |GCC| replace:: :abbr:`GCC (Gulf Cooperation Council)`
.. |DEWS| replace:: :abbr:`DEWS (Daman Investments End of Service Programme)`
.. |EOS| replace:: :abbr:`EOS (End Of Service)`
.. |WPS| replace:: :abbr:`WPS (Wages Protection System)`

Configuration
=============

:ref:`Install <general/install>` the following modules to get all the features of the **United Arab
Emirates** **Payroll** localization:

.. list-table::
   :header-rows: 1

   * - Name
     - Technical name
     - Description
   * - :guilabel:`United Arab Emirates - Payroll`
     - `l10n_ae_hr_payroll`
     - Includes all rules, calculations, and salary structures.
   * - :guilabel:`United Arab Emirates - Payroll with Accounting`
     - `l10n_ae_hr_payroll_account`
     - Includes all accounts related to the payroll module.

.. seealso::
   :doc:`United Arab Emirates fiscal localization documentation
   <../../../finance/fiscal_localizations/united_arab_emirates>`

Employees
=========

First, configure the :doc:`employee general information <../../employees/new_employee>` and then
configure the following fields under the :guilabel:`Private Information` tab:

- :guilabel:`Nationality (Country)`: The nationality affects an employee's payslips, whether they
  are nationals or expats.
- :guilabel:`Identification Number`: Used to extract the :ref:`WPS report
  <payroll/l10n_ae/wps-reports>`.
- :guilabel:`Bank Account`: Used to extract the :ref:`WPS report <payroll/l10n_ae/wps-reports>` and
  generate payments for those employees.

.. note::
   The :guilabel:`Nationality (Country)` field needs to be set even if the employee is a |UAE|
   national since there is a different type of handling if they are citizens of a |GCC| country.

Contracts
=========

Once the employee form has been created, ensure the :doc:`contract <../contracts>` is enabled by
clicking on the :icon:`fa-book` :guilabel:`Contracts` smart button, or going to
:menuselection:`Employees --> Contracts`.

The following contractual information related to employees working in the United Arab Emirates are
found under the :guilabel:`Salary Information` tab:

- :guilabel:`Wage Type`: select :guilabel:`Fixed Wage` for Full-time or Part-time employees, or
  :guilabel:`Hourly Wage` for employees who are paid hourly.
- :guilabel:`Scheduled Pay`: the frequency of payslip issuance.
- :guilabel:`Wage`: :guilabel:`Monthly` or :guilabel:`Hourly` depending on the :guilabel:`Wage
  Type`.
- :guilabel:`Housing Allowance`
- :guilabel:`Transportation Allowance`
- :guilabel:`Other Allowance`

.. note::
   The allowance values set on the contract are used on the payslip lines as allowances.

- :guilabel:`Number of Leave Days`: Used to specify the number of annual leave days that an employee
  deserves in a particular year. Regardless of the actual number of leaves that the employee gets
  (extra leave days for some internal company reasons), the final calculation of the end of service
  and unpaid leaves is dependent on the number set on this field.

  .. note::
     The :guilabel:`Number of Leave Days` affects the calculation for unpaid leave provisions.

- :guilabel:`Is DEWS Applied`: DIFC Employee Workplace Savings (DEWS), if the employee is a
  |UAE| national and has |DEWS| applied, tick this checkbox.
- :guilabel:`Computed Based On Daily Salary`: Defines the way that the end of service is calculated:

  - Do not tick this checkbox if the standard calculation is to be used. This computes the
    compensation amount by dividing the monthly salary by **30** and then multiplying it by **21**.
  - Tick this checkbox and directly set the actual :guilabel:`Daily Salary` so that it is used in
    the end of service calculation.
  - Tick this checkbox and directly set the actual :guilabel:`Daily Salary` so that it is used in
    the end of service calculation.

Salary structures and salary rules
==================================

Other input rules
-----------------

The following are the different allowances that can be defined directly on the :doc:`payslip form
<../payslips>` to allow for the values that are set against these inputs to affect the |WPS|
calculations as monthly variable salaries for the specific employee that they are linked to.

Rules that are related to the |WPS| setup, are linked to other input types, and whenever they are
used, their values are reflected on the |WPS| as monthly variable salary for that specific employee.

+--------------------------------------+---------------------+
| **Type**                             | **Code**            |
+--------------------------------------+---------------------+
| :guilabel:`Conveyance Allowance`     | `CONVALLOW`         |
+--------------------------------------+---------------------+
| :guilabel:`Housing Allowance`        | `HOUALLOW`          |
+--------------------------------------+---------------------+
| :guilabel:`Medical Allowance`        | `MEDALLOW`          |
+--------------------------------------+---------------------+
| :guilabel:`Annual Passage Allowance` | `ANNUALPASSALLOW`   |
+--------------------------------------+---------------------+
| :guilabel:`Overtime Allowance`       | `OVERTIMEALLOW`     |
+--------------------------------------+---------------------+
| :guilabel:`Other Allowance`          | `OTALLOW`           |
+--------------------------------------+---------------------+
| :guilabel:`Leave Encashment`         | `LEAVEENCASH`       |
+--------------------------------------+---------------------+

End of service (EOS)
--------------------

End of service (EOS) provides the calculation for the allowance that the employee gets at the end of
their service. It is triggered when the employee's departure reason is set by archiving the
employee's record.

There are several different calculations depending on the scenario:

#. *The Employee spent less than a year in the company*: The employee does not get any |EOS|
   allowance since they are not eligible for it (they are eligible once they complete their first
   year in the company).
#. *The Employee spent more than a year and less than 5 years in the company*: The employee is
   eligible for an equivalent of **21** days of salary for each year they spent on the company.

   .. note::
      There are two ways for calculating the daily wage that gets paid for the employee against the
      21 days of the |EOS|: Either by the default way of dividing the monthly basic wage by 30. Or,
      it can be manually input on the contract of the employee under the *Daily Salary* field.

#. *The Employee spent more than 5 years in the company*: The employee is eligible for an equivalent
   of **30** days of salary for each year they spent on the company. In this case, if the default
   method is used, then the employee gets paid an equivalent of 1 month of salary, and the set
   *Daily Salary* field, they will get the amount for the day multiplied by 30.

   .. note::
      There are two payslips printout formats, one for normal salaries and one for end of service
      payslips, it is based on the employee being archived and having a departure reason or not.

End of service provision (EOS Provision)
----------------------------------------

The |EOS| provision provides the calculation for the end-of-service provision amount that the
company puts aside every month to count for the |EOS| that will be paid to them as an |EOS|
allowance.

Unlike the |EOS|, the provision is part of the employee's payslip from the start of their contract.

Just like the |EOS|, the provision has two calculations depending on the period spent by the
employee in the company:

- Less than 5 years: :math:`\frac{\text{Monthly Wage}}{30}\times{\frac{21}{12}}`
- More than 5 years: :math:`\frac{\text{Monthly Wage}}{30}\times{\frac{30}{12}}`

  .. note::
     This rule is not shown to the employee on the payslip printout and it does not affect their net
     payable, it is only for internal use by the company.

Annual leave provisions
-----------------------

Annual leave provisions are used for calculating the annual leave provision accumulated each month,
just like the |EOS| provision, it does not affect the total amount paid to the employee, it is for
internal use by the company.

It is calculated by dividing the employee's total salary (Total Salary = Wage + Allowances) by
**30** to get the daily salary. The daily salary is then multiplied by the eligible leave days and
divided by **12** to determine the monthly provision amount.

.. math::
   :class: overflow-scroll

   \text{Monthly Leave Provision} = \frac{\text{Total Salary} \times \text{Number of Leave Days}}{30}
   \div 12

Social insurance contributions
------------------------------

Social insurance contributions calculate the *social insurance*, which is only available to |UAE|
nationals.

The company contributes **15%** of the total monthly salary for the employee if the company is in
**Abu Dhabi** and **12.5%** if the company is in **another Emirate**.

.. note::
   The total monthly salary for the employee = [basic + all allowances set on the contract].

On the other hand, the employee contributes **5%** of their total monthly salary and that amount
gets deducted from the payslip amount.

Annual remaining leave balance rules
------------------------------------

Annual remaining leave balance rules are used for calculating the amount to be paid to or taken from
the employee based on the number of leave days deserved by the employee during the current year.

The annual leave :ref:`time off type <time_off/time-off-types>` is specified using the :guilabel:`Is
Annual Leave` checkbox.

If enabled, the rule calculates the amount of leave days deserved by the employee up to the current
date and subtracts the number of annual leave days taken, and if the result is positive, this means
that the employee should be compensated for remaining amount and if negative this means that the
employee is liable to the company for the difference.

Sick leave rules
----------------

Sick leave rules provide the calculation for cases where the employee is on sick leave and decides
how the payslip should be affected.

There are **3 cases** for the employee to have:

#. **Fully paid sick leave:** The employee can upload a sick leave certificate (SLI). Employees are
   eligible for **15 days** of this type of leave per calendar year.

   .. tip::
      The SLI is not mandatory in Odoo but can be done from the setup of the :ref:`time off types
      <time_off/time-off-types>`.

#. **50% paid sick leave:** Same as the fully paid one, but the employees are eligible for **30
   days** from this leave type. These 30 days are counted after the first **15** fully paid days.
#. **0% paid sick leave:** Same as the fully paid one, but the employees are eligible for **45
   days** from this leave type. These **45 days** are counted after the first **15/30**
   fully/half-paid days.

.. important::
   As per the labor law of the United Arab Emirates, the 15, 30, 45 days are not specified as
   working days or calendar days so this point will rely on the company policy.

The amount paid for the employee per sick leave day is counted as follows:

.. math::
   :class: overflow-scroll

   \frac{\text{Number of Leave Days} \times \text{Gross Per Month}}{30} \times \text{Percentage}

Where the gross per month is the basic + all other allowances set on the employee's contract.

Daman investments end of service programme (DEWS)
-------------------------------------------------

|DEWS| allows for calculating the |DEWS| amounts for the employees who are eligible for it and would
like to be registered on it under their current contract with the company.

It is calculated based on the number of years that employees have spent in the company:

- **Less than 5 years:** 5.83% is deducted from the employee's **BASIC** salary towards the DEWS.
- **More than 5 years:** 8.33% of The employee's **BASIC** is deducted from the total payable for
  that employee.

Unpaid leaves
-------------

Unpaid leaves allows for calculating the amount to be deducted when an employee takes an unpaid
leave. It is calculated by the following equation:

.. math::
   :class: overflow-scroll

   \frac{\text{Total Number of Unpaid Leave Days} \times \text{Gross Per Month}}{30}

Where the gross per month is the basic + all other allowances set on the employee's contract.

Out of contract days
--------------------

The out of contract days rule provides a calculation for the days before/after the contract period
that overlaps with the contract of days on the employee's payslips.

.. example::
   Payslips are generated for the period of 1st-30th of September but the contract expires on the
   21st, in this case, there are 7 days flagged as out of contract.

It is calculated by the following equation:

.. math::
   :class: overflow-scroll

   \frac{\text{Total Number of Unpaid Leave Days} \times \text{Gross Per Month}}{\text{Number of Days in Current Month}}

Manual deductions
-----------------

Manual deductions allows the user to add manual deductions to be applied to employees per payslip.

The amount to be deducted and the description of the deduction is to be set directly on the payslip
manually as other inputs.

Net salary
----------

Net salary showcases the net amount that the employee will get based on the payslip.

It is calculated by adding basic to all allowances and deducting all deductions from it.

.. important::
   The approach taken for the rules above is to first get the full amounts for all static amounts
   that are set on the contract and then deduct the amounts that should be deducted such as unpaid
   leaves, sick leaves, manual deductions, commission, etc.

Generating accounting entries from payslips
===========================================

The accounts are linked to each payroll rule as a debit or credit so that when a draft entry is
generated from a payslip, the amounts are reflected on the accounts accordingly.

The accounts need to be set in a way that would make the end-result entry balanced, otherwise a
warning is raised if it is not balanced and it will not generate the entry.

After reviewing the payslips and making sure that all the amounts are correct, generate a draft
entry, either one entry for all employees or an entry per employee depending on the setup done on
the settings.

.. example::
   Debit and credit accounts set up for the basic and allowance rules.

   .. image:: united_arab_emirates/accounting-setup-for-rules.png
      :alt: Accounting setup for the rules.

Pay employees
=============

After a batch or a payslip's journal entry has been posted, the company can proceed to pay their
employees.

In the batch itself or on the payslip, by clicking on the pay button, a payment is created and
linked to the posted entry for the payslip. The same can be done for batch payslips if one payment
is done from a single/multiple payment bank/cash journal.

.. note::
   Once the payslip is generated, the employee will be able to access the slips from their portal
   users. They will automatically receive an email mentioning that the payslips are now available to
   be viewed on their portal view.

Payslip printouts
=================

Two printout formats can be extracted from the payslip, it depends on the type of the payslip either
a *Monthly* payslip or an *End of Service* Payslip. It is triggered if the employee for the payslip
is generated is archived during that month.

Instant Pay structure
=====================

This structure is used when off-cycle payslips are required to make payments to employees for
special situations, such as one-time or advance salaries. Examples of one-time payments include:

- Commissions
- Bonuses
- Allowances

Salary Advances
===============

Employees may request a portion of their salary before the end of the pay cycle. In such cases, the
payroll officer can issue a salary advance using the following steps:

#. Create an off-cycle payslip using the United Arab Emirates: Instant Pay structure.

#. Add another input of type Salary Advance and specify the amount to be paid to the employee.

#. Confirm the payslip and process the payment.

In the next cycle, when a payslip is generated for the employee using the `United Arab Emirates:
Regular Pay` structure, another input type, `Advance Recovery` is automatically added for the same
amount that was previously paid.

.. tip::
   If the employee and payroll officer agree to recover the advance over two consecutive cycles, the
   payroll officer can adjust the Advance Recovery amount on the first payslip. The remaining
   balance is automatically added to the following cycle.

.. _payroll/l10n_ae/wps-reports:

Wages protection system (WPS) reports
=====================================

The |WPS| is a report that needs to be submitted by the company to prove that they paid their
employees the right amounts on the right dates. It can either be generated per payslip or batch.

The following steps need to be followed before generating the report:

#. Go to :menuselection:`Payroll --> Configuration --> Settings` and under the :guilabel:`UAE
   Payroll WPS Settings` section, configure the following:

   - :guilabel:`Employer Unique ID`: Set a unique identifier for the company to be used in the |WPS|
     report.
   - :guilabel:`Salaries Bank Account`: Select a bank account or start typing to :guilabel:`Create
     and edit` a new bank account.

     .. important::
        When setting the :guilabel:`Salaries Bank Account` make sure to complete the following:

        - :guilabel:`Account Holder`: set as the company.
        - :guilabel:`Account Number`: has to be a valid IBAN.
        - :guilabel:`Bank`: has to have the :guilabel:`UAE Routing Code Agent ID` set.
        - :guilabel:`Send Money`: should be enabled and set to :guilabel:`Trusted`.

#. Set the unique identifier on all of the employees who are a part of the target of the
   batch/payslip.

   The :guilabel:`Identification No` field can be found on the employee's page under the
   :guilabel:`Private Information` tab.

Once the initial setup is done, the |WPS| can be generated either for one payslip or for a batch as
follows:

#. Generate the payslip one by one or as a batch.
#. Post the draft entity related to the payslips.
#. Create the payment report and set the :guilabel:`Export Format` to :guilabel:`UAE WPS`.

.. note::
   The report comes in a :file:`.sif` format as per the governmental requirements, so either use
   software that can open :file:`.sif` files or convert it to another format (:file:`.xslx`) to be
   able to review it.

The resulting file consists of the following:

#. **Employee Detail Record** (**EDR**): includes details of the employees on the batch. There
   should be one :abbr:`EDR (Employee Detail Record)` record per employee.
#. **Employee Variable Pay** (**EVP**): includes the details of the variable salary the employee got
   on that payslip. If the employee has any. The variable amounts are calculated from when other
   inputs are used that are linked to the salary rules (:menuselection:`Payroll --> Configuration
   --> Rules`).
#. **Salary Control Record** (**SCR**): There should only be one :abbr:`SCR (Salary Control Record)`
   per |WPS| file as it indicates the employer details and the totals for the payslips.


==================================================
SECTION: united_states.rst
PATH: applications/hr/payroll/payroll_localizations/united_states.rst
==================================================

=============
United States
=============

The U.S. payroll localization covers salary computations for employees, including both employee and
employer payroll taxes. It accounts for federal and state regulations.

The states included in this localization are:

- California (CA)
- New York (NY)
- Texas (TX)
- Florida (FL)
- Colorado (CO)
- Alabama (AL)
- Washington (WA)
- Nevada (NV)
- Vermont (VT)
- Illinois (IL)
- Virginia (VA)
- Washington, D.C (DC)
- Arizona (AZ)
- Idaho (ID)
- Oregon (OR)
- North Carolina (NC)

.. note::
   Federal taxes (Income, :abbr:`FICA (Federal Insurance Contributions Act)`, and Unemployment) for
   both employees and employers are covered by default in the Odoo U.S. Payroll localization.
   Additional states will be added over time, so check back for updates.

Before configuring the United States localization, refer to the general :doc:`payroll
<../../payroll>` documentation, which includes the basic information for all localizations, as well
as all universal settings and fields.

.. _payroll/usa_apps:

Apps & modules
==============

:ref:`Install <general/install>` the following modules to get all the features of the United States
payroll localization:

.. list-table::
   :header-rows: 1

   * - Name
     - Technical name
     - Dependencies
     - Description
   * - :guilabel:`United States - Payroll`
     - `l10n_us_hr_payroll`
     - - hr_payroll
       - hr_contract_reports
       - hr_work_entry_holidays
       - hr_payroll_holidays
     - Provides U.S. payroll basics, including employee tax details, salary structures
       (Basic/Gross/Net), tax rules, and W-2/3PA reporting.
   * - :guilabel:`United States - Payroll with Accounting`
     - `l10n_us_hr_payroll_account`
     - - hr_payroll_account
       - l10n_us
       - l10n_us_hr_payroll
     - Links payroll and accounting by creating journal entries (per payslip if needed) to record
       payroll in the company's books.

.. seealso::
   :doc:`Configure the United States fiscal localization
   <../../../finance/fiscal_localizations/united_states>`

General configurations
======================

First, the company must be configured. Navigate to :menuselection:`Settings app --> Users &
Companies --> Companies`. From the list, select the desired company, and configure the following
fields:

- :guilabel:`Company Name`: Enter the business name in this field.
- :guilabel:`Address`: Complete the full address, including the :guilabel:`City`, :guilabel:`State`,
  :guilabel:`Zip Code`, and :guilabel:`Country`.

  .. important::
     The state selected in the company's address is associated as the *work address* by default for
     the employee, and the one used to calculate payroll taxes.

- :guilabel:`Tax ID`: Enter the company's :abbr:`EIN (Employer Identification Number)`.
- :guilabel:`Company ID` : Enter the business's state ID number.
- :guilabel:`Currency`: By default, :abbr:`USD (US Dollars)` is selected. If not, select
  :guilabel:`USD` from the drop-down menu.
- :guilabel:`Phone`: Enter the company phone number.
- :guilabel:`Email`: Enter the email used for general contact information.

.. warning::
   Ensure the information is accurate, as it is used when creating W-2s.

Employees
=========

Every employee being paid must have their employee profiles configured for the United States payroll
localization. Additional fields are present after configuring the database for the United States.

To update an employee form, open the :menuselection:`Employees` app and click on the desired
employee record. On the employee form, configure the required fields in the related tabs.

Work tab
--------

Enter the :guilabel:`Work Address` for the employee in the :guilabel:`Location` section of the
:guilabel:`Work` tab.

.. important::
   The state selected in this address determines which salary rules Odoo applies when calculating
   taxes.

Personal tab
------------

Ensure the employee has a minimum of one :ref:`trusted bank account <employees/private-contact>`
listed in the :guilabel:`Bank Accounts` field in the :guilabel:`Private Contact` section.

These accounts are used to pay the employee, via an automation through a NACHA payment file. Payroll
**cannot** be processed for employees without a *trusted* :ref:`bank account
<employees/private-contact>`. If no trusted bank account is set, a warning appears on the
**Payroll** dashboard and an error occurs when attempting to run payroll.

Ensure there is a valid :guilabel:`SSN No` entered in the :guilabel:`Citizenship` section . The last
four digits of the :abbr:`SSN (Social Security Number)` number appears on the employee's payslips.

.. image:: united_states/bank.png
   :alt: Where bank account information is located on the employee profile.

Payroll tab
-----------

Contract overview section
~~~~~~~~~~~~~~~~~~~~~~~~~

This section holds information that drives salary calculations. Ensure the following fields are
configured:

- :guilabel:`Contract`: The Validity of the compensation conditions can be updated depending on the
  needs.
- :guilabel:`Wage Type`: Select how the employee is paid.

  - Select :guilabel:`Fixed Wage` for salaried employees who receive the same amount each pay
    period.
  - Select :guilabel:`Hourly Wage` for employees paid based on hours worked.

  .. tip::
     Set a default :guilabel:`Wage Type` in the salary :ref:`Structure Type
     <payroll/structure-types>` to configure employees in bulk. If needed, the default can be
     overridden on individual employee records if exceptions are needed.

- :guilabel:`Contract Type`: Determines how the employee is paid and classified, such as
  :guilabel:`Salary-exempt`, :guilabel:`Salary-nonexempt`, :guilabel:`Hourly`.

  .. important::
     This field is visible on payslips. Some states require payslips to state if the employee is
     exempt or non-exempt from overtime. Ensure the selection follows the state laws.

- :guilabel:`Pay Category`: Select :guilabel:`United States: Employee` for this field. This defines
  when the employee is paid, their default working schedule, and the work entry type it applies to.

.. image:: united_states/payroll-overview.png
   :alt: The contract overview section of the employee form of the payroll tab.

Schedule section
~~~~~~~~~~~~~~~~

- :guilabel:`Work Entry Source`: Defines how :doc:`work entries <../work_entries>` are generated for
  payroll during the specified pay period. The options are:

  - :guilabel:`Working Schedule`: Based on the employee's assigned :ref:`working schedule
    <employees/schedule>` (e.g., 40 hours per week).
  - :guilabel:`Attendances`: Based on :doc:`approved checked-in hours
    <../../attendances/management>` in the **Attendances** app.
  - :guilabel:`Planning`: Based on :ref:`scheduled shifts <planning/shifts>` in the **Planning**
    app.

- :guilabel:`Extra Hours`: Tick the checkbox to allow the **Attendances** app to add any extra work
  entries logged by the employee.
- :guilabel:`Working Hours`: Using the drop-down menu, select the default work schedule. This is
  particularly important for employees available to receive overtime pay (typically hourly
  employees, not salaried).

W-2 form section
~~~~~~~~~~~~~~~~

A W-2 is an annual tax form that reports an employee's wages, taxes, and benefits. Employees use it
to file their tax returns. The options below correspond to checkboxes in *box 13* of the W-2 form.
Select any that apply to the employee.

- :guilabel:`Statutory Employee`: Tick this box if the employee is exempt from income tax, but
  subject to :abbr:`FICA (Federal Insurance Contributions Act)` taxes.
- :guilabel:`Retirement Plan`: Tick this box if the employee is an active contributor to an
  employer-sponsored retirement plan.
- :guilabel:`Third-Party Sick Pay`: Tick this box if the employee is covered under a plan where sick
  pay benefits may be provided by a third party (e.g., an insurance company) during the year.

W-4 form section
~~~~~~~~~~~~~~~~

A W-4 is an :abbr:`IRS (Internal Revenue Services)` form that determines an employee's federal tax
withholding, which the employer remits directly to the :abbr:`IRS (Internal Revenue Services)`.

Configure any relevant fields for the employee in this section.

State filing section
~~~~~~~~~~~~~~~~~~~~

An employee's marital status impacts their payroll taxes. Configure the following fields regarding
their status and withholdings.

- :guilabel:`Status`: Using the drop-down menu, select the employee's *federal* filing status. The
  options are :guilabel:`Single`, :guilabel:`Married/RDP filing jointly`, :guilabel:`Married/RDP
  filing separately`, :guilabel:`Head of household`, or :guilabel:`Qualifying surviving spouse/RDP
  with child`. This typically comes from the employee's W-4 form.
- :guilabel:`Tax Status`: Using the drop-down menu, select the employee's *state* filing status, if
  applicable.

  .. tip::
     The federal and state statuses do **not** need to match.

  .. note::
     As of 2025, these states do **not** collect state income tax: Alaska, Florida, Nevada, New
     Hampshire, South Dakota, Tennessee, Texas, Washington, and Wyoming. If a payroll localization
     exists for these states, there are **no** corresponding state options in the :guilabel:`Tax
     Status` field. Leave it blank.

- :guilabel:`Withholding Allowance`: Enter the total annual amount to be withheld from the
  employee's pay for the year, for state taxes. Only fill this out if the employee lives in a state
  with state income tax.
- :guilabel:`Extra Withholding`: Enter the total *extra* annual amount (not including the
  :guilabel:`Withholding Allowance` amount) to be withheld from the employee's pay for the year, for
  state taxes, if the employee lives in a state with state income tax.

.. image:: united_states/state-filing.png
   :alt: The state filing section of the employee form, filled out.

Common benefits
~~~~~~~~~~~~~~~

The following sections of benefits are considered common ones offered by US employers. This
information needs to be populated with the information selected by the employee.

.. note::
   The benefits listed in this section are considered the most commonly offered by companies. If
   other employee benefits exist that require regular paycheck deductions, they can be added as
   *inputs*.

Pre-tax deductions
******************

Pre-tax benefits lower the employee's gross wage, which decreases the base amount for tax
calculations. These are displayed at the beginning of the payslip before the gross wage is
stipulated.

Retirement plans section
^^^^^^^^^^^^^^^^^^^^^^^^

This section is where the employee and employer 401(k) contributions are configured. Fill out the
following fields:

- :guilabel:`401(k)`: Enter the amount of money taken out of the employee's payslip each pay period.
  This can be entered either as a percentage (%) of the payslip amount, or a specific dollar amount
  per payslip ($/slip).
- :guilabel:`Matching Amount`: Enter the matching amount the employer contributes to the employee's
  401(k), as compared to the employee's contributions. This field can also be configured as either a
  percentage (%) of the employee's contribution, or a specific dollar amount ($/slip).
- :guilabel:`Matching Yearly Cap`: If there is a limit to the employer's contribution, enter it as a
  percentage of the employee's annual salary.

.. example::
   A company allows employees to contribute to a 401(k) retirement plan, and matches 50% of the
   employee's contributions, up to $5,000 USD a year. The employee earns $50,000 USD a year, and
   contributes 20% of their pay to their 401(k), which is $10,000 USD.

   To configure this, enter `20.00` in the :guilabel:`401(k)` field, `50.00` in the
   :guilabel:`Matching Amount` field, and `20.00` in the :guilabel:`Matching Yearly Cap` field.

  .. image:: united_states/retirement.png
     :alt: An employee's retirement configurations.

Health benefits section
^^^^^^^^^^^^^^^^^^^^^^^

This section is where the employee's health contributions are configured. Populate each of the
fields with the corresponding amount deducted from *each paycheck* for the employee.

.. image:: united_states/health.png
   :alt: The health benefits section for an employee, filled out with payslip deductions.

Other benefits section
^^^^^^^^^^^^^^^^^^^^^^

This section currently only houses a :guilabel:`Commuter` benefit field. Enter the amount being
deducted per paycheck, for applicable commuter benefits.

Post-tax deductions section
***************************

These types of benefits count as deductions *after* taxes are calculated. They appear towards the
end of the payslip before the net amount is displayed. Currently, only one field, :guilabel:`ROTH
401(k)` appears in this section. Enter either a percentage (%) of the payslip amount, or a specific
dollar amount per payslip ($/slip) being deducted from the employee's pay, and deposited into a ROTH
401(k) account.

Payroll configuration
=====================

Several sections within the **Payroll** app installs a Salary Structure, Structure Type, Rules, and
Parameters specific to the United States.

Salary structures & structure types
-----------------------------------

When the **l10n_us_hr_payroll** module is :ref:`installed <payroll/usa_apps>`, a new
:guilabel:`Salary Structure` gets installed, :guilabel:`United States: Regular Pay`. This structure
includes one :guilabel:`Structure Type`, :guilabel:`United States: Regular Pay`.

The :guilabel:`Salary Structure` contains all the individual :ref:`salary rules <payroll/usa_apps>`
that informs the **Payroll** app how to calculate employee payslips.

.. image:: united_states/structure-types.png
   :alt: The United States salary structure in the salary structures list.

.. _payroll/usa_rules:

Salary rules
------------

To view the salary rules that inform the salary structure what to do, navigate to
:menuselection:`Payroll app --> Configuration --> Structures` and expand the :guilabel:`United
States: Employee` group to reveal the :guilabel:`United States: Regular Pay` structure type. Click
:guilabel:`United States: Regular Pay` to view the detailed salary rules.

.. image:: united_states/us-rules-top-half.png
   :alt: The top portion of the US salary rules.

Each rule defines how pay is calculated, taking into account factors such as commissions, bonuses,
taxes, and insurance. The *logic* behind the :guilabel:`United States: Regular Pay` rules is as
follows:

- The first four rules listed reflects all sources of income, including the basic wage listed on the
  contract (:guilabel:`Basic Salary`), plus any allowances, such as :guilabel:`Commissions`,
  :guilabel:`Tips`, and :guilabel:`Bonuses`.

  .. image:: united_states/first-rules.png
     :alt: The basic salary rules for the US localization.

- Adding up these inputs is how the gross salary (:guilabel:`Gross Pay`) is calculated. This amount
  is the base amount used to calculate payroll taxes.

- The next set of rules are the various pre-tax benefits and taxable income, such as
  :guilabel:`Medical` insurance contributions and :guilabel:`Commuter Benefits`. After the
  employee's :guilabel:`Gross Pay` is calculated, Odoo deducts all the pre-tax benefits listed on
  the employee's contract to determine the employee's :guilabel:`Taxable Income`.

  .. image:: united_states/pre-tax.png
     :alt: The pre-tax rules for the US localization.

- Next, all the various tax rules are listed where both federal and state payroll withholdings are
  outlined. First, federal tax rules are listed, then any state rules (if any) are listed.

  .. image:: united_states/irs.png
     :alt: The federal tax rules for the US localization.

  .. note::
     The rule for federal withholdings for `Worker's Compensation` appears *after* several
     state-specific withholdings are listed, and does **not** appear in the above image, but are
     listed in the rules.

- The last rules listed are the post-tax employee deductions.

  .. image:: united_states/post-tax.png
     :alt: The post-tax rules for the US localization.

- The :guilabel:`Other Inputs` tab contains anything else affecting payroll. This includes items to
  be added to the payslip, such as :guilabel:`Tips`, and other deductions, such as :guilabel:`Child
  Support`.

  .. image:: united_states/other-inputs.png
     :alt: The other inputs for the US localization.

- The employee's net salary is the amount the employee receives from the employer. The formula to
  calculate the net salary is:

  .. math::

     \text{Gross Salary} + \text{Allowances} - \text{Payroll Taxes} - \text{General Deductions}

- Additionally, an extra section exists in payroll calculation for the US called `Employer
  Deductions`, and it breaks down the payments the employer must make as their portion of payroll
  taxes.

  .. image:: united_states/employer-deductions.png
     :alt: The employer deduction rules for the US localization.

  .. note::
     The rule for employer deductions for `Worker's Compensation` appears *after* several
     state-specific employer deductions are listed, and does **not** appear in the above image, but
     are listed in the rules.

Rule parameters
---------------

Some calculations require specific rates associated with them, or wage caps. *Rules Parameters* are
capable of listing a value, either a percentage or a fixed amount, to reference in the salary rules.

.. example::
   The wage base for Social Security tax calculations has a cap for 2025, accounted for in the `US:
   FICA OASDI Cap` parameter.

Most rules pull information stored in the parameters module to get the rate of the rule (a
percentage) and the cap (a dollar amount).

To view rule parameters, navigate to :menuselection:`Payroll app --> Configuration --> Rule
Parameters`. Here, all rule parameters are displayed with their linked :guilabel:`Salary Rules`,
which can be accessed. Review the parameters associated with a rule by looking for the
:guilabel:`Name` of the rule, and make any edits as needed.

.. example::
   The Unemployment tax of a company is different from the one added by default in Odoo. To update
   this, navigate to :menuselection:`Payroll app --> Configuration --> Rule Parameters`, then,
   filter the results by :abbr:`FUTA (Federal Unemployment Tax Act)`, or the name of the state that
   needs editing, and edit the corresponding rate from the list.

.. important::
   Odoo adds updated rule parameters for the current calendar year. It is **not** recommended to
   edit rule parameters **unless a federal or state parameter has changed**, and is different from
   the rule parameters created by Odoo. Check with all local and national regulations *before*
   making any changes to rule parameters.

Run US payroll
==============

Before running paypoll, the payroll officer must validate employee :doc:`work entries
<../work_entries>` to confirm pay accuracy and catch errors. This includes checking that all time
off is approved and any overtime is appropriate.

Work entries sync based on the employee's :doc:`contract <../contracts>` configuration. Odoo pulls
from the assigned working schedule, attendance records, planning schedule, and approved time off.

Any :ref:`discrepencies or conflicts <payroll/conflicts>` must be resolved, then the work entries
can be :ref:`regenerated <payroll/regenerate-work-entries>`.

Once everything is correct, draft payslips can be :ref:`created individually <payroll/process>` or
in :doc:`groups <../pay_runs>`, referred to in the **Payroll** app as *Pay Runs*.

.. image:: united_states/work-entries.png
   :alt: The work entries for a pay run, with some time off entered in the work entries.

.. note::
   To cut down on the payroll officer's time, it is typical to process payslips in batches, either
   by wage type (fixed salary vs hourly), pay schedule (weekly, bi-weekly, monthly, etc.),
   department (direct cost vs. administration), or any other grouping that best suits the company.

The process of running payroll includes different actions that need to be executed to ensure that
the amount withheld from payroll taxes is correct, the amount that the employee receives as their
net salary is correct, and the computation of hours worked reflects the employee's actual hours
worked, among others.

When running a payroll batch, check that the period, company, and employees included are correct
*before* starting to analyze or validate the data.

Once the payslips are drafted, review them for accuracy. Check the :guilabel:`Worked Days & Inputs`
tab, and ensure the listed worked time is correct, as well as any other inputs. Add any missing
inputs, such as commissions, tips, reimbursements, that are missing.

Next, check the various totals (gross pay, employee taxes, benefits, employer taxes, net salaries),
then click :guilabel:`Compute Sheet` to update the salary calculations, if there were edits. If
everything is correct, click :guilabel:`Validate`.

.. image:: united_states/check-payslips.png
   :alt: The worked days tab of a payslip.

Accounting check
----------------

The accounting process when running payroll has two components: :ref:`creating journal entries
<payroll/journal>`, and :ref:`registering payments <payroll/register>`.

.. _payroll/journal:

Journal entry creation
~~~~~~~~~~~~~~~~~~~~~~

After payslips are confirmed and validated, journal entries are posted either individually, or in a
batch. The journal entry is created first as a draft.

.. important::
   It must be decided if journal entries are done individually or in batches *before* running
   payroll.

.. image:: united_states/create-draft-entry.png
   :alt: All payslips in a draft state.

Four accounts from the US :abbr:`CoA (Chart of Accounts)` are included with the payroll
localization:

- `611000 Salaries & Wages`: Records gross salary and the employer's portion of payroll expenses.
  Also groups values from rules without specific accounts (e.g., company-specific benefits).
- `230100 Employee Payroll Taxes`: Withheld taxes from employees, which the employer must file and
  pay. The partner and label columns of the journal entry indicate the specific tax.
- `230200 Employer Payroll Taxes`: Employer portion of payroll taxes to be filed and paid. The
  partner and label columns of the journal entry indicate the specific tax.
- `230000 Salary Payable`: Net salary owed to the employee.

.. note::
   The :abbr:`CoA (Chart of Accounts)` configuration is done by default when a company is located in
   the US. The account codes and names can be edited to suit the company's needs. If there is no
   :abbr:`CoA (Chart of Accounts)` account associated with a salary rule (used in a salary
   structure), Odoo uses the account `Salary Expenses` to create the journal entry, regardless of
   the nature of the move.

If everything seems correct on the journal entry draft, post the journal entries.

.. image:: united_states/post-entries.png
   :alt: Journal entries posted.

.. _payroll/register:

Register Payments
-----------------

After the :ref:`journal entries <payroll/journal>` are validated, Odoo can generate payments.

.. important::
   To generate payments from payslips,employee's **must** have a *trusted* bank account. If the
   employee's bank account is *not* marked as `trusted`, NACHA files **cannot** be generated through
   Odoo.

Payments can be :guilabel:`Grouped by Partner` if there is a partner associated with a salary rule.

.. image:: united_states/paid.png
   :alt: Payslips with a status of paid.

Close Payroll
-------------

If there are no errors, payroll is completed for the pay period.

Reports
=======

The US localization contains several reports unique to the US, which provide tax information for
employees, as well as the ability to integrate with outside organizations such as ADP.

W2 Report
---------

The *W2 Report* provides a CSV file that allows employees to e-file their W2 report with third-party
software. To access this report, navigate to :menuselection:`Payroll -> Reporting -> United States
-> W2`.

To create a W2 form, click :guilabel:`New`, and a blank :guilabel:`Create W2 Form` page loads. Set
the :guilabel:`Start Date` and :guilabel:`End Date` (typically a calendar year), and select the
:guilabel:`Company`, if in a multi-company database.

All pay runs for the time period appear in a list view. To add any missing pay runs, click
:guilabel:`Add a line` at the bottom of the list, and select the missing files.

When done, click the :guilabel:`Generate` button to create a CSV file with a summary of all payroll
related payments made during the specified time period.

.. image:: united_states/w2.png
   :alt: The W2 report screen, with the file to download in the top half.

Form 941
--------

The *Form 941* report is meant to inform the government of the amount of federal income tax,
:abbr:`FICA (Federal Insurance Contributions Act)` taxes (Medicare and Social Security) withheld
from employee paychecks. It also reports the employee's side of taxes.

To create this report, navigate to :menuselection:`Payroll -> Reporting -> United States -> Form
941`. Click the :guilabel:`New` button, and a new :guilabel:`Form 941` report page loads. Configure
the information on the top portion of the form, including the :guilabel:`Company`, :guilabel:`Tax
Year`, :guilabel:`Quarter`, :guilabel:`IRS Payment Option` (how the money is being sent to the IRS),
and :guilabel:`Deposit Schedule and Tax Liability` (how often payments are made to the IRS).

All pay runs for the time period appear in a list view. To add any missing pay runs, click
:guilabel:`Add a line` at the bottom of the list, and select the missing files.

When done, click :guilabel:`Generate`, and the report is created as a CSV file, and appears on the
:guilabel:`Form 941` report dashboard. Companies then download and submit this report through a
third party for e-filing.

.. image:: united_states/941.png
   :alt: The 941 report screen, with the file to download in the top half.

Form 940
--------

The *Form 940* report details the annual :abbr:`FUTA (Federal Unemployment Tax Act)` withheld for
payroll.

To create this report, navigate to :menuselection:`Payroll -> Reporting -> United States -> Form
940`. Click the :guilabel:`New` button, and a new :guilabel:`Form 940` report page loads. Configure
the information on the top portion of the form, including the :guilabel:`Company`, :guilabel:`Tax
Year`, :guilabel:`Single State Payer`, :guilabel:`Multi State Employer`, :guilabel:`Paid in Credit
Reduction State`, and :guilabel:`IRS Payment Option` (how the money is being sent to the IRS).

All pay runs for the time period appear in a list view. To add any missing pay runs, click
:guilabel:`Add a line` at the bottom of the list, and select the missing files.

When done, click :guilabel:`Generate`, and the report is created as a CSV file, and appears on the
:guilabel:`Form 940` report dashboard. Companies then download and submit this report through a
third party for e-filing.

.. image:: united_states/940.png
   :alt: The 940 report screen, with the file to download in the top half.

Export data to third-party apps
-------------------------------

The *ADP Export* report generates a CSV file that can be submitted to ADP, which then makes payments
to the employees.

The CSV file summarizes the employee's worked hours during a specified time period, correlating to
their salary or hourly wage. The report is generated from :doc:`work entry <../work_entries>`
*after* any time off is confirmed.

The export format is meant to match with the ADP format. Since companies can customize their portal
and may require some changes, the data is there to be fed to ADP to run payroll in it.

.. important::
   To access the ADP Export report, the `United States - Payroll - Export to ADP` module **must** be
   :ref:`installed <general/install>`.


==================================================
SECTION: work_entries.rst
PATH: applications/hr/payroll/work_entries.rst
==================================================

============
Work entries
============

A *work entry* is an individual record on an employee's timesheet. Work entries can be configured to
account for all types of work and time off, such as :guilabel:`Attendance`, :guilabel:`Sick Time
Off`, :guilabel:`Training`, or :guilabel:`Public Holiday`.

The **Payroll** app automatically creates work entries based on the employee's :ref:`salary
structure type <payroll/structure-types>`, and from the **Planning**, **Attendances**, and **Time
Off** applications. When needed, work entries can also be :ref:`created manually
<payroll/new-work-entry>`.

Work entries provide the **Payroll** app with the worked hours used to compute employee paychecks,
if the employee's salary is based on work entries, as opposed to a salaried position.

.. note::
   Odoo configures several work entry types by default, but :ref:`additional work entry types can be
   created <payroll/work-entry-types>`, when necessary.

.. _payroll/work-entry-dashboard:

Work entry dashboard
====================

The *Work Entries* dashboard of the **Payroll** app provides a visual overview of the individual
work entries for every employee.

To open the dashboard, navigate to :menuselection:`Payroll app --> Work Entries --> Work Entries`.

On the :guilabel:`Work Entry` dashboard, work entries appear in alphabetical order, based on the
first name of the employees. The entire month is displayed, with the current day highlighted in pale
yellow.

The :guilabel:`Work Entry` dashboard has a default :guilabel:`Conflicting` filter, which displays
only work entries with :ref:`conflicts <payroll/conflicts>` to be resolved.

.. image:: work_entries/work-entries-overview.png
   :alt: Conflicts dashboard view showing all employee's conflicts in work entries.

.. tip::
   Remove the default :guilabel:`Conflicting` filter from the search bar to view *all* work entries.

.. _payroll/new-work-entry:

Add a new work entry
====================

If a work entry is missing, such as sick time, or if an employee forgot to clock in and out for a
shift, a new work entry must be created for the missing shift.

Click :guilabel:`New` on the :ref:`work entry dashboard <payroll/work-entry-dashboard>`, and a blank
:guilabel:`Create` work entry pop-up form appears. Enter the following information on the form:

- :guilabel:`Description`: Enter a short description for the work entry, such as `Sick Time`. The
  default entry is `Attendance: (Employee)`.
- :guilabel:`Employee`: Select the employee the work entry is for, using the drop-down menu.
- :guilabel:`Work Entry Type`: Select the :guilabel:`Work Entry Type` using the drop-down menu.
- :guilabel:`From` and :guilabel:`To`: Enter the start (:guilabel:`From`) and end (:guilabel:`To`)
  dates and times for the work entry.

  First, click on either the :guilabel:`From` or :guilabel:`To` line to reveal a calendar pop-up
  window. Select the date by navigating to the correct month, then click on the specific day to
  select it.

  Next, select the time, by clicking on either the hour or minute fields at the bottom of the
  calendar, and set the desired time.

  When the date and time for the entry are correct, click the :guilabel:`Apply` button.
- :guilabel:`Duration`: This field displays the hours based on the :guilabel:`To` and
  :guilabel:`From` entries. Modifying this field modifies the :guilabel:`To` field (the
  :guilabel:`From` field does not change).

Once the desired information is entered, click :guilabel:`Save & Close` to save the entry, and close
the pop-up form.

.. image:: work_entries/create.png
   :alt: Filling in the work entry Create form in Odoo.

.. _payroll/conflicts:

Conflicts
=========

A conflict occurs when a request has not been approved, such as sick time or vacation, or if there
are any errors on the work entry. Conflicts that span the current pay period being processed
**must** be resolved before payslips can be generated.

Any work entry that has a conflict to be resolved is indicated on the main :guilabel:`Work Entry`
dashboard, which can be accessed by navigating to :menuselection:`Payroll app --> Work Entries -->
Work Entries`. Only conflicts needing resolution are shown by default.

Conflicts are indicated with an orange triangle in the top-left corner of each individual work
entry. Click on an individual work entry to see the date and time for the specific work entry, then
click :guilabel:`Edit` to view the conflict details in a pop-up window.

.. image:: work_entries/conflict-pop-up.png
   :alt: A row of conflicts, with one entry showing details for the conflict.

The conflict is briefly explained in an orange text box in the :guilabel:`Open` pop-up window that
appears.

The :guilabel:`Description`, :guilabel:`Employee`, and :guilabel:`Work Entry Type` are listed on the
left side of the pop-up window. The :guilabel:`From` and :guilabel:`To` date and time range, as well
as the total time (in hours) in the :guilabel:`Duration` field, appears on the right side.

Time off conflicts
------------------

The most common work entry conflicts are for time off requests. Odoo automatically generates work
entries for specific time periods. When time off is requested after these work entries are
generated, it results in duplicate work entries for that employee (one for time off and another for
regular work).

If there is a conflict because a time off request is in the system for the same time that a regular
work entry already exists, the time off request is entered in a :guilabel:`Time Off` field.

Conflicts can be resolved either directly on the work entry or in the detailed time off request
form.

.. _payroll/time-off-work-entry:

Resolve on work entry
~~~~~~~~~~~~~~~~~~~~~

If no additional details are needed to determine if a time off request should be approved or
refused, the time off conflict can be resolved directly from the work entry pop-up window.

Click either the :guilabel:`Refuse Time Off` or :guilabel:`Approve Time Off` buttons to refuse or
approve the time off request, then the two buttons disappear. Click the :guilabel:`Save & Close`
button to close the pop-up window.

The conflict disappears from the :guilabel:`Work Entry` dashboard, since the conflict is now
resolved.

.. image:: work_entries/conflict-details.png
   :alt: The detailed conflict pop-up window that appears when the Edit button is clicked.

.. note::
   If the time off is approved, the status of the work entry conflict changes to
   :guilabel:`Cancelled`. If the time off is refused, the status changes to :guilabel:`Draft`.

.. _payroll/time-off-request-form:

Resolve on time off request
~~~~~~~~~~~~~~~~~~~~~~~~~~~

If more details are needed to make a decision about the time off request, hover over the entry in
the :guilabel:`Time Off` field, and click the :icon:`fa-external-link` :guilabel:`(Internal Link)`
icon that appears at the end of the line. This causes an :guilabel:`Open: Time Off` pop-up window to
load, with all the time off request details. Click either the :guilabel:`Approve` or
:guilabel:`Refuse` buttons to approve or refuse the request.

To resolve the time off conflict on the detailed time off request pop-up window, click the
:guilabel:`Internal Link` button at the end of the :guilabel:`Time Off` entry line, and the time off
request details appear in a new pop-up window. The request can be modified, if needed.

Click the :guilabel:`Approve` button to approve the request, then click the :guilabel:`Save & Close`
button to save the changes, and go back to the work entry conflict pop-up window.

.. image:: work_entries/entry-details.png
   :alt: The detailed time off request information.

Now, the :guilabel:`Approve Time Off` button is hidden, only the :guilabel:`Refuse Time Off` button
is visible.

If the approval was a mistake, the request can be refused here, by clicking the :guilabel:`Refuse
Time Off` button.

Since the time off was approved in the time off window, click the :guilabel:`X` in the top-right
corner to close the window. The conflict disappears from the :guilabel:`Work Entry` dashboard, since
it has been resolved.

.. _payroll/regenerate-work-entries:

Regenerate work entries
=======================

After conflicts are resolved, the affected work entries must be regenerated. This recreates the
specified work entries, and overwrites the previously conflicting work entries.

While :ref:`conflicts <payroll/conflicts>` *can* be resolved individually, if the conflicts are
caused by another application, such as **Planning** or **Attendances**, it is best practice to
correct the record in the application causing the conflict. The reason this method is recommended is
because, if the issue in the related application is **not** resolved, when work entries are
regenerated, the conflicts reappear.

First, ensure the issues are resolved in the specific applications that caused the work entry
conflicts. Once the conflicts have been resolved in the corresponding apps, open the work entry
dashboard by navigating to :menuselection:`Payroll app --> Work Entries --> Work Entries`.

Click the :guilabel:`Regenerate Work Entries` button at the top of the :guilabel:`Work Entries`
dashboard, and a :guilabel:`Work Entry Regeneration` pop-up window appears.

Select the :guilabel:`Employees` to regenerate work entries for, using the drop-down menu. Adjust
the :guilabel:`From` and :guilabel:`To` fields, so the correct date range is displayed.

Click the :guilabel:`Regenerate Work Entries` button, and the work entries are recreated. Once
finished, the pop-up window closes.

.. image:: work_entries/regenerate-details.png
   :alt: Regenerate a work entry for a particular employee.

.. example::
   An employee has incorrect work entries generated from the **Planning** app because they were
   incorrectly assigned to two work stations simultaneously. This should be fixed in the
   **Planning** app, instead of the **Payroll** app.

   To correct this issue, modify the employee's schedule in the **Planning** app, so they are
   correctly assigned to only one work station. Then, in the **Payroll** app, regenerate work
   entries for that employee, for that specific time period.

   The **Payroll** app then pulls the new, corrected data form the **Planning** app, and recreates
   the correct work entries for that employee. All conflicts for that employee are now resolved.

.. _payroll/work-entry-types:

Work entry types
================

When :ref:`creating a work entry <payroll/new-work-entry>` in the **Payroll** application, or when a
new time off type is created in the **Time Off** application, a work entry *type* needs to be
selected.

The **Payroll** app comes with nine preconfigured work entry types, and depending on the installed
:doc:`payroll localization <payroll_localizations>`, additional country-specific work entries may be
configured. If there is a need for additional work entry types, they can be :ref:`created
<payroll/new-work-entry-type>`.

To view the current work entry types available, navigate to :menuselection:`Payroll app -->
Configuration --> Work Entries --> Work Entry Types`.

Each work entry type has a code to aid in the creation of payslips, and to ensure all taxes and fees
are correctly entered.

.. note::
   Depending on the installed localization, other sections and fields may appear on the form.

.. image:: work_entries/work-entry-types.png
   :alt: List of all work entry types currently available for use, with the payroll code and color.

.. _payroll/new-work-entry-type:

New work entry type
-------------------

To create a new work entry type, go to :menuselection:`Payroll app --> Configuration --> Work
Entries --> Work Entry Types` and click :guilabel:`New`. Then, enter the information for the
following sections on the form.

General information section
~~~~~~~~~~~~~~~~~~~~~~~~~~~

- :guilabel:`Work Entry Type Name`: Enter a name for the work entry type. It should be short and
  descriptive, such as `Sick Time` or `Training`.
- :guilabel:`Payroll Code`: Enter a code for the work entry type. This code appears with the work
  entry type on timesheets and payslips. Since the code is used in conjunction with the
  **Accounting** application, it is advised to check with the accounting department for a code to
  use.
- :guilabel:`External Code`: Enter a code to use for exporting data to a third-party payroll
  service. Check with the third-party being used to determine the :guilabel:`External Code` to enter
  for the new work entry type.
- :guilabel:`Color`: Select a color for the particular work entry type. This color appears on the
  work entry dashboard to aid in identifying work entry types.

.. note::
   The **only** required fields for a work entry type is the :guilabel:`Work Entry Type Name` and
   the :guilabel:`Payroll Code`.

Display in payslip section
~~~~~~~~~~~~~~~~~~~~~~~~~~

- :guilabel:`Rounding`: Select how the time entered for the work entry should be rounded. The
  rounding method selected determines how the worked time on timesheet entries are calculated. The
  options are:

  - :guilabel:`No Rounding`: Work entries are not modified.
  - :guilabel:`Half Day`: Work entries are rounded to the closest half day amount.
  - :guilabel:`Day`: Work entries are rounded to the closest full day amount.

- :guilabel:`Rounding Type`: If either :guilabel:`Half Day` or :guilabel:`Day` is selected in the
  :guilabel:`Rounding` field, this field appears. Select either :guilabel:`Up` or :guilabel:`Down`
  to determine how the rounding is handled.

.. example::
   The working time is set to an 8-hour work day (a 40-hour work week). An employee enters a time of
   5.5 hours on a work entry.

   If the :guilabel:`Rounding` is set to :guilabel:`No Rounding`, the work entry remains at 5.5
   hours.

   If the :guilabel:`Rounding` is set to :guilabel:`Half Day`, and the :guilabel:`Rounding Type` is
   set to :guilabel:`Down`, the work entry is changed to 4 hours. If the :guilabel:`Rounding Type`
   is set to :guilabel:`Up`, the work entry is changed to 8 hours.

   If the :guilabel:`Rounding` is set to :guilabel:`Day`, and the :guilabel:`Rounding Type` is set
   to :guilabel:`Down`, the work entry is changed to zero hours. If the :guilabel:`Rounding Type` is
   set to :guilabel:`Up`, the work entry is changed to 8 hours.

Unpaid section
~~~~~~~~~~~~~~

- :guilabel:`Unpaid in Structures Types`: If the work entry type is for work that is *not paid*,
  specify which pay structure the unpaid work entry type applies to, using the drop-down menu. Some
  situations where work is logged on a payslip, but no compensation is given, such as unpaid
  internships, unpaid training, or volunteer work.

Time off options section
~~~~~~~~~~~~~~~~~~~~~~~~

- :guilabel:`Time Off`: Tick this box if the work entry type can be selected for a time off request
  or time off entry, in the **Time Off** application.

  If :guilabel:`Time Off` is active, a :guilabel:`Time Off Type` field appears. This field has a
  drop-down menu to select the specific types of time off, such as `Paid Time Off`, `Sick Time Off`,
  or `Extra Hours`. Select the :guilabel:`Time Off Type` associated with the work entry type.

- :guilabel:`Keep Time Off Right`: Tick this checkbox if the work entry type associated with the
  selected time off type allows for rolling over unused time off to the following year.

Reporting section
~~~~~~~~~~~~~~~~~

- :guilabel:`Unforeseen Absence`: Tick this box if the work entry type should be visible on the
  unforeseen absences report.

.. image:: work_entries/new-work-entry-type.png
   :alt: New work entry type form with all fields to be filled in.

.. seealso::
   :doc:`payslips`

   :doc:`pay_runs`


==================================================
SECTION: work_entry_analysis.rst
PATH: applications/hr/payroll/work_entry_analysis.rst
==================================================

===================
Work entry analysis
===================

The default *Work Entries Analysis* report provides an overview of the validated work entries for
the current month. To view this report, navigate to :menuselection:`Payroll app --> Reporting -->
Work Entry Analysis`.

The work entries appear in a pivot table, with the default filters of :guilabel:`Current month:
(Month)(Year)` and :guilabel:`Validated`. The various types of :doc:`work_entries` populate the
rows, while the :guilabel:`Total` values populate the only visible column.

To change the displayed information, click :icon:`fa-plus-square` :guilabel:`Total` above the main
column, revealing a drop-down menu of available metrics. Click on one of the available groupings,
and the data is further organized by that selected metric. The default options are :guilabel:`Work
Entry Type`, :guilabel:`Employee`, and :guilabel:`Department`. If in a multi-company database, a
:guilabel:`Company` option also appears.

Work entry analysis comparison
==============================

It is possible to compare the work entries from one time period to a previous time period. To view
this comparison, first navigate to :menuselection:`Payroll app --> Reporting --> Work Entry
Analysis`.

Next, click the :icon:`fa-caret-down` :guilabel:`(down arrow)` icon in the search bar, revealing a
drop-down menu. Under the :icon:`fa-adjust` :guilabel:`Comparison` section, click on either
:guilabel:`Current Month: Previous Period` or :guilabel:`Current Month: Previous Year`.

The report updates and displays the data for the current time period, data for the selected previous
time period, as well as the :guilabel:`Variation` between the two, in a percentage.

.. image:: work_entry_analysis/work-entry-comparison.png
   :alt: A pivot table comparing the work entries of the current month and the previous month.

.. note::
   If no work entries for a specific :ref:`work entry type <payroll/work-entry-types>` are logged
   for the time period, it does **not** appear on the report. That does **not** mean the work entry
   type does not exist, or is not configured.

   Additionally, if the default :guilabel:`Current month: (Month)(Year)` filter is removed from the
   search bar, the :guilabel:`Comparison` column does **not** appear; there must be a time-frame
   selected to view the :guilabel:`Comparison` column.

Use case: overtime report comparison
====================================

It is possible to alter the *Work Entries Analysis* report to show a comparison of only overtime
work entries, grouped by employee, for a specific time period. To view this data, first navigate to
the default *Work entry analysis* report by going to :menuselection:`Payroll app --> Reporting -->
Work Entry Analysis`.

Next, click the :icon:`fa-caret-down` :guilabel:`(down arrow)` icon in the search bar, revealing a
drop-down menu. Under the :icon:`fa-filter` :guilabel:`Filters` column, click :guilabel:`Add Custom
Filter`, and a :guilabel:`Add Custom Filter` pop-up window appears.

Using the drop-down menu, select :guilabel:`Work Entry Type` for the first field, leave the middle
field as-is (with :guilabel:`is in` populating the field), and select :guilabel:`Overtime Hours` for
the last field. Click :guilabel:`Add`, and all other work entry types disappear, and
:guilabel:`Overtime Hours` appear in the sole row.

To compare overtime from the current month to the previous month, to see which month had more
overtime logged, click the :icon:`fa-caret-down` :guilabel:`(down arrow)` icon again in the search
bar. Under the :icon:`fa-adjust` :guilabel:`Comparison` section, click :guilabel:`Current Month:
Previous Period`. Click away from the drop-down menu to close it.

Now, the report displays the :guilabel:`Overtime Hours` for the current month and the previous
month, along with the :guilabel:`Variation`, in a percentage.

To view which employees received the most overtime, click :icon:`fa-plus-square` :guilabel:`Overtime
Hours`, revealing a drop-down menu of options. Click :guilabel:`Employee`, and all employees with
overtime work entries for either the current or previous month appears.

In this example, it can be determined that :guilabel:`Marc Demo` worked the most overtime in
:guilabel:`August 2024`, whereas :guilabel:`Beth Evans` worked the most overtime hours in
:guilabel:`September 2024`. Additionally, :guilabel:`Mitchell Admin` had the largest variation
change, with a :guilabel:`-100%` change from :guilabel:`August 2024` to :guilabel:`September 2024`.

.. image:: work_entry_analysis/variation.png
   :alt: A pivot table comparing the overtime from September 2024 with August 2024.


==================================================
SECTION: working_schedules.rst
PATH: applications/hr/payroll/working_schedules.rst
==================================================

=================
Working schedules
=================

In Odoo, *working schedules* determine the hours employees are expected to work, according to their
:doc:`contract <contracts>`, and informs the **Payroll** app how to compute work entries, ultimately
affecting salaries and payslips. It is necessary to ensure all working schedules for employees are
configured in the database.

.. note::
   In Odoo's **Payroll** app, *working schedules* are referred to as *working hours* in :ref:`salary
   structures <payroll/structure-types>`.

To view the currently configured working schedules, navigate to :menuselection:`Payroll app -->
Configuration --> Working Schedules`, and the :guilabel:`Working Schedules` dashboard loads.

Working schedules are company-specific. In a multi-company database, each company **must** identify
each type of working schedule they use. If the database is created for only one company, the
:guilabel:`Company` column is not available.

.. example::
   An Odoo database containing multiple companies that use a standard 40-hour work week needs to
   have a separate working schedule entry for each company that uses the 40-hour standard work week.

   A database with five companies that all use a standard 40-hour work week needs to have five
   separate 40-hour working schedules configured.

.. image:: working_schedules/working-schedules.png
   :alt: All working schedules available to use currently set up in the database for the company.

.. _payroll/new-working-schedule:

New working schedule
====================

To create a new working schedule, navigate to :menuselection:`Payroll app --> Configuration -->
Working Schedules`, and click :guilabel:`New`. The :guilabel:`Working Schedules` form has two
sections, a general information section and a :guilabel:`Working Hours` tab listing out all the
individual working hours by day and time.

Fill out the following information on the top-half of the form:

- :guilabel:`Name`: Type in the name for the new default working schedule. This should be
  descriptive and clear to understand, such as `Standard 20 Hours/Week`.
- :guilabel:`Flexible Hours`: Tick this checkbox if employees can work different hours from the
  working schedule.
- :guilabel:`Company Full Time`: Enter the number of hours per week an employee would need to work
  to be considered a full-time employee. Typically, this is approximately 40 hours, and this number
  affects what types of benefits an employee can receive, based on their employment status
  (full-time vs part-time).
- :guilabel:`Average Hour Per Day`: The average hours per day field is auto-populated, based on the
  working hours configured in the :guilabel:`Working Hours` tab. This entry affects resource
  planning, since the average daily hours affect what resources can be used, and in what quantity,
  per workday.
- :guilabel:`Work Time Rate`: This percentage is auto-generated based on the entry for the
  :guilabel:`Company Full Time` and the working hours configured in the :guilabel:`Working Hours`
  tab. This number should be between `0.00%` and `100%`, so if the percentage is above `100%`, it is
  an indication that the working times and/or :guilabel:`Company Full Time` hours need adjustment.
- :guilabel:`Company`: Select the company that can use these new default working hours from the
  drop-down menu. A blank field indicates it is available for all companies.
- :guilabel:`Timezone`: Select the time zone to be used for the new default working hours from the
  drop-down menu.

Next, configure the individual hours in the :guilabel:`Working Hours` tab. This tab lists the
specific working hours for each day.

The :guilabel:`Working Hours` are auto-populated for a default 40-hour work week, with each day
divided into three timed sections.

Every day has morning (8:00-12:00), lunch (12:00-13:00), and evening (13:00-17:00) hours configured.

.. note::
   The :guilabel:`Work From` and :guilabel:`Work To` times **must** be in a 24-hour format. For
   example, `2:00 PM` is entered as `14:00`.

Modify the :guilabel:`Day of Week`, :guilabel:`Day Period`, and :guilabel:`Work Entry Type`
selections by clicking on the drop-down menus in each column and making the desired selection. The
:guilabel:`Work From` and :guilabel:`Work To` columns are modified by typing in the time.

.. important::
   Keep in mind, working hours are company-specific, and **cannot** be shared between companies.
   Each company needs to have its own working hours set.

.. tip::
   If the working hours are not consistent each week, and the hours are on a bi-weekly schedule
   instead, click the :guilabel:`Switch to 2 week calendar` button at the top of the new default
   working hours form. This changes the :guilabel:`Working Hours` tab to display two weeks of
   working times that can be adjusted.

.. image:: working_schedules/new-working-schedule.png
   :alt: New working schedule form.
