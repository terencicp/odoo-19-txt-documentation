

==================================================
SECTION: adyen.rst
PATH: applications/sales/point_of_sale/payment_methods/terminals/adyen.rst
==================================================

=====
Adyen
=====

Connecting an **Adyen payment terminal** allows you to offer a fluid payment flow to your customers
and ease the work of your cashiers.

.. important::
   - Adyen payment terminals do not require an :doc:`IoT Box </applications/general/iot>`.
   - Adyen terminals can be used in many countries, but not worldwide. Check the `List of countries
     supported by Adyen <https://docs.adyen.com/point-of-sale/what-we-support/supported-languages/>`_.
   - Adyen works only with businesses processing more than **$10 million annually** or invoicing a
     minimum of **1,000 transactions per month**.

.. seealso::
   - `List of payment methods supported by Adyen <https://docs.adyen.com/point-of-sale/what-we-support/payment-methods/>`_
   - `List of Adyen terminals <https://docs.adyen.com/point-of-sale/what-we-support/select-your-terminals/>`_

Configuration
=============

Start by creating your Adyen account on `Adyen's website <https://www.adyen.com/>`_. Then, board
your terminal following the steps described on your terminal's screen.

.. seealso::
   `Adyen Docs - Payment terminal quickstart guides <https://docs.adyen.com/point-of-sale/user-manuals>`_

.. _adyen/api:

Generate an Adyen API key
-------------------------

The **Adyen API key** is used to authenticate requests from your Adyen terminal. To generate an API
key, go to your :menuselection:`Adyen account --> Developers --> API credentials`, and **create**
new credentials or select **existing** ones. Click :guilabel:`Generate an API key` and save the key
to paste it into the Odoo :guilabel:`Adyen API key` field at :ref:`the payment method creation
<adyen/method-creation>`.

.. seealso::
   - `Adyen Docs - API credentials
     <https://docs.adyen.com/development-resources/api-credentials#generate-api-key>`_.

.. _adyen/identifier:

Locate the Adyen terminal identifier
------------------------------------

The **Adyen Terminal Identifier** is the terminal's serial number, which is used to identify the
hardware.

To find this number, go to your :menuselection:`Adyen account --> Point of Sale --> Terminals`,
select the terminal to link with, and save its serial number to paste it into the Odoo
:guilabel:`Adyen Terminal Identifier` field at :ref:`the payment method creation
<adyen/method-creation>`.

Set the Event URLs
------------------

For Odoo to know when a payment is made, you must configure the terminal **Event URLs**. To do so,

#. Log in to `Adyen's website <https://www.adyen.com/>`_;
#. Go to :menuselection:`Adyen's dashboard --> Point of Sale --> Terminals` and select the connected
   terminal;
#. From the terminal settings, click :guilabel:`Integrations`;
#. Set the :guilabel:`Switch to decrypted mode to edit this setting` field as :guilabel:`Decrypted`;
#. Click the **pencil icon** button and enter your server address, followed by
   `/pos_adyen/notification` in the :guilabel:`Event URLs` field;
#. Click :guilabel:`Save` at the bottom of the screen to save changes.

.. _adyen/method-creation:

Configure the payment method
----------------------------

Enable the payment terminal :ref:`in the application settings <configuration/settings>` and
:doc:`create the related payment method <../../payment_methods>`. Set the journal type as
:guilabel:`Bank` and select :guilabel:`Adyen` in the :guilabel:`Use a Payment Terminal` field.

Finally, fill in the mandatory fields with your :ref:`Adyen API key <adyen/api>`, :ref:`Adyen
Terminal Identifier <adyen/identifier>`, and :guilabel:`Adyen Merchant Account`.

.. image:: adyen/payment-method.png

Once the payment method is created, you can select it in your POS settings. To do so, go to the
:ref:`POS' settings <configuration/settings>`, click :guilabel:`Edit`, and add the payment method
under the :guilabel:`Payments` section.

.. _adyen/tips:

Tips
====

Odoo Point of Sale allows tipping with an Adyen terminal. To configure this option, go to the
:ref:`POS settings <configuration/settings>`, enable the :ref:`Tips <pos/restaurant/tips>` and the
:guilabel:`Add tip through payment terminal (Adyen)` settings, then click :guilabel:`Save`.

To process tips with an Adyen terminal, follow these steps:

#. Go to the relevant POS and :ref:`process an order <pos/restaurant/orders>`.
#. Click :ref:`Payment <pos/restaurant/bills/payment>` and select the :ref:`relevant payment
   method <adyen/method-creation>`. The :guilabel:`Adyen` terminal displays the transaction and
   suggests adding tips.
#. Add a tip amount on the terminal and validate.
#. In Odoo POS, click :icon:`fa-heart` :guilabel:`Tip`, enter the tip amount, and click
   :guilabel:`Ok`.
#. Click :guilabel:`Close Tab` to validate the payment and the tip.


==================================================
SECTION: barcode.rst
PATH: applications/sales/point_of_sale/shop/barcode.rst
==================================================

========
Barcodes
========

Using a barcode scanner to process point-of-sale orders improves your efficiency in providing
quicker customer service. Barcode scanners can be used both to scan products or to log employees
into a POS session.

Configuration
=============

To use a barcode scanner, you must enable the feature in the Inventory app. Go to
:menuselection:`Inventory --> Configuration --> Settings`, in the :guilabel:`Barcode` section, tick
:guilabel:`Barcode Scanner` and save.

.. image:: barcode/barcode-inventory.png
   :align: center
   :alt: barcode setting in the Inventory application

.. seealso::
   - :doc:`Set up a barcode scanner </applications/inventory_and_mrp/barcode/setup/hardware>`
   - :doc:`Activate barcode scanners </applications/inventory_and_mrp/barcode/setup/software>`

Once enabled in **Inventory**, you can use the barcode feature in **Point of Sale** with products
that have a barcode number assigned.

Assign barcodes
===============

To your products
----------------

To use this feature in POS, your products must have barcodes assigned. To do so, go to
:menuselection:`Point of Sale --> Products --> Products` and open a **product form**. Add a barcode
number in the :guilabel:`Barcode` field in the :guilabel:`General Information` tab.

To your employees
-----------------

To add an identification number to an employee, go to the **Employees** app and open an **employee
form**. Choose an identification number for your employee and fill in the :guilabel:`PIN Code`
field in the :guilabel:`HR Settings` tab.

Use barcodes
============

Scan products
-------------

Scan a product's barcode using a barcode scanner. Doing so adds it directly to the cart. To change
the quantity, scan a product as many times as needed, or click :guilabel:`Qty` and enter the number
of products using the keypad.

You can also enter the barcode number manually in the search bar to look for the product. Then,
click it to add it to the cart.

Log employees
-------------

You can also use a barcode scanner to log your employees. To do so, :ref:`restrict access
<pos/employee_login/configuration>` to the POS and :ref:`use barcodes to log your employees in
<pos/employee_login/badge>` your POS.


==================================================
SECTION: cash_machines.rst
PATH: applications/sales/point_of_sale/payment_methods/cash_machines.rst
==================================================

:show-content:

=============
Cash machines
=============

Connecting and integrating a cash machine with a :ref:`POS system <pos/session-start>` enables
automation of cash transactions, cash counting, and change return.

.. _pos/cash_machines/configuration:

Configuration
=============

Configure the cash machine itself before setting it up in Odoo. Currently, Odoo supports :doc:`Glory
<cash_machines/glory>` cash machines. Once the cash machine is fully set up:

#. Create the associated :doc:`payment method <../payment_methods>`.
#. Select the POS in the :guilabel:`Point of Sale` field.

.. _pos/terminals/cash-machine-use:

Use
===

To process a :ref:`payment <pos/sell>` with a :ref:`configured cash machine
<pos/cash_machines/configuration>`, select the machine's :doc:`payment method <../payment_methods>`
on the **payment screen**, then follow the instructions on the machine.

Once the transaction is successful, the payment is automatically validated in Point of Sale.

.. note::
   - Connection issues between Odoo and the cash machine result in transaction cancellation.
   - To cancel the payment request, click :guilabel:`Cancel`.

.. toctree::
   :titlesonly:

   cash_machines/glory


==================================================
SECTION: cash_rounding.rst
PATH: applications/sales/point_of_sale/pricing/cash_rounding.rst
==================================================

=============
Cash rounding
=============

**Cash rounding** is required when the lowest physical denomination
of currency, or the smallest coin, is higher than the minimum unit
of account.

For example, some countries require their companies to round up or
down the total amount of an invoice to the nearest five cents, when
the payment is made in cash.

Each point of sale in Odoo can be configured to apply cash rounding
to the totals of its bills or receipts.

Configuration
=============

Go to :menuselection:`Point of Sale --> Configuration --> Settings`
and enable *Cash Rounding*, then click on *Save*.

.. image:: cash_rounding/cash_rounding01.png
    :align: center

Go to :menuselection:`Point of Sale --> Configuration --> Point of
Sale`, open the point of sale you want to configure, and enable the
*Cash Rounding* option.

To define the **Rounding Method**, open the drop-down list and click
on *Create and Edit...*.

Define here your *Rounding Precision*, *Profit Account*, and
*Loss Account*, then save both the Rounding Method and your Point
of Sale settings.

.. image:: cash_rounding/cash_rounding02.png
    :align: center

All total amounts of this point of sale now add a line to apply the
rounding according to your settings.

.. image:: cash_rounding/cash_rounding03.png
    :align: center

.. note::
   Odoo Point of Sale only supports the :guilabel:`Add a rounding line` rounding strategy.


==================================================
SECTION: combos.rst
PATH: applications/sales/point_of_sale/combos.rst
==================================================

==============
Product combos
==============

The **Product Combos** feature allows users to define and manage combination options for a single
product.

In the context of a restaurant, the feature enables users to create multiple-choice menus. For
example, a user can define a main dish and specify various options for sides, drinks, or desserts
that customers can combine with the main dish.

In retail, this feature allows you to create a product set with multiple products to choose from and
combine.

Configuration
=============

First, you need to create combination choices. To do so:

#. Go to :menuselection:`Point of Sale --> Products --> Product Combos` and click :guilabel:`New`.
#. Name your combo and add the products you want customers to choose from by clicking :guilabel:`Add
   a line`. You can also include an extra price for each option in the :guilabel:`Extra Price`
   column.

.. note::
   As a reference, the selected product's original price is displayed in the :guilabel:`Original
   Price` column.

.. image:: combos/combo-form.png
   :scale: 75%

Second, you need to create a specific product to gather combo choices. To do this:

#. Go to :menuselection:`Point of Sale --> Products --> Products` and click :guilabel:`New`.
#. Set the :guilabel:`Product Type` to :guilabel:`Combo` and fill in the  :guilabel:`General
   Information` tab.

   .. note::
      The sales price of the combo product is fixed and does not vary based on the individual prices
      of included items or the quantity of items in the combo. The combo product price is only
      affected by the extra price optionally defined at the combo choice creation or if a variant of
      one of the items has a specified extra price.
#. Go to the :guilabel:`Combo Choices` tab, click :guilabel:`Add a line`, and select the
   combinations to add. You can also create a new combination at this step by clicking
   :guilabel:`New` on the popup window.

.. image:: combos/combo-product-form.png
   :scale: 75%

Once you have created and added the combo choices into a product, you can sell combos in your retail
store or restaurant.

Practical application
=====================

:ref:`Open a POS session <pos/session-start>` and select the combo product. Choose the options and
click :guilabel:`Add to order`. As a reminder, the extra price appears under the related choices.

.. image:: combos/combo-select.png
   :scale: 75%


==================================================
SECTION: configuration.rst
PATH: applications/sales/point_of_sale/configuration.rst
==================================================

:show-content:
:show-toc:

=============
Configuration
=============

.. _configuration/settings:

Access the POS settings
=======================

To access the general POS settings, go to :menuselection:`Point of Sale --> Configuration -->
Settings`. Then, open the dropdown menu in the :guilabel:`Point of Sale` field and select the POS to
configure.

.. image:: configuration/select-pos-dropdown.png
   :alt: Dropdown menu to select the POS in the app settings

.. note::
   These settings are available to users with the :doc:`access rights </applications/general/users>`
   :guilabel:`Administration` set as :guilabel:`Settings`.

You can also configure some settings from the dashboard by clicking the vertical ellipsis button
(:guilabel:`⋮`) on a POS card. Doing so opens a popup window, from which you can:

- :doc:`Enable multiple employees to log in. <employee_login>`
- :doc:`Connect and set up an IoT sytem. <configuration/pos_iot>`
- :doc:`Connect and set up an ePOS printer. <configuration/epos_ssc>`

.. image:: configuration/toggle-settings.png
   :alt: popup window to access quick settings in POS

.. note::
   These settings are available to users with the :doc:`access rights </applications/general/users>`
   :guilabel:`Point of Sale` set as :guilabel:`Administrator`.

Make products available
=======================

To make products available for sale,

#. Go to :menuselection:`Point of Sale --> Products --> Products`.
#. Select a product to open the product form.
#. Tick the :guilabel:`Point of Sale` checkbox at the top of the form.

.. image:: configuration/pos-available.png
   :alt: Making a product available in your POS.

PoS product categories
======================

Configuration
-------------

POS product categories allow users to categorize products and get a more structured and clean
POS interface.

To manage PoS categories, go to :menuselection:`Point of Sale --> Configuration --> PoS Product
Categories`. To add a new category, click :guilabel:`Create`. Then, name it in the
:guilabel:`Category Name` field.

To associate a category with a parent category, fill in the :guilabel:`Parent Category` field. A
parent category groups one or more child categories.

.. example::
   .. image:: configuration/parent-categories.png
      :alt: The PoS product categories grouped by parent categories

Assign PoS product categories
-----------------------------

Go to :menuselection:`Point of Sale --> Products --> Products` and open a product form. Then, go to
the :guilabel:`Point of Sale` tab and fill in the :guilabel:`Category` field under the
:guilabel:`Point of Sale` section with one or multiple PoS categories.

.. image:: configuration/form-pos-category.png
   :alt: Point of Sale tab of a product form to add a PoS product category

Restrict categories
-------------------

You can limit the categories displayed on your POS interface. To achieve this, go to your :ref:`POS
settings <configuration/settings>` and choose the specific categories to display in the
:guilabel:`Restrict Categories` field within the :guilabel:`Product & PoS categories` section.

.. image:: configuration/restrict-category.png
   :alt: Setting to set up the restrict category feature

.. toctree::
   :titlesonly:

   configuration/pos_iot
   configuration/epos_printers
   configuration/https
   configuration/epos_ssc


==================================================
SECTION: customer_credit.rst
PATH: applications/sales/point_of_sale/payment_methods/customer_credit.rst
==================================================

================
Customer account
================

The **Customer account** feature allows customers to use their account to make purchases. They can
deposit money for future purchases or select their account as a :doc:`payment method
<../payment_methods>` to purchase items on credit and :ref:`settle the debt later <pos/settle_debt>`
through a point-of-sale transaction or via an issued invoice.

.. _pos/payment_method/configuration:

Configuration
=============

To allow customers to pay using their customer account, :doc:`create a payment method
<../payment_methods>` and configure it as follows:

#. Enable :guilabel:`Identify Customer` to force the :ref:`selection of a customer <pos/customers>`
   to allow using this payment method.
#. Keep the :guilabel:`Journal` field blank to use the customer's receivable account.
#. Select the points of sale where this payment method is available in the :guilabel:`Point of Sale`
   field.

.. note::
   Set a maximum sales credit to prevent customers from exceeding a defined credit limit. Once the
   maximum credit amount is reached, the selected customer button turns orange and a
   :icon:`fa-warning` (:guilabel:`warning sign`) icon appears next to the customer’s name as a
   warning. However, this warning does **not** prevent a sale from proceeding.

.. seealso::
   - :doc:`../../../finance/accounting/payments`
   - :doc:`../../../finance/accounting/get_started/chart_of_accounts`

Payment process
===============

Deposit money
-------------

To deposit money to the customer account from the POS interface:

#. Click :guilabel:`Customer` and locate the desired customer in the list.
#. Click the :icon:`fa-bars` (:guilabel:`hamburger menu`) icon, then select :guilabel:`Deposit
   money`.
#. Choose the payment method.
#. When redirected to the payment screen, enter the amount to deposit using the keypad.
#. :guilabel:`Validate` the transaction.
#. Click :guilabel:`Yes` on the popup window to confirm.

Customer account as payment method
----------------------------------

To use the customer account as a payment method for a purchase from the POS payment screen:

#. Select the payment method :ref:`created for the customer account
   <pos/payment_method/configuration>`.
#. Click :icon:`fa-user` :guilabel:`Customer` to open the customer list and select the customer.
#. Click the :guilabel:`Invoice` button.
#. :guilabel:`Validate` the purchase.

.. important::
   To effectively monitor and manage the customer’s unpaid debt, either :doc:`create an invoice
   <../receipts_invoices>` for the order or install the :doc:`Accounting application
   <../../../finance/accounting>`.

Debt tracking
=============

When a customer pays using their customer account, the purchase amount is recorded as debt until it
is paid off. To keep track of a customer’s debt, consult their customer statement in the backend or
their profile in an open session.

To access the :guilabel:`Customer Statement` report, go to :menuselection:`Point of Sale --> Orders
--> Customers`, select a customer to open their form, and click the :guilabel:`Customer Statements`
smart button.

To view the total amount due or deposited by a customer from an open session, access the customer
list by clicking :guilabel:`Customer` and search for the desired customer; the amount due or
deposited is displayed next to their name.

.. image:: customer_credit/customer-list.png
   :scale: 60 %
   :alt: customer list and summary of their customer accounts

.. seealso::
   :doc:`../../../finance/accounting/payments/follow_up`

.. note::
   When a customer is related to a company, the customer statement report might be related to the
   company itself, and not the customer.

.. _pos/settle_debt:

Due amount settlement
=====================

To settle a customer's due amount, :ref:`register the payment from the invoice
<accounting/payments/from-invoice-bill>` or, from the POS interface, follow these steps:

#. Click :guilabel:`Customer` and search for the desired customer in the list.
#. Click the :icon:`fa-bars` (:guilabel:`hamburger menu`) icon next to the customer's name.
#. Select :guilabel:`Settle orders` or :guilabel:`Settle invoices`.
#. Select the orders or invoices to settle.
#. Click :guilabel:`Payment` and select the relevant payment method.
#. Click :guilabel:`Validate`.
#. Click :guilabel:`Yes` on the popup window to confirm the deposit of the payment received from the
   customer.


==================================================
SECTION: discount_tags.rst
PATH: applications/sales/point_of_sale/pricing/discount_tags.rst
==================================================

===============================
Discount tags (barcode scanner)
===============================

If you want to sell your products with a discount, for a product getting
close to its expiration date for example, you can use discount tags.
They allow you to scan discount barcodes.

.. note::
   To use discount tags you will need to use a barcode scanner.

Barcode Nomenclature
====================

To use discounts tags, we need to learn about barcode nomenclature.

Let's say you want to have a discount for the product with the following
barcode:

.. image:: discount_tags/discount_tags01.png
   :align: center

You can find the *Default Nomenclature* under the settings of your PoS
interface.

.. image:: discount_tags/discount_tags02.png
   :align: center

.. image:: discount_tags/discount_tags03.png
   :align: center

Let's say you want 50% discount on a product you have to start your
barcode with 22 (for the discount barcode nomenclature) and then 50 (for
the %) before adding the product barcode. In our example, the barcode would
be:

.. image:: discount_tags/discount_tags04.png
   :align: center

Scan the products & tags
========================

You first have to scan the desired product (in our case, a lemon).

.. image:: discount_tags/discount_tags05.png
   :align: center

And then scan the discount tag. The discount will be applied and you can
finish the transaction.

.. image:: discount_tags/discount_tags06.png
   :align: center


==================================================
SECTION: discounts.rst
PATH: applications/sales/point_of_sale/pricing/discounts.rst
==================================================

=========
Discounts
=========

By offering discounts, you can entice your customers and drastically
increase your revenue. It is vital to offer discounts, whether they are
time-limited, seasonal or manually given.

To manage discounts, Odoo has powerful features that help set up a
pricing strategy tailored to every business.

Apply manual discounts
======================

If you seldom use discounts, applying manual ones might be the easiest
solution for your point of sale.

You can either apply a discount on the whole order or on specific
products inside an order.

Apply a discount on a product
-----------------------------

From your PoS session interface, use the *Disc* button.

.. image:: discounts/discounts_01.png
   :align: center
   :alt: View of the discount button for manual discount

Then, you can input a discount over the product that is currently
selected.

Apply a global discount
-----------------------

To apply a discount on the whole order, go to :menuselection:`Point of
Sale --> Configuration --> Point of Sale` and select your PoS.

Once on your PoS form, select *Global Discounts*, under the *Pricing* category.

.. image:: discounts/discounts_02.png
   :align: center
   :alt: View of the feature to enable for global discount

Now, you have a new *Discount* button appearing on your PoS interface.

.. image:: discounts/discounts_03.png
   :align: center
   :alt: View of the button to use for global discount via the pos interface

Click on it and enter the wanted discount.

.. image:: discounts/discounts_04.png
   :align: center
   :alt: View of the discount offered in the payment summary

.. note::
   On this example, there is a global discount of 50% as well as a specific
   50% discount on oranges.

Apply time-limited discounts
============================

To activate time-limited discounts, you must activate the *Pricelists*
feature. To do so, go to :menuselection:`Point of Sale -->
Configuration --> Point of Sale` and open your PoS. Then, enable the
pricelist feature.

.. image:: discounts/discounts_05.png
   :align: center
   :alt: View of the pricelist feature

Once activated, you must choose the pricelists you want to make
available in the PoS and define a default one.

Create a pricelist
------------------

By default, Odoo has a *Public Pricelist* configured. To create more,
go to :menuselection:`Point of Sale --> Products --> Pricelists`. Then
click on create.

When creating a pricelist, you can set several criteria to use a
specific price: period, min. quantity, etc. You can also decide to apply
that pricelist on specific products or on the whole range.

.. image:: discounts/discounts_06.png
   :align: center
   :alt: View of a time-limited pricelist for two products

Using a pricelist with the PoS interface
----------------------------------------

On the PoS interface, a new button appears. Use it to select a
pricelist.

.. image:: discounts/discounts_07.png
   :align: center
   :alt: View of the button to use for time-limited discounts via the pos interface

Click on it to instantly update the prices with the selected pricelist. Then, you can finalize the
order.


==================================================
SECTION: electronic_labels.rst
PATH: applications/sales/point_of_sale/pricing/electronic_labels.rst
==================================================

=======================
Electronic shelf labels
=======================

Electronic shelf labels allow you to display product information like prices and barcodes on store
shelves and to synchronize them remotely from the backend. This removes the need to print new labels
when product information changes.

.. image:: electronic_labels/electronic-label.png
   :alt: electronic label from Pricer

.. note::
   Odoo uses electronic labels from `Pricer <https://www.pricer.com/>`_.

Configuration
=============

Pricer setup
------------

#. `Get in touch with Pricer <https://www.pricer.com/contact>`_ to create and configure your Pricer
   account.
#. Create your stores: one pricer store equates to one physical store.
#. Link as many transceivers as needed to the Pricer store(s).
#. Create the following variables to share product information between your Odoo database system and
   Pricer. These variables act like placeholders on the label template.

   - `itemId`: this holds the unique internal identifier assigned to each product
   - `itemName`: the actual name of the product
   - `price`: the selling price of the product, including any applicable taxes
   - `presentation`: the template name used in Pricer for displaying the product information on the
     label
   - `currency`: the currency of your company (e.g., USD, EUR)
   - `barcode`: the barcode number associated with each product

   .. important::
      The names for these variables must be **identical** in your Pricer database.

#. Create a template named `NORMAL`. This template is used to display information on your digital
   tags.

Once your account, stores, variables, and template are configured on Pricer, you can proceed with
the setup of your Odoo database.

.. important::
   The account associated with your Pricer store must have access to send API requests to Pricer.

Odoo setup
----------

As a pre-requisite, :ref:`activate <general/install>` the :guilabel:`POS Pricer` module *(technical
name: pos_pricer)* to have all the required features to use Pricer electronic tags.

.. image:: electronic_labels/pricer-module.png
   :alt: Installing POS Pricer module from Apps

Once the module is activated, configure your :ref:`pricer stores <pricer_tags/stores>` and associate
:ref:`Pricer tags <pricer_tags/tags>` with your products.

.. _pricer_tags/stores:

Pricer stores
~~~~~~~~~~~~~

Similarly to the configuration in Pricer, you need to create one pricer store per physical location.
To do so, go to :menuselection:`Point of Sale --> Configuration --> Pricer Stores`, click
:guilabel:`New`, and fill in the line with the required information:

- :guilabel:`Store Name`: you can put any name of your liking.
- :guilabel:`Pricer Tenant Name`: the name of your company account in Pricer, usually followed by
  `-country_code`. This value is provided by Pricer.
- :guilabel:`Pricer Login`: the login of your Pricer account.
- :guilabel:`Pricer Password`: the password of your Pricer account.
- :guilabel:`Pricer Store ID`: the ID of the related Pricer store as defined on your Pricer
  database.

.. image:: electronic_labels/pricer-stores-setup.png
   :alt: Configuring a Pricer Store

.. note::
   - The :guilabel:`Pricer Tags` column is updated automatically when a label is linked to a
     product.
   - The :guilabel:`Last Update` and :guilabel:`Last Update Status` columns are updated
     automatically when the tags are updated.

.. _pricer_tags/tags:

Pricer tags
~~~~~~~~~~~

For a label to display specific product information, the label needs to be associated with the
product. To do so:

#. Open the product form by going to :menuselection:`Point of Sale --> Products --> Products` and
   clicking :guilabel:`New` or selecting an existing product.

   .. note::
      If you are creating a new product, configure and save it before associating any Pricer tags.

#. Go to the :guilabel:`Sales` tab, scroll to the :guilabel:`Pricer` section, and select the
   corresponding :guilabel:`Pricer Store`.

   .. image:: electronic_labels/pricer-product.png
      :alt: Linking Pricer tags to products
      :scale: 75%

#. Fill in the :guilabel:`Pricer tags ids` field by copying the label's ID from the label itself or
   scanning its barcode.

   .. note::
      Pricer tag IDs are composed of a letter followed by 16 digits.

.. tip::
   - We recommended using a barcode scanner to speed up the encoding process.
   - When setting up Pricer with Odoo for the first time, it is recommended that you configure only
     one product first. Before configuring more products, ensure you can display their information
     on a Pricer tag.

Now that you have a product associated with a Pricer tag, we can send its information to Pricer.

Practical application
---------------------

Odoo automatically sends requests to Pricer to synchronize the tags every 12 hours if you make any
modifications to:

   - Product name, price, barcode, or customer taxes
   - Currency
   - Associated Pricer store or Pricer tags

To force the update, activate the :ref:`developer mode <developer-mode>`. Then:

#. Go to :menuselection:`Point of Sale --> Configuration --> Pricer Store`.
#. Select the desired store(s).
#. Click :guilabel:`Update tags` to update all tags affected by changes to:

   - Product name, price, barcode, or customer taxes
   - Currency
   - Associated Pricer store or Pricer tags

Alternatively, click :guilabel:`Update all tags` to force the update of every tag, regardless of
whether changes were made.

.. image:: electronic_labels/update-all.png
   :alt: Update all Pricer tags

If Pricer has processed and accepted the request, the status field shows :guilabel:`Update
successfully sent to Pricer`. If there is any issue, the system displays an error message.

.. warning::
   If a request sent to Pricer fails, Odoo still considers that the product has been updated. In
   that case, we recommend forcing the update of all tags.

Discount labels
---------------

To display a discount label on a Pricer Tag, you need to link a :doc:`pricelist <pricelists>` to the
product variant associated with the tag.

To do so, open the product variant form:

#. Go to :menuselection:`Point of Sale --> Products --> Product Variants`.
#. Select the product you want to apply a discount to.

Then, set the desired pricelist:

#. Go to the :guilabel:`General Information` tab.
#. Select a pricelist in the :guilabel:`Pricer Sales Pricelist` field.

Once a pricelist is set, the :guilabel:`On Sale Price` field appears, showing the :guilabel:`Sales
Price` with the discount applied.

.. image:: electronic_labels/pricer-sales-pricelist.png
   :alt: Linking a pricelist to a product variant

After updating your electronic labels, a `PROMO` tag should appear on the electronic label,
displaying both the old, crossed-out price and the discounted price.

.. note::
   - Currently, pricelists that offer discounts for purchasing multiple units or derive their prices
     from other pricelists are not supported.
   - Assigning a pricelist to a product variant only affects the electronic label display. Scanning
     the product at the point of sale does not automatically apply the discount.

.. seealso::
   :doc:`discounts`


==================================================
SECTION: employee_login.rst
PATH: applications/sales/point_of_sale/employee_login.rst
==================================================

=========================
Multi-employee management
=========================

Odoo Point of Sale (POS) offers a **Log in with Employees** feature, allowing multiple users to
:ref:`log into a POS session <pos/employee_login/use>`. Activating this feature enables the
following actions:

- Select specific users who can :ref:`log into the POS <pos/employee_login/use>`.
- :ref:`Assign minimal, basic or advanced permissions <pos/employee_login/configuration>` to these
  users.
- :ref:`Track the employees involved in each order for enhanced analytics <pos/analytics>`.

.. _pos/employee_login/configuration:

Configuration
=============

Access the multi-employee setting from the :guilabel:`PoS Interface` section of the :ref:`POS
settings <configuration/settings>`. Then,

#. Activate the :guilabel:`Log in with Employees` feature.
#. Add the employees with **basic POS functionality** access in the :guilabel:`Basic rights` field.
#. Add the employees with **extended POS functionalities** in the :guilabel:`Advanced rights` field.
#. Add the employees with **minimal POS functionality** access in the :guilabel:`Minimal rights`
   field.

.. image:: employee_login/activate-setting.png
   :alt: setting to enable multiple cashiers in POS

.. note::
   - Leaving the :guilabel:`Minimal rights` and :guilabel:`Basic rights` field empty allows all
     employees to log in.
   - Leaving the :guilabel:`Advanced rights` field empty grants extended rights to Odoo users only.

.. tip::
   Click the :icon:`fa-ellipsis-v` (:guilabel:`vertical ellipsis`) button on the top right corner of
   a POS card and :guilabel:`Edit` to access the setting from the main POS dashboard.

.. seealso::
   :doc:`../../general/users/access_rights`

.. tabs::
   .. tab:: Minimal rights

      Employees with minimal rights can perform the following actions within the POS:

      **Session management:**

      - Lock and unlock an open POS session.
      - Reload data.

      **Sales transactions:**

      - :ref:`Process standard sales transactions <pos/sell>`.
      - :ref:`Set customers <pos/customers>`.
      - :ref:`Add notes to orders <pos/customer-notes>`.

      **Pricing and discounts:**

      - Enter promotional codes.

   .. tab:: Basic rights

      In addition to the minimal rights, employees with basic rights can also:

      **Session management:**

      - :ref:`Open a POS session <pos/session-start>`.
      - :ref:`Perform cash-in and cash-out operations <pos/cash-register>`.

      **Sales transactions:**

      - :ref:`Create customers <pos/customers>`.
      - :ref:`Process refunds <pos/refund>`.
      - :doc:`Access and handle sales orders <shop/sales_order>`.
      - Access past and current order history.
      - Cancel orders.

      **Pricing and discounts:**

      - Manually select another :doc:`pricelist <pricing/pricelists>`.
      - :doc:`Manually apply discounts <pricing/discounts>`.
      - Manually :ref:`change a product's price <pos/sell>`.
      - Give loyalty program's rewards.
      - Switch between :doc:`fiscal positions <pricing/fiscal_position>`.

   .. tab:: Advanced rights

      In addition to the minimal and basic rights, employees with advanced rights can also:

      - Create products.
      - Access the Odoo backend interface.
      - :ref:`Close the current POS session <pos/session-close>`.

      .. note::
         An employee with advanced POS rights who is not a database user cannot access the backend.

.. _pos/employee_login/use:

Usage guidelines
================

Logging in
----------

Once the **Log in with Employees** feature is enabled, employees must log in to :ref:`open a POS
session <pos/session-start>` and access the POS interface. They can :ref:`scan their employee badge
<pos/employee_login/badge>`, click the :icon:`fa-users` icon (:guilabel:`users`) to select their
name from the list of authorized users, or by entering :ref:`their PIN code
<pos/employee_login/pin>` in the :guilabel:`Enter your PIN` field.

.. image:: employee_login/log-in.png
   :alt: Login window to open a session when the multiple cashiers feature is active

To switch between users during an :ref:`active session <pos/session-start>`, click on the currently
logged-in employee's name at the top right of the POS screen and select the user to switch to.

.. tip::
   In the absence of a scanner, click the :icon:`fa-barcode` icon (:guilabel:`barcode`) to scan
   barcodes using the webcam.

.. _pos/employee_login/badge:

Logging in with badges
----------------------

Employees can log in using their badge. To configure badge-based login, assign a unique badge ID to
the employee's profile in the **Employees** module:

#. Navigate to the **Employees** module.
#. Open the form view of the specific employee.
#. Go to the :guilabel:`Settings` tab.
#. The :guilabel:`Attendance/Point of Sale/Manufacturing` category offers two options:

   - Manually enter any badge ID in the :guilabel:`Badge ID` field.
   - Click :guilabel:`Generate` to create a unique badge ID automatically.
#. Click :guilabel:`Print Badge` to generate a barcode representation of the assigned badge ID.

To switch users within an open POS session using a badge, you must first lock the session. To do so,
click the :icon:`fa-lg fa-lock` icon (:guilabel:`lock`) to return to the login screen. Then, the new
employee can scan their badge to log in.

.. _pos/employee_login/pin:

Adding a PIN Code
-----------------

For enhanced security, employees may be forced to enter a PIN code each time they log into a POS
session. To set up a PIN code for an employee:

#. Navigate to the **Employees** module.
#. Open the form view of the relevant employee.
#. Go to the :guilabel:`Settings` tab.
#. Enter a desired numerical code in the :guilabel:`PIN Code` field of the
   :guilabel:`Attendance/Point of Sale/Manufacturing` category.

.. note::
   The PIN code must consist of a sequence of digits only.


==================================================
SECTION: epos_printers.rst
PATH: applications/sales/point_of_sale/configuration/epos_printers.rst
==================================================

=============
ePOS printers
=============

ePOS printers are designed to work seamlessly with Point of Sale systems. Once connected, these
devices automatically share information, allowing for direct printing of tickets from the POS system
to the ePOS printer.

Configuration
=============

To use an ePos printer in Point of Sale:

#. :ref:`Access the POS settings <configuration/settings>`.
#. Activate the :guilabel:`ePos Printer` feature.
#. Fill in the field with your ePos IP address.

.. image:: epos_printers/setting.png
   :alt: setting to enable the ePos printer feature

.. note::
   When the printer connects to a network, it automatically prints a ticket with its IP address.

Directly supported ePOS printers
================================

The following ePOS printers are directly compatible with Odoo without needing an :doc:`IoT system
</applications/general/iot/devices/printer>`.

- Epson TM-m30 i/ii/iii (Wi-Fi/Ethernet models only; Recommended)
- Epson TM-H6000IV-DT (Receipt printer only)
- Epson TM-T70II-DT
- Epson TM-T88V-DT
- Epson TM-L90-i
- Epson TM-T70-i
- Epson TM-T82II-i
- Epson TM-T83II-i
- Epson TM-U220-i
- Epson TM-m10
- Epson TM-P20 (Wi-Fi® model)
- Epson TM-P60II (Receipt: Wi-Fi® model)
- Epson TM-P60II (Peeler: Wi-Fi® model)
- Epson TM-P80 (Wi-Fi® model)

ePOS printers with IoT system integration
=========================================

The following printers require an :doc:`IoT system </applications/general/iot/devices/printer>` to
be compatible with Odoo:

- Epson TM-T20 family (incompatible ePOS software)
- Epson TM-T88 family (incompatible ePOS software)
- Epson TM-U220 family (incompatible ePOS software)

.. important::
   - Epson printers using Wi-Fi/Ethernet connections and following the `EPOS SDK Javascript protocol
     <https://download4.epson.biz/sec_pubs/pos/reference_en/technology/epson_epos_sdk.html>`_ are
     compatible with Odoo **without** needing an :doc:`IoT system
     </applications/general/iot/devices/printer>`.
   - Thermal printers using ESC/POS are compatible **with** an :doc:`IoT system
     </applications/general/iot/devices/printer>`.
   - Epson printers using only USB connections are compatible **with** an :doc:`IoT system
     </applications/general/iot/devices/printer>`.
   - Epson printers that connect via Bluetooth are **not compatible**.

.. seealso::
   - :doc:`https`
   - :doc:`epos_ssc`


==================================================
SECTION: epos_ssc.rst
PATH: applications/sales/point_of_sale/configuration/epos_ssc.rst
==================================================

.. _epos_ssc/ePOS printers:

=========================================
Self-signed certificate for ePOS printers
=========================================

To work with Odoo, some printer models that can be used without an
:doc:`IoT system </applications/general/iot>` may require :doc:`the HTTPS protocol <https>` to
establish a secure connection between the browser and the printer. However, trying to reach the
printer's IP address using HTTPS leads to a warning page on most web browsers. In that case, you can
temporarily :ref:`force the connection <epos_ssc/instructions>`, which allows you to reach the page
in HTTPS and use the ePOS printer in Odoo as long as the browser window stays open.

.. warning::
   The connection is lost after closing the browser window. Therefore, this method should only be
   used as a **workaround** or as a pre-requisite for the :ref:`following instructions
   <epos_ssc/instructions>`.

.. _epos_ssc/instructions:

Generate, export, and import self-signed certificates
=====================================================

For a long-term solution, you must generate a **self-signed certificate**. Then, export and import
it into your browser.

.. important::
   **Generating** an SSL certificate should only be done **once**. If you create another
   certificate, devices using the previous one will lose HTTPS access.

.. tabs::

   .. tab:: Windows 10 & Linux OS

      .. tabs::

         .. tab:: Generate a self-signed certificate

            Navigate to the ePOS' IP address (e.g., `https://192.168.1.25`) and force the
            connection by clicking :guilabel:`Advanced` and :guilabel:`Proceed to [IP address]
            (unsafe)`.

            .. figure:: epos_ssc/browser-https-insecure.png
               :scale: 75%
               :alt: warning page about the connection privacy on Google Chrome

               Warning page on Google Chrome, Windows 10

            Then, sign in using your printer credentials to access the ePOS printer settings. To
            sign in, enter `epson` in the :guilabel:`ID` field and your printer serial number in the
            :guilabel:`Password` field.

            Click :guilabel:`Certificate List` in the :guilabel:`Authentication` section, and click
            :guilabel:`create` to generate a new **Self-Signed Certificate**. The :guilabel:`Common
            Name` should be automatically filled out. If not, fill it in with the printer IP address
            number. Select the years the certificate will be valid in the :guilabel:`Validity
            Period` field, click :guilabel:`Create`, and :guilabel:`Reset` or manually restart the
            printer.

            The self-signed certificate is generated. Reload the page and click :guilabel:`SSL/TLS`
            in the :guilabel:`Security` section to ensure **Selfsigned Certificate** is correctly
            selected in the :guilabel:`Server Certificate` section.

         .. tab:: Export a self-signed certificate

            The export process is heavily dependent on the :abbr:`OS (Operating System)` and the
            browser. Start by accessing your ePOS printer settings on your web browser by navigating
            to its IP address (e.g., `https://192.168.1.25`). Then, force the connection as
            explained in the **Generate a self-signed certificate tab**.

            If you are using **Google Chrome**,

            #. click :guilabel:`Not secure` next to the search bar, and :guilabel:`Certificate is
               not valid`;

               .. image:: epos_ssc/browser-warning.png
                  :alt: Connection to the printer not secure button in Google Chrome browser.

            #. go to the :guilabel:`Details` tab and click :guilabel:`Export`;
            #. add `.crt` at the end of the file name to ensure it has the correct extension;
            #. select :guilabel:`Base64-encoded ASCII, single certificate`, at the bottom of the
               pop-up window;
            #. save, and the certificate is exported.

            .. warning::
               Make sure that the certificate ends with the extension `.crt`. Otherwise, some
               browsers might not see the file during the import process.

            If you are using **Mozilla Firefox**,

            #. click the **lock-shaped** icon on the left of the address bar;
            #. go to :menuselection:`Connection not secure --> More information --> Security tab
               --> View certificate`;

            .. image:: epos_ssc/mozilla-not-secure.png
               :alt: Connection is not secure button in Mozilla Firefox browser

            #. scroll down to the :guilabel:`Miscellaneous` section;
            #. click :guilabel:`PEM (cert)` in the :guilabel:`Download` section;
            #. save, and the certificate is exported.

         .. tab:: Import a self-signed certificate

            The import process is heavily dependent on the :abbr:`OS (Operating System)` and the
            browser.

            .. tabs::

               .. tab:: Windows 10

                  Windows 10 manages certificates, which means that self-signed certificates must be
                  imported from the certification file rather than the browser. To do so,

                  #. open the Windows File Explorer and locate the downloaded certification file;
                  #. right-click on the certification file and click :guilabel:`Install
                     Certificate`;
                  #. select where to install the certificate and for whom - either for the
                     :guilabel:`Current User` or all users (:guilabel:`Local Machine`). Then, click
                     :guilabel:`Next`;
                  #. on the `Certificate Store` screen, tick :guilabel:`Place all certificates in
                     the following store`, click :guilabel:`Browse...`, and select
                     :guilabel:`Trusted Root Certification Authorities`;

                     .. image:: epos_ssc/win-cert-wizard-store.png

                  #. click :guilabel:`Finish`, accept the pop-up security window;
                  #. restart the computer to make sure that the changes are applied.

               .. tab:: Linux

                  If you are using **Google Chrome**,

                  #. open Chrome;
                  #. go to :menuselection:`Settings --> Privacy and security --> Security -->
                     Manage certificates`;
                  #. on the :guilabel:`Local certificates` tab, click :guilabel:`Installed by you` under the :guilabel:`Custom` section;
                  #. click :guilabel:`Import` next to :guilabel:`Trusted Certificates`, and select
                     the exported certification file from your local drive;
                  #. accept all warnings;
                  #. click :guilabel:`ok`;
                  #. restart your browser.


                  If you are using **Mozilla Firefox**,

                  #. open Firefox;
                  #. go to :menuselection:`Settings --> Privacy & Security --> Security --> View
                     Certificates... --> Import`;
                  #. in the pop-up window, open the :guilabel:`Servers` tab;
                  #. click :guilabel:`Add Exception...`;
                  #. enter the printer's IP address in the :guilabel:`Location` field, then
                     click :guilabel:`Get Certificate`;
                  #. tick the :guilabel:`Permanently store this exception` checkbox and confirm;
                  #. restart your browser.

   .. tab:: Mac OS

      On Mac OS, you can secure the connection for all browsers by following these steps:

      #. open Safari and navigate to your printer's IP address. Doing so leads to a warning page;
      #. on the warning page,  go to :menuselection:`Show Details --> visit this website --> Visit
         Website`, validate;
      #. reboot the printer so you can use it with any other browser.

      To generate and export an SSL certificate and send it to IOS devices, open **Google Chrome**
      or **Mozilla Firefox**. Then,

      .. tabs::

         .. tab:: Generate a self-signed certificate

            Navigate to the ePOS' IP address (e.g., `https://192.168.1.25`) and force the
            connection by clicking :guilabel:`Advanced` and :guilabel:`Proceed to [IP address]
            (unsafe)`.

            .. figure:: epos_ssc/browser-https-insecure.png
               :scale: 75%
               :alt: Warning page about the connection privacy on Google Chrome

               Warning page on Google Chrome, Windows 10

            Then, sign in using your printer credentials to access the ePOS printer settings. To
            sign in, enter `epson` in the :guilabel:`ID` field and your printer serial number in the
            :guilabel:`Password` field.

            Click :guilabel:`Certificate List` in the :guilabel:`Authentication` section, and click
            :guilabel:`create` to generate a new **Self-Signed Certificate**. The :guilabel:`Common
            Name` should be automatically filled out. If not, fill it in with the printer IP address
            number. Select the years the certificate will be valid in the :guilabel:`Validity
            Period` field, click :guilabel:`Create`, and :guilabel:`Reset` or manually restart the
            printer.

            The self-signed certificate is generated. Reload the page and click :guilabel:`SSL/TLS`
            in the :guilabel:`Security` section to ensure **Selfsigned Certificate** is correctly
            selected in the :guilabel:`Server Certificate` section.

         .. tab:: Export a self-signed certificate

            The export process is heavily dependent on the :abbr:`OS (Operating System)` and the
            browser. Start by accessing your ePOS printer settings on your web browser by navigating
            to its IP address (e.g., `https://192.168.1.25`). Then, force the connection as
            explained in the **Generate a self-signed certificate tab**.

            If you are using **Google Chrome**,

            #. click :guilabel:`Not secure` next to the search bar, and :guilabel:`Certificate is
               not valid`;

               .. image:: epos_ssc/browser-warning.png
                  :alt: Connection to the printer not secure button in Google Chrome

            #. go to the :guilabel:`Details` tab and click :guilabel:`Export`;
            #. add `.crt` at the end of the file name to ensure it has the correct extension;
            #. select :guilabel:`Base64-encoded ASCII, single certificate`, at the bottom of the
               pop-up window;
            #. save, and the certificate is exported.

            .. warning::
               Make sure that the certificate ends with the extension `.crt`. Otherwise, some
               browsers might not find the file during the import process.

            If you are using **Mozilla Firefox**,

            #. click the **lock-shaped** icon on the left of the address bar;
            #. go to :menuselection:`Connection not secure --> More information --> Security tab
               --> View certificate`;

               .. image:: epos_ssc/mozilla-not-secure.png
                  :alt: Connection is not secure button in Mozilla Firefox

            #. scroll down to the :guilabel:`Miscellaneous` section;
            #. click :guilabel:`PEM (cert)` in the :guilabel:`Download` section;
            #. save, and the certificate is exported.

   .. tab:: Android OS

      To import an SSL certificate into an Android device, first create and export it from a
      computer. Next, transfer the `.crt` file to the device using email, Bluetooth, or USB. Once
      the file is on the device,

      #. open the settings and search for `certificate`;
      #. click :guilabel:`Certificate AC` (Install from device storage);
      #. select the certificate file to install it on the device.

      .. Note::
         The specific steps for installing a certificate may vary depending on the version of
         Android and the device manufacturer.

   .. tab:: iOS

      To import an SSL certificate into an iOS device, first create and export it from a computer.
      Then, transfer the `.crt` file to the device using email, Bluetooth, or any file-sharing
      service.

      Downloading this file triggers a warning pop-up window. Click :guilabel:`Allow` to download
      the configuration profile, and close the second pop-up window. Then,

      #. go to the **Settings App** on the iOS device;
      #. click :guilabel:`Profile Downloaded` under the user's details box;
      #. locate the downloaded `.crt` file and select it;
      #. click :guilabel:`Install` on the top right of the screen;
      #. if a passcode is set on the device, enter the passcode;
      #. click :guilabel:`Install` on the top right of the certificate warning screen and the pop-up
         window;
      #. click :guilabel:`Done`.

      .. image:: epos_ssc/ssl-ios-verified.png

      The certificate is installed, but it still needs to be authenticated. To do so,

      #. go to :menuselection:`Settings --> General --> About > Certificate Trust Settings`;
      #. enable the installed certificate using the **slide button**;
      #. click :guilabel:`Continue` on the pop-up window.

.. important::
   - If you need to export SSL certificates from an operating system or web browser that has not
     been mentioned, search for `export SSL certificate` + `the name of your browser or operating
     system` in your preferred search engine.
   - Similarly, to import SSL certificates from an unmentioned OS or browser, search for `import SSL
     certificate root authority` + `the name of your browser or operating system` in your preferred
     search engine.

Check if the certificate was imported correctly
===============================================

To confirm your printer's connection is secure, connect to its IP address using HTTPS. For example,
navigate to `https://192.168.1.25` in your browser. If the SSL certificate has been applied
correctly, you should no longer see a warning page, and the address bar should display a padlock
icon, indicating that the connection is secure.


==================================================
SECTION: fiscal_position.rst
PATH: applications/sales/point_of_sale/pricing/fiscal_position.rst
==================================================

=================================
Flexible taxes (fiscal positions)
=================================

When running a business, you may need to apply different taxes and record transactions on various
accounts based on the location and type of business of your customers and providers.

The **fiscal positions** feature enables you to establish rules that automatically select the right
taxes and accounts used for each transaction.

.. seealso::
   - :doc:`../../../finance/accounting/taxes/fiscal_positions`
   - :doc:`../../../finance/accounting/taxes`

Configuration
=============

To enable the feature, go to :menuselection:`Point of Sale --> Configuration --> Settings`, scroll
down to the :guilabel:`Accounting` section, and enable :guilabel:`Flexible Taxes`.

Then, set a default fiscal position that should be applied to all sales in the selected POS in the
:guilabel:`Default` field. You can also add more fiscal positions to choose from in the
:guilabel:`Allowed` field.

.. image:: fiscal_position/flexible-taxes-setting.png
   :align: center

According to the :doc:`fiscal localization package <../../../finance/fiscal_localizations>`
activated, several fiscal positions are preconfigured and can be set and used in POS. However, you
can also :ref:`create new fiscal positions <fiscal_positions/configuration>`.

.. note::
   If you do not set a fiscal position, the tax remains as defined in the **customer taxes** field
   on the product form.

Use fiscal positions
====================

Open a :ref:`POS session <pos/session-start>` to use one of the allowed fiscal positions. Then,
click the :guilabel:`Tax` button next to the **book-shaped** icon and select a fiscal position from
the list. Doing so applies the defined rules automatically to all the products subject to the chosen
fiscal position's regulations.

.. image:: fiscal_position/set-tax.png
   :align: center

.. note::
   If a default fiscal position is set, the tax button displays the name of the fiscal position.

.. seealso::
   :doc:`../../../finance/accounting/taxes/fiscal_positions`


==================================================
SECTION: glory.rst
PATH: applications/sales/point_of_sale/payment_methods/cash_machines/glory.rst
==================================================

=====
Glory
=====

**Glory** :doc:`cash machines <../cash_machines>` enable the automation of cash transactions.

.. note::
   - The integration with the Glory cash machine only supports basic functions, such as cash
     transactions and cash count checks.
   - Tasks like filling and emptying the machine must be performed directly through the cash machine
     interface.

.. _pos/glory/configuration:

Configuration
=============

Cash machine settings
---------------------

#. Power on the cash machine, which briefly displays its IP address at the bottom of the screen.
   Note it down for later.

   .. note::
      The IP address should be formatted as `###.###.#.##` (e.g., `192.168.0.25`).

#. Navigate to the cash machine's homepage by entering its IP address as the URL in `HTTPS` (e.g.,
   `https://192.168.0.25`), and log in with your Glory credentials.
#. As long as the certificate is not imported, a warning page appears when trying to access the
   machine's homepage. Bypass it by clicking :guilabel:`Advanced` and then :guilabel:`Proceed to
   [IP address] (unsafe)`.
#. From the Glory homepage, go to :guilabel:`Host Configuration` and ensure the :guilabel:`Network`
   setting is set to :guilabel:`MANUAL`, meaning the IP address is static.
#. Then, navigate to :guilabel:`SSL Configuration` and scroll down to the :guilabel:`HTTPS Server
   Setting` section.

   #. In parallel, open the terminal and verify that *OpenSSL* is installed. Type `openssl` and
      press enter. If installed, this command displays a `help` menu listing all available OpenSSL
      commands. If nothing happens, `install it <https://openssl-library.org/source/>`_.
   #. Then, paste the following command and press `Enter` to generate and download the certificate
      and private key. Ensure that you replace the demo IP address with the cash machine’s actual IP
      address.

      .. code-block:: bash

         openssl req -x509 -newkey rsa:4096 -keyout key.pem -out cert.pem -sha256 -days 3650 -nodes -subj "/CN=192.168.0.25" -addext "subjectAltName = IP:192.168.0.25"

      .. important::
         The self-signed SSL certificate and key pair must use the same static IP address as the
         cash machine.

#. Once the files are generated, from the :guilabel:`HTTPS Server Setting` section, upload
   `cert.pem` as the :guilabel:`Certificate` and `key.pem` as the :guilabel:`Private Key`.
#. Go to :guilabel:`WebApp Configuration` and ensure the :guilabel:`Interface` setting from the
   :guilabel:`A: Nodejs Setting` section is set to :guilabel:`Enable`.
#. Then, adjust the following settings depending on the POS setup:

   - If **multiple POS** are connected to the same cash machine, go to :guilabel:`App
     Configuration`, scroll down to the :guilabel:`SOAP IF Setting`, and ensure :guilabel:`Session
     mode` and :guilabel:`Occupy mode` are both set to :guilabel:`Enable`.
   - If **a dedicated user** has been set up on the cash machine for Odoo, go to :guilabel:`App
     Configuration`, scroll down to the :guilabel:`SOAP IF Setting` section, and :guilabel:`Enable`
     the :guilabel:`User check` setting.
#. Restart the cash machine to apply the new settings.

.. note::
   As this setup is complex and may involve advanced knowledge of Glory hardware, it is advisable to
   consult the Glory integration partner for configuration if there is any uncertainty.

Import self-signed certificates
-------------------------------

For a long-term solution, the generated certificates must be imported into the device running the
POS. The import process is heavily dependent on the :abbr:`OS (Operating System)` and the browser.

.. tabs::

   .. tab:: Windows OS

      Windows manages certificates, which means that self-signed certificates must be imported
      from the certification files rather than the browser. To do so,

      #. Open the Windows File Explorer and locate the downloaded certification files.
      #. Right-click on the certification files and select :guilabel:`Install Certificate`.
      #. Specify the certificate location and select the installation scope: either the
         :guilabel:`Current User` only or all users (:guilabel:`Local Machine`). Then, click
         :guilabel:`Next`.
      #. On the `Certificate Store` screen, tick :guilabel:`Place all certificates in the following
         store`, click :guilabel:`Browse...`, and select :guilabel:`Trusted Root Certification
         Authorities`.
      #. Click :guilabel:`Finish` and accept the pop-up security window.
      #. Restart the computer to make sure that the changes are applied.

   .. tab:: Linux OS

      When using **Google Chrome**,

      #. Open the web browser.
      #. Navigate to :menuselection:`Settings --> Privacy and security --> Security --> Manage
         certificates`.
      #. Go to the :guilabel:`Authorities` tab, click :guilabel:`Import`, and select the exported
         certification files.
      #. Accept all warnings and click :guilabel:`ok`.
      #. Restart the web browser.

      When using **Mozilla Firefox**,

      #. Open the web browser.
      #. Navigate to :menuselection:`Settings --> Privacy & Security --> Security --> View
         Certificates... --> Import`.
      #. Select the exported certification files.
      #. Tick the checkboxes and validate.
      #. Restart the web browser.

Payment method
--------------

#. :ref:`Install <general/install>` the POS Glory Cash Machines module.
#. :doc:`Associate a cash payment method <../../payment_methods>`:

   - Go to :menuselection:`Point of Sale --> Configuration --> Payment Methods`. Create a new
     :guilabel:`Cash` payment method or update an existing payment method.
   - Select the associated POS in the :guilabel:`Point of Sale` field.
   - Select :guilabel:`Cash Machine (Glory)` in the :guilabel:`Integration` field.
   - Fill in the :guilabel:`Cash Machine IP` field with the IP address of the cash machine.
   - If the cash machine was configured to use :guilabel:`User check` in the previous section, fill
     in the :guilabel:`Cash Machine Username` and :guilabel:`Cash Machine Password`.

.. seealso::
   :doc:`../../payment_methods`


==================================================
SECTION: https.rst
PATH: applications/sales/point_of_sale/configuration/https.rst
==================================================

=========================
Secure connection (HTTPS)
=========================

If **Direct Devices** is enabled in a Point of Sale settings (for example, if you use an :doc:`ePos
printer <epos_printers>`), HTTP becomes the default protocol.

Force your Point of Sale to use a secure connection (HTTPS)
===========================================================

Add a new **key** in the **System Parameters** to force your Point of Sale to use a secure
connection with the HTTPS protocol.

To do so, activate the :ref:`developer mode <developer-mode>`, go to :menuselection:`Settings -->
Technical --> Parameters --> System Parameters`, then create a new parameter, add the following
values and click on *Save*.

- **Key**: `point_of_sale.enforce_https`
- **Value**: `True`

.. seealso::
   - :doc:`epos_ssc`


==================================================
SECTION: ingenico.rst
PATH: applications/sales/point_of_sale/payment_methods/terminals/ingenico.rst
==================================================

========
Ingenico
========

Connecting a payment terminal allows you to offer a fluid payment flow to your customers and ease
the work of your cashiers.

.. important::
   - Ingenico payment terminals require an :doc:`IoT system </applications/general/iot>`.
   - Ingenico is currently only available in Belgium, the Netherlands and Luxembourg.
   - Odoo works with the Ingenico Lane/, Desk/, and Move/ payment terminals as they support the TLV
     communication protocol through TCP/IP.

Configuration
=============

Connect an IoT system
---------------------

Connecting an Ingenico payment terminal to Odoo is a feature that requires an IoT system. For more
information on how to connect an IoT system to your database, please refer to the :doc:`IoT
documentation </applications/general/iot>`.

Configure the Lane/Desk/Move 5000 terminals for Ingenico BENELUX
----------------------------------------------------------------

#. Press the function button (:guilabel:`F` on Lane/5000, :guilabel:`⦿` on Desk/5000 and
   Move/5000).
#. Go to :menuselection:`Kassa menu --> Settings Menu` and enter the settings password (default:
   `2009`).
#. Select :guilabel:`Change Connection` and press :guilabel:`OK` on the next screen.
#. Select :guilabel:`TCP/IP` and :guilabel:`IP-address`.
#. On the next screen, enter the IP address of your IoT system.
#. Enter `9000` as port number and press :guilabel:`OK` on the next screen.

At this point, the terminal restarts and should be displayed on the IoT system's form in Odoo.

.. image:: ingenico/payment_terminal_02.png
   :align: center

Configure the payment method
----------------------------

Enable the payment terminal :ref:`in the application settings <configuration/settings>` and
:doc:`create the related payment method <../../payment_methods>`. Set the journal type as
:guilabel:`Bank` and select :guilabel:`Ingenico` in the :guilabel:`Use a Payment Terminal` field.
Then, select your terminal device in the :guilabel:`Payment Terminal Device` field.

.. image:: ingenico/payment-method.png

Once the payment method is created, you can select it in your POS settings. To do so, go to the
:ref:`POS' settings <configuration/settings>`, click :guilabel:`Edit`, and add the payment method
under the :guilabel:`Payments` section.


==================================================
SECTION: loyalty.rst
PATH: applications/sales/point_of_sale/pricing/loyalty.rst
==================================================

================
Loyalty programs
================

Encourage your customers to continue to shop at your point of sale with
a *Loyalty Program*.

Configuration
=============

To activate the *Loyalty Program* feature, go to
:menuselection:`Point of Sale --> Configuration --> Point of sale` and
select your PoS interface. Under the Pricing features, select *Loyalty
Program*

.. image:: loyalty/loyalty01.png
    :align: center

From there you can create and edit your loyalty programs.

.. image:: loyalty/loyalty02.png
    :align: center

You can decide what type of program you wish to use, if the reward is a
discount or a gift, make it specific to some products or cover your
whole range. Apply rules so that it is only valid in specific situation
and everything in between.

Use the loyalty program in your PoS interface
=============================================

When a customer is set, you will now see the points they will get for
the transaction and they will accumulate until they are spent. They are
spent using the button *Rewards* when they have enough points
according to the rules defined in the loyalty program.

.. image:: loyalty/loyalty03.png
    :align: center

You can see the price is instantly updated to reflect the pricelist. You
can finalize the order in your usual way.

.. note::
    If you select a customer with a default pricelist, it will be
    applied. You can of course change it.


==================================================
SECTION: mercado_pago.rst
PATH: applications/sales/point_of_sale/payment_methods/terminals/mercado_pago.rst
==================================================

============
Mercado Pago
============

Connecting a payment terminal allows you to offer a fluid payment flow to your customers and ease
the work of your cashiers.

.. important::
   Only **Point Smart** payment terminals in Argentina, Brazil, Chile, Colombia, Mexico, Peru, and
   Uruguay are supported. They can be purchased on `Mercado Pago's website
   <https://www.mercadopago.com.mx/herramientas-para-vender/lectores-point>`_.

.. seealso::
   `Mercado Pago online payments
   <https://www.mercadopago.com.mx/herramientas-para-vender/check-out#benefits-checkout>`_

.. _pos-mercado-pago-configuration:

Configuration
=============

#. Create a `Mercado Pago account <https://www.mercadopago.com.mx/>`_.
#. Associate your Point Smart terminal with a :guilabel:`store` and a :guilabel:`cash drawer` by
   following `Mercado Pago's documentation <https://vendedores.mercadolibre.com.ar/nota/locales-una-herramienta-para-mejorar-la-gestion-de-tus-puntos-de-venta/>`_.

   .. note::
      All purchased terminals are automatically displayed on your Mercado dashboard.

#. Set your Point Smart terminal to the :guilabel:`Point of Sale` operation mode.

   .. warning::
      Odoo does not support the :guilabel:`Standalone` operation mode.

#. :ref:`Create a Point Smart application <pos-mercado-pago-application>`.
#. :ref:`Generate your credentials <pos-mercado-pago-credentials>`.
#. :ref:`Create and configure the related payment method <pos-mercado-pago-method>`.

.. _pos-mercado-pago-application:

Point Smart application
-----------------------

Create a new application from Mercado Pago's `developer panel
<https://www.mercadopago.com/developers>`_ by following `Mercado Pago's applications documentation
<https://www.mercadopago.com.mx/ayuda/20152>`_, making sure you select :guilabel:`In
person Payments`.

.. _pos-mercado-pago-credentials:

Credentials
-----------

Once the Point Smart application is created, three credentials are required:

- An access token that Odoo uses to call Mercado Pago.
- A webhook secret key that Odoo uses to authenticate notifications sent by Mercado Pago.
- The **terminal serial number** at the back of your Point Smart terminal.

Retrieve the access token and webhook secret key by following `Mercado Pago's credentials
documentation <https://www.mercadopago.com.mx/developers/en/docs/your-integrations/credentials>`_.
Then, copy and paste them into Odoo when creating the payment method.

.. important::
   For the webhooks configuration, add the URL of your Odoo database (e.g.,
   `https://mycompany.odoo.com`) followed by `/pos_mercado_pago/notification` (e.g.,
   `https://mycompany.odoo.com/pos_mercado_pago/notification`).

   .. image:: mercado_pago/webhooks.png
      :alt: Webhooks configuration on Mercado Pago.

.. _pos-mercado-pago-method:

Payment method
--------------

#. Go to :menuselection:`Point of Sale --> Configuration --> Settings` and enable :guilabel:`Mercado
   Pago` under the :guilabel:`Payment Terminals` section.
#. :doc:`Create the related payment method <../../payment_methods>` by going to
   :menuselection:`Point of Sale --> Configuration --> Payment Methods`.
#. Set the journal type as :guilabel:`Bank`
#. Select :guilabel:`Mercado Pago` in the :guilabel:`Use a Payment Terminal` field.
#. Fill in the mandatory fields with the :ref:`previously generated credentials
   <pos-mercado-pago-credentials>`:

   - Fill in the :guilabel:`Production user token` field using the access token.
   - Fill in the :guilabel:`Production secret key` field using the webhook secret key.
   - Fill in the :guilabel:`Terminal S/N` field using the terminal serial number. You can find it at
     the back of your terminal.
   - Click the :guilabel:`Force PDV` button to activate the Point of Sale mode.

.. image:: mercado_pago/payment-method.png
   :alt: Form to create a new payment method.

Select the payment method by going to the :ref:`POS' settings <configuration/settings>` and adding
it to the payment method under the :guilabel:`Payment Methods` field of the :guilabel:`Payment`
section.

.. important::
   Any action made on the terminal should trigger a notification on the POS interface. Ensure the
   :ref:`webhook secret key <pos-mercado-pago-credentials>` is correctly configured if you are not
   notified.


==================================================
SECTION: online_food_delivery.rst
PATH: applications/sales/point_of_sale/online_food_delivery.rst
==================================================

====================
Online food delivery
====================

**UrbanPiper** is an order management system that integrates with multiple food delivery platforms.
It consolidates orders from all connected platforms into a single interface, simplifying the
delivery process.

Supported providers:

- `Careem <https://www.careem.com>`_
- `Cari <https://getcari.com/>`_
- `ChowNow <https://www.chownow.com>`_
- `Deliveroo <https://deliveroo.co.uk/>`_
- `DoorDash <https://www.doordash.com>`_
- `EatEasy <https://www.eateasy.ae/dubai>`_
- `Glovo <https://glovoapp.com>`_
- `Grubhub <https://www.grubhub.com>`_
- `HungryPanda <https://www.hungrypanda.co>`_
- `HungerStation <https://hungerstation.com>`_
- `Jahez <https://www.jahez.net/>`_
- `Just Eat <https://www.just-eat.ie/>`_
- `Mrsool <https://mrsool.co>`_
- `Ninja <https://ananinja.com/>`_
- `NoonFood <https://www.noon.com>`_
- `Postmates <https://www.postmates.com>`_
- `Rafeeq <https://www.gorafeeq.com/en>`_
- `SkipTheDishes <https://www.skipthedishes.com/>`_
- `Swiggy <https://www.swiggy.com>`_
- `Talabat <https://www.talabat.com>`_
- `UberEats <https://www.ubereats.com>`_
- `Zomato <https://www.zomato.com>`_

Configuration
=============

Prerequisites
-------------

To use the UrbanPiper integration in a live production environment, ensure the following
requirements are satisfied:

- **UrbanPiper subscription:** A valid UrbanPiper subscription is mandatory.

  .. note::
     For any concerns or queries regarding your UrbanPiper subscription, please reach out to the
     account manager linked to your Odoo database.

- **Odoo requirements:**

  - **Odoo subscription:** An active Odoo Enterprise subscription is required. Odoo Community does
    not support this integration.
  - **Odoo version:** Odoo Enterprise version 18.0 or above.
  - **Odoo platform:** All Odoo platforms are supported, including Odoo Online, Odoo.sh, and
    On-Premise installations.

- **Delivery platform reseller account:** A registered reseller account is required with each
  delivery platform to be integrated (e.g., Uber Eats, DoorDash, Careem, Deliveroo, Zomato).

.. _online_food_delivery/credentials:

UrbanPiper credentials
----------------------

#. Get your Atlas credentials:

   #. Go to the :ref:`POS settings <configuration/settings>`.
   #. Scroll down to the :guilabel:`Food Delivery Connector` section.
   #. Click :guilabel:`Fill this form to get Username & Api key` and fill out the survey.
#. `Go to your Atlas account <https://atlas.urbanpiper.com>`_ and retrieve your API key and username
   by navigating to :menuselection:`Settings --> API Access`.

.. image:: online_food_delivery/urban-piper-api.png
   :alt: Atlas API access

Point of Sale
-------------

#. Enable the :guilabel:`Urban Piper` setting:

   #. Go to the :ref:`POS settings <configuration/settings>`.
   #. Scroll down to the :guilabel:`Food Delivery Connector` section.
   #. Check the :guilabel:`Urban Piper` setting.

#. Set up UrbanPiper:

   #. Fill in the :guilabel:`Username` and :guilabel:`Api Key` fields with your :ref:`UrbanPiper
      credentials <online_food_delivery/credentials>`.
   #. Select the desired delivery providers in the :guilabel:`Food Delivery Platforms` field under
      the :guilabel:`Urban Piper Location` section (i.e., Zomato, Uber Eats).
#. Save the settings.
#. Click the :guilabel:`+ Create Store` button. Doing so creates a new location on the UrbanPiper
   Atlas platform.

.. note::
   - The :guilabel:`Pricelist` and :guilabel:`Fiscal Position` fields are automatically selected
     after saving.
   - A successful store creation triggers a notification.
   - The store creation process may take 2–3 minutes to reflect changes on the UrbanPiper Atlas
     platform.
   - The store is automatically named after your point of sale name.

.. image:: online_food_delivery/create-store.png
   :alt: Food delivery connector settings

Store timings
-------------

Configure the store timings to define when the delivery services are available:

#. Navigate to :menuselection:`Point of Sale --> Configuration --> Store Timings`.
#. Add a new timing record by clicking :guilabel:`New` to add a line, or edit an existing line.
#. Fill in the :guilabel:`Week Day`, :guilabel:`Starting Hour`, :guilabel:`Ending Hour`,
   and :guilabel:`Point of Sale associated with this timing` columns.

Products
--------

To make products available individually,

#. Go to :menuselection:`Point of Sale --> Products --> Products`.
#. Select any product to open its product form.
#. Go to the :guilabel:`Point of Sale` tab.
#. Complete the :guilabel:`Urban Piper` section:

   - Fill in the :guilabel:`Available on Food Delivery` with the desired POS.
   - Optionally, set up the :guilabel:`Meal Type` field and enable the :guilabel:`Is Recommended`
     and :guilabel:`Is Alcoholic` buttons.

.. image:: online_food_delivery/product-form.png
   :alt: where to make a single product available for delivery

To make multiple products available for food delivery at once,

#. Go to :menuselection:`Point of Sale --> Products --> Products`.
#. Click the list icon (:icon:`oi-view-list`) to switch to the list view.
#. Select the products.
#. Enter the desired POS in the :guilabel:`Available on Food Delivery` column.

.. image:: online_food_delivery/product-list.png
   :alt: Product list

.. note::
   - Currently, UrbanPiper does not support combo products.
   - As a workaround, create a product and define combo choices as :doc:`Attributes & Variants
     <../sales/products_prices/products/variants>`.

Synchronization
---------------

To make products available on food delivery platforms, synchronize with your UrbanPiper account:

#. Go to the :ref:`POS settings <configuration/settings>`.
#. Scroll down the :guilabel:`Food Delivery Connector` section.
#. Click the :guilabel:`Sync Menu` button.

   - The :guilabel:`Last Sync on` timestamp below the :guilabel:`Create Store` and :guilabel:`Sync
     Menu` buttons updates.

.. note::
   - A successful synchronization triggers a notification.
   - The synchronization process may take 2–3 minutes to reflect changes on the UrbanPiper Atlas
     platform.

Go live
-------

#. `Go to the Locations tab <https://atlas.urbanpiper.com/locations>`_ of your Atlas account.
#. Select the location to activate, then click :guilabel:`Request to go Live`.

   .. image:: online_food_delivery/go-live.png
      :alt: Request to go live button in the locations tab of the Atlas account

#. In the popup window:

   #. Select the platform(s) to activate and click :guilabel:`Next`.
   #. Enter the :guilabel:`Platform ID` and :guilabel:`Platform URL` in the corresponding fields to
      establish the connection between the platform and UrbanPiper.
   #. Click the :guilabel:`Request to Go Live` button.

   .. image:: online_food_delivery/go-live-parameters.png
      :alt: Go live parameters

   .. note::
      To find the location's :guilabel:`Platform ID` and :guilabel:`Platform URL`,

      #. Click the location to open its setup form.
      #. The location's parameters are available in the :guilabel:`HUB` tab.
#. Verify that your location is live:

   #. `Go to the Locations tab <https://atlas.urbanpiper.com/locations>`_ of your Atlas account.
   #. Select any provider in the :guilabel:`Assoc. platform(s)` column to review the status of that
      platform for this location.

Order flow
==========

An order placed via the configured delivery platform triggers a notification. To manage these
orders, open the orders' list view by:

#. Clicking :guilabel:`Review Orders` on the notification popup.
#. Clicking the bag-shaped icon for online orders and :guilabel:`New`.

   .. image:: online_food_delivery/cart-button.png
      :alt: Cart button

   .. note::
      - Clicking this icon displays the number of orders at each stage: :guilabel:`New`,
        :guilabel:`Ongoing`, and :guilabel:`Done`.
      - The :guilabel:`New` button indicates newly placed orders, :guilabel:`Ongoing` is for
        accepted orders, and :guilabel:`Done` is for orders ready to be delivered.

Then,

#. Select the desired order.
#. Click the :guilabel:`Accept` button.
#. When an order is accepted, its :guilabel:`Order Status` switches from :guilabel:`Placed` to
   :guilabel:`Acknowledged` and is automatically displayed on the preparation display.

When the order is ready,

#. Open the orders' list view.
#. Select the order.
#. Click the :guilabel:`Mark as ready` button. Its :guilabel:`Order Status` switches from
   :guilabel:`Acknowledged` to :guilabel:`Food Ready`, and its :guilabel:`Status` switches from
   :guilabel:`Ongoing` to :guilabel:`Paid`.

Order rejection
---------------

Sometimes, the shop or restaurant may want to **reject** an order. In this case, open the orders'
list view,

#. Select the desired order.
#. Click the :guilabel:`Reject` button.
#. Select one of the reasons from the popup window.

.. image:: online_food_delivery/reject-order.png
   :alt: Reject order pop-up

.. important::
   **Swiggy** orders cannot be directly rejected. Attempting to reject one prompts Swiggy customer
   support to contact the restaurant. Similarly, **Deliveroo**, **JustEat**, and **HungerStation**
   do not allow order rejection. Always follow the respective provider's guidelines for handling
   such cases.


==================================================
SECTION: payment_methods.rst
PATH: applications/sales/point_of_sale/payment_methods.rst
==================================================

:show-content:

===============
Payment methods
===============

Configure a payment method with Odoo Point of Sale to provide customers with various payment
options, including cash, card payments through a :ref:`configured payment terminal
<pos/terminals/configuration>`, :doc:`online payments <../../finance/payment_providers>`, or
:doc:`customer accounts <payment_methods/customer_credit>`.

To create a payment method, go to :menuselection:`Point of Sale --> Configuration --> Payment
Methods`, click :guilabel:`New`, and follow the next steps:

#. Enter a name for the payment method.
#. Enable the following options if needed:

   - :guilabel:`Online Payment`: To link the payment method to a :doc:`payment provider
     <../../finance/payment_providers>` and enable online payments, select a provider in
     the :guilabel:`Allowed Providers` field or click :icon:`fa-arrow-right` :guilabel:`Payment
     Providers` to install one.
   - :guilabel:`Identify Customer`: Force the selection of a customer during the payment.
#. Select the preferred :doc:`Journal <../../finance/accounting/get_started/journals>` to record all
   transactions.
#. Select the appropriate :guilabel:`Point of Sale` to enable the payment method.
#. Set the :guilabel:`Integration` field to one of the following options:

   - :guilabel:`None required`: For cash payments.
   - :guilabel:`Terminal`: :ref:`Set up a terminal <pos/terminals/configuration>` and allow card
     payments.
   - :guilabel:`Bank App (QR Code)`: Add at least one :ref:`bank account
     <accounting/journals/bank>` to the journal to enable :doc:`QR code payments
     <payment_methods/qr_code_payment>` with a bank app. Select a :guilabel:`QR Code Format` in the
     form.
   - :guilabel:`Cash Machine (Glory)`: Connect a :doc:`Glory <payment_methods/cash_machines/glory>`
     :doc:`cash machine <payment_methods/cash_machines>` to automate the point of sale's cash
     transactions.
#. Save.

.. note::
   - The :guilabel:`Delivery Payment` option links a payment method to online orders placed through
     :doc:`Urban Piper <online_food_delivery>`. Select the appropriate :guilabel:`Delivery Provider`
     to associate with the payment method.
   - If the Accounting app is installed, use the :guilabel:`Intermediary Account` field, if needed,
     to record transactions for this payment method in a specific receivable account for
     better traceability. Leave the field empty to use the company's default :ref:`receivable
     account <accounting/accounts-receivable-payable>`. When a :ref:`journal
     <accounting/journals/bank>` is selected, an :ref:`Outstanding Account
     <accounting/journals/outstanding-accounts>` can also be set if required.

.. tip::
   - Use a dedicated :ref:`cash journal <accounting/journals/cash>` to record cash payments.
   - Always set the :guilabel:`Journal` to :guilabel:`Bank` when :ref:`configuring a payment
     terminal <pos/terminals/configuration>`.

.. seealso::
   - `Payment methods (video tutorial) <https://www.youtube.com/watch?v=eHr4tS8Wmss>`_
   - :doc:`payment_methods/terminals`
   - :doc:`payment_methods/cash_machines`

.. toctree::
   :titlesonly:

   payment_methods/cash_machines
   payment_methods/customer_credit
   payment_methods/qr_code_payment
   payment_methods/terminals


==================================================
SECTION: pine_labs.rst
PATH: applications/sales/point_of_sale/payment_methods/terminals/pine_labs.rst
==================================================

=========
Pine Labs
=========

`Pine Labs <https://www.pinelabs.com/instore-pos-machine>`_ offers in-store payment solutions for
customer transactions through several `physical terminals
<https://www.pinelabs.com/contact-sales?tab=new&form=instorepayments>`_.

.. important::
   - The Odoo Pine Labs module is only available for Indian companies.
   - Pine Labs terminals accept credit/debit cards (Visa, MasterCard, and RuPay) and UPI QR codes
     by swiping, scanning, or tapping.
   - When an Odoo database is hosted outside India, Pine Labs requires a proxy to operate, as its
     services only accept traffic from Indian IP addresses. A proxy ensures the connection is
     routed through India for better integration. To activate a proxy on an Odoo Online or Odoo.sh
     database, `reach out to Odoo support <https://www.odoo.com/help>`_.

.. _pos/pine-labs/credentials:

Pine Labs credentials
=====================

`Create a Pine Labs account and order at least one terminal
<https://www.pinelabs.com/contact-sales?tab=new>`_. The system then sends an email with the
following credentials:

- Merchant ID
- Store ID
- Client ID
- Security Token

.. _pos/pine-labs/odoo-configuration:

Odoo configuration
==================

To enable Pine Labs in Odoo, first :ref:`install the POS Pine Labs module <general/install>` to
make it visible in the list of payment terminals. Then, follow these steps to connect the Pine Labs
terminal with Odoo Point of Sale:

#. Go to :menuselection:`Point of Sale --> Configuration --> Settings`, scroll down to the
   :guilabel:`Payment Terminals` section, enable the relevant :ref:`payment terminal
   <pos/terminals/configuration>`, and click :guilabel:`Save`.
#. Go to :menuselection:`Point of Sale --> Configuration --> Payment Methods` and :doc:`create a
   payment method <../../payment_methods>`.
#. Set the :guilabel:`Journal` field to :guilabel:`Bank`.
#. Set the :guilabel:`Integration` field to :guilabel:`Terminal`.
#. Set the :guilabel:`Integrate with` field to :guilabel:`Pine Labs`.
#. Paste the copied :ref:`credentials <pos/pine-labs/credentials>` in their corresponding fields.
#. Select the preferred payment mode in the :guilabel:`Pine Labs Allowed Payment Modes` field and
   save.
#. Go to :menuselection:`Point of Sale --> Configuration --> Settings` and add the created payment
   method to the :guilabel:`Payment Methods` list to use it in a POS.
#. Click :guilabel:`Save`.

.. tip::
   Enable the :guilabel:`Pine Labs Test Mode` to test transaction processes with a device.


==================================================
SECTION: point_of_sale.rst
PATH: applications/sales/point_of_sale.rst
==================================================

:show-content:
:show-toc:

=============
Point of Sale
=============

With **Odoo Point of Sale**, run your shops and restaurants easily. The app works on any device with
a web browser, even if you are temporarily offline. Product moves are automatically registered in
your stock, you get real-time statistics, and your data is consolidated across all shops.

.. seealso::
   - `Odoo Tutorials: Point of Sale Tutorials <https://www.odoo.com/slides/point-of-sale-28>`_
   - :doc:`IoT Boxes Documentations </applications/general/iot>`

.. _pos/session-start:

Start a session
===============

From the **POS dashboard**, click :guilabel:`New Session`, and at the :guilabel:`Opening Cash
Control` screen, click :guilabel:`Open Session` to start a POS session, or click :guilabel:`Continue
Selling` if the session is already opened.

.. note::
   :doc:`Multiple users <point_of_sale/employee_login>` can be logged into the same session at the
   same time. However, the session can only be opened once on the same browser.

.. _pos/sell:

Sell products
=============

Click on products to add them to the cart. To change the **quantity**, click :guilabel:`Qty` and
enter the number of products using the keypad. To add a **discount** or modify the product
**price**, click respectively :guilabel:`% Disc` or :guilabel:`Price` and enter the amounts.

Once an order is completed, proceed to checkout by clicking :guilabel:`Payment`. Select the
**payment method**, enter the received amount, and click :guilabel:`Validate`. Click
:guilabel:`New Order` to move on to the next customer.

.. image:: point_of_sale/pos-interface.png
   :alt: POS session interface.

.. tip::
   - You can use both `,` and `.` on your keyboard as decimal separators.
   - **Cash** is selected by default if you enter the amount without choosing a payment method.

.. note::
   The system can only load a limited number of products for effective opening. Click
   :guilabel:`Search more` if the desired product is not loaded automatically.

.. _pos/customers:

Set customers
=============

Registering your customer is necessary to :doc:`collect their loyalty points and grant them rewards
<point_of_sale/pricing/loyalty>`, automatically apply the :doc:`attributed pricelist
<point_of_sale/pricing/pricelists>`, or :ref:`generate and print an invoice
<receipts-invoices/invoices>`.

You can create customers from an :ref:`open POS session <pos/session-start>` by clicking
:menuselection:`Customer --> Create`, and filling in the contact information. You can also create
customers from the backend by going to :menuselection:`Point of Sale --> Orders --> Customers` and
clicking :guilabel:`New`. Then, fill in the information and save.

To set a customer during an order, access the list of customers by clicking :guilabel:`Customer` on
the POS interface. You can also set a customer at the payment screen by clicking
:guilabel:`Customer`.

.. _pos/customer-notes:

Customer notes
==============

You can add **customer notes** about specific products directly from an open :ref:`POS session
<pos/session-start>`. For instance, to provide cleaning and maintenance tips. They can also be used
to track a customer's particular request, such as not wanting the product to be assembled for them.

To do so, select a product and click :guilabel:`Customer Note` on the pad. Doing so opens a pop-up
window in which you can add or modify content for the note.

.. note::
   Product notes from an :doc:`imported SO <point_of_sale/shop/sales_order>` are displayed
   identically in the cart.

.. image:: point_of_sale/customer-notes.png
   :alt: Customer note button and notes (SO and POS session) on products in the cart

Customer notes appear on customers' receipts and invoices similarly to how they appear in the cart,
under the related product.

.. image:: point_of_sale/notes-receipt.png
   :alt: Customer receipt with notes from an SO and from the customer note feature

.. _pos/refund:

Return and refund products
==========================

To refund a returned product, follow these steps:

#. :ref:`Start a session <pos/session-start>` from the **POS dashboard**.
#. Click the :icon:`fa-ellipsis-v` :guilabel:`(vertical ellipsis)` icon, then :icon:`fa-undo`
   :guilabel:`Refund`, and select the corresponding order.
#. Select items, use the keypad to set the quantity to refund, then click :guilabel:`Refund`.
#. Click :guilabel:`Payment` and select the appropriate refund payment method.
#. Click :guilabel:`Validate` and print the receipt if needed.
#. Click :guilabel:`New Order` to proceed to the next customer.

.. tip::
   - To filter the **orders list** by :guilabel:`Reference`, :guilabel:`Receipt Number`,
     :guilabel:`Date`, or :guilabel:`Customer`, enter a value in the search bar and choose the
     relevant filter from the dropdown menu.
   - When the total amount is negative, adding a gift card to the cart automatically adjusts the
     gift card balance to match that amount.

.. note::
   Alternatively, a refund can be processed by selecting the returned product(s) from an open
   session and setting a negative quantity equal to the number of returned items. To do so, click
   :guilabel:`Qty` and :guilabel:`+/-`, and update the quantity accordingly.

Once the return payment is validated, Odoo generates the required credit note, referencing the
original receipt or invoice and partially or fully canceling the document.

.. _pos/cash-register:

Manage the cash register
========================

To add or take out cash from the register, click the **menu icon** in the upper right corner of your
screen and :guilabel:`Cash In/Out`.

.. image:: point_of_sale/menu-button.png
   :alt: Dropdown menu to close a POS session, reach the backend, add or take cash out or check
         orders

Doing so opens a pop-up window on which you can select :guilabel:`Cash In` or :guilabel:`Cash Out`,
enter the amount and the reason, and click :guilabel:`Confirm`.

.. _pos/session-close:

Close the POS session
=====================

To close your session, click the **menu icon** in the upper right corner of your screen and
:guilabel:`Close Session`.

Doing so opens the :guilabel:`Closing Control` pop-up screen. From this screen, you can retrieve
various information:

- the number of orders made and the total amount made during the session;
- the expected amounts grouped by payment method.

Before closing this window, count your cash using the calculator icon. Doing so opens a pop-up
window that computes the total amount in the cash drawer depending on the coins and bills counted
and added manually. Then, click :guilabel:`Confirm` or :guilabel:`Discard` to close the window. The
computed amount is set in the :guilabel:`Counted` column, and the :guilabel:`Money Details` are
specified in the **Notes** section.

.. image:: point_of_sale/closing-control.png
   :alt: How to close a POS session.

Once you are done controlling the amounts, click :guilabel:`Close Session` to close and go back to
the **POS dashboard**.

.. note::
   - To reach the backend without closing the session, click :guilabel:`Backend` on the dropdown
     menu.
   - To abort, click :guilabel:`Discard` on the pop-up window.
   - Depending on your setup, you might only be allowed to close a session if the expected cash
     revenue equals the counted cash. To close it anyway, click :guilabel:`Ok` on the
     :guilabel:`Payments Difference` screen.

.. tip::
   - It is strongly advised to close your POS session at the end of each day.
   - To look at all your previous sessions, go to :menuselection:`Point of Sale --> Orders -->
     Sessions`.

.. _pos/analytics:

Analytics
=========

Once you :ref:`close and post the POS session <pos/session-close>`, access the comprehensive report
to review all session activities, including who initiated the session and who handled specific
orders. To access the session's report:

#. Click :icon:`fa-ellipsis-v` (:guilabel:`vertical ellipsis`) on the POS card.
#. Click :guilabel:`Sessions` under the :guilabel:`View` section.
#. From that list view, you can see all the sessions and who initiated them under the
   :guilabel:`Opened By` column.
#. Select a POS session to open a detailed session report.
#. Click the :guilabel:`Orders` smart button to display a list of all orders placed during that
   session.
#. From that view, you can retrieve the following information:

   - The :guilabel:`Order Ref`
   - The :guilabel:`Date` of the order.
   - The :guilabel:`Point of Sale` where that order was made.
   - The :guilabel:`Receipt Number`.
   - The :guilabel:`Customer`.
   - The :guilabel:`Employee` that placed this order.
   - The :guilabel:`Total` paid amount.
   - The order :guilabel:`Status`.

To get an overview of all orders, regardless of the session, click the vertical ellipsis button
(:guilabel:`⋮`) on the POS card and select :guilabel:`Orders` from the :guilabel:`View` section.

.. toctree::
   :titlesonly:

   point_of_sale/configuration
   point_of_sale/pos_hardware
   point_of_sale/employee_login
   point_of_sale/receipts_invoices
   point_of_sale/preparation
   point_of_sale/self_order
   point_of_sale/combos
   point_of_sale/shop
   point_of_sale/restaurant
   point_of_sale/pricing
   point_of_sale/payment_methods
   point_of_sale/pos_based_marketing
   point_of_sale/online_food_delivery
   point_of_sale/reporting


==================================================
SECTION: pos_based_marketing.rst
PATH: applications/sales/point_of_sale/pos_based_marketing.rst
==================================================

==================
Marketing features
==================

Use your POS system to engage with customers directly by sending them promotional offers via email
or WhatsApp.

Storing contact details
=======================

This feature requires your customer's contact details, either their email address or phone number.

- **Email addresses**: automatically collected and saved in POS orders when sending a receipt by
  email.
- **Phone numbers**: to store phone numbers when sending receipts on WhatsApp or by SMS,

  #. Go to :menuselection:`Configuration --> Settings` and scroll to the :guilabel:`Bills &
     Receipts` section;
  #. Activate the :guilabel:`WhatsApp Enabled` or :guilabel:`SMS Enabled` option(s).

.. image:: pos_based_marketing/sms-whatsapp-enabled.png
   :alt: setting to enable to store phone numbers when sending receipts

If a customer’s contact information is missing, it will be automatically saved in POS orders when
the receipt is sent via email, SMS, or WhatsApp.

.. tip::
   From a POS order form, navigate to the :guilabel:`Contact Info` category under the
   :guilabel:`Extra Info` tab, then click the email icon or whatsapp icon to send standalone
   marketing messages.

   .. image:: pos_based_marketing/standalone-marketing-from-pos.png
      :alt: pos orders form's standalone marketing message option

Email marketing
===============

To send marketing emails to your customers from POS orders,

#. Go to :menuselection:`Point of Sale --> Orders --> Orders`;
#. Select the orders;
#. Click :guilabel:`Actions`, then :guilabel:`Send Email` from the dropdown menu.

Doing so opens an email composing form. Fill it in and hit :guilabel:`Send`.

.. image:: pos_based_marketing/mail-composer.png
   :alt: mail composer view
   :scale: 50 %

.. tip::
   - Save some time by saving your content as a template. Click the vertical ellipsis button and
     select your template under the :guilabel:`Insert Template` section.
   - You can also save your content as template for later use. Click the vertical ellipsis button
     and select :guilabel:`Save as Template`.

.. note::
   - Fill in the :guilabel:`Mass Mailing Name` field to create a mass mailing and track its results
     in the :doc:`Email Marketing app <../../marketing/email_marketing>`.
   - If an email address is not related to an existing customer, a new customer is automatically
     created when sending marketing emails.

.. seealso::
   :doc:`Use the email marketing app for more advanced marketing features
   <../../marketing/email_marketing>`.

Whatsapp marketing
==================

.. _pos_based_marketing/whatsapp_config:

Configuration
-------------

You first need to enable the related server action to send WhatsApp marketing messages from your POS
using the phone numbers collected from POS orders. To do so,

#. Go to the WhatsApp application;
#. Create a new :ref:`WhatsApp template <WhatsApp/templates>`;
#. Configure the fields:

   - :guilabel:`Applies to` field set to :guilabel:`Point of Sale Orders`;
   - :guilabel:`Category` field to :guilabel:`Marketing`;
   - :guilabel:`Phone Field` to either :guilabel:`Mobile` or :guilabel:`Customer > Phone`.
#. Click :guilabel:`Submit for Approval`;
#. Once approved, click the :guilabel:`Allow Multi` button to create a server action in the POS
   orders list view.

.. image:: pos_based_marketing/whatsapp-template.png
   :alt: approved and configured for marketing uses whatsapp template

.. warning::
   If you modify the template's content, you must request for approval again, as its status returns
   to the :guilabel:`Draft` state.

.. seealso::
   :doc:`WhatsApp configuration <../../productivity/whatsapp>`

Send WhatsApp marketing messages
--------------------------------

#. Go to :menuselection:`Point of Sale --> Orders --> Orders`;
#. Select the orders;
#. Click :guilabel:`Actions`, then :guilabel:`WhatsApp Message` from the dropdown menu.

Doing so opens a WhatsApp message composing form. Select the desired marketing template in the
:guilabel:`Template` field and hit :guilabel:`Send Message`.

.. image:: pos_based_marketing/whatsapp-composer.png
   :alt: whatsapp composer view

.. note::
   - To use WhatsApp marketing in the Point of Sale, approved marketing templates must have the
     :guilabel:`Allow Multi` option enabled and :guilabel:`Point of Sale Orders` selected in the
     :guilabel:`Applies to` field.
   - If the server action is displayed without a properly configured template, an error message
     appears. Click :guilabel:`Configure Templates` and complete the :ref:`WhatsApp setup
     <pos_based_marketing/whatsapp_config>` steps.

.. seealso::
   :doc:`../../productivity/whatsapp`


==================================================
SECTION: pos_hardware.rst
PATH: applications/sales/point_of_sale/pos_hardware.rst
==================================================

========
Hardware
========

Odoo Point of Sale supports integration with a variety of hardware, including :doc:`payment
terminals <payment_methods/terminals>` and cash drawers, as well as :ref:`customer displays
<pos/hardware/display>`, :ref:`scales <pos/hardware/scale>`, :doc:`barcode scanners <shop/barcode>`,
:doc:`ePOS printers <configuration/epos_printers>`, and in-store :doc:`electronic shelf labels
<pricing/electronic_labels>`.

.. _pos/hardware/display:

Customer display
================

The **customer display** feature provides real-time updates on a secondary screen for customers
during the checkout process. This screen shows the :ref:`items in the cart <pos/sell>`, the subtotal
as items are added, and details throughout the payment process. It also displays the total amount,
the selected :doc:`payment method <payment_methods>`, and any change to be returned.

.. image:: pos_hardware/display.png
   :alt: customer screen
   :scale: 50 %

.. note::
   Both the customer and POS displays must have a minimum diagonal size of 6 inches. For optimal
   readability, larger screens are recommended.

.. _pos/hardware/display-configuration:

Configuration
-------------

Depending on the POS setup, the feature can be displayed directly on a secondary screen connected
via USB-C or HDMI or on a screen connected through an IoT system.

The feature is activated by default, but its background image can still be configured. To do so,
navigate to the :ref:`POS settings <configuration/settings>` and scroll down to the
:guilabel:`Connected Devices` section. Then, click :guilabel:`Upload your file` to set a background
image.

For displays connected using an :doc:`IoT system <../../general/iot>`:

#. Navigate to the :ref:`POS settings <configuration/settings>`.
#. Enable the :guilabel:`IoT Box` option to activate the IoT system in POS.
#. Click :guilabel:`Save`, which activates the IoT app in Odoo.
#. :doc:`Connect and configure an IoT system <../../general/iot/connect>` for a :doc:`display
   <../../general/iot/devices/screen>`.
#. Return to the :ref:`POS settings <configuration/settings>` and select an IoT-connected screen
   using the :guilabel:`Customer Display` field.

Opening the customer display
----------------------------

To open the customer display, follow these steps:

#. :ref:`Open the POS register <pos/session-start>`.
#. Click the :icon:`fa-bars` (:guilabel:`hamburger menu`) icon.
#. Click the :icon:`fa-desktop` (:guilabel:`Customer Display`) icon, which opens the customer
   display either in a new window to drag onto the second screen or directly onto the IoT-connected
   screen.

.. note::
   For IoT-connected screens, both devices need to be connected to the same local network.

.. seealso::
   - :doc:`configuration/pos_iot`
   - :doc:`../../general/iot`

For POS terminals running the
`Odoo <https://play.google.com/store/apps/details?id=com.odoo.mobile>`_ Android app with dual-screen
support, follow these steps:

#. :doc:`Activate the Point of Sale Mobile module <../../general/apps_modules>` to enable the
   customer display.
#. :ref:`Open the POS register <pos/session-start>`.
#. Click the :icon:`fa-bars` (:guilabel:`hamburger menu`) icon.
#. Click the :icon:`fa-desktop` (:guilabel:`Customer Display`) icon, which opens the customer
   display on the terminal's secondary screen.

.. _pos/hardware/scale:

Scale
=====

.. important::
   In EU member states, `certification is legally required
   <https://eur-lex.europa.eu/legal-content/EN/TXT/?uri=uriserv%3AOJ.L_.2014.096.01.0107.01.ENG>`_
   to use a scale as an integrated device.

Prerequisite
------------

Connecting a scale requires the use of an **IoT System**.

.. seealso::
   - :doc:`../../general/iot/connect`
   - :doc:`../../general/iot/devices/scale`

Configuration
-------------

Scale connection
~~~~~~~~~~~~~~~~

#. :ref:`Access the POS settings <configuration/settings>`.
#. Scroll down to the :guilabel:`Connected Devices` section and enable :guilabel:`IoT Box`.
#. Select the scale in the :guilabel:`Electronic Scale` field.
#. Click :guilabel:`Save`.

.. tip::
   Alternatively, click the :icon:`fa-ellipsis-v` (:guilabel:`Dropdown menu`) icon on a POS card and
   click :guilabel:`Edit` to access this setting.

Product configuration
~~~~~~~~~~~~~~~~~~~~~

In order to weigh products using an integrated scale, go to :menuselection:`Point of Sale -->
Products --> Products`, create a product or open an existing product form, and configure it as
follows:

#. Ensure the :guilabel:`Point of Sale` checkbox is activated for the product to be available in
   POS.
#. On the :guilabel:`General Information` tab, define a :guilabel:`Sales Price` per :guilabel:`kg`.

   .. note::
      This step requires to enable the :doc:`Units of Measure
      <../../inventory_and_mrp/inventory/product_management/configure/uom>` feature. To activate it:

      #. Go to :menuselection:`Inventory --> Configuration --> Settings`.
      #. Scroll down to the :guilabel:`Products` section and activate :guilabel:`Units of Measure`.
#. Go to the :guilabel:`Point of Sale` tab and activate :guilabel:`To Weigh With Scale`. This
   enables the product to be weighed directly on the connected scale at the POS.

.. important::
   The selected unit of measure for weighable products must be :guilabel:`kg` to ensure compliance
   with **European regulations**.

.. seealso::
   :doc:`../../inventory_and_mrp/inventory/product_management/configure/uom`

European regulations
--------------------

When using scales in commercial transactions, the database integrated with a scale must be
configured to meet specific European requirements. This includes supporting at least three decimal
places for accuracy and using proper rounding for units of measure, such as `kg` instead of generic
`units`.

If the database is not compliant, a red :icon:`fa-balance-scale` (:guilabel:`scale`) icon displays
as a warning. Click this icon to view the reasons for non-compliance and then select
:guilabel:`Apply changes` to automatically apply the necessary changes to the settings. Once the
database meets all regulatory requirements, the :icon:`fa-balance-scale` (:guilabel:`scale`) icon
turns green.

.. image:: pos_hardware/legal-requirements.png
   :scale: 75 %

.. admonition:: Additional guidelines

   Both the :ref:`customer <pos/hardware/display>` and POS displays must have a minimum diagonal
   size of 6 inches. For optimal readability, larger screens are recommended.

Using a scale in PoS
--------------------

#. :ref:`Open the POS register <pos/session-start>`.
#. Select the product to weigh on the order screen or scan its barcode.
#. Place the product on the scale and wait for the weight to be displayed in the popup window.
#. Once the weight is determined, the price is automatically computed.
#. Click :guilabel:`Order` :icon:`fa-angle-double-right` to add the product to the cart.
#. Remove the previous product from the scale.

.. image:: pos_hardware/weigh.png
   :alt: weighing window
   :scale: 85 %

.. important::
   Make sure the scale returns to `zero` before weighing a new product. If it does not, the
   :guilabel:`Order` :icon:`fa-angle-double-right` button remains unclickable until it is reset.


==================================================
SECTION: pos_iot.rst
PATH: applications/sales/point_of_sale/configuration/pos_iot.rst
==================================================

=====================
IoT system connection
=====================

To connect the POS with an :doc:`IoT system </applications/general/iot>`:

#. Make sure both the Point of Sale and Internet of Things (IoT) apps are installed on your
   database.
#. Set up the :doc:`/applications/general/iot/iot_box` or
   :doc:`/applications/general/iot/windows_iot`.
#. Connect the peripheral devices to the IoT system:

   .. list-table::
      :header-rows: 1
      :stub-columns: 1

      * - Device
        - Instructions
      * - Printer
        - Connect a supported receipt printer to a :abbr:`USB (Universal Serial Bus)` port or
          to the network, and power it on. Refer to :ref:`Order printing
          <pos/restaurant/orders-printing>`.
      * - Cash drawer
        - The cash drawer should be connected to the printer with an RJ25 cable.
      * - Barcode scanner
        - The barcode scanner must end barcodes with an `ENTER` character (keycode 28) in order for
          the barcode scanner to be compatible. This is most likely the barcode scanner's default
          configuration.
      * - Scale
        - :ref:`Connect the scale and power it on <pos/hardware/scale>`.
      * - Customer display
        - :ref:`Connect a screen <pos/hardware/display>` to the :abbr:`IoT (Internet of
          Things)` box to display the :abbr:`PoS (Point of Sale)` order.
      * - Payment terminal
        - The connection process depends on the terminal. Refer to the :doc:`payment terminals
          documentation </applications/sales/point_of_sale/payment_methods>`.

#. :doc:`Connect the IoT system to your Odoo database </applications/general/iot/connect>`.
#. In the :guilabel:`Connect to a Point of Sale` popup that opens, select the :guilabel:`Associated
   POS` and click :guilabel:`Continue`. The IoT system and its devices are automatically linked to
   the POS.

   .. tip::
      Alternatively, :ref:`access the POS settings <configuration/settings>` and select the POS, or
      click the vertical ellipsis button (:guilabel:`⋮`) on a POS card and click :guilabel:`Edit`.
      Then, enable :guilabel:`IoT Box`, select the devices to use with the POS, and click
      :guilabel:`Save`.

.. seealso::
   - `List of supported hardware <https://www.odoo.com/page/point-of-sale-hardware>`_.
   - :doc:`IoT documentation </applications/general/iot>`

.. _pos/pos_iot/connect_schema:

Setup example
=============

.. image:: pos_iot/pos-connections.png
   :alt: A suggested configuration for a point of sale system.


==================================================
SECTION: preparation.rst
PATH: applications/sales/point_of_sale/preparation.rst
==================================================

===================
Preparation display
===================

The preparation display feature allows you to handle POS orders requiring preparation. Concretely,

- **For retail**:  The preparation team is notified after a payment is completed at the POS to
  gather the purchased items for customer pickup.
- **For restaurants**: POS orders inform the kitchen of the meals to be prepared.

Configuration
=============

To enable the preparation display feature,

#. Go to the :ref:`POS settings <configuration/settings>`.
#. Scroll down to the :guilabel:`Preparation` section.
#. Check the :guilabel:`Preparation Display` option.

.. image:: preparation/preparation-setting.png
   :alt: Setting to enable the preparation display feature
   :scale: 90 %

To create and set up a preparation display,

#. Go to :menuselection:`Point of Sale --> Orders --> Preparation Display`
#. Click :guilabel:`New`.
#. Give the display a descriptive :guilabel:`Name` (e.g., `Main Kitchen`, `Bar`)
#. Set it up:

   #. :guilabel:`Point of Sale`: Select the POS that sends orders to this display.
   #. :guilabel:`Product categories`: Specify the POS :guilabel:`Product categories` sent to this
      display.
   #. :guilabel:`Stages`: Define the steps required for the orders to be ready.

      - Click :guilabel:`Add a line` to add a stage.
      - Assign specific colors to each stage for clarity (optional).
      - Define an :guilabel:`Alert timer (min)` for each stage to indicate the expected processing
        time.

.. image:: preparation/display-form.png
   :alt: preparation display set-up form
   :scale: 85 %

.. note::
   To edit a pre-existing preparation display, click the vertical ellipsis button
   (:icon:`fa-ellipsis-v`) on the display's card and select :guilabel:`Configure`.

Practical application
=====================

Go to :menuselection:`Point of Sale --> Orders --> Preparation Display` to get an overview of all
your displays.

.. image:: preparation/display-card.png
   :alt: Kanban view of the preparation display
   :scale: 85 %

The display card shows:

- The configured stages.
- The number of orders currently :guilabel:`In progress`.
- The :guilabel:`Average time` employees usually take to complete an order.

.. tip::
   Click the :guilabel:`Kitchen Display` app icon on your Odoo Dashboard for quicker access.

Using the preparation display
-----------------------------

To access the preparation display, click :guilabel:`Preparation Screen`. This interface, designed
for employees, shows:

- **Stages and order count**: Displays the progress of orders across stages such as `To prepare`,
  `Ready`, and `Completed`, along with the number of orders in each stage.
- **Ordered products by category**: Lists all items in progress, grouped by POS categories (e.g.,
  `Drinks`, `Food`).
- **Order cards**: Summarizes individual orders, including:

  - Associated tables and order numbers.
  - Status, such as `Ready`, highlighted with the defined colors.
  - Waiting time, with visual indicators.

.. note::
   The duration indicator turns red if the elapsed time exceeds the predefined alert time.

.. image:: preparation/preparation-display.png
   :alt: the preparation display interface with orders to process.
   :scale: 80 %

To update order progress:

- Click items on the order card to cross them off individually.
- Click the order card itself to mark all items at once.
- The card automatically moves to the next stage once every item is crossed off.
- Click :icon:`fa-undo` :guilabel:`Recall` to move an order back to the previous stage if you
  mistakenly sent it to the next stage.

Customer display
----------------

In parallel, click :guilabel:`Order Status Screen` to open the customer interface. This interface,
designed for customers, provides an overview of orders that are:

- :guilabel:`Ready` for pickup.
- :guilabel:`Almost there`, indicating they are taken care of.

.. note::
   The order number can be found at the top of the customer's receipt.


==================================================
SECTION: pricelists.rst
PATH: applications/sales/point_of_sale/pricing/pricelists.rst
==================================================

==========
Pricelists
==========

Pricelists allow you to adjust product prices depending on various criteria automatically. For
example, you can set POS-specific prices, create temporary discount periods, reward specific
customers, or offer discounts when set quantities are ordered.

.. _pricelists/configuration:

Configuration
=============

Navigate to the :ref:`general POS app settings <configuration/settings>` and ensure
:guilabel:`Flexible Pricelists` are enabled under the :guilabel:`Pricing` section.

:ref:`Multiple prices per product <pricelists/simple>` is the default pricelist option for setting
simple fixed price rules per product. Select :ref:`Advanced price rules (discounts, formulas)
<pricelists/advanced>` to apply price rules to multiple products at once and to compute prices
dynamically using percentage discounts or more complex formulas in addition to setting fixed prices.

.. image:: pricelists/settings.png
   :alt: Enabling pricelists in the general P0S settings

.. note::
   The selected pricelist type applies to the entire database, including the :doc:`Sales
   <../../sales/products_prices/prices/pricing>` and :ref:`eCommerce <ecommerce/prices/pricelists>`
   apps.

.. _pricelists/create:

Create pricelists
-----------------

Go to :menuselection:`Point of Sale --> Products --> Pricelists` and click :guilabel:`New` or
select an existing pricelist. The pricelist setup differs depending on the :ref:`selected pricelist
option <pricelists/configuration>`.

.. _pricelists/simple:

Multiple prices per product
~~~~~~~~~~~~~~~~~~~~~~~~~~~

When pricelists are configured to use the :guilabel:`Multiple prices per product` option, it is
possible to use multiple fixed prices for different products or their variants depending, if
necessary, on one or several conditions. To add a new price rule to a pricelist:

#. Click :guilabel:`Add a line`, and select a **product** and its **variant** if needed.
#. Add the condition(s):

   - a product quantity to be reached by using the :guilabel:`Min. Quantity` column;
   - a determined period during which the pricelist is applied by using the :guilabel:`Start Date`
     and :guilabel:`End Date` columns.

#. Add the :guilabel:`Price` to be applied when the conditions are met (if any).

.. image:: pricelists/multiple-prices.png
   :alt: Setup form of a multiple prices pricelist

.. _pricelists/advanced:

Advanced price rules
~~~~~~~~~~~~~~~~~~~~

When pricelists are configured to use the :guilabel:`Advanced price rules (discounts, formulas)`
option, it is possible to use percentage discounts/mark-ups and formulas in addition to using fixed
prices. To add a new price rule to a pricelist, click :guilabel:`Add a line`. In the pop-up windows:

#. Select a :guilabel:`Computation` method:

   - :guilabel:`Fixed Price` to set a new fixed price (similarly to the :guilabel:`Multiple prices
     per product` option).
   - :guilabel:`Discount` to compute a percentage discount (e.g., `10.00` %) or mark-up (e.g.,
     `-10.00` %).
   - :guilabel:`Formula` to compute the price according to a formula. It is required to define what
     the calculation is **based on** (:guilabel:`Sales Price`, :guilabel:`Cost`, or :guilabel:`Other
     Pricelist`). You can then:

     - Apply a percentage :guilabel:`Discount` or mark-up.
     - Add an :guilabel:`Extra Fee` (e.g., $ `5.00`) or subtract a fixed amount (e.g., $ `-5.00`).
     - Define a :doc:`Rounding Method <cash_rounding>` by forcing the price after
       :guilabel:`Discount` to be a multiple of the value set. The :guilabel:`Extra Fee` is applied
       afterward.

       .. example::
          To have the final price end with `.99`, set the :guilabel:`Rounding Method` to `1.00` and
          the :guilabel:`Extra Fee` to `-0.01`.

     - Specify the minimum (e.g., $ `20.00` ) and maximum (e.g., $ `50.00` ) profit
       :guilabel:`Margins` for computations based on :guilabel:`Cost`.

#. Select on which product(s) the price rule should be **applied**:

   - :guilabel:`All Products`
   - a :guilabel:`Product Category`
   - a :guilabel:`Product`
   - a :guilabel:`Product Variant`

#. Add conditions, such as a specific quantity to reach for the price to change by using the
   :guilabel:`Min. Quantity` field or a specific period during which the pricelist should be
   applied by using the :guilabel:`Validity` fields.

.. image:: pricelists/price-rules.png
   :alt: Setup form to configure an advanced pricelist

Select pricelists
-----------------

Go to the :ref:`specific POS settings <configuration/settings>` and add all the available
pricelists in the :guilabel:`Available` field. Then, set its **default pricelist** in the
:guilabel:`Default` field.

When you :ref:`open a POS session <pos/session-start>`, click the **pricelists** button, and select
the desired pricelist from the list.

.. image:: pricelists/pricelist-button.png
   :alt: Button to select a pricelist on the POS frontend

.. note::
   - Multiple pricelists must be selected for the **pricelist button** to be displayed.
   - If a pricelist is selected on a POS order while its conditions are **not** met, the price will
     **not** be adjusted.

.. tip::
   You can also set a pricelist to be selected automatically once a specific :ref:`customer is set
   <pos/customers>`. To do so, go to the customer form and switch to the preferred pricelist in the
   :guilabel:`Pricelist` field of the :guilabel:`Sales & Purchase` tab.

.. seealso::
   - :doc:`../../sales/products_prices/prices/pricing`
   - :ref:`How to use pricelists in an ecommerce environment <ecommerce/prices/pricelists>`


==================================================
SECTION: pricing.rst
PATH: applications/sales/point_of_sale/pricing.rst
==================================================

:nosearch:

================
Pricing features
================

.. toctree::
   :titlesonly:

   pricing/discounts
   pricing/discount_tags
   pricing/loyalty
   pricing/pricelists
   pricing/fiscal_position
   pricing/cash_rounding
   pricing/electronic_labels


==================================================
SECTION: qfpay.rst
PATH: applications/sales/point_of_sale/payment_methods/terminals/qfpay.rst
==================================================

=====
QFPay
=====

QFPay is a payment service that offers payment solutions through the `HaoJin App
<https://qfpay.global/products/merchant-app/>`_ for customer transactions with a physical terminal.

.. important::
   - QFPay payment terminals do not require an :doc:`IoT Box </applications/general/iot>` to
     operate.
   - QFPay terminals are exclusively for Hong Kong.

.. _pos/qfpay/configuration:

QFPay configuration
===================

To configure a QFPay payment terminal, follow these steps:

#. Create a QFPay account on the `QFPay website <https://qfpay.global/products/qfpay-pos-api/>`_.
#. Request the activation of `Asynchronous Notifications
   <https://sdk.qfapi.com/docs/common-api/asynchronous-notification/>`_ from QFPay.
#. Provide the Odoo server address to QFPay, followed by `/qfpay/notify`, and copy the
   notification key provided by QFPay.
#. Set up the QFPay terminal by connecting the HaoJin App to the QFPay account as instructed by
   QFPay, then copy the terminal's IP address.
#. Request a self-signed certificate from QFPay linked to the terminal's IP address, and import it
   into the POS machine.
#. Generate a :guilabel:`POS-KEY` from the HaoJin App: go to :menuselection:`Haojin App --> My -->
   Settings --> Pos Call Up Key --> Reset Key`. Then, copy the generated :guilabel:`POS-KEY`.

.. note::
   - The **Asynchronous Notifications** are automated messages confirming successful payments or
     refunds by QFPay.
   - Write the server address as follows: `https://yourdomain.odoo.com/qfpay/notify`.
   - If the terminal's IP address changes, update it in the :ref:`Odoo POS settings
     <configuration/settings>` and request a new self-signed certificate from QFPay.
   - If a QFPay account already exists, contact `technical.support@qfpay.com` with the merchant
     information and server address.

.. tip::
   Alternatively, retrieve the POS-KEY from the `MMS (Merchant Management System) portal
   <https://merchant.qfpay.global/>`_: go to :menuselection:`MMS portal --> Settings --> Device
   Settings`.

.. _pos/qfpay/odoo-configuration:

Odoo POS configuration
======================

To connect the QFPay terminal with Odoo Point of Sale, follow these steps:

#. Go to :menuselection:`Point of Sale --> Configuration --> Settings`, scroll down to the
   :guilabel:`Payment Terminals` section, enable the :guilabel:`QFPay` terminal, and click
   :guilabel:`Save`.
#. Go to :menuselection:`Point of Sale --> Configuration --> Payment Methods` and :doc:`create a
   payment method <../../payment_methods>`.
#. Set the :guilabel:`Journal` field to :guilabel:`Bank`.
#. Select the desired point of sale in the :guilabel:`Point of Sale` field.
#. Set the :guilabel:`Integration` field to :guilabel:`Terminal`.
#. Set the :guilabel:`Integrate with` field to :guilabel:`QFPay`.
#. Paste the copied information from :ref:`QFPay <pos/qfpay/configuration>` into the corresponding
   fields:

   - :guilabel:`Terminal IP`
   - :guilabel:`POS Key`
   - :guilabel:`Notification Key`


==================================================
SECTION: qr_code_payment.rst
PATH: applications/sales/point_of_sale/payment_methods/qr_code_payment.rst
==================================================

================
QR code payments
================

QR code payments allow users to generate a code that customers can scan with their mobile banking
app to initiate a bank transfer or pay instantly.

Configuration
=============

Activate and set up QR code payments
------------------------------------

Go to :menuselection:`Accounting --> Configuration --> Settings`, and

#. Activate or upgrade your country's fiscal localization package under the :guilabel:`Fiscal
   Localization` section to access all country-specific accounting features.
#. Activate :guilabel:`QR codes` under the :guilabel:`Customer Payments` section.

Then, as the QR code type differs depending on your country, follow the corresponding documentation
page from the following table to set them up.

.. list-table::
   :widths: 20 20 20 40
   :header-rows: 1

   * - QR code types
     - Module name
     - Technical name
     - Description
   * - Pix
     - :doc:`Brazilian - Accounting<../../../finance/fiscal_localizations/brazil>`
     - `l10n_br`
     - The base module to manage the accounting chart and localization for Brazil.
   * - FPS
     - :doc:`Hong Kong - Accounting<../../../finance/fiscal_localizations/hong_kong>`
     - `l10n_hk`
     - The base module to manage the accounting chart and localization for Hong Kong.
   * - QRIS
     - :doc:`Indonesian - Accounting<../../../finance/fiscal_localizations/indonesia>`
     - `l10n_id`
     - The base module to manage the accounting chart and localization for Indonesia.
   * - PayNow
     - :doc:`Singapore - Accounting<../../../finance/fiscal_localizations/singapore>`
     - `l10n_sg`
     - The base module to manage the accounting chart and localization for Singapore.
   * - QR-bill
     - :doc:`Switzerland - Accounting<../../../finance/fiscal_localizations/switzerland>`
     - `l10n_ch`
     - The base module to manage the accounting chart and localization for Switzerland.
   * - PromptPay
     - :doc:`Thailand - Accounting<../../../finance/fiscal_localizations/thailand>`
     - `l10n_th`
     - The base module to manage the accounting chart and localization for Thailand.
   * - VietQR
     - :doc:`Vietnam - Accounting<../../../finance/fiscal_localizations/vietnam>`
     - `l10n_vn`
     - The base module to manage the accounting chart and localization for Vietnam.
   * - EPC
     - :doc:`Account SEPA QR Code<../../../finance/accounting/customer_invoices/epc_qr_code>`
     - `account_qr_code_sepa`
     - This module adds support for SEPA Credit Transfer QR-code generation.

Create the payment method
-------------------------

#. Open the Point of Sale application.
#. Go to :menuselection:`Configuration --> Payment Methods` and create a payment method.
#. Set a bank-type journal.
#. Select :guilabel:`Bank App (QR Code)` under the :guilabel:`Integration` section.
#. Select the :guilabel:`QR Code Format` from the dropdown menu.

   - Select :guilabel:`SEPA Credit Transfer QR` if you are part of the Single Euro Payments Area
     (SEPA).
   - Select :guilabel:`EMV Merchant-Presented QR-code` for other QR code types.

.. image:: qr_code_payment/qr-payment-methods-setting.png
   :alt: QR code payment method configuration
   :scale: 85 %

.. important::
   At least one bank account must be defined in the journal to allow QR code payments to be
   registered with bank apps.

Once the payment method is created, go to the :ref:`POS' settings <configuration/settings>` and add
the payment method to your POS under the :guilabel:`Payment` section.

.. image:: qr_code_payment/qr-configuration-setting.png
   :alt: Enable QR code payment method
   :scale: 85 %

Register payments using QR codes
================================

When processing a payment, select the payment method for QR code payments. A QR code is generated
and displayed on the screen for the customer to scan and pay with their mobile banking app.

.. image:: qr_code_payment/qr-payment-example.png
   :alt: QR code payment example
   :scale: 75 %

Hit :guilabel:`Confirm Payment` to validate the transaction.

.. important::
   Odoo does **not** check the bank payment. It is recommended that users verify payments for
   validity before confirming them on the POS register.


==================================================
SECTION: razorpay.rst
PATH: applications/sales/point_of_sale/payment_methods/terminals/razorpay.rst
==================================================

========
Razorpay
========

Connecting a Razorpay payment terminal allows you to offer a fluid payment flow to your customers
and ease the work of your cashiers.

.. seealso::
   :doc:`Use Razorpay as apayment provider. <../../../../finance/payment_providers/razorpay>`

Configuration
=============

.. _razorpay/credentials:

Locate your Razorpay credentials
--------------------------------

`Create a Razorpay account <https://razorpay.com/docs/payments/easy-create-account/>`_ and set it up
on their website.

You need the following credentials to set up the payment method in Odoo:

- `API key <https://razorpay.com/docs/payments/dashboard/account-settings/api-keys/>`_
- Razorpay username
- Razorpay device serial number, which can be found underneath the device or on `Razorpay's
  dashboard <https://dashboard.razorpay.com/>`_.

Configure the payment method
----------------------------

#. :doc:`Activate the POS Razorpay module <../../../../general/apps_modules>` to enable the
   payment terminal.
#. :doc:`Create the related payment method <../../payment_methods>` by going to
   :menuselection:`Point of Sale --> Configuration --> Payment Methods`.

   #. Set the :guilabel:`Journal` type as :guilabel:`Bank`.
   #. Select :guilabel:`Razorpay` in the :guilabel:`Use a Payment Terminal` field.
   #. Enter your username in the :guilabel:`Razorpay Username` field and your device's serial number
      in the :guilabel:`Razorpay Device Serial No` field.
   #. Fill in the :guilabel:`Razorpay API Key` field with the :ref:`Razorpay API key
      <razorpay/credentials>`.
   #. Set the :guilabel:`Razorpay Allowed Payment Modes` according to your needs.

   .. image:: razorpay/create-method-razorpay.png
      :alt: Razorpay connection form

   .. note::
      You can enable the :guilabel:`Razorpay Test Mode` field while testing or keep it unchecked for
      production.

Once the payment method is created, you can enable it for your POS. To do so, go to the :ref:`POS'
settings <configuration/settings>` and add the payment method under the :guilabel:`Payment` section.

.. note::
   The terminal must have at least a 10% battery level to use it.


==================================================
SECTION: receipts_invoices.rst
PATH: applications/sales/point_of_sale/receipts_invoices.rst
==================================================

=====================
Receipts and invoices
=====================

Receipts
========

Set up receipts by going to :menuselection:`Point of Sale --> Configuration --> Point of Sale`,
selecting a POS, and scrolling down to the :guilabel:`Bills & Receipts` section.

To **customize** the **header** and **footer**, activate :guilabel:`Header & Footer` and fill in
both fields with the information to be printed on the receipts.

To **print receipts** automatically once the payment is registered, enable the :guilabel:`Automatic
Receipt Printing` setting.

.. image:: receipts_invoices/receipt.png
   :scale: 75%
   :alt: POS receipt

.. seealso::
   - :ref:`pos/restaurant/bills`
   - :doc:`configuration/epos_printers`

Reprint a receipt
-----------------

From the POS interface, click :guilabel:`Orders`, open the dropdown selection menu next to the
search bar, and change the default :guilabel:`All active orders` filter to :guilabel:`Paid`. Then,
select the corresponding order and click :guilabel:`Print Receipt`.

.. image:: receipts_invoices/print-receipt.png
   :alt: Print receipt button from the backend

.. note::
   You can filter the list of orders using the search bar. Type in your reference and click
   :guilabel:`Receipt Number`, :guilabel:`Date`, or :guilabel:`Customer`.

.. _receipts-invoices/invoices:

Invoices
========

Point of Sale allows you to issue and print invoices for :ref:`registered customers <pos/customers>`
upon payment and retrieve all past invoiced orders.

.. note::
   An invoice created in a POS creates an entry into the corresponding :ref:`accounting journal
   <cheat_sheet/journals>`, previously :ref:`set up <receipts_invoices/invoice_configuration>`.

.. _receipts_invoices/invoice_configuration:

Configuration
-------------

To define what journals will be used for a specific POS, go to the :ref:`POS' settings
<configuration/settings>` and scroll down to the accounting section. Then, you can determine the
accounting journals used by default for orders and invoices in the :guilabel:`Default Journals`
section.

.. image:: receipts_invoices/invoice-config.png
   :alt: accounting section in the POS settings

Invoice a customer
------------------

Upon processing a payment, click :guilabel:`Invoice` underneath the customer's name to issue an
invoice for that order.

Select the payment method and click :guilabel:`Validate`. The **invoice** is automatically issued
and ready to be downloaded and/or printed.

.. note::
   To be able to issue an invoice, a :ref:`customer <pos/customers>` must be selected.

Retrieve invoices
-----------------

To retrieve invoices from the **POS dashboard**,

#. access all orders made through your POS by going to :menuselection:`Point of Sale --> Orders -->
   Orders`;
#. to access an order's invoice, open the **order form** by selecting the order, then click
   :guilabel:`Invoice`.

.. image:: receipts_invoices/invoice-smart-button.png
   :alt: invoice smart button from an order form

.. note::
   - **Invoiced orders** can be identified by the :guilabel:`Invoiced` status in the
     :guilabel:`Status` column.
   - You can filter the list of orders to invoiced orders by clicking :guilabel:`Filters` and
     :guilabel:`Invoiced`.

QR codes to generate invoices
-----------------------------

Customers can also request an invoice by scanning the **QR code** printed on their receipt. Upon
scanning, they must fill in a form with their billing information and click :guilabel:`Get my
invoice`. On the one hand, doing so generates an invoice available for download. On the other hand,
the order status goes from :guilabel:`Paid` or :guilabel:`Posted` to :guilabel:`Invoiced` in the
Odoo backend.

.. image:: receipts_invoices/order-status.png
   :alt: order status change

To use this feature, you have to enable QR codes on receipts by going to :menuselection:`Point of
Sale --> Configuration --> Settings`. Then, select the POS in the :guilabel:`Point of Sale` field,
scroll down to the :guilabel:`Bills & Receipts` section and enable :guilabel:`Use QR code on
ticket`.


==================================================
SECTION: reporting.rst
PATH: applications/sales/point_of_sale/reporting.rst
==================================================

=========
Reporting
=========

View statistics
===============

To access your statistics, go to :menuselection:`Point of Sale --> Reporting --> Orders`. Or, from
the **POS dashboard**, click the vertical ellipsis (:guilabel:`⋮`) button, :guilabel:`Reporting`,
and :guilabel:`Orders`.

These statistics are available in a graph or pivot view that you can filter or group depending on
your needs.


==================================================
SECTION: restaurant.rst
PATH: applications/sales/point_of_sale/restaurant.rst
==================================================

===================
Restaurant features
===================

Odoo Point of Sale provides various features to manage a restaurant or a bar:

- :ref:`Organizing the floors and tables <pos/restaurant/floors>`;
- :ref:`Managing orders <pos/restaurant/orders>`;
- :ref:`Notifying the kitchen or bar through the POS <pos/restaurant/orders-printing>`;
- :ref:`Printing and splitting bills <pos/restaurant/bills>`;
- :ref:`Collecting tips <pos/restaurant/tips>`;
- :doc:`Setting different taxes for takeout orders <pricing/fiscal_position>`.

Three main buttons in the POS interface allow for navigating between tables, the register, and
orders:

- :guilabel:`Tables`: Access the :ref:`Floor plan <pos/restaurant/floors>` view to manage table
  occupancy.
- :guilabel:`Register`: Access the :ref:`POS register <pos/restaurant/orders>` to process orders.
- :guilabel:`Orders`: Access the overview of all orders.

.. important::
   To configure restaurant-specific settings, the :guilabel:`Is a Bar/Restaurant` setting under the
   :guilabel:`Point of Sale` section must be enabled in the :ref:`POS settings
   <configuration/settings>`.

.. note::
   When :guilabel:`Booking` is enabled in the :ref:`POS settings <configuration/settings>`, a
   :ref:`Booking <pos/restaurant/floors/booking>` button appears on the main interface for viewing
   and managing bookings.

.. _pos/restaurant/default:

Default start screen
====================

To define the point of sale's default start screen, go to the :ref:`POS settings
<configuration/settings>`, scroll down to the :guilabel:`PoS Interface` section, and set the
:guilabel:`Default Screen` setting to :guilabel:`Tables` (i.e., :ref:`Floor plan
<pos/restaurant/floors>` view) or :ref:`Register <pos/restaurant/orders>`.

.. _pos/restaurant/floors:

Floors and tables
=================

The :guilabel:`Floor plan` view allows for managing restaurant floors and tables and monitoring
table status in real time (occupancy, reservations, kitchen orders) using the following action
buttons:

- :icon:`fa-plus` :guilabel:`New Order`: :ref:`Create a direct sales order
  <pos/restaurant/orders/process>` that is not linked to any table. Take the order, click
  :guilabel:`Set Table` to assign it to an existing table, or click :guilabel:`Set Tab` to
  record the open order's name.
- Buttons for navigating between :ref:`configured floors <pos/restaurant/floors/backend>`
  (e.g., :guilabel:`Main Floor/Patio`).
- :icon:`fa-hashtag` (:guilabel:`Table Selector`): Enter an existing table number and click
  :guilabel:`Jump` to access it.

.. note::
   - Selecting a table on the :guilabel:`Floor plan` view or accessing it through the
     :guilabel:`Table Selector` automatically confirms the table's occupancy.
   - To order free physical QR codes adapted to the floor plan, activate the :doc:`QR menu
     </applications/sales/point_of_sale/self_order>` setting, then click  :icon:`fa-qrcode`
     :guilabel:`Get QR Codes` in the :guilabel:`Floor plan` view. This `offer
     <https://www.odoo.com/app/point-of-sale-restaurant-qr-code>`_ is available worldwide and for
     all subscription types.

.. example::
   .. image:: restaurant/plan-understand.png
      :alt: example of a floor plan view with visual keys to understand it.
      :scale: 90 %

   - Table 101: The table is currently available but booked for 15:00.
   - Table 102: The table is booked, and an order is sent to the kitchen.
   - Table 103: The 12:00 table is running late.
   - Table 104: The table has a pending order.
   - Table 105: The table is available.

Configuration
-------------

Creating floors and tables allows for managing table selection and :ref:`orders
<pos/restaurant/orders>`.

.. _pos/restaurant/floors/backend:

From the POS backend
~~~~~~~~~~~~~~~~~~~~

To create floors and tables from the backend, go to :menuselection:`Point of Sale --> Configuration
--> Floor Plans`, and click :guilabel:`New`. Follow the next steps to configure the :guilabel:`Floor
plan`:

#. Enter a :guilabel:`Floor Name`.
#. Select the related :guilabel:`Point of Sales`.
#. Optionally, hover the mouse over the placeholder image and click the :icon:`fa-pencil`
   (:guilabel:`Edit`) icon to add a background image to the restaurant layout.
#. Click :guilabel:`Add a line` to create and configure a table:

   - Enter a :guilabel:`Table Number`.
   - Fill in the number of :guilabel:`Seats`.
   - Set the table's :guilabel:`Shape`.
#. Optionally, activate additional settings by clicking the :icon:`oi-settings-adjust`
   (:guilabel:`settings`) icon:

   - Adjust the :guilabel:`Height`, :guilabel:`Width`, and :guilabel:`Color`.
   - Tick the :guilabel:`Active` checkbox to make a table available or not.
#. Save.

.. note::
   - Enable the :ref:`Booking <pos/restaurant/floors/booking>` setting to assign an
     :guilabel:`Appointment resource` and make a table bookable.
   - Click the :icon:`fa-trash-o` (:guilabel:`trash`) icon to delete a table.

.. tip::
   To create a :guilabel:`Floor plan` quickly, go to the :guilabel:`Point of Sale` section of the
   :ref:`POS settings <configuration/settings>`. Under :guilabel:`Floors & Tables Map`, type the
   floor name in the :guilabel:`Floors` field, and press `Enter`.

.. _pos/restaurant/floors/frontend:

From the POS frontend
~~~~~~~~~~~~~~~~~~~~~

To create floors and tables from the frontend, :ref:`open the POS register <pos/session-start>`,
click the :icon:`fa-bars` (:guilabel:`hamburger menu`) icon in the top right corner of the
:guilabel:`Floor plan` view, then :guilabel:`Edit Plan`. To configure the :guilabel:`Floor plan`,
follow the next steps:

#. Click the :icon:`fa-plus` (:guilabel:`Add Floor`) icon to add a floor.
#. Enter a :guilabel:`Floor name` and click :guilabel:`Apply`.
#. Click the :icon:`fa-paint-brush` (:guilabel:`Change Floor Background`) icon to select a
   background color, or click :icon:`fa-camera` :guilabel:`File` to upload an image.
#. Optionally, click the :icon:`fa-pencil-square-o` (:guilabel:`Rename`) icon to rename the
   :guilabel:`Floor plan`, the :icon:`fa-files-o` (:guilabel:`Clone`) icon to create a copy, or
   the :icon:`fa-trash` (:guilabel:`Delete`) icon to delete it.
#. Click :icon:`fa-plus-circle` :guilabel:`Table` to add a new table. To edit a table, select it
   and click one of the following icons:

      - :icon:`fa-user` (:guilabel:`Seats`): Add or change the number of seats.
      - :icon:`fa-square-o` (:guilabel:`Square`) or :icon:`fa-circle-o` (:guilabel:`Round`): Change
        the table's shape.
      - :icon:`fa-paint-brush` (:guilabel:`Change Floor Background`): Change the table's color.
      - :icon:`fa-pencil-square-o` (:guilabel:`Rename`): Change the table number.
      - :icon:`fa-copy` (:guilabel:`Clone`): Clone the table's attributes using the following table
        number.
      - :icon:`fa-trash` (:guilabel:`Delete`): Remove the table.
#. Click :guilabel:`Save`.

.. warning::
   Removing a table or a floor is permanent.

.. _pos/restaurant/floors/booking:

Booking
-------

The :guilabel:`Booking` setting allows for creating and managing reservations for a designated
point of sale directly from the POS interface.

.. note::
   Enabling the :guilabel:`Booking` setting automatically installs the :doc:`Appointments
   </applications/productivity/appointments>` app.

.. _pos/restaurant/floors/booking/configuration:

Booking configuration
~~~~~~~~~~~~~~~~~~~~~

To enable and configure the bookings, follow these steps:

#. Go to the :ref:`POS settings <configuration/settings>`, scroll down to the :guilabel:`PoS
   Interface` section, and enable :guilabel:`Booking`.
#. Enter a name in the :guilabel:`Appointment type` field and click :guilabel:`Create and edit`.
#. Configure the :ref:`Appointment type <appointments/configure>` form and click :guilabel:`Save`.
#. Click :guilabel:`Save` in the POS settings.

.. important::
   To ensure that only existing resources can be booked for a specific point of sale, set the
   :guilabel:`Book` field to :guilabel:`Resources` in the :guilabel:`Appointment type` form and
   select tables. Then, enable :guilabel:`Manage Capacities` to define the maximum amount each
   resource can handle.

.. tip::
   To accommodate a booking that exceeds the capacity of a single table, click the
   :icon:`fa-cubes` (:guilabel:`Resources`) icon in the :guilabel:`Appointment Type` form, select
   a table, and add additional tables in the :guilabel:`Linked Resource` field to merge them.

.. seealso::
   :doc:`/applications/productivity/appointments`

.. _pos/restaurant/floors/booking/management:

Booking management
~~~~~~~~~~~~~~~~~~

To manage table bookings from the POS interface, click :guilabel:`Booking`, then:

- Click :guilabel:`New` to create a booking. Add a name, the date and time, number of guests, phone
  number, duration, and :ref:`resources <appointments/resources>`, then click :guilabel:`Save`.
- Click a booking to :guilabel:`Edit` or :guilabel:`Delete` it. Click a stage name (e.g.,
  :guilabel:`Booked`, :guilabel:`Checked-In`, or :guilabel:`No Show`) or drag the booking card to
  move it to the relevant stage.

.. tip::
   To quickly edit a booking from the :ref:`Floor plan <pos/restaurant/floors>` view, click the
   booking notification on the booked table.

.. _pos/restaurant/orders:

Order management
================

The POS register allows for :ref:`processing <pos/restaurant/orders/process>` and :ref:`transferring
<pos/restaurant/floors/transfer>` orders, defining :ref:`presets <pos/restaurant/orders/preset>`,
and managing :ref:`courses <pos/restaurant/orders/courses>`.

.. _pos/restaurant/orders/process:

Order process
-------------

To process an order from the POS register, follow these steps:

#. Click products to add them to the cart.
#. Define how the order is handled:

   - Click :guilabel:`Set Table` to link the order to a table. Enter a table number and click
     :guilabel:`Assign`.
   - Click :guilabel:`Set Tab` to enter the open order's name and click :guilabel:`Apply`.
#. Click :guilabel:`Order` to validate the order.

When ready, :ref:`process the order payment <pos/restaurant/bills/payment>`.

.. note::
   Clicking :guilabel:`Order` redirects to the :ref:`Floor plan <pos/restaurant/floors>` view if
   :guilabel:`Tables` is selected as the :ref:`default start screen <pos/restaurant/default>`.

.. tip::
   - To cancel an order, click the :icon:`fa-ellipsis-v` (:guilabel:`Actions`) icon, then
     :guilabel:`Cancel Order`. If an :ref:`order printer is configured
     <pos/restaurant/orders-printing>`, a cancellation ticket is automatically printed for an
     order sent to the kitchen.
   - After selecting a table in the :ref:`Floor plan <pos/restaurant/floors>` view, click
     :guilabel:`Release table` in the cart to cancel the table's occupancy. This action is
     available when the cart is empty.
   - :ref:`Configure a printer <pos/restaurant/orders-printing>` to send an order to the kitchen
     printer when clicking :guilabel:`Order`.

.. _pos/restaurant/floors/transfer:

Order transfer
--------------

To transfer an order to another table from the :ref:`POS register <pos/restaurant/orders>`, click
the :icon:`fa-ellipsis-v` (:guilabel:`Actions`) icon, then :guilabel:`Transfer/Merge`, and choose
the target table in the :ref:`Floor plan <pos/restaurant/floors>` view:

   - Select an available table to transfer customers and their orders.
   - Select an occupied table to merge customers and their orders.

.. _pos/restaurant/orders/preset:

Presets
-------

Presets are used to apply preconfigured settings to orders and determine whether an order is for
:guilabel:`Dine In`, :guilabel:`Takeout`, or :guilabel:`Delivery`. They also control whether
customer contact information is required and apply capacity limits based on opening hours and order
quantity.

To use preconfigured presets, go to the :ref:`POS settings <configuration/settings>` and
enable the :guilabel:`Take out / Delivery / Members` setting under the :guilabel:`Point of Sale`
section. Set the :guilabel:`Default` field to the preferred preset, then save. From the
:ref:`register <pos/restaurant/orders>`, select the relevant preset, and :ref:`process the order
<pos/restaurant/orders/process>`:

- :guilabel:`Dine In`: Assign a :ref:`table or open a tab <pos/restaurant/orders/process>`.
- :guilabel:`Takeout`: Enter the order's name and click :guilabel:`Apply`, then select a date
  and a time slot.
- :guilabel:`Delivery`: Select an existing customer, or click :guilabel:`Create` to add one. Then,
  select a time slot.

.. tip::
   Click the preset button to switch to another one.

.. seealso::
   - :doc:`/applications/sales/point_of_sale/preparation`
   - :doc:`/applications/sales/point_of_sale/online_food_delivery`

.. _pos/restaurant/orders/courses:

Courses
-------

The :guilabel:`Course` button allows for splitting orders into multiple courses, sending each course
to the kitchen sequentially.

To split an order into courses from the :ref:`register <pos/restaurant/orders>`, click
:guilabel:`Course` and add products. Repeat the action as many times as needed, then click
:guilabel:`Order` to send the order to the kitchen, which also fires the first course.

When ready for the second course, retrieve the order from the :ref:`Floor plan
<pos/restaurant/floors>` view or the :guilabel:`Orders` overview, and click :guilabel:`Fire Course
2`. Repeat the action as many times as needed.

.. tip::
   - Alternatively, click :guilabel:`Course` as often as needed to display the desired number of
     courses in the cart. Then, click each course, add products, and click :guilabel:`Order`.
   - To transfer a product or an entire course into another course, select it in the cart, click
     the :icon:`fa-ellipsis-v` (:guilabel:`Actions`) icon, then :icon:`fa-arrow-down`
     :guilabel:`Transfer course`, and select the preferred course.

.. _pos/restaurant/orders-printing:

Order printing
==============

To enable sending orders to a kitchen or a bar printer, :doc:`connect a printer
<configuration/epos_printers>` to Odoo, go to the :ref:`POS settings <configuration/settings>`, and
follow these steps:

#. Scroll down to the :guilabel:`Preparation` section and enable the :guilabel:`Preparation
   Printers` setting.
#. Type the printer's name in the :guilabel:`Printers` field and click :guilabel:`Create and edit`.
#. On the printer setup form, select the :guilabel:`Printer Type`:

   - If the printer is connected to an :doc:`IoT system </applications/general/iot>`, select
     :guilabel:`Use a printer connected to the IoT`, and choose the relevant :doc:`device
     </applications/general/iot/devices/printer>`. This process requires the IoT app and an IoT
     system.
   - If using an :doc:`Epson printer that does not require an IoT system connection
     <configuration/epos_printers>`, select :guilabel:`Use an Epson printer` and enter the
     :guilabel:`Epson Printer IP Address`.
#. Define the product categories to be printed by clicking :guilabel:`Add a line` in the
   :guilabel:`Printed Product Categories` field and selecting the preferred category from the
   popover.
#. Click :guilabel:`Save`.
#. In the :ref:`POS settings <configuration/settings>`, click :guilabel:`Save`.

The printer is then connected to the point of sale and can print kitchen orders and order receipts.

.. note::
   - Printing kitchen orders requires assigning a :guilabel:`PoS Product Category`.
   - To create a :guilabel:`Printed Product Category` on the :guilabel:`Add: Printed Product
     Categories` popover, click :guilabel:`New`. Enter a name, select a :guilabel:`Parent Category`,
     choose a :guilabel:`Color`, click the :icon:`fa-pencil` (:guilabel:`Edit`) icon to add an
     image, determine the product availability, then click :guilabel:`Save & Close`.

.. tip::
   - To access all preparation printers from the :ref:`POS settings <configuration/settings>`,
     scroll down to the :guilabel:`Preparation` section and click :icon:`oi-arrow-right`
     :guilabel:`Printers`. Alternatively, go to :menuselection:`Point of Sale --> Orders -->
     Preparations Printers`.
   - After :ref:`processing an order <pos/restaurant/orders/process>`, click the :icon:`fa-cutlery`
     (:guilabel:`order`) icon in the :ref:`POS register <pos/restaurant/orders>` next to
     :guilabel:`Payment` to reprint a duplicate of the last kitchen order.

.. seealso::
   - :doc:`Connect an IoT system to a POS <configuration/pos_iot>`
   - :doc:`/applications/general/iot/devices/printer`
   - :doc:`/applications/general/iot/connect`
   - :doc:`/applications/sales/point_of_sale/preparation`

.. _pos/restaurant/bills:

Bills and payment
=================

.. _pos/restaurant/bills/splitting:

Bill splitting
--------------

To allow bill splitting, go to :menuselection:`Point of Sale --> Configuration --> Settings`, and
enable :guilabel:`Allow Bill Splitting` under the :guilabel:`Point of Sale` section.

To split a bill from the :ref:`POS register <pos/restaurant/orders>`, follow these steps:

#. Click the :icon:`fa-ellipsis-v` (:guilabel:`Actions`) icon, then :guilabel:`Split`.
#. Select at least one product and perform one of the following actions:

   - :guilabel:`Payment`: Process the direct payment for the selected product(s).
   - :guilabel:`Split Order`: Create a sub-order.
   - :guilabel:`Transfer`: Transfer one or all products to another table.
#. Process the :ref:`payment <pos/restaurant/bills/payment>`.
#. Click :icon:`fa-chevron-right` :guilabel:`Continue` and repeat the process for each guest.

.. note::
   Splitting a bill requires ordering at least two products and creates a sub-order, which must
   be paid before returning to the main order.

.. _pos/restaurant/bills/payment:

Order payment
-------------

To proceed with the order payment from the :ref:`POS register <pos/restaurant/orders>`, follow
these steps:

#. Click :guilabel:`Payment`.
#. Select a :doc:`payment method <payment_methods>`.
#. Optionally, select a customer and send an invoice to them:

   - Click :icon:`fa-user` :guilabel:`Customer` to select or create a customer account.
   - Enable :icon:`fa-file-text-o` :guilabel:`Invoice` to allow sending an invoice to the
     customer.
#. Click :guilabel:`Validate`.

.. _pos/restaurant/bills/printing:

Receipt printing
----------------

To allow receipt printing, go to :menuselection:`Point of Sale --> Configuration --> Settings`, and
enable :guilabel:`Early Receipt Printing` under the :guilabel:`Point of Sale` section.

After a successful :ref:`order payment <pos/restaurant/bills/payment>`, click :icon:`fa-print`
:guilabel:`Print Full Receipt` to generate and print a bill.

.. important::
   If a printer is :doc:`configured and linked <configuration/epos_printers>` to a point of sale,
   the receipt is automatically printed upon payment confirmation.

.. seealso::
   :doc:`/applications/sales/point_of_sale/receipts_invoices`

.. _pos/restaurant/tips:

Tips
====

Configuration
-------------

To allow tipping in a POS, go to the :ref:`POS settings <configuration/settings>`, scroll down to
the :guilabel:`Payment` section, enable :guilabel:`Tips`, and click :guilabel:`Save`.

.. important::
   - The :guilabel:`Add tip after payment` setting only works for a POS in the United States
     of America with an :doc:`Adyen <payment_methods/terminals/adyen>` or a :doc:`Stripe
     <payment_methods/terminals/stripe>` :ref:`payment terminal <pos/terminals/configuration>`.
   - The :guilabel:`Add tip through payment terminal (Adyen)` setting only works with an
     :ref:`Adyen <adyen/tips>` terminal.

.. note::
   - Saving the :guilabel:`Tips` setting automatically fills the :guilabel:`Tip product` field
     with the preconfigured :guilabel:`[TIPS] Tips` product, which is only used for tips. When
     selecting another product in the :guilabel:`Tip product` field, the chosen product is no
     longer available on the :ref:`POS register <pos/restaurant/orders>`.
   - Choose only one tip product per POS.

.. _pos/restaurant/tips/add-tips:

Tip and payment
---------------

To process a tip during :ref:`payment <pos/restaurant/bills/payment>`, follow these steps:

#. Click :icon:`fa-heart` :guilabel:`Tip`, add the amount, then click :guilabel:`Ok`.
#. Select a :doc:`payment method <payment_methods>` for the order and the tip.
#. Click :guilabel:`Validate`.

.. tip::
   If the order and the tip are paid using different payment methods, select a :doc:`payment method
   <payment_methods>` for the order first. Then, select a payment method for the tip, click
   :icon:`fa-heart` :guilabel:`Tip`, add the tip amount, and click :guilabel:`Ok`.
   Finally, :guilabel:`Validate` the payment.

Tip after payment (US only)
---------------------------

To allow tipping after payment for a POS in the United States of America, ensure the :guilabel:`Add
tip after payment` setting is enabled in the :ref:`POS settings <configuration/settings>`. To
process tips after payment, follow these steps:

#. On the :guilabel:`Payment` screen, select a :guilabel:`Card` payment method linked to a
   :doc:`Stripe <payment_methods/terminals/stripe>` or :doc:`Adyen
   <payment_methods/terminals/adyen>` terminal.
#. Click :guilabel:`Close Tab` and select the relevant option in the :guilabel:`Add a tip` screen:

   - :guilabel:`15%`, :guilabel:`20%`, or :guilabel:`25%`: Tip rates based on order total.
   - :guilabel:`No Tip`.
   - :guilabel:`Tip Amount`: Enter the relevant amount in the field.
#. Click :guilabel:`Settle` to validate.


==================================================
SECTION: sales_order.rst
PATH: applications/sales/point_of_sale/shop/sales_order.rst
==================================================

============
Sales orders
============

When working in retail, you might need to order products directly from your Point of sale.
Fortunately, Odoo Point of Sale is fully integrated with Odoo Sales, meaning that you can create a
sales order and pay for it directly from your point of sale.

Select a sales order
====================

From the **Point of Sale** application, open a new session. Then, click on
:guilabel:`Quotations/Orders` to get the complete list of quotations and sales orders created on the
sales application.

.. image:: sales_order/pos-interface.png
   :align: center
   :alt: Quotations and sales order button on the Point of Sale interface

.. note::
   To ease finding the right sales order, you can filter that list on the **customer** or on the
   **order reference**. You can also set the customer before clicking on
   :guilabel:`Quotations/Orders` to reduce the list to one particular customer.

Apply a down payment or settle the order
========================================

From the list of sales order, select one to make a payment.

.. image:: sales_order/list-of-so.png
   :align: center
   :alt: list view of sales orders and quotations

You can either:

- Settle the order **partially**: after clicking on :guilabel:`Apply a down payment`, enter the
  percentage of down payment you want the customer to pay. Then, click on :guilabel:`ok` and proceed
  with the order.
- Settle the order **completely**: click on :guilabel:`Settle the order` to pay for the total of the
  sales order.

.. note::
   Once you settle a sales order, the applied down payment is automatically deducted from the total
   amount.

.. Seealso::
   - :doc:`/applications/sales/sales/invoicing/down_payment`


==================================================
SECTION: self_order.rst
PATH: applications/sales/point_of_sale/self_order.rst
==================================================

=============
Self-ordering
=============

The self-ordering feature allows customers to browse your menu or product catalog, place an order,
and complete payment using their mobile device or a self-ordering kiosk.

Configuration
=============

Feature activation
------------------

To enable this feature and select a self-ordering type, access the :ref:`POS settings
<configuration/settings>`, scroll down to the :guilabel:`Mobile self-order & Kiosk` section, and
select a :guilabel:`Self Ordering` type under the :guilabel:`QR menu & Kiosk activation` section.

You can choose from:

.. tabs::

   .. group-tab:: QR menu

      Select :guilabel:`QR menu` or :guilabel:`QR menu + Ordering` to give customers access to your
      menu or product catalog by scanning a QR code on their personal device. The latter also
      allows them to place an order and make a payment.

      .. image:: self_order/qr-activation.png
         :alt: QR menu and kiosk setting activation

      - Click :icon:`fa-arrow-right` :guilabel:`Print QR Codes` to download a .pdf document with the
        generated QR codes.
      - Click :icon:`fa-arrow-right` :guilabel:`Download QR Codes` to download a compressed file
        with the generated QR codes.

      .. note::
         In :ref:`restaurants <pos/restaurant/floors>`, printing or downloading QR codes generates
         as many QR codes as the number of available tables. In **shops**, it generates only one
         generic QR code.

      .. tip::
         To customize QR codes,

         #. Scan the relevant QR code to acquire its URL.
         #. Use a QR code generator (e.g., `QR code monkey <https://www.qrcode-monkey.com>`_ or `QR
            code generator <https://www.qr-code-generator.com>`_) to create a custom QR code.

   .. group-tab:: Kiosk

      When :guilabel:`Kiosk` is selected, customers can access the menu or product catalog, place
      orders, and pay from a self-ordering kiosk.

      .. image:: self_order/kiosk-activation.png
         :alt: QR menu and kiosk setting activation

Once a self-ordering type is selected, the :ref:`additional settings <pos/self_order/add-settings>`
update to fit the selected type's needs.

.. _pos/self_order/add-settings:

Additional settings
-------------------

.. tabs::

   .. tab:: Home buttons

      The :guilabel:`Home buttons` are displayed on the kiosk or mobile device interfaces when
      customers are self-ordering. To set them up, click :icon:`fa-arrow-right` :guilabel:`Home
      buttons`. Then,

      #. Click :guilabel:`New` to add a new button.
      #. Set the :guilabel:`Label`.
      #. Enter a :guilabel:`URL` preceded by `https://` to redirect customers to a specific URL when
         clicking the button. For instance, you might want to redirect them to a campaign video for
         a new product or to a contest page.
      #. In the same :guilabel:`URL` column, enter `/products` to create a button that redirects
         customers to the product catalog.
      #. Select the :guilabel:`Points of Sale` to ensure this button only appears on the selected
         POS' self-ordering interface.
      #. Select a predefined :guilabel:`Style` from the dropdown menu.

      .. note::
         - Leaving the :guilabel:`Points of Sale` field empty shares the button with all POS.
         - The :guilabel:`Preview` column automatically updates,  giving you a glimpse of the
           button's appearance based on its configuration.

   .. tab:: Service location and payment options

      - Set where the service occurs by selecting :guilabel:`Table` or :guilabel:`Pickup zone`
        under the :guilabel:`Service` field.
      - Define when and how customers pay in the :guilabel:`Pay after` field. Customers can pay
        after :guilabel:`Each meal` or for :guilabel:`Each order`.
      - The service location and payment options available depend on the type of self-ordering
        service and POS:

        - **QR menu + Ordering**:

          - **Restaurants**: Customers can be served at their table or the pickup zone.

            - When served at their table, they can pay after each meal or each order.
            - When served at the pickup zone, they can only pay after each order.
          - **Shops**: Customers can only be served at the pickup zone and pay after each order.
          - Regardless of the type of POS, customers can pay :doc:`online
            </applications/finance/payment_providers>` or using any configured :doc:`payment
            method <payment_methods>`.

        - **Kiosk**:

          - Regardless of the type of POS, customers can either be served at their table or in the
            pickup zone, but they must pay after each order.
          - The kiosk self-ordering only works with :doc:`Adyen <payment_methods/terminals/adyen>`
            and :doc:`Stripe <payment_methods/terminals/stripe>` terminals.
          - The :guilabel:`Online Payment` feature is not supported.

      .. seealso::
         - :doc:`../../finance/payment_providers`
         - :doc:`payment_methods`

   .. tab:: Language

      This option allows you to enable multiple languages for the self-ordering interface. The
      suggested languages are those already installed in Odoo. To expand the selection, add more
      languages:

      #. Click :icon:`fa-arrow-right` :guilabel:`Add Languages`.
      #. Add as many languages as needed to the :guilabel:`Languages` field.
      #. Click :guilabel:`Add`.
      #. Add those languages to the :guilabel:`Available` field.

      .. seealso::
         :doc:`../../general/users/language`

   .. tab:: Splash screens

      Splash screens are introductory screens displayed when the self-ordering interface or kiosk is
      launched. They typically contain branding, welcome messages, or usage instructions.

      - To add a splash screen image, click :icon:`fa-paperclip` :guilabel:`Add images`, select and
        open an image.
      - To remove a splash screen image, hover over the image and click :icon:`fa-times`
        (:guilabel:`Delete`).

      .. note::
         You can add multiple splash screen images at once.

   .. tab:: Eat in/ Take out

      Activate this setting to :doc:`adjust the tax rate <pricing/fiscal_position>` based on whether
      customers dine in or take their order to go. Then,

      - Fill in the field with an existing :guilabel:`Alternative Fiscal Position`;
      - Create and set up a new fiscal position by filling in the field and clicking
        :guilabel:`Create & Edit`; or
      - Create and set up a new fiscal position by clicking :icon:`fa-arrow-right` :guilabel:`Fiscal
        Positions`.

      .. seealso::
         :doc:`pricing/fiscal_position`

Preview
-------

Review the interface before making the self-ordering feature available to customers to ensure all
settings are applied correctly. Click :icon:`fa-arrow-right` :guilabel:`Preview Web interface`
under the :guilabel:`Self  Ordering` field to ensure all :ref:`additional settings
<pos/self_order/add-settings>` are correctly applied.

Usage guidelines
================

.. tabs::

   .. group-tab:: QR menu

      On the POS user's end, access the self-ordering interface by

      - Scanning a downloaded or printed QR code; or
      - Clicking the :icon:`fa-ellipsis-v` (:guilabel:`vertical ellipsis`) icon on the POS card,
        then :guilabel:`Mobile Menu`.

      On the customers' end,

      #. Access the self-ordering interface by scanning a downloaded or printed QR code.
      #. Click the :ref:`home button <pos/self_order/add-settings>` to reach the menu or catalog.
      #. Select the items and click :guilabel:`Order` to place an order.
      #. Follow the instructions on-screen to assign a table and pay for the order.

   .. group-tab:: Kiosk

      On the POS user's end,

      #. Click :guilabel:`Start Kiosk`.
      #. Open the provided URL on the self-ordering kiosk(s).

         - Click the provided URL to open the kiosk in a new tab;
         - Click :guilabel:`Install App` to install the kiosk module on your self-ordering kiosk; or
         - Click :guilabel:`Open on IoT Box` if your kiosk is :doc:`connected to an IoT system
           <../../general/iot/connect>`

      .. image:: self_order/kiosk-opening-popup.png
         :alt: Popup window to open the kiosk

      .. note::
         - Once a session is open, :guilabel:`Start Kiosk` switches to :guilabel:`Open Kiosk` on the
           POS card.
         - Click :guilabel:`Open Kiosk` on the POS card to reopen the popup window and access the
           self-ordering interface.

      On the customers' end,

      #. Click the :ref:`home button <pos/self_order/add-settings>` from a self-ordering kiosk to
         reach the menu or product catalog.
      #. Select the items and click :guilabel:`Order` to place an order.
      #. Follow the instructions on-screen to assign a table and pay for the order.

      .. image:: self_order/kiosk-endscreen.png
         :alt: kiosk end-screen for customers
         :scale: 65 %

.. important::
   - A POS session must be open for customers to place an order.
   - Once an order is placed, it is automatically sent to :doc:`the preparation screen
     <preparation>` and added to the list of POS orders.


==================================================
SECTION: serial_numbers.rst
PATH: applications/sales/point_of_sale/shop/serial_numbers.rst
==================================================

=======================
Serial numbers and lots
=======================

Working with **serial numbers** and **lots** allows tracking your products' movements. When products
are tracked, the system identifies their location based on their last movement.

To enable traceability, go to :menuselection:`Point of Sale --> Products --> Products`. Then,
select a product and check the :guilabel:`Tracking By Unique Serial Number` or the
:guilabel:`Tracking By Lots` box in the :guilabel:`Inventory` tab.

.. image:: serial_numbers/product-form-traceability.png
   :align: center
   :alt: Enable traceability settings

Serial numbers and lots importation
===================================

You can import serial numbers in Point of Sale. To do so, select a **sales order** or a
**quotation** containing tracked products. Then, agree to load the **Lots or Serial Numbers** linked
to the :abbr:`SO (sales order)`.

.. image:: serial_numbers/importing-sn.png
   :align: center
   :width: 480
   :alt: Pop-up window for serial number import

The imported tracking numbers appear below the tracked products. You can modify them by clicking on
the list-view button next to the products.

.. image:: serial_numbers/pos-sn-imported.png
   :align: center
   :width: 480
   :alt: Pop-up window for serial number import

.. seealso::
   - :doc:`../shop/sales_order`

Serial numbers and lots creation
================================

If a tracked product is available in your POS, adding the product to the cart opens a pop-up window
where you can type or scan the product's serial or lot numbers. To add more than one of the same
tracked products, click on **enter** to validate and start a new line.

.. image:: serial_numbers/create-change-sn.png
   :align: center
   :width: 480
   :alt: adding new serial and lots numbers

.. note::
   - Changing a tracked product's quantity using the numpad turns the list-view button red. Click on
     it to add the missing lot and serial numbers.
   - :guilabel:`Lot & Serial Number(s)` are :guilabel:`required` on tracked products but not
     mandatory. Meaning that not attributing some or any does **not** prevent from completing the
     sale.

.. seealso::
   - :doc:`/applications/inventory_and_mrp/inventory/product_management/product_tracking/serial_numbers`
   - :doc:`/applications/inventory_and_mrp/inventory/product_management/product_tracking/lots`


==================================================
SECTION: ship_later.rst
PATH: applications/sales/point_of_sale/shop/ship_later.rst
==================================================

==========
Ship later
==========

The **Ship Later** feature allows you to sell products and schedule delivery at a later date. It is
useful, for example, when a product is out of stock or so voluminous that it requires to be shipped,
or if, for any reason, the customer needs their order to be shipped later, etc.

Configuration
=============

:ref:`Go to the POS settings <configuration/settings>`, scroll down to the :guilabel:`Inventory`
section, and enable :guilabel:`Allow Ship Later`.

.. image:: ship_later/settings.png
   :scale: 85%
   :alt: settings to enable and configure the ship later feature

Once activated, you can:

- Choose the location from where the products are shipped by selecting a :guilabel:`Warehouse`.
- Define a :guilabel:`Specific route`, or leave this field empty to use the default route.
- Define the :guilabel:`Shipping Policy`; select :guilabel:`As soon as possible` if the products
  can be delivered separately or :guilabel:`When all products are ready` to ship all the products at
  once.

.. seealso::
   - :doc:`../../../inventory_and_mrp/inventory/shipping_receiving/setup_configuration`
   - :doc:`../../../inventory_and_mrp/inventory/warehouses_storage/inventory_management/warehouses`

Practical application
=====================

#. :ref:`Open a session <pos/session-start>` and make a sale.
#. On the payment screen, set a customer and select :guilabel:`Ship Later`.
#. On the popup window, set a shipping date and click :guilabel:`Confirm` to proceed to payment.

.. image:: ship_later/payment.png
   :scale: 75%
   :alt: selecting ship later at checkout.

The system instantly creates a delivery order from the warehouse to the shipping address.

.. Note::
   The selected customer must have referenced an address in the system for products to be shipped.


==================================================
SECTION: shop.rst
PATH: applications/sales/point_of_sale/shop.rst
==================================================

:nosearch:

=============
Shop features
=============

.. toctree::
   :titlesonly:

   shop/sales_order
   shop/barcode
   shop/serial_numbers
   shop/ship_later


==================================================
SECTION: six.rst
PATH: applications/sales/point_of_sale/payment_methods/terminals/six.rst
==================================================

===
SIX
===

Connecting a SIX payment terminal allows you to offer a fluid payment flow to your customers and
ease the work of your cashiers.

.. warning::
   Although Worldline has acquired SIX Payment Services and both entities utilize Yomani payment
   terminals, their firmware differs. Terminals supplied by Worldline are, therefore, incompatible
   with this integration.

Configuration
=============

Prerequisites
-------------

#. Install the POS IoT Six module: :doc:`Activate the POS IoT Six module module
   <../../../../general/apps_modules>` to enable the payment terminal.

   .. note::
      This module replaces the **POS Six** module.
#. Connect an IoT system: :doc:`A Raspberry Pi or a virtual IoT system (for Windows OS only)
   </applications/general/iot/connect>` is required to connect a SIX payment terminal to Odoo.

.. _six/configure:

Configure the payment method
----------------------------

#. Enable the payment terminal :ref:`in the application settings <configuration/settings>` and
   :doc:`create a payment method for SIX terminals <../../payment_methods>`.
#. Set the journal type as :guilabel:`Bank`.
#. Fill in the :guilabel:`Outstanding Account` field.
#. Select :guilabel:`Terminal` in the :guilabel:`Integration` field.
#. Select :guilabel:`SIX IOT` in the :guilabel:`Integrate with` field.
#. Click :guilabel:`Setup Six Terminal`.

.. image:: six/new-payment-method.png
   :alt: Creating a new payment method for the SIX payment terminal
   :scale: 45 %

In the modal window,

#. Click the :guilabel:`IoT Box` field and select the IoT system from the dropdown menu.
#. Enter the :guilabel:`Six Terminal ID (TID)` provided by SIX.
#. Select the :guilabel:`Terminal Device` from dropdown menu.
#. Finally, click :guilabel:`Add Terminal`.

.. image:: six/terminal-wizard.png
   :alt: Configuring the Terminal ID for the SIX payment terminal

.. note::
   Ensure the SIX terminal is online and connected to the same network as the IoT system.

Link the payment method to a POS
--------------------------------

Once the payment method is created, it can be selected in the POS settings. To do so,

#. Go to the :ref:`POS' settings <configuration/settings>`.
#. Add the payment method under the :guilabel:`Payment methods` field within the :guilabel:`Payment`
   section.


==================================================
SECTION: stripe.rst
PATH: applications/sales/point_of_sale/payment_methods/terminals/stripe.rst
==================================================

======
Stripe
======

Connecting a payment terminal allows you to offer a fluid payment flow to your customers and ease
the work of your cashiers.

.. important::
   - Stripe payment terminals do not require an :doc:`IoT Box </applications/general/iot>`
   - Stripe terminals can be used in many countries, but not worldwide. Check the `global
     availability for Stripe Terminal <https://support.stripe.com/questions/global-availability-for-stripe-terminal>`_.
   - Stripe's integration works with `Stripe Terminal smart readers <https://docs.stripe.com/terminal/smart-readers>`_

.. seealso::
   - :doc:`Stripe as payment provider <../../../../finance/payment_providers/stripe>`
   - `List of payment methods supported by Stripe <https://stripe.com/payments/payment-methods>`_

Configuration
=============

Configure the payment method
----------------------------

Activate **Stripe** in the settings by going to :menuselection:`Point of Sale --> Configuration -->
Settings --> Payment Terminals` and enabling :guilabel:`Stripe`.

Then, create the payment method:

- Go to :menuselection:`Point of Sale --> Configuration --> Payment Methods`, click
  :guilabel:`Create`, and complete the :guilabel:`Method` field with your payment method's name;
- Set the :guilabel:`Journal` field as :guilabel:`Bank` and the :guilabel:`Use a Payment Terminal`
  field as :guilabel:`Stripe`;
- Enter your payment terminal serial number in the :guilabel:`Stripe Serial Number` field;
- Click :guilabel:`Don't forget to complete Stripe connect before using this payment method.`

.. image:: stripe/create-method-stripe.png
   :align: center
   :alt: payment method creation form

.. note::
   - Click :guilabel:`Identify Customer` to allow this payment method **exclusively** for identified
     customers. For any unidentified customers to be able to pay with Stripe, leave the
     :guilabel:`Identify Customer` field unchecked.
   - The :guilabel:`Outstanding Account` and the :guilabel:`Intermediary Account` can stay empty to
     use the default accounts.
   - Find your payment terminal serial number under the device or on `Stripe's dashboard
     <https://dashboard.stripe.com>`_.

Connect Stripe to Odoo
----------------------

Click :guilabel:`Connect Stripe`. Doing so redirects you automatically to a configuration page.
Fill in all the information to create your Stripe account and link it with Odoo. Once the forms are
completed, the API keys (:guilabel:`Publishable Key` and :guilabel:`Secret Key`) can be retrieved on
**Stripe's** website. To do so, click :guilabel:`Get your Secret and Publishable keys`,
click the keys to copy them, and paste them into the corresponding fields in Odoo. Your terminal is
ready to be configured in a POS.

.. image:: stripe/stripe-connect.png
   :align: center
   :alt: stripe connection form

.. note::
   - When you use **Stripe** exclusively in Point of Sale, you only need the **Secret Key** to use
     your terminal.
   - When you use Stripe as **payment provider**, the :guilabel:`State` can stay set as
     :guilabel:`Disabled`.
   - For databases hosted **On-Premise**, the :guilabel:`Connect Stripe` button does not work. To
     retrieve the API keys manually, log in to your `Stripe dashboard
     <https://dashboard.stripe.com>`_, type `API` in the search bar, and click
     :guilabel:`Developers > API`.

Configure the payment terminal
------------------------------

Swipe right on your payment terminal, click :guilabel:`Settings`, enter the admin PIN code, validate
and select your network.

.. note::
   - The user's device and the terminal must share the same network.
   - In case of a Wi-Fi connection, the network must be secured.
   - You must enter the admin PIN code to access your payment terminal settings. By default, this
     code is `07139`.

Link the payment method to a POS
--------------------------------

To add a **payment method** to your point of sale, go to :menuselection:`Point of Sale -->
Configuration --> Settings`. Select the POS, scroll down to the :guilabel:`Payments` section, and
add your payment method for **Stripe** in the :guilabel:`Payment Methods` field.

Troubleshooting
===============

Payment terminal unavailable in your Stripe account
---------------------------------------------------

If the payment terminal is unavailable in your Stripe account, you must add it manually:

#. Log into your `Stripe's dashboard <https://dashboard.stripe.com>`_ and go to
   :menuselection:`Stripe dashboard --> Payments --> Readers --> Locations`;
#. Add a location by clicking the :guilabel:`+ New` button or selecting an already created location;
#. Click the :guilabel:`+ New` button in the :guilabel:`Readers` box and fill in the required
   information.

.. note::
   You must provide a **registration code**. To retrieve that code, swipe right on your device,
   enter the admin PIN code (by default: `07139`), validate, and click :guilabel:`Generate a
   registration code`.


==================================================
SECTION: terminals.rst
PATH: applications/sales/point_of_sale/payment_methods/terminals.rst
==================================================

:show-content:

=================
Payment terminals
=================

Connect and integrate a payment terminal to a :ref:`POS system <pos/session-start>` to accept
multiple payment options, including credit and debit cards.

.. _pos/terminals/configuration:

Configuration
=============

To activate a payment terminal and allow processing payments with it, follow these steps:

#. Go to :menuselection:`Point of Sale --> Configuration --> Settings` and scroll down to the
   :guilabel:`Payment Terminals` section.
#. Enable the relevant terminal.
#. Click :guilabel:`Save`.
#. Go to :menuselection:`Point of Sale --> Configuration --> Payment Methods` and :doc:`create the
   corresponding payment method <../payment_methods>`.
#. Set the :guilabel:`Integration` field to :guilabel:`Terminal`, select the relevant terminal, and
   complete the terminal-specific configuration:

   - :doc:`Adyen <terminals/adyen>`
   - :doc:`Ingenico <terminals/ingenico>`
   - :doc:`Mercado Pago <terminals/mercado_pago>`
   - :doc:`Pine Labs <terminals/pine_labs>`
   - :doc:`QFPay <terminals/qfpay>`
   - :doc:`Razorpay <terminals/razorpay>`
   - :doc:`SIX <terminals/six>`
   - :doc:`Stripe <terminals/stripe>`
   - :doc:`Tyro <terminals/tyro>`
   - :doc:`Viva.com <terminals/viva_com>`
   - :doc:`Worldline <terminals/worldline>`
#. Save.

.. _pos/terminals/terminal-use:

Terminal use
============

To process a :ref:`payment <pos/sell>` with a :ref:`configured terminal
<pos/terminals/configuration>` for an order, select the terminal's :doc:`payment method
<../payment_methods>` on the :guilabel:`Payment` screen, then follow the instructions on the
terminal device.

Once the transaction is successful, the payment is automatically validated in Point of Sale.

.. note::
   - Connection issues between Odoo and the payment terminal result in transaction cancellation.
   - To cancel the payment request, click :guilabel:`Cancel`.

.. toctree::
   :titlesonly:

   terminals/adyen
   terminals/ingenico
   terminals/mercado_pago
   terminals/pine_labs
   terminals/qfpay
   terminals/razorpay
   terminals/six
   terminals/stripe
   terminals/tyro
   terminals/viva_com
   terminals/worldline


==================================================
SECTION: tyro.rst
PATH: applications/sales/point_of_sale/payment_methods/terminals/tyro.rst
==================================================

====
Tyro
====

Connecting a **Tyro** :doc:`payment terminal <../terminals>` allows you to offer a fluid payment
flow to your customers and ease the work of your cashiers.

.. important::
   **Tyro** payment terminals are only supported in **Australia**.

.. _pos/tyro/configuration:

Configuration
=============

Pair the terminal with your POS system
--------------------------------------

#. Click the :icon:`fa-bars` (hamburger menu) icon and :guilabel:`Payment settings` on your
   terminal.
#. Enter your admin password.
#. Scroll down and click :guilabel:`Pair with POS`.
#. Click the :icon:`fa-plus` :guilabel:`Pair with POS` button.
#. Save the :guilabel:`MID` (Merchant ID) and :guilabel:`TID` (Terminal ID),  which are now
   displayed on the screen.

.. note::
   - The **admin password** is the password that you chose when you configured the terminal.
   - The steps to reach the pairing screen may differ depending on your terminal model. Information
     on configuring the various terminals can be found on `Tyro's website
     <https://www.tyro.com/set-up/>`_.

Configure the payment method
----------------------------

#. Install the :ref:`POS Tyro module <general/install>`.
#. :doc:`Create a new payment method <../../payment_methods>`:

   - Go to :menuselection:`Point of Sale --> Configuration --> Payment Methods` and click
     :guilabel:`New`.
   - Set the :guilabel:`Journal` as :guilabel:`Bank`
   - Select :guilabel:`Terminal` in the :guilabel:`Integration` field.
   - Select :guilabel:`Tyro` in the :guilabel:`Integrate with` field.
   - Fill in the :guilabel:`Tyro Merchant ID` and :guilabel:`Tyro Terminal ID` with the :abbr:`MID
     (Merchant ID)` and :abbr:`TID (Terminal ID)` displayed on the terminal.
#. To pair the payment method with the terminal, click the :guilabel:`Pair Terminal` button. This
   action sends a pairing request to the terminal, which takes a few seconds to complete.

   .. image:: tyro/create-payment-method.png
      :alt: Form to create a new payment method.

   .. important::
      The :guilabel:`Tyro Mode` field must be set to :guilabel:`Production Mode`.

Add the payment method to a POS
--------------------------------

To add a **payment method** to your point of sale:

#. Go to the :ref:`POS settings <configuration/settings>`.
#. Select the POS in the :guilabel:`Point of Sale` field.
#. Add the payment method under the :guilabel:`Payment Methods` field of the :guilabel:`Payment`
   section.


==================================================
SECTION: viva_com.rst
PATH: applications/sales/point_of_sale/payment_methods/terminals/viva_com.rst
==================================================

========
Viva.com
========

**Viva.com** is a payment service that offers payment solutions through the **viva.com Terminal**
app for :doc:`physical <../terminals>` and virtual terminals.

.. note::
   - Viva.com payment terminals do not require an :doc:`IoT Box </applications/general/iot>` to
     operate.
   - `Many European countries <https://developer.viva.com/about-viva/>`_ support the use of Viva.com
     payment terminals.
   - The viva.com Terminal app turns a smartphone with an NFC chip into a `payment terminal
     <https://www.viva.com/en-gb/blog/tap-on-phone-turn-your-phone-into-a-mobile-card-reader>`_.

.. important::
   Odoo only supports the Euro currency with viva.com.

.. seealso::
   - `List of supported terminals <https://www.vivawallet.com/shop/terminals/terminals-4>`_
   - `List of supported payment methods <https://developer.viva.com/payment-methods/>`_

.. _viva/configuration:

Viva.com configuration
======================

To configure a viva.com terminal, go to the `Viva.com website <https://www.viva.com>`_, create an
account, and then follow these steps:

#. On the viva.com dashboard, go to :menuselection:`Settings --> API Access --> General`.
#. Copy the `Merchant ID and API key
   <https://developer.viva.com/getting-started/find-your-account-credentials/merchant-id-and-api-key/>`_.
#. Copy the `Client ID and the generated Client secret (POS API credentials)
   <https://developer.viva.com/getting-started/find-your-account-credentials/pos-apis-credentials/>`_.
#. Download the viva.com Terminal app on a device, then generate and copy the `activation code
   <https://euhelp.viva.com/en/articles/5316775-how-do-i-activate-the-viva-com-terminal>`_.
#. On the viva.com dashboard, go to :menuselection:`Sales --> Sales Transactions --> Physical
   Payments --> Card Terminals`.
#. Create a new `card terminal and paste the activation code
   <https://euhelp.viva.com/en/articles/5316775-how-do-i-activate-the-viva-com-terminal>`_.
#. Copy the :guilabel:`Terminal ID` generated by the terminal activation.

.. warning::
   The POS API credentials are only displayed once. Make sure to keep a copy to secure them.

.. note::
   - The POS API credentials are for APIs that use Basic Authentication, including those for Android
     and iOS POS activation and the `Cloud Terminal API
     <https://developer.viva.com/apis-for-point-of-sale/card-terminals-devices/rest-api/>`_.

Odoo POS configuration
======================

To connect the viva.com terminal with Odoo Point of Sale, follow these steps:

#. Go to :menuselection:`Point of Sale --> Configuration --> Settings`, scroll down to the
   :guilabel:`Payment Terminals` section, enable the :guilabel:`Viva.com` terminal, and click
   :guilabel:`Save`.
#. Go to :menuselection:`Point of Sale --> Configuration --> Payment Methods` and :doc:`create a
   payment method <../../payment_methods>`.
#. Set the :guilabel:`Journal` field to :guilabel:`Bank`.
#. Select the desired point of sale in the :guilabel:`Point of Sale` field.
#. Set the :guilabel:`Integration` field to :guilabel:`Terminal`.
#. Set the :guilabel:`Integrate with` field to :guilabel:`Viva.com`.
#. Paste the copied information from :ref:`viva.com <viva/configuration>` into the corresponding
   fields:

   - :guilabel:`Merchant ID`
   - :guilabel:`API Key`
   - :guilabel:`Client ID`
   - :guilabel:`Client secret`
   - :guilabel:`Terminal ID`

#. Save the form and copy the generated webhook URL from the :guilabel:`Viva Com Webhook
   Endpoint` field.
#. Go to the :ref:`viva.com <viva/configuration>` account and paste the webhook URL into the
   `corresponding field
   <https://developer.viva.com/webhooks-for-payments/transaction-payment-created/>`_.
#. Click :guilabel:`Save`.


==================================================
SECTION: worldline.rst
PATH: applications/sales/point_of_sale/payment_methods/terminals/worldline.rst
==================================================

=========
Worldline
=========

`Worldline <https://worldline.com/>`_ offers payment solutions through :doc:`payment terminals
<../terminals>` to handle customer transactions.

.. important::
   - Connecting a Worldline payment terminal to Odoo requires an :doc:`IoT system
     </applications/general/iot/connect>`.
   - Worldline is only available in **Belgium**, **the Netherlands**, and **Luxembourg** with Odoo.
   - Odoo is compatible with Worldline terminals that use the CTEP protocol (e.g., the **Yomani XR**
     and **Yoximo** terminals). Contact the payment provider to confirm the terminal's
     compatibility if necessary.

.. _pos/worldline/configuration:

Worldline configuration
=======================

First, enable the Worldline payment terminal in the :ref:`POS settings <configuration/settings>`
under :guilabel:`Payment Terminals`. Then :doc:`connect the IoT system to Odoo
</applications/general/iot/connect>` and follow these steps on the terminal:

#. **Configure the ECR protocol**:

   #. Press :menuselection:`"." --> 3 --> Stop --> 3 --> 0 --> 9`.
   #. Enter the technician password **1235789** and press **OK**.
   #. Press :menuselection:`4 --> 2 --> CTEP (ECR protocol)`. Press **OK** to confirm each of the
      following checks: **CTEP ticket ECR**, **ECR ticket width**, and **Character set**.
   #. Press **Stop** three times; the terminal restarts automatically.
#. **Set the hostname**:

   #. Press :menuselection:`"." --> 3 --> Stop --> 3 --> 0 --> 9`.
   #. Enter the technician password **1235789** and press **OK**.
   #. Press :menuselection:`4 --> 9 --> TCP/IP (ECR physical conf.)` and **OK** twice.
   #. Enter the :ref:`IoT's IP address <iot/connect/IoT-form>` on the **Hostname** screen by
      confirming each number with **OK** until the colon symbol, then confirm the step with **OK**.
      For example, if the IP address is `10.30.19.4:8069`, press :menuselection:`10 --> OK --> 30
      --> OK --> 19 --> OK --> 4 --> OK --> OK`.
#. **Set the port number**:

   #. Enter **9001** (if using an :doc:`IoT box </applications/general/iot/iot_box>`) or **9050**
      (if using a :doc:`Windows virtual IoT </applications/general/iot/windows_iot>`) on the
      **Network domain name** screen and press **OK** twice.
   #. Press **Stop** three times; the terminal restarts automatically.

The terminal is now active and displays the **Read card** screen.

.. important::
   The `9050` port must be added as a :ref:`Windows Firewall exception <iot/windows-iot/firewall>`
   for the :doc:`Windows virtual IoT </applications/general/iot>`.

.. tip::
   To check the terminal's connection status, open the IoT app and click the :ref:`IoT system's
   card <iot/connect/IoT-form>`.

.. _pos/worldline/odoo-configuration:

Odoo configuration
==================

To connect the Worldline terminal with Odoo Point of Sale, follow these steps:

#. Go to :menuselection:`Point of Sale --> Configuration --> Payment Methods` and :doc:`create a
   payment method <../../payment_methods>`.
#. Set the :guilabel:`Journal` field to :guilabel:`Bank`.
#. Set the :guilabel:`Integration` field to :guilabel:`Terminal`.
#. Set the :guilabel:`Integrate with` field to :guilabel:`Worldline`.
#. Select the configured device in the :guilabel:`Payment Terminal Device` field and save.
#. Go to :menuselection:`Point of Sale --> Configuration --> Settings` and add the created payment
   method to the :guilabel:`Payment Methods` list to make it available in the POS interface.
#. Click :guilabel:`Save`.

.. _worldline/yomani-info:

.. tip::
   - If a setup uses separate cashier and customer payment terminals, :ref:`configure
     <pos/worldline/configuration>` the cashier terminal first.
   - To prevent connection loss, set a fixed IP address on the IoT Box’s router or :ref:`restart
     the virtual IoT server <iot/windows_iot/restart>`.
