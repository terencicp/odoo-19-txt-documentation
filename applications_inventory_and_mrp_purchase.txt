

==================================================
SECTION: purchase.rst
PATH: applications/inventory_and_mrp/purchase.rst
==================================================

:nosearch:
:show-content:
:hide-page-toc:
:show-toc:

========
Purchase
========

**Odoo Purchase** helps keep track of purchase agreements, quotations, and purchase orders. Learn
how to monitor purchase tender, automate replenishment, and follow up on your orders.

.. seealso::
   - `Odoo Tutorials: Purchase <https://www.odoo.com/slides/purchase-23>`_

.. toctree::
   :titlesonly:

   purchase/products
   purchase/manage_deals
   purchase/advanced


==================================================
SECTION: advanced.rst
PATH: applications/inventory_and_mrp/purchase/advanced.rst
==================================================

:nosearch:

========
Advanced
========

.. toctree::
   :titlesonly:

   advanced/suggest
   advanced/analyze
   advanced/vendor_costs_report
   advanced/procurement_expenses_report
   advanced/edi
   advanced/purchase_dashboard


==================================================
SECTION: analyze.rst
PATH: applications/inventory_and_mrp/purchase/advanced/analyze.rst
==================================================

========================
Purchase Analysis report
========================

.. |PO| replace:: :abbr:`PO (purchase order)`
.. |POs| replace:: :abbr:`POs (purchase orders)`

The *Purchase Analysis* report provides statistics about products purchased using Odoo's
**Purchase** app. This data is useful for gaining a deeper understanding of key metrics related to
purchase orders (POs), including the quantity of products ordered and received, the amount of time
it takes to receive purchased products, and more.

To open the Purchase Analysis report, navigate to :menuselection:`Purchase app --> Reporting -->
Purchase`.

.. important::
   The :guilabel:`Purchase Analysis` report is one of many reports available across the Odoo app
   suite. This documentation only covers the measures specific to the :guilabel:`Purchase Analysis`
   report, along with a few use case examples.

   For a full overview of the basic features available in most Odoo reports, see the documentation
   on :doc:`reporting essentials <../../../essentials/reporting>`.

Measures
========

*Measures* refer to the various datasets that can be displayed on the :guilabel:`Purchase Analysis`
report, with each dataset representing a key statistic about |POs| or products. To choose a measure,
click the :guilabel:`Measures` :icon:`fa-caret-down` button, and select one of the options from the
drop-down menu:

- :guilabel:`# of Lines`: The number of |PO| order lines, across all |POs|.
- :guilabel:`Average Cost`: The average cost of |POs|.
- :guilabel:`Days to Confirm`: The number of days it takes to confirm a |PO|.
- :guilabel:`Days to Receive`: The number of days it takes to receive the products in a |PO|.
- :guilabel:`Gross Weight`: The total weight of purchased products.
- :guilabel:`Qty Billed`: The quantity of a product (or products) for which the vendor has already
  been billed.
- :guilabel:`Qty Ordered`: The quantity of a product (or products) ordered.
- :guilabel:`Qty Received`: The quantity of an ordered product (or products) received.
- :guilabel:`Qty to be Billed`: The quantity of an ordered product (or products) for which the
  vendor has yet to be billed.
- :guilabel:`Total`: The total amount spent, including tax.
- :guilabel:`Untaxed Total`: The total amount spent, excluding tax. This measure is selected by
  default.
- :guilabel:`Volume`: The total volume of ordered products, for products which are measured by
  volume.
- :guilabel:`Count`: The total count of |POs|.

.. tip::
   Only one measure can be selected at a time when one of the :icon:`fa-area-chart`
   :guilabel:`(graph view)` options is enabled. However, multiple measures, and varying group-by
   criteria (on the x and y axes), can be selected when using the :icon:`oi-view-pivot`
   :guilabel:`(pivot table)`.

.. _purchase/purchase-analysis-example:

Use case: determine days to receive products from each vendor
=============================================================

One possible use case for the :guilabel:`Purchase Analysis` report is determining how long each
vendor takes to deliver purchased items. This allows companies to make better informed decisions
about which vendors they want to purchase from.

.. example::
   A local bike shop, *Bike Haus*, sells high-quality unicycles, bicycles, tricycles, and all the
   accessories needed to ride and maintain them. They purchase their inventory from a few different
   vendors, and then sell those products on to customers through their storefront.

   Recently, Bike Haus has decided to have their purchasing manager, David, look into how long it
   has taken each of their vendors to deliver the items they've purchased during the current year,
   2024.

   David starts by navigating to :menuselection:`Purchase app --> Reporting --> Purchase`, and
   selecting the :icon:`fa-bar-chart` (bar chart) graph type at the top of the report.

   Next, he clicks the :icon:`fa-caret-down` :guilabel:`(toggle)` button on the right of the search
   bar to open its drop-down menu. In the :guilabel:`Confirmation Date` filter section, he makes
   sure that **only** the :guilabel:`2024` filter is enabled. Then, he selects the
   :guilabel:`Vendor` option in the :guilabel:`Group By` section, before clicking away from the
   drop-down menu to close it.

   Finally, David clicks on the :guilabel:`Measures` :icon:`fa-caret-down` drop-down menu, and
   selects the :guilabel:`Days to Receive` option.

   With all of these options enabled, the :guilabel:`Purchase Analysis` report shows a bar chart,
   with one bar for each vendor, representing the average number of days it takes to receive
   products purchased from the vendor.

   Using this data, David can see that it takes Bike Friends over 4.5 days, on average, to deliver
   purchased products. This is more than four times the amount of time it takes any other vendor.

   Based on these findings, David makes the decision to reduce the quantity of products purchased
   from Bike Friends.

   .. image:: analyze/dtr.png
      :align: center
      :alt: The Purchase report, showing the average days to receive products from vendors.

Use case: compare vendor POs for two time periods
=================================================

Another use for the :guilabel:`Purchase Analysis` report is to compare key statistics about |POs|
for two different time periods, for a specific vendor. By doing so, it is easy to understand how
purchases from the vendor have increased or decreased.

.. example::
   Following the :ref:`previous example <purchase/purchase-analysis-example>`, it has been one month
   since Bike Haus decided to reduce the quantity of products purchased from Bike Friends, one of
   their retailers. Bike Haus' purchasing manager, David, wants to understand the impact this
   decision has had on the amount of money they have spent on Bike Friends products.

   David starts by navigating to :menuselection:`Purchase app --> Reporting --> Purchase`. Then, he
   selects the :icon:`oi-view-pivot` :guilabel:`(pivot table)` option at the top of the screen.

   In the search bar, he types `Bike Friends`, and clicks :guilabel:`Enter`, so the report only
   shows data for purchases from Bike Friends.

   Then, David clicks the :icon:`fa-caret-down` :guilabel:`(toggle)` button on the right of the
   search bar to open its drop-down menu. In the :guilabel:`Confirmation Date` field, he leaves the
   :guilabel:`June` and :guilabel:`2024` filters enabled. He also selects :guilabel:`Confirmation
   Date: Previous Period` in the :guilabel:`Comparison` section, before clicking away from the
   drop-down menu to close it.

   Next, David clicks on the :guilabel:`Measures` :icon:`fa-caret-down` drop-down menu. He leaves
   the :guilabel:`Total` and :guilabel:`Untaxed Total` datasets enabled, and disables the
   :guilabel:`Order` and :guilabel:`Count` datasets.

   Finally, David clicks the :icon:`fa-minus-square-o` :guilabel:`Total` button above the rows on
   the pivot table, and selects the :guilabel:`Product` option.

   With all of these options configured, the :guilabel:`Purchase Analysis` report shows a pivot
   table comparing purchase data for the current month, June, with the previous month, May.

   The pivot table is broken down into two main columns: one for the untaxed total spent, and one
   for the taxed total spent. These columns are further broken down into three smaller columns: the
   amount spent in May, the amount spent in June, and the variation between the two months,
   represented as a percentage.

   On the left side of the pivot table, one row is shown for each product purchased from Bike
   Friends during June. Using this report, David is able to see that Bike Haus has spent much less
   money on products purchased from Bike Friends, compared to the previous month.

   .. image:: analyze/comparison.png
      :align: center
      :alt: The Purchase report, comparing the amount spent at a vendor.


==================================================
SECTION: blanket_orders.rst
PATH: applications/inventory_and_mrp/purchase/manage_deals/blanket_orders.rst
==================================================

==============
Blanket orders
==============

.. _purchase/manage_deals/blanket-orders:

.. |SO| replace:: :abbr:`SO (Sales Order)`
.. |PO| replace:: :abbr:`PO (Purchase Order)`
.. |UoM| replace:: :abbr:`UoM (Unit of Measure)`
.. |RfQ| replace:: :abbr:`RfQ (Request for Quotation)`
.. |RfQs| replace:: :abbr:`RfQs (Requests for Quotation)`

Blanket orders are long-term purchase agreements between a company and a vendor to deliver products
on a recurring basis with predetermined pricing.

Blanket orders are helpful when products are consistently purchased from the same vendor, but in
different quantities, and at different times.

By simplifying the ordering process, blanket orders not only save time, they also save money, since
they can be advantageous when negotiating bulk pricing with vendors.

Create a new blanket order
==========================

To create blanket orders, enable the *Purchase Agreements* feature from the *Purchase* app settings.
Navigate to :menuselection:`Purchase app --> Configuration --> Settings`, and under the
:guilabel:`Orders` section, click the checkbox for :guilabel:`Purchase Agreements`. Then click
:guilabel:`Save` to implement the changes.

.. note::
   In addition to creating blanket orders, the *Purchase Agreements* setting also allows users to
   create alternative requests for quotation (RfQs).

.. image:: blanket_orders/blanket-orders-enabled-setting.png
   :alt: Purchase Agreements enabled in the Purchase app settings.

To create a blanket order, go to :menuselection:`Purchase app --> Orders --> Purchase Agreements`,
and click :guilabel:`New`. This opens a new purchase agreement form.

Configure the following fields in the new purchase agreement form to establish predetermined rules
for the recurring long-term agreement:

- :guilabel:`Vendor`: the supplier to whom this agreement is tied, either once or on a recurring
  basis. The vendor can be selected directly from the drop-down menu next to this field.
- :guilabel:`Buyer`: the user assigned to this specific blanket order. By default, this is the user
  who created the agreement; the user can be changed directly from the drop-down menu next to this
  field.
- :guilabel:`Agreement Type`: the type of purchase agreement this blanket order is classified as.
  Use the drop-down menu to choose :guilabel:`Blanket Order` if not already selected.
- :guilabel:`Currency`: the agreed-upon currency to be used for this exchange. If multiple
  currencies have been activated in the database, the currency can be changed from the drop-down
  menu next to this field.
- :guilabel:`Agreement Validity`: the date range this agreement should be valid for. If this blanket
  order should not expire, leave this field blank.
- :guilabel:`Reference`: the source purchase order (PO) that this blanket order is tied to. If this
  blanket order should not be tied to any existing |PO|, leave this field blank.
- :guilabel:`Operation Type`: the operation type that should be applied to this order once it is
  delivered.
- :guilabel:`Company`: the company assigned to this specific blanket order. By default, this is the
  company that the user creating the blanket order is listed under. If the database is not a
  multi-company database, this field **cannot** be changed, and defaults to the only company listed
  in the database.

.. image:: blanket_orders/blanket-orders-new-agreement.png
   :alt: New blanket order purchase agreement with added products.

Once all relevant fields have been filled out, click :guilabel:`Add a line` to add products under
the :guilabel:`Product` column. Then, in the :guilabel:`Quantity` column, change the quantity of
each product, and set a price in the :guilabel:`Unit Price` column.

.. important::
   When adding products to a new blanket order, the pre-existing prices of products are not
   automatically added to the product lines. Instead, the prices **must** be manually assigned, by
   changing the value in the :guilabel:`Unit Price` column to an agreed-upon price with the listed
   vendor. Otherwise, the price will remain `0`.

Click :guilabel:`Confirm` to save this new purchase agreement.

Once confirmed, the blanket order's stage changes from :guilabel:`Draft` to :guilabel:`Confirmed`,
meaning this agreement can be selected and used when creating new |RfQs|.

.. tip::
   After creating and confirming a blanket order, products, quantities, and prices can still be
   edited, added, and removed from the purchase agreement.

Create a new |RfQ| from the blanket order
=========================================

After confirming a blanket order, new quotations can be created directly from the blanket order
form. |RfQs| using this form are pre-populated with information based on the rules set in the form.
The total quantities of products ordered through linked |RfQs| are automatically updated in the
:guilabel:`Ordered` field on the agreement.

Additionally, new quotations are automatically linked to this blanket order form, via the
:guilabel:`RFQs/Orders` smart button at the top-right of the form.

To create a new quotation from the blanket order form, click the :guilabel:`New Quotation` button.
This opens a new |RfQ|, that is pre-populated with the correct information, depending on the
settings configured on the blanket order form.

From the new |RfQ| form, click :guilabel:`Send by Email` to compose and send an email to the listed
vendor. Click :guilabel:`Print RFQ` to generate a printable PDF of the quotation; or, once ready,
click :guilabel:`Confirm Order` to confirm the |PO|.

.. image:: blanket_orders/blanket-orders-new-quotation.png
   :alt: New quotation with copied products and rules from blanket order.

Once the |PO| has been confirmed, click back to the blanket order form (via the breadcrumbs, at the
top of the page). From the blanket order form, there is now one |RfQ| listed in the
:guilabel:`RFQs/Orders` smart button at the top-right of the form. Click the :guilabel:`RFQs/Orders`
smart button to see the |PO| that was just created.

.. image:: blanket_orders/blanket-orders-rfq-smart-button.png
   :alt: RFQs and Orders smart button from blanket order form.

Replenishment
=============

Once a blanket order is confirmed, a new vendor line is added under the :guilabel:`Purchase` tab of
the products included in the order.

This makes blanket orders useful with :doc:`automated replenishment
<../../purchase/products/reordering>`, because information about the :guilabel:`Vendor`,
:guilabel:`Price`, and the :guilabel:`Agreement` are referenced on the vendor line. This information
dictates when, where, and at what price the product should be replenished.

.. image:: blanket_orders/blanket-orders-product-form.png
   :alt: Product form with replenishment agreement linked to blanket order.

.. seealso::
   :doc:`calls_for_tenders`


==================================================
SECTION: calls_for_tenders.rst
PATH: applications/inventory_and_mrp/purchase/manage_deals/calls_for_tenders.rst
==================================================

================
Call for tenders
================

.. _purchase/manage_deals/alternative-rfqs:

.. |PO| replace:: :abbr:`PO (Purchase Order)`
.. |POs| replace:: :abbr:`POs (Purchase Orders)`
.. |RfQ| replace:: :abbr:`RfQ (Request for Quotation)`
.. |RfQs| replace:: :abbr:`RfQs (Requests for Quotation)`

Sometimes, companies might want to invite vendors to submit offers for similar goods or services all
at once. This helps companies select the cheapest, fastest vendors for their specific business
needs.

In Odoo, this can be done by creating alternative requests for quotation (RfQs) for different
vendors. Once a response is received from each vendor, the product lines from each |RfQ| can be
compared, and a decision can be made for which products to purchase from which vendors.

.. note::
   Sometimes referred to as a *call for tender*, this process is primarily used by organizations in
   the public sector, who are legally bound to use it when making a purchase. However, private
   companies can also use alternative |RfQs| to spend money efficiently.

Configuration
=============

To create alternative |RfQs|, the *Purchase Agreements* feature **must** be enabled in the
*Purchase* app settings. To enable the feature, navigate to :menuselection:`Purchase app -->
Configuration --> Settings`. Under the :guilabel:`Orders` section, click the checkbox for
:guilabel:`Purchase Agreements`.

Then, click :guilabel:`Save` to apply the change.

.. image:: calls_for_tenders/calls-for-tenders-enabled-setting.png
   :align: center
   :alt: Purchase Agreements enabled in the Purchase app settings.

.. _purchase/manage_deals/create-rfq:

Create an |RfQ|
===============

To create a new |RfQ|, follow the instructions in the :doc:`rfq` documentation.

.. seealso::
   `Odoo Tutorial: Purchase Basics and Your First Request for Quotation
   <https://www.youtube.com/watch?v=o_uI718P1Dc>`_

.. _purchase/manage_deals/create-alternatives:

Create alternative |RfQs|
=========================

Once a |PO| is created and sent to a vendor, alternative |RfQs| can be created for additional
vendors to compare prices, delivery times, and other factors, to help make a decision for the order.

To create alternative |RfQs| from the original, click the :guilabel:`Alternatives` tab. Then, click
:guilabel:`Create Alternative`. When clicked, a :guilabel:`Create alternative` pop-up window
appears.

.. image:: calls_for_tenders/calls-for-tenders-create-alternative.png
   :align: center
   :alt: Calls for tenders pop-up to create alternative quotation.

From this window, select an alternative vendor from the drop-down menu next to the
:guilabel:`Vendor` field, to whom the alternative quotation is assigned.

Next to this, there is a :guilabel:`Copy Products` checkbox that is selected by default. When
selected, the product quantities of the original |RfQ| are copied over to the alternative. For this
first alternative quotation, leave the checkbox checked. Once finished, click :guilabel:`Create
Alternative`. This opens a new |RfQ| form.

Since the :guilabel:`Create Alternative` checkbox was left checked, the new form is already
pre-populated with the same products, quantities, and other details as the previous, original |RfQ|.

.. note::
   When the :guilabel:`Copy Products` checkbox is selected while creating an alternative quotation,
   additional products do **not** need to be added, unless desired.

   However, if a chosen vendor is listed in the :guilabel:`Vendor` column under a specific product
   form included in the order, the values set on the product form carry over to the |RfQ|, and
   **must** be changed manually, if necessary.

Once ready, create a second alternative quotation by clicking the :guilabel:`Alternatives` tab,
followed by :guilabel:`Create Alternative`.

This opens the :guilabel:`Create alternative` pop-up window. Once again, choose a different vendor
from the drop-down menu next to :guilabel:`Vendor`. For this particular |RfQ|, however, *uncheck*
the :guilabel:`Copy Products` checkbox. Doing so removes all products on the new alternative |RfQ|,
leaving it blank. The specific products which should be ordered from this particular vendor can be
added in as needed.

Once ready, click :guilabel:`Create Alternative`.

.. tip::
   If an alternative quotation should be removed from the :guilabel:`Alternatives` tab, they can be
   individually removed by clicking on the :guilabel:`X (remove)` icon at the end of their row.

This creates a third, new |RfQ|. But, since the product quantities of the original |RfQ| were
**not** copied over, the product lines are empty, and new products can be added as needed by
clicking :guilabel:`Add a product`, and selecting the desired products from the drop-down menu.

Once the desired number of specific products are added, click :guilabel:`Send by Email`.

.. image:: calls_for_tenders/calls-for-tenders-blank-quotation.png
   :align: center
   :alt: Blank alternative quotation with alternatives in breadcrumbs.

This opens a :guilabel:`Compose Email` pop-up window, wherein the message to the vendor can be
customized, and attachments can be added, if necessary. Once ready, click :guilabel:`Send`.

From this newest form, click the :guilabel:`Alternatives` tab. Under this tab, all three |RfQs| can
be seen in the :guilabel:`Reference` column. Additionally, the vendors are listed under the
:guilabel:`Vendor` column, and the order :guilabel:`Total` (and :guilabel:`Status`) of the orders
are in the rows, as well.

The date in the :guilabel:`Expected Arrival` column is calculated for each vendor, based on any
pre-configured lead times in the vendor and product forms.

.. _purchase/manage_deals/link-rfq:

Link new |RfQ| to existing quotations
=====================================

Even if a quotation is not created directly from the :guilabel:`Alternatives` tab of another |RfQ|,
it can still be linked to existing |RfQs|.

To do that, begin by creating a new |RfQ|. Navigate to :menuselection:`Purchase app --> New`. Fill
out the |RfQ|, according to the :ref:`previous instructions <purchase/manage_deals/create-rfq>`.

Then, once ready, click the :guilabel:`Alternatives` tab. Since this new |RfQ| was created
separately, there are no other orders linked yet.

However, to link this |RfQ| with existing alternatives, click :guilabel:`Link to Existing RfQ` on
the first line in the :guilabel:`Vendor` column.

.. image:: calls_for_tenders/calls-for-tenders-link-rfq-popup.png
   :align: center
   :alt: Pop-up to link new quotation to existing RFQs.

This opens an :guilabel:`Add: Alternative POs` pop-up window. Select the desired previously-created
|RfQs|, and click :guilabel:`Select`. All of these orders are now copied to this |RfQ|, and can be
found under the :guilabel:`Alternatives` tab.

.. tip::
   If a large number of |POs| are being processed, and the previous |POs| can't be located, click
   the :icon:`fa-chevron-down` :guilabel:`(chevron)` icon to the right of the search bar, at the top
   of the pop-up window.

   Then, under the :guilabel:`Group By` section, click :guilabel:`Vendor`. Vendors are displayed in
   their own nested drop-down lists, and each vendor's list can be expanded to view open |POs| for
   that vendor.

.. _purchase/manage_deals/compare-product-lines:

Compare product lines
=====================

Alternative |RfQs| can be compared side-by-side, in order to determine which vendors offer the best
deals on the products included in the orders.

To compare alternative |RfQs|, navigate to the :menuselection:`Purchase` app, and select one of the
previously-created |RfQs|.

Then, click the :guilabel:`Alternatives` tab to see all linked |RfQs|. Next, under the
:guilabel:`Create Alternative` option, click :guilabel:`Compare Product Lines`. This navigates to
the :guilabel:`Compare Order Lines` page.

.. image:: calls_for_tenders/calls-for-tenders-compare-products.png
   :align: center
   :alt: Compare Product Lines page for alternative RFQs.

The :guilabel:`Compare Order Lines` page, by default, groups by :guilabel:`Product`. Each product
included in any of the |RfQs| is displayed in its own nested drop-down list, and features all of the
|PO| numbers in the :guilabel:`Reference` column.

.. note::
   To remove product lines from the :guilabel:`Compare Order Lines` page, click :guilabel:`Clear` at
   the far-right end of that product line's row.

   Doing so removes this specific product as a selectable option from the page, and changes the
   :guilabel:`Total` price of that product on the page to `0`.

   Additionally, on the |RfQ| form, in which that product was included, its ordered quantity is also
   changed to `0`.

Once the best offers have been identified, individual products can be selected by clicking the
:guilabel:`Choose` button at the end of each corresponding row.

Once all desired products have been chosen, click :guilabel:`Requests for Quotation` (in the
breadcrumbs, at the top of the page) to navigate back to an overview of all |RfQs|.

.. _purchase/manage_deals/cancel-keep-alternatives:

Cancel (or keep) alternatives
=============================

Once the desired products have been chosen from the :guilabel:`Compare Order Lines` page, the
remaining |RfQs|, from which no products were chosen, can be cancelled.

The cost in the :guilabel:`Total` column for each product that wasn't chosen is automatically set to
`0`, indicated at the far-right of each corresponding row.

Although they haven't been cancelled yet, this indicates that each of those orders can be cancelled
without having an effect on the other live orders, once those orders have been confirmed.

.. image:: calls_for_tenders/calls-for-tenders-zero-total.png
   :align: center
   :alt: Cancelled quotations in the Purchase app overview.

To confirm an |RfQ| for which products were selected, click into an |RfQ|, and click
:guilabel:`Confirm Order`.

This causes a :guilabel:`What about the alternative Requests for Quotations?` pop-up window
to appear.

To view a detailed form of one of the |RfQs| listed, click the line item for that quotation. This
opens an :guilabel:`Open: Alternative POs` pop-up window, from which all details of that particular
|RfQ| can be viewed.

Once ready, click :guilabel:`Close` to close the pop-up window.

In the :guilabel:`What about the alternative Requests for Quotations?` pop-up window, two options
are presented: :guilabel:`Cancel Alternatives` and :guilabel:`Keep Alternatives`.

If this |PO| should **not** be confirmed, click :guilabel:`Discard`.

Selecting :guilabel:`Cancel Alternatives` automatically cancels the alternative |RfQs|. Selecting
:guilabel:`Keep Alternatives` keeps the alternative |RfQs| open, so they can still be accessed, if
any additional product quantities need to be ordered later.

Once all products are ordered, select :guilabel:`Cancel Alternatives` from whichever |PO|
is open at that time.

.. image:: calls_for_tenders/calls-for-tenders-keep-or-cancel.png
   :align: center
   :alt: Keep or cancel pop-up for alternative RFQs.

Finally, using the breadcrumbs at the top of the page, click :guilabel:`Requests for Quotation` to
navigate back to an overview of all |RfQs|.

The cancelled orders can be seen, greyed out and listed with a :guilabel:`Cancelled` status, under
the :guilabel:`Status` column at the far-right of their respective rows.

Now that all product quantities have been ordered, the purchase process can be completed, and the
products can be received into the warehouse.

.. seealso::
   :doc:`blanket_orders`


==================================================
SECTION: control_bills.rst
PATH: applications/inventory_and_mrp/purchase/manage_deals/control_bills.rst
==================================================

================
Control policies
================

.. _purchase/manage_deals/control-bills:

.. |PO| replace:: :abbr:`PO (Purchase Order)`
.. |POs| replace:: :abbr:`POs (Purchase Orders)`

In Odoo's **Purchase** app, the *Control Policy* determines the quantities billed by vendors on
every purchase order (PO). For example, choosing *On ordered quantities* means the bill is based on
ordered items, even if they have not been received yet.

The control policy is selected on the *Product* record.

Configuration
=============

To configure the control policy for a product, navigate to :menuselection:`Purchase app --> Products
--> Products`, then click on a product record to open it. Click to the :guilabel:`Purchase` tab.
Scroll to the :guilabel:`Vendor Bills` section. Under :guilabel:`Control Policy`, tick the radio
button for either :guilabel:`On ordered quantities` or :guilabel:`On recieved quantities`.

- :guilabel:`On ordered quantities`: Creates a vendor bill as soon as a |PO| is confirmed. The
  products and quantities in the |PO| are used to generate a draft bill.
- :guilabel:`On received quantities`: A bill is created only *after* part of the total order has
  been received. The products and quantities received are used to generate a draft bill. An error
  message appears if creation of a vendor bill is attempted without receiving anything.

The default control policy for a product is determined by the :guilabel:`Product Type`:

- **Services**: The default control policy is *On ordered quantities*.
- **Goods**: The default control policy is *On delivered quantities*

Pay vendor bills with 3-way matching
====================================

The *3-way matching* feature ensures vendor bills are only paid once some, or all, of the products
included in the |PO| have been received.

To activate *3-way matching*, navigate to :menuselection:`Purchase app --> Configuration -->
Settings`, and scroll down to the :guilabel:`Invoicing` section. Then, tick the checkbox for
:guilabel:`3-way matching` to enable the feature, and click :guilabel:`Save`.

.. image:: control_bills/control-bills-three-way-matching.png
   :alt: Enabled 3-way matching feature in Purchase app settings.

When *3-way matching* is enabled, vendor bills display a :guilabel:`Should Be Paid` field under the
:guilabel:`Other Info` tab. When a new vendor bill is created, the field is set to :guilabel:`Yes`,
since a bill **cannot** be created until at least some of the products included in a |PO| have been
received.

To create a vendor bill from a |PO|, navigate to :menuselection:`Purchase app --> Orders -->
Purchase Orders`. From the :guilabel:`Purchase Orders` page, select the desired |PO| from the list.
Then, click :guilabel:`Create Bill`. Doing so opens a new draft :guilabel:`Vendor Bill` form, in the
:guilabel:`Draft` stage. Click the :guilabel:`Other Info` tab, and locate the :guilabel:`Should Be
Paid` field.

.. important::
   The |PO| selected from the list **must not** be billed yet, or an :guilabel:`Invalid Operation`
   pop-up window appears.

   .. image:: control_bills/control-bills-invalid-operation.png
      :alt: Invalid Operation pop-up window for billed Purchase Order.

Click the drop-down menu next to :guilabel:`Should Be Paid` to view the available options:
:guilabel:`Yes`, :guilabel:`No`, and :guilabel:`Exception`.

.. image:: control_bills/control-bills-should-be-paid.png
   :alt: Should Be Paid field status on draft vendor bill.

.. note::
   If the total quantity of products from a |PO| has not been received, Odoo only includes the
   products that *have* been received in the draft vendor bill.

Draft vendor bills can be edited to increase the billed quantity, change the price of the products
in the bill, and add additional products to the bill.

If the draft bill's information is changed, the :guilabel:`Should Be Paid` field status is set to
:guilabel:`Exception`. This means that Odoo notices the discrepancy, but does not block the changes
or display an error message, since there might be a valid reason for making changes to the draft
bill.

To process the vendor bill, select a date in the :guilabel:`Bill Date` field, and click
:guilabel:`Confirm`, followed by :guilabel:`Register Payment`.

This opens a :guilabel:`Register Payment` pop-up window. From this window, accounting information is
pre-populated based on the database's accounting settings. Click :guilabel:`Create Payment` to
process the vendor bill.

Once payment has been registered for a vendor bill, and the bill displays the green :guilabel:`Paid`
banner, the :guilabel:`Should Be Paid` field status is set to :guilabel:`No`.

.. tip::
   The :guilabel:`Should Be Paid` status on bills is automatically set by Odoo. However, the status
   can be manually changed by clicking the field's drop-down menu inside the :guilabel:`Other Info`
   tab.

View a purchase order's billing status
======================================

Once a |PO| is confirmed, its :guilabel:`Billing Status` can be viewed under the :guilabel:`Other
Information` tab on the |PO| form.

To view the :guilabel:`Billing Status` of a |PO|, navigate to :menuselection:`Purchase app -->
Orders --> Purchase Orders`, and select a |PO| to view.

Click the :guilabel:`Other Information` tab, and locate the :guilabel:`Billing Status` field.

.. image:: control_bills/control-bills-billing-status.png
   :alt: Billing status field on a purchase order form.

The table below details the different values the :guilabel:`Billing Status` field could read, and
when they are displayed, depending on the *Bill Control* policy used.

.. list-table::
   :header-rows: 1
   :stub-columns: 1

   * - Billing Status
     - On received quantities
     - On ordered quantities
   * - Nothing to Bill
     - PO confirmed; no products received
     - *Not applicable*
   * - Waiting Bills
     - All/some products received; bill not created
     - PO confirmed
   * - Fully Billed
     - All/some products received; draft bill created
     - Draft bill created

.. seealso::
   :doc:`manage`


==================================================
SECTION: edi.rst
PATH: applications/inventory_and_mrp/purchase/advanced/edi.rst
==================================================

==================================
EDI purchase-to-sales order import
==================================

.. |EDI| replace:: :abbr:`EDI (Electronic Data Exchange)`
.. |PO| replace:: :abbr:`PO (purchase order)`
.. |SO| replace:: :abbr:`SO (sales order)`

Electronic data interchange (EDI) enables companies using different software systems to exchange
information in a standardized, structured format.

In Odoo, a *purchase order* (PO) can be exported as an XML file and imported as a *sales order* (SO)
into another Odoo database, removing the need for manual entry of products, quantities, prices, and
other key information.

The workflow in this document describes how buyers and sellers exchange data directly between their
Odoo databases. As an alternative, sellers can receive a PDF version of the request for quotation
(RFQ) by email and :ref:`upload it directly in their Sales dashboard
<purchase/advanced/rfq-upload>`. **This method is simpler** but does not use the XML-based exchange
described in the document.

.. note::
   Exported XMLs follow the `UBL schema
   <https://docs.peppol.eu/poacc/upgrade-3/syntax/Order/tree/>`_. When exchanging data between two
   Odoo databases, this schema remains compatible.

   However, implementing custom developments for software that does not support the UBL schema may
   introduce additional complexity.

Roles and configuration
=======================

To facilitate the |EDI| workflow, two companies are involved: the buyer (the company placing the
order) and the seller (the company fulfilling the order). Each company has specific roles and
configurations.

Buyer database
--------------

The buyer database is responsible for creating and confirming purchase orders. Prerequisites
include:

#. (required) :ref:`installing <general/install>` the **Purchase** app
#. (optional) adding vendors (the sellers in this workflow) as :doc:`portal users
   <../../../general/users/user_portals>`.

Seller database
---------------

The seller database is responsible for receiving and processing sales orders. The only prerequisite
is :ref:`installing <general/install>` the **Sales** app.

Workflow
========

Buyer's process
---------------

To begin, the buyer (in their database) navigates to the :menuselection:`Purchase` app to create a
:abbr:`RFQ (request for quotation)`.

Set the :guilabel:`Vendor` to the portal user representing the seller, and :guilabel:`Confirm` the
:abbr:`RFQ (request for quotation)`. Doing so converts it into a :doc:`purchase order
<../manage_deals/rfq>`.

.. example::
   |PO| from the buyer's database. The :guilabel:`Vendor` is the seller's portal user account, Joel.

   .. image:: edi/po-database-view.png
      :alt: Example PO. The Vendor is the seller's portal user account, Joel.

Seller's process
----------------

Once the |PO| is confirmed, it appears on the seller's portal dashboard. The seller downloads the
XML file and uploads it to their database.

Download file
~~~~~~~~~~~~~

As the seller, log in to the buyer's database as the portal user. On the dashboard, scroll down and
click the :guilabel:`Our Orders` button. Doing so reveals a list of purchase orders the buyer's
database has addressed to the portal user.

Select the desired purchase order, and the click :guilabel:`Connect with your software!` button.

In the pop-up window, copy the provided URL, and paste it into a new browser tab to download the XML
file.

.. example::
   Joel's portal view of the PO. The first image displays the :guilabel:`Connect with your
   software!` button, and the second image displays a pop-up window with the :guilabel:`Copy`
   button.

.. image:: edi/po-portal-view.png
   :alt: Portal view of the PO, with "Connect your software!" button.

.. image:: edi/pop-up.png
   :alt: Pop-up to copy link.

.. example::
   :download:`XML file <edi/P00017.xml>` for PO00017

.. _purchase/advanced/rfq-upload:

Upload file
~~~~~~~~~~~

Next, the seller logs in to their own Odoo database and opens :menuselection:`Sales` app. Click
:guilabel:`Upload` and select the downloaded XML file. Alternatively, users can drag and drop the
file into the :guilabel:`Quotations` dashboard.

Doing so automatically generates a sales order with the customer populated as the buyer and all
product lines, quantities, and prices pre-filled. This process ensures efficient and accurate data
exchange between the two databases.

.. figure:: edi/so.png
   :alt: Uploaded SO in the seller's database.

   Uploaded SO in the seller's database.

.. seealso::
   :doc:`../../../sales/sales/sales_quotations/create_quotations`



==================================================
SECTION: manage.rst
PATH: applications/inventory_and_mrp/purchase/manage_deals/manage.rst
==================================================

===================
Manage vendor bills
===================

.. _inventory/purchase/manage_deals/manage:

.. |PO| replace:: :abbr:`PO (Purchase Order)`
.. |POs| replace:: :abbr:`POs (Purchase Orders)`
.. |RfQ| replace:: :abbr:`RfQ (Request for Quotation)`
.. |RfQs| replace:: :abbr:`RfQs (Requests for Quotation)`

A *vendor bill* is an invoice received for products and/or services purchased by a company from a
vendor. Vendor bills record payables as they arrive from vendors, and can include amounts owed for
the goods and/or services purchased, sales taxes, freight and delivery charges, and more.

In Odoo, a vendor bill can be created at different points in the purchasing process, depending on
the *bill control* policy selected on the product's settings.

Bill control policies
=====================

To configure a product's bill control policy, navigate to :menuselection:`Purchase app --> Products
Products`, and click on the desired product to open it. Then, click on the :guilabel:`Purchase` tab.
Under the *Vendor Bills* section, the *Control Policy* field lists two policy options:

- :guilabel:`On ordered quantities`: creates a vendor bill as soon as a purchase order is confirmed.
  The products and quantities in the purchase order are used to generate a draft bill.
- :guilabel:`On received quantities`: a bill is only created **after** all (or part) of the total
  order has been received. The products and quantities received are used to generate a draft bill.

.. image:: manage/manage-configuration-settings.png
   :alt: Bill control policies on a product record.

Once a policy is selected, click :guilabel:`Save` to save the changes.

3-way matching
--------------

The *3-way matching* policy ensures vendor bills are only paid once all (or some) products in a
purchase order (PO) have been received.

To activate 3-way matching, navigate to :menuselection:`Purchase app --> Configuration -->
Settings`, and scroll to the :guilabel:`Invoicing` section.

Tick the checkbox next to :guilabel:`3-way matching`, and click :guilabel:`Save`.

.. important::
   The :guilabel:`3-way matching` feature is **only** intended to work with the :guilabel:`Bill
   Control` policy set to :guilabel:`Received quantities`.

Manage vendor bills in Accounting
=================================

Vendor bills can also be created directly from the *Accounting* app, without having to create a
purchase order first.

Navigate to :menuselection:`Accounting app --> Vendors --> Bills`, and click :guilabel:`New`. Doing
so reveals a blank :guilabel:`Vendor Bill` form.

Add a vendor in the :guilabel:`Vendor` field. Then, in the :guilabel:`Invoice Lines` tab, click
:guilabel:`Add a line` to add products.

Select a product from the drop-down menu in the :guilabel:`Product` field, and enter the quantity to
order in the :guilabel:`Quantity` field.

Select a :guilabel:`Bill Date`, and configure any other necessary information. Finally, click
:guilabel:`Confirm` to confirm the bill.

Once confirmed, click the :guilabel:`Journal Items` tab to view the :guilabel:`Account` journals.
These journals are populated based on the configuration on the corresponding :guilabel:`Vendor` and
:guilabel:`Product` forms.

If necessary, click :guilabel:`Credit Note` to add a credit note to the bill. Additionally, a
:guilabel:`Bill Reference` number can be added.

Once ready, click :guilabel:`Register Payment`, followed by :guilabel:`Create Payment`, to complete
the :guilabel:`Vendor Bill`.

.. tip::
   To link a draft bill to an existing purchase order, click the drop-down menu next to
   :guilabel:`Auto-Complete` *before* clicking :guilabel:`Confirm`, and select a |PO| from the menu.

   The bill auto-populates with the information from the chosen |PO|.

   .. image:: manage/manage-auto-complete.png
      :align: center
      :alt: Auto-complete drop-down list on draft vendor bill.

Batch billing
=============

Vendor bills can be processed and managed in batches in the *Accounting* app.

Navigate to :menuselection:`Accounting app --> Vendors --> Bills`. Then, click the
:guilabel:`checkbox` in the top-left corner, beside the :guilabel:`Number` column, under the
:guilabel:`New` button.

This selects all existing vendor bills with a :guilabel:`Status` of :guilabel:`Posted` or
:guilabel:`Draft`.

Click the :icon:`fa-print` :guilabel:`Print` button to print the selected invoices or bills.

Click :guilabel:`Register Payment` to create and process payments for multiple vendor bills at once.

.. note::
   Only payments with their :guilabel:`Status` listed as :guilabel:`Posted` can be billed in
   batches. Payments in the :guilabel:`Draft` stage **must** be posted before they can be included
   in a batch billing.

Clicking :guilabel:`Register Payment` opens a :guilabel:`Register Payment` pop-up window. From the
pop-up window, select the :guilabel:`Journal` the bills should post to, choose a :guilabel:`Payment
Date`, and select a :guilabel:`Payment Method`.

There is also the option to :guilabel:`Group Payments` together from this pop-up window, as well. If
this checkbox is ticked, only one payment is created, instead of one per bill. This option only
appears if the *Batch Payments* feature is enabled in the settings of the
:menuselection:`Accounting` app.

Once ready, click the :guilabel:`Create Payment` button. This creates a list of journal entries on a
separate page. The journal entries on this list are all tied to their corresponding vendor bills.

.. image:: manage/manage-batch-billing.png
   :align: center
   :alt: Batch billing register payment pop-up window.

.. seealso::
   :doc:`control_bills`


==================================================
SECTION: manage_deals.rst
PATH: applications/inventory_and_mrp/purchase/manage_deals.rst
==================================================

:nosearch:

============
Manage deals
============

.. toctree::
   :titlesonly:

   manage_deals/rfq
   manage_deals/blanket_orders
   manage_deals/calls_for_tenders
   manage_deals/purchase_templates
   manage_deals/control_bills
   manage_deals/manage


==================================================
SECTION: pricelist.rst
PATH: applications/inventory_and_mrp/purchase/products/pricelist.rst
==================================================

=======================
Import vendor pricelist
=======================

Set vendor prices to auto-populate requests for quotations (RFQs) or purchase orders (POs) with the
unit price, once the product is added, which reduces errors and saves time.

In Odoo, vendor pricelists can be :ref:`added individually <purchase/products/pricelist>` on the
product form, or :ref:`imported in bulk <purchase/products/import-pricelist>`, via an XLSX or CSV
file.

.. important::
   Please review this :doc:`import guide <../../../essentials/export_import_data>` before uploading
   vendor pricelists.

.. _purchase/products/pricelist:

On product form
===============

To manually add the vendor price on the product form, go to the :menuselection:`Purchase app -->
Products --> Products`, and click the desired product.

.. note::
   Product forms are accessible from multiple apps, such as **Sales**, **Inventory**, and
   **Manufacturing**.

In the :guilabel:`Purchase` tab of the product form, input the vendor and their price, to have this
information auto-populate on a request for quotation each time the product is listed.

.. seealso::
   :ref:`Vendor pricelist on product form <purchase/manage_deals/vendor-pricelist>`

.. image:: pricelist/product-form-pricelist.png
   :alt: Vendor pricelist on product form.

.. _purchase/products/import-pricelist:

Import vendor pricelist
=======================

To import vendor pricelists, ensure the XLSX or CSV file is accurately completed. The best way to
obtain a correctly formatted template, including product names, references, and vendor details, is
to first :ref:`export a pricelist <purchase/products/export-price>` from the database.

Modify the exported file, as needed, then import it back into the Odoo database.

.. _purchase/products/export-price:

Export pricelist
----------------

To export a pricelist, go to :menuselection:`Purchase app --> Configuration --> Vendor Pricelists`.

On the page, tick the checkbox(es) for the desired vendor pricelists.

Then, click the :icon:`fa-cog` :guilabel:`Actions` button that appears, and choose :icon:`fa-upload`
:guilabel:`Export` from the drop-down menu.

.. image:: pricelist/export.png
   :alt: Show selected exported fields, with the Export button visible.

In the resulting pop-up window, fields listed under the :guilabel:`Fields to export` section are
included in the exported file. To add more fields, find the desired field in the
:guilabel:`Available fields` section, and click the :icon:`fa-plus` :guilabel:`(plus)` icon to the
right of the field.

.. note::
   To update to existing records, tick the :guilabel:`I want to update data (import-compatible
   export)` checkbox, and refer to the section on the :ref:`External ID
   <purchase/products/external-id>` field.

   For details on commonly-used fields for importing vendor pricelists, see the :ref:`Common fields
   <purchase/products/common-fields>` section.

Select the desired :guilabel:`Export Format`: :guilabel:`XLSX` or :guilabel:`CSV`.

To save the selected fields as a template, click the :guilabel:`Template` field, and select
:guilabel:`New template` from the drop-down menu. Type the name of the new template, and click the
:icon:`fa-floppy-o` :guilabel:`(save)` icon. After that, the template is a selectable option when
clicking the :guilabel:`Template` field.

Finally, click :guilabel:`Export`.

.. note::
   With :ref:`developer mode <developer-mode>` turned on, the column names of the exported file
   display the *field name* with the *technical name* in parenthesis.

.. example::
   .. figure:: pricelist/export-data.png
      :alt: Exporting vendor pricelist.

      Export vendor pricelist in XLSX format. It includes :guilabel:`Product Template` and other
      fields in the :guilabel:`Fields to export` section.

.. _purchase/products/external-id:

External ID
~~~~~~~~~~~

*External ID* is a unique identifier used to update existing vendor pricelists. Without it, imported
records create new entries, instead of updating existing ones. Including this field in the XLSX or
CSV, indicates the line replaces an existing vendor pricelist in the Odoo database.

.. example::
   .. figure:: pricelist/duplicate-values.png
      :alt: Show 'Ready Mat' appear twice.

      `Ready Mat` appears twice because the external ID was omitted during the price update from
      `$790` to `$780`.

To look-up the :guilabel:`External ID` for a vendor pricelist, tick the :guilabel:`I want to update
data (import-compatible export)` checkbox at the top of the :guilabel:`Export Data` pop-up window.

.. note::
   Selecting :guilabel:`External ID` from the :guilabel:`Available fields` section with the
   :guilabel:`I want to update data (import-compatible export)` checkbox ticked results in an export
   file with two columns containing the external ID.

.. _purchase/products/common-fields:

Common fields
~~~~~~~~~~~~~

Below is a list of commonly-used fields when importing vendor pricelists:

.. list-table:: Field name definitions
   :header-rows: 1

   * - Field name
     - Used for
     - Field in Odoo database
     - Technical name of field
   * - Vendor
     - The only required field for creating a vendor pricelist record. This field specifies the
       vendor associated with the product.
     - :guilabel:`Vendor` field in the :ref:`vendor pricelist of the product form
       <purchase/products/pricelist>`.
     - `partner_id`
   * - Product Template
     - The Odoo product the vendor pricelist entry is related to.
     - :guilabel:`Product` field in the vendor pricelist.
     - `product_tmpl_id`
   * - Quantity
     - The minimum quantity required to receive the product at the specified price.
     - :guilabel:`Quantity` field in the vendor pricelist. (If not visible, enable it by clicking
       the :icon:`oi-settings-adjust` :guilabel:`(adjust)` icon, and tick the :guilabel:`Quantity`
       checkbox)
     - `min_qty`
   * - Unit Price
     - The purchase price for the product from the vendor.
     - :guilabel:`Price` field in the vendor pricelist.
     - `price`
   * - Delivery Lead Time
     - :ref:`Number of days <inventory/warehouses_storage/purchase-lt>` before receiving the product
       after confirming a purchase order.
     - :guilabel:`Delivery Lead Time` field on the vendor pricelist.
     - `delay`
   * - Sequence
     - Defines the order of vendors in the pricelist when multiple vendors are available. For
       example, if `Azure Interior` is listed first and Wood Corner second, their sequences would be
       `1` and `2`.
     - N/A
     - `sequence`
   * - Company
     - Name of company the product belongs to.
     - :guilabel:`Company` field in the vendor pricelist.
     - `company_id`
   * - :ref:`External ID <purchase/products/external-id>`
     - Unique ID of a record used to update existing vendor pricelists.
     - N/A
     - `id`

Import records
--------------

With a template downloaded, fill out the XLSX or CSV file with the necessary information. After
inputting everything, import the file back into the Odoo database, by going to
:menuselection:`Purchase app --> Configuration --> Vendor Pricelists`.

On the page, click the :icon:`fa-cog` :guilabel:`(gear)` icon in the top-left corner. In the
drop-down menu that appears, click :guilabel:`Import records`.

Then, click :guilabel:`Upload File` in the upper-left corner, and after selecting the XLSX or CSV
file, confirm the correct fields, and click :guilabel:`Import`.

.. seealso::
   - :doc:`../../../essentials/export_import_data`
   - :ref:`Common fields <purchase/products/common-fields>`

.. image:: pricelist/supplier-pricelist-example.png
   :alt: Upload file screen.

Formatting import file
~~~~~~~~~~~~~~~~~~~~~~

To understand how to format import files for vendor pricelists, consider the following example.

- `Storage Box` (:guilabel:`Reference`: `E-COM08`) is sold by `Wood Corner` for `$10`.
- `Large Desk` (:guilabel:`Reference`: `E-COM09`) has no records in the vendor pricelist.

An import file is created to do the following:

- Update the price for `Wood Corner` from `$10` to `$13`.
- Add pricelist for `Storage Box`: the vendor, `Ready Mat` intends to sell the product for `$14`.
- Add pricelist for `Large Desk`: vendor is `Wood Corner`, price is `$1299`.
- Add pricelist for `Large Desk`: vendor is `Azure Interior`, price is `$1399`.

.. list-table:: Vendor pricelist data
   :header-rows: 1

   * - id
     - company_id
     - delay
     - price
     - product_tmpl_id
     - sequence
     - partner_id
   * - product.product_supplierinfo_3
     - My Company (San Francisco)
     - 3
     - 13.00
     - [E-COM08] Storage Box
     - 4
     - Wood Corner
   * -
     - My Company (San Francisco)
     - 3
     - 14.00
     - [E-COM08] Storage Box
     - 5
     - Ready Mat
   * -
     - My Company (San Francisco)
     - 2
     - 1299.00
     - [E-COM09] Large Desk
     - 6
     - Wood Corner
   * -
     - My Company (San Francisco)
     - 4
     - 1399.00
     - [E-COM09] Large Desk
     - 7
     - Azure Interior

.. note::
   The *technical field name* was used to create this information.

.. note::
   Download the sample files for reference:

   - :download:`Sample XLSX import file <pricelist/pricelist-example.xlsx>`
   - :download:`Sample CSV import file <pricelist/pricelist-example.csv>`



==================================================
SECTION: procurement_expenses_report.rst
PATH: applications/inventory_and_mrp/purchase/advanced/procurement_expenses_report.rst
==================================================

===========================
Procurement expenses report
===========================

.. |RFQ| replace:: :abbr:`RfQ (Request for Quotation)`
.. |RFQs| replace:: :abbr:`RfQs (Requests for Quotation)`
.. |POs| replace:: :abbr:`POs (Purchase Orders)`
.. |PO| replace:: :abbr:`PO (Purchase Order)`
.. |caret| replace:: :icon:`fa-caret-down` :guilabel:`(down)` icon
.. |per| replace:: procurement expenses report

With the *Purchase* application, users can monitor procurement expenses over time. This report helps
companies track and analyze spending, identify cost-saving opportunities, and ensure efficient
budget management.

Create procurement expenses report
==================================

To create a |per|, first navigate to :menuselection:`Purchase app --> Reporting --> Purchase` to
open the :guilabel:`Purchase Analysis` dashboard.

By default, the dashboard displays a line chart overview of the :guilabel:`Untaxed Total` of
:guilabel:`Purchase Orders` (POs) with a :guilabel:`Confirmation Date` for the current month, or of
Requests for Quotation (RFQs) with a status of *Draft*, *Sent*, or *Cancelled*.

Add filters and groups
----------------------

On the top-right, click the :icon:`oi-view-pivot` :guilabel:`(pivot)` icon to switch to pivot view.

.. tip::
   While the |per| can also be :ref:`viewed <purchase/view-results>` as a :icon:`fa-bar-chart`
   :guilabel:`(bar chart)`, :icon:`fa-line-chart` :guilabel:`(line chart)`, or :icon:`fa-pie-chart`
   :guilabel:`(pie chart)`, the pivot view provides the most detailed view of the data, and is the
   recommended starting point.

Remove any default filters from the :guilabel:`Search...` bar. Then, click the |caret| to open the
drop-down menu that contains the :guilabel:`Filters`, :guilabel:`Group By`, and
:guilabel:`Favorites` columns.

.. note::
   Unless otherwise specified, the report displays data from both |RFQs| and |POs|. This can be
   changed by selecting either :guilabel:`Requests for Quotation` or :guilabel:`Purchase Orders`
   under the :guilabel:`Filters` column.

Under the :guilabel:`Filters` column, select a time frame to use for comparison. The report can be
filtered by either :guilabel:`Order Date` or :guilabel:`Confirmation Date`. Choose one from the
list, and click the |caret| to specify the date range, either by month, quarter, or year.

Next, under the :guilabel:`Group by` column, select :guilabel:`Vendor`. Then, select
:guilabel:`Product Category`, which is also located in the :guilabel:`Group By` column.

.. note::
   The selections under the :guilabel:`Group By` heading can be altered, depending on the needs of
   the individual company. For example, selecting :guilabel:`Product`, instead of :guilabel:`Product
   Category`, provides a more in depth look at the performance of specific items, in place of an
   entire category.

Next, make a selection under the :guilabel:`Comparison` heading that appears. These options are only
available after the date range is selected under the :guilabel:`Filters` column, and vary based on
that range. :guilabel:`Previous Period` adds a comparison to the previous period, such as the last
month or quarter. :guilabel:`Previous Year` compares the same time period from the previous year.

.. note::
   While multiple time-based filters can be added at once, only one comparison can be selected at a
   time.

.. figure:: procurement_expenses_report/filters-groups.png
   :align: center
   :alt: The drop-down menu of filters, group by and comparison options for the procurement expenses
         report.

   The filter for Q2, comparison for **Previous Period**, and group-by for **Vendor** and **Product
   Category** were selected.

Add measures
------------

After selecting the :guilabel:`Filters`, :guilabel:`Group by`, and :guilabel:`Comparison` settings,
click out of the drop-down menu.

By default, the report displays data with the following measures: :guilabel:`Order`,
:guilabel:`Total`, :guilabel:`Untaxed Total`, and :guilabel:`Count`. Click :guilabel:`Measures` at
the top-left to open the drop-down list of available measures.

Click the following specific measures to include additional columns for the procurement expenses
report:

- :guilabel:`Total` and :guilabel:`Untaxed Total`: can include one or both measures. These are
  included for overall spending analysis.
- :guilabel:`Average Cost`: included to evaluate cost efficiency.
- :guilabel:`Days to Confirm` and :guilabel:`Days to Receive`: used to assess supplier performance.
- :guilabel:`Qty Ordered` and :guilabel:`Qty Received`: used to understand order efficiency.
- :guilabel:`Qty Billed` and :guilabel:`Qty to be Billed`: used to track order accuracy.

.. tip::
   Additional measures can be included in the report, if desired, to provide additional insights.
   For example, :guilabel:`Gross Weight` and :guilabel:`Volume` may be included for further
   logistics and management analysis.

After selecting all necessary measures, click out of the drop-down menu.

.. _purchase/view-results:

View results
============

After all of the filters and measures have been selected, the report generates in the selected view.

.. image:: procurement_expenses_report/sample-per-report.png
   :align: center
   :alt: A sample version of the procurement expenses report.

Click :guilabel:`Insert in Spreadsheet` to add the pivot view into an editable spreadsheet format
within the *Documents* app.

.. important::
   The :guilabel:`Insert in Spreadsheet` option is **only** available if the *Documents Spreadsheet*
   module is installed.

.. note::
   The |per| is also available in graph view. Click the :icon:`fa-area-chart` :guilabel:`(area
   chart)` icon to change to graph view. Click the corresponding icon at the top of the report to
   switch to a :icon:`fa-bar-chart` :guilabel:`(bar chart)`, :icon:`fa-line-chart` :guilabel:`(line
   chart)`, or :icon:`fa-pie-chart` :guilabel:`(pie chart)`.

.. seealso::
   To save this report as a *favorite*, see :ref:`search/favorites`.


==================================================
SECTION: products.rst
PATH: applications/inventory_and_mrp/purchase/products.rst
==================================================

:nosearch:

========
Products
========

.. toctree::
   :titlesonly:

   products/pricelist
   products/reordering
   products/temporary_reordering


==================================================
SECTION: purchase_dashboard.rst
PATH: applications/inventory_and_mrp/purchase/advanced/purchase_dashboard.rst
==================================================

====================================
Purchase & Vendor analysis dashboard
====================================

The :guilabel:`Purchase & Vendor analysis` dashboard, available in the :doc:`Odoo Dashboards
<../../../productivity/dashboards>` app, offers various metrics to evaluate purchasing performance
and vendor reliability.

The dashboard tracks financial data like total and average purchase amounts and the number of
purchase orders. It also provides KPIs for supplier performance, such as the average time to receive
products and the percentage of quantities received on time. This makes it possible to rank vendors
and optimize procurement strategy accordingly.

To access the :guilabel:`Purchase & Vendor analysis` dashboard, go to the Dashboards app, then, in
the left panel, navigate to the :guilabel:`Logistics` section and click the name of the dashboard.
The dashboard opens in the main view.

.. image:: purchase_dashboard/purchase-vendor-analysis.png
   :alt: Purchase & Vendor analysis dashboard

.. seealso::
   - :ref:`Using Odoo dashboards <dashboards/use-dashboards>`
   - :ref:`Customizing Odoo dashboards <build_and_customize_dashboards/customize>`

.. note::
   - The :ref:`access rights <dashboards/access-and-sharing>` for Odoo dashboards are based on user
     groups, and are managed within the Dashboards app. By default, the :guilabel:`Purchase & Vendor
     analysis` dashboard is only visible to, and can only be accessed by, users with admin access to
     the **Inventory** app.

.. _purchase/dashboards/navigate:

Navigate the dashboard
======================

.. tip::
   - By default, this dashboard shows data for :guilabel:`All time`. To show data for a specific
     period, click :icon:`fa-calendar` :guilabel:`All time` above the dashboard and select or define
     the appropriate period.
   - For a more precise analysis, filter the dashboard by vendor via the search bar.

Eight cards at the top of the dashboard show the following information:

- :guilabel:`Purchased value`: indicates the total value of purchases during the selected period.
- :guilabel:`Average order value`: indicates the average purchase amount per order during the
  selected period.
- :guilabel:`Number of orders`: indicates the number of purchase orders during the selected period.
- :guilabel:`Quantity ordered`: indicates the quantity of products ordered during the selected
  period.
- :guilabel:`Days to receive`: indicates the average number of days between the order and receipt of
  purchased products (i.e., between the order deadline of the purchase order and the expected
  arrival of the purchase order line).

  .. note::
     The expected arrival date is not impacted by a change to the scheduled date on the receipt.

- :guilabel:`Days to Confirm`: indicates the average number of days before a purchase order is
  confirmed (i.e., between the creation date of the RFQ and the confirmation date of the purchase
  order).
- :guilabel:`Supplier service level`: indicates the quantity received versus the quantity purchased,
  as a percentage.

  .. note::
     This KPI is impacted by purchases with future expected receipts.

- :guilabel:`On time deliveries`: indicates the percentage of products received on time (based on
  the expected arrival date on purchase order lines)

The following charts are available:

- :guilabel:`Purchase Value by confirmation date`: shows the total value of confirmed purchases by
  date.
- :guilabel:`% On time deliveries by vendor`: shows the percentage of products received on time, by
  vendor (based on expected arrival on purchase order lines.)
- :guilabel:`Top vendors by amount`: shows the ranking of vendors by total value of purchase orders
  and number of purchase orders.
- :guilabel:`Top vendors by lead time in days`: shows the average number of days required to receive
  purchased products, by vendor (:guilabel:`Order deadline purchase order` - :guilabel:`Expected
  arrival purchase order line`).

  .. note::
     The expected arrival date is not impacted by a change to the scheduled date on the receipt.

- :guilabel:`Average product purchased cost by confirmation week`: shows the average unit cost of
  products purchased, by week in which the purchase order is confirmed.
- :guilabel:`Top purchase orders by value`: lists the ten purchase orders with the highest total
  value, in descending order.
- :guilabel:`Top 10 late receipts`: lists the ten receipts with the longest delay after the expected
  receipt date.
- :guilabel:`Top purchased products`: lists the ten products with the highest total purchase amount,
  in descending order.
- :guilabel:`Supplier Dependency Chart`: shows the percentage of purchases by buyer.


==================================================
SECTION: purchase_templates.rst
PATH: applications/inventory_and_mrp/purchase/manage_deals/purchase_templates.rst
==================================================

==================
Purchase templates
==================

.. |Pts| replace:: Purchase templates
.. |pt| replace:: purchase template
.. |RFQ| replace:: :abbr:`RFQ (request for quotation)`
.. |RFQs| replace:: :abbr:`RFQs (requests for quotation)`

*Purchase templates* are an agreement type that allow for the repeated creation of requests for
quotations (RFQs) for recurring purchases. Products can then be added and quantities can be changed,
as needed. |Pts| can be used for multiple vendors, saving time and simplifying the |RFQ| process.

|Pts| differ from *blanket orders* in that a :doc:`blanket order <blanket_orders>` is a large order
split into several deliveries, therefore all |RFQs| must be for the same vendor. |PTs| can be
replicated for multiple vendors, and can copy over quantities, which is useful when placing frequent
orders.

Configuration
-------------

First, navigate to :menuselection:`Purchase app --> Configuration --> Settings`. Under the
:guilabel:`Orders` section, tick the :guilabel:`Purchase Agreements` checkbox. Click
:guilabel:`Save` to save the changes.

.. image:: purchase_templates/purchase-agreements-setting.png
   :alt: The Purchase agreements setting in the Purchase app.

Create a new template
---------------------

Navigate :menuselection:`Purchase app --> Orders --> Purchase Agreements` and click :guilabel:`New`.

Select a :guilabel:`Vendor` from the drop-down list.

.. tip::
   To make this template available to use with multiple vendors, leave the :guilabel:`Vendor` field
   blank.

In the :guilabel:`Agreement Type` field, select :guilabel:`Purchase Template` from the drop-down.

Confirm the information in the remaining fields is correct, or update as needed.

On the :guilabel:`Products` tab, click :guilabel:`Add a line`, and select the desired product.
Update the :guilabel:`Quantity`, and set the :guilabel:`Unit Price`.

.. important::
   When adding products to a new blanket order, the pre-existing prices of products are not
   automatically added to the product lines. Instead, the prices **must** be manually assigned, by
   changing the value in the :guilabel:`Unit Price` column to an agreed-upon price with the listed
   vendor. Otherwise, the price will remain `0`.

After adding all necessary products, click :guilabel:`Confirm`.

Create a new RFQ from a purchase template
=========================================

After confirming a |pt|, new quotations can be created directly from the |pt| form. |RFQs| using
this form are pre-populated with information based on the rules set in the form. Additionally, new
quotations are automatically linked to this |pt| form, via the :icon:`fa-list-alt`
:guilabel:`RFQs/Orders` smart button at the top of the form.

To :ref:`create a new quotation <purchase/manage_deals/create-new-rfq>`, click :guilabel:`New
Quotation`. This opens a new |RFQ|, that is pre-populated with the correct information, depending on
the settings configured on the |pt| form.

If there was no vendor identified on the |pt|, choose a :guilabel:`Vendor` from the drop-down list.
Products can be added to the |RFQ| by clicking :guilabel:`Add a product` in the :guilabel:`Products`
tab. To remove a product, click the :icon:`fa-trash-o` :guilabel:`(trash)` icon at the far-right of
the product line.

From the new |RFQ| form, click :guilabel:`Send by Email` to compose and send an email to the listed
vendor. Click :guilabel:`Print RFQ` to generate a printable PDF of the quotation; or, once ready,
click :guilabel:`Confirm Order` to confirm the purchase order.

After confirming the order, return to the |pt| via the breadcrumbs. The :icon:`fa-list-alt`
:guilabel:`RFQs/Orders` smart button has been updated to list the confirmed order.

.. image:: purchase_templates/rfq-smart-button.png
   :alt: The RFQ smart button on a purchase template.


==================================================
SECTION: reordering.rst
PATH: applications/inventory_and_mrp/purchase/products/reordering.rst
==================================================

==========================
Configure reordering rules
==========================

For certain products, it is necessary to ensure that there is always a minimum amount available on
hand at any given time. Maintaining a minimum stock level ensures that businesses can meet customer
demand without delays, and keep operations running smoothly. It also helps buffer against supply
chain disruptions and unexpected spikes in demand. Inefficiencies may arise from inaccurate demand
forecasting, supply chain delays, and warehouse mismanagement, all of which can lead to increased
operational costs and wasted resources.

Keep highly demanded products in-stock at all times using reordering rules, that trigger a RFQ
(Request for Quotation) each time the forecasted stock quantities fall below the minimum.
:abbr:`RFQs (Requests for Quotation)` generated from reordering rules have the vendor, price,
quantity needed to reorder, which makes things faster and more convenient.

.. important::
   The **Inventory** app must be installed to use reordering rules, as it keeps track of stock
   quantity.

Configure products for reordering
=================================

Products must be configured in a specific way before a reordering rule can be added to them.

Starting from the :menuselection:`Inventory`, :menuselection:`Manufacturing`,
:menuselection:`Purchase`, or :menuselection:`Sales` app, navigate to :menuselection:`Products -->
Products` and then click :guilabel:`New` to make a new product. Alternatively, find a product that
already exists in the database and click into it's product form.

Next, on the product form, enable reordering by ticking the :guilabel:`Purchase` checkbox
underneath the :guilabel:`Product` name field. Then, under the :guilabel:`General Information` tab,
set the :guilabel:`Product Type` to :guilabel:`Goods`. Finally, tick the checkbox labeled
:guilabel:`Track Inventory`, and select an :doc:`option
<../../inventory/product_management/product_tracking>` from the drop-down.

.. image:: reordering/product-configured-for-reordering.png
   :alt: Configure a product for reordering in Odoo.

Add a reordering rule to a product
==================================

After properly configuring a product, a reordering rule can be added to it by selecting the now
visible :icon:`fa-refresh` :guilabel:`Reordering Rules` smart button at the top of that product's
form, then clicking :guilabel:`Create` on the :guilabel:`Reordering Rules` dashboard.

.. tip::
   If the :icon:`fa-refresh` :guilabel:`Reordering Rules` smart button is not visible, click
   :guilabel:`More`.

Once created, the reordering rule can be configured to generate purchase orders automatically by
defining the following fields:

- :guilabel:`Location` specifies where the ordered quantities should be stored once they are
  received and entered into stock.
- :guilabel:`Min Quantity` sets the lower threshold for the reordering rule while :guilabel:`Max
  Quantity` sets the upper threshold. If the stock on hand falls below the minimum quantity, a new
  purchase order is then created to replenish it up to the maximum quantity.

   .. example::
      If :guilabel:`Min Quantity` is set to `5` and :guilabel:`Max Quantity` is set to `25` and the
      stock on hand falls to four, a purchase order is then created for 21 units of the product.

- :guilabel:`Multiple Quantity` can be configured so that products are only ordered in batches of a
  certain quantity. Depending on the number entered, this can result in the creation of a purchase
  order that would put the resulting stock on hand above what is specified in the :guilabel:`Max
  Quantity` field.

   .. example::
      If :guilabel:`Max Quantity` is set to `100` but :guilabel:`Multiple Quantity` is set to order
      the product in batches of `200`, a purchase order is then created for 200 units of the
      product.

- :guilabel:`Unit` specifies the unit of measurement by which the quantity is to be ordered. For
  discrete products, this should be set to `Units`. However, it can also be set to units of
  measurement like `Volume` or `Weight` for non-discrete products like water or bricks.

.. image:: reordering/reordering-rule-configuration.png
   :alt: Configure the reordering rule in Odoo.

.. seealso::
   :doc:`../../inventory/warehouses_storage/replenishment/reordering_rules`

Manually trigger reordering rules using the scheduler
=====================================================

Reordering rules are automatically triggered by the scheduler, which runs once a day by default. To
trigger reordering rules manually, turn on developer mode, navigate to :menuselection:`Inventory app
--> Operations --> Procurement: Run Scheduler`. On the pop-up window, confirm the manual action by
clicking :guilabel:`Run Scheduler`.

.. note::
   Manually triggering reordering rules will also trigger any other scheduled actions.

Manage reordering rules
=======================

To manage the reordering rules for a single product, navigate to that product page's form and select
the :guilabel:`Reordering Rules` smart button at the top of the form.

To manage all reordering rules for every product, go to :menuselection:`Inventory app --> Operations
--> Replenishment`. From this dashboard, typical bulk actions in Odoo can be performed such as
exporting data or archiving rules that are no longer needed. As well, the :guilabel:`Filters`,
:guilabel:`Group By` or triple-dotted menu on the form are available to search for and/or organize
the reordering rules as desired.


==================================================
SECTION: rfq.rst
PATH: applications/inventory_and_mrp/purchase/manage_deals/rfq.rst
==================================================

======================
Requests for quotation
======================

.. |PO| replace:: :abbr:`PO (Purchase Order)`
.. |POs| replace:: :abbr:`POs (Purchase Orders)`
.. |RFQ| replace:: :abbr:`RFQ (Request for Quotation)`
.. |RFQs| replace:: :abbr:`RFQs (Requests for Quotation)`

Odoo's requests for quotation (RFQs) feature in the **Purchase** app standardizes ordering products
from multiple vendors with varying prices and delivery times.

|RFQs| are documents companies send to vendors requesting product pricing. In Odoo, once the vendor
approves the |RFQ|, the purchase order (PO) is confirmed to align on lead times and pricing.

Configuration
=============

Product
-------

To auto-populate product information and prices on an |RFQ|, configure products by going to
:menuselection:`Purchase app --> Products --> Products`. Select an existing product, or create a new
one by selecting :guilabel:`New`. Doing so opens the product form, where sales and purchasing data
can be configured.

To configure purchasable products, tick the :guilabel:`Purchase` checkbox, under the product name.
Next, go to the :guilabel:`Inventory` tab, and enable the :guilabel:`Buy` route.

.. important::
   The :guilabel:`Inventory` tab and routes are only visible if using the :doc:`Inventory app
   <../../inventory>`.

.. seealso::
   :doc:`Configure product types and track quantities
   <../../../inventory_and_mrp/inventory/product_management/configure>`

.. image:: rfq/product-vendor-pricelist-config.png
   :alt: Required configuration for purchasable products.


.. _purchase/manage_deals/vendor-pricelist:

Vendor pricelist
----------------

In the :guilabel:`Purchase` tab of the product form, click :guilabel:`Add a line` to input the
vendor and their price, to have this information auto-populate on an |RFQ| each time the product is
listed.

.. seealso::
   :doc:`../products/pricelist`

Default columns include :guilabel:`Quantity`, :guilabel:`Unit Price`, and :guilabel:`Delivery Lead
Time`, but other columns like, :guilabel:`Vendor Product Code` or :guilabel:`Discount (%)`, can also
be enabled.

To enable or disable columns, click the :icon:`oi-settings-adjust` :guilabel:`(additional options)`
icon on the right side of the header row to reveal a drop-down menu of additional columns that can
be added (or removed) from the :guilabel:`Purchase` tab.

.. note::
   Alternatively, prices and delivery lead times for existing products can be added by going to
   :menuselection:`Purchase app --> Configuration --> Vendor Pricelists`. Click :guilabel:`New` in
   the top-left corner. In the :guilabel:`Vendor` section of the pricelist form that appears, add
   the product information as it pertains to the vendor.

Order products
==============

With products and prices configured, follow these steps to create and send |RFQs| to make purchases
for the company.

|RFQ| dashboard
---------------

To get started, navigate to :menuselection:`Purchase app --> Orders --> Requests for Quotation`.

The :guilabel:`Requests for Quotation` dashboard displays an overview of the company's |RFQs|,
|POs|, and their status. The top of the screen breaks down all |RFQs| in the company, as well as
individual ones (where the user is the buyer) with a summary of their status.

The top-right corner also provides a report of the company's recent purchases by total value, lead
times, and number of |RFQs| sent.

Additionally, the dashboard includes buttons for:

- :guilabel:`To Send`: orders in the |RFQ| stage that have not been sent to the vendor.
- :guilabel:`Waiting`: |RFQs| that have been sent by email, and are waiting on vendor confirmation.
- :guilabel:`Late`: |RFQs| or |POs| where the :guilabel:`Order Deadline` has passed.

.. image:: rfq/rfq-dashboard.png
   :alt: RFQ dashboard with orders and order statuses.

In addition to view options, the :guilabel:`Requests for Quotation` dashboard provides
:guilabel:`Filters` and :guilabel:`Group By` options, accessible via the search bar drop-down menu.

.. seealso::
   :doc:`../../../essentials/search`

.. _purchase/manage_deals/create-new-rfq:

Create a new |RFQ|
------------------

To create a new |RFQ|, click the :guilabel:`New` button on the top-left corner of the
:guilabel:`Requests for Quotation` dashboard to reveal a new |PO| form.

Start by assigning a :guilabel:`Vendor`.

The :guilabel:`Vendor Reference` field points to the sales and delivery order numbers sent by the
vendor. This comes in handy once products are received, and the |PO| needs to be matched to the
delivery order.

With the :doc:`Purchase Agreements feature <blanket_orders>` activated, the :guilabel:`Blanket
Order` field appears, referring to long-term purchase agreements on recurring orders with set
pricing. To view and configure blanket orders, head to :menuselection:`Purchase app --> Orders -->
Purchase agreements`.

.. important::
   The :guilabel:`Purchase agreements` view only appears if the :guilabel:`Blanket Order` setting is
   enabled. To do so, navigate to :menuselection:`Purchase app --> Configuration --> Settings`, then
   tick the :guilabel:`Blanket Orders` checkbox.

Next, configure an :guilabel:`Order Deadline`, which is the date by which the vendor must confirm
their agreement to supply the products.

.. note::
   After the :guilabel:`Order Deadline` is exceeded, the |RFQ| is marked as late, but the products
   can still be ordered.

:guilabel:`Expected Arrival` is automatically calculated based on the :guilabel:`Order Deadline` and
vendor lead time. Tick the checkbox for :guilabel:`Ask confirmation` to ask the vendor to confirm
the shipping date by email.

With the :doc:`Storage Locations feature
<../../inventory/warehouses_storage/inventory_management/use_locations>` activated, the
:guilabel:`Deliver to` field appears, which specifies which warehouse operation (set in the
**Inventory** app) is used to receive the shipment.

Select the receiving warehouse address here, or select :guilabel:`Dropship` to indicate that this
order is to be shipped directly to the end customer. When :guilabel:`Dropship` is selected, the
:guilabel:`Dropship address` field is enabled. Contact names auto-populate here from the
**Contacts** app.

.. important::
   The :guilabel:`Dropship` options only appear if the :guilabel:`Dropshipping` setting is enabled
   in the **Inventory** app. To do so, navigate to :menuselection:`Inventory app --> Configuration
   --> Settings`, then tick the :guilabel:`Dropshipping` checkbox.

.. tip::
   To create |RFQs| using different currencies, each currency needs to be enabled in the
   **Invoicing** app settings. See :doc:`../../../sales/sales/products_prices/prices/currencies` to
   learn more.

Products tab
~~~~~~~~~~~~

In the :guilabel:`Products` tab, add the products to be ordered. Click :guilabel:`Add a product`,
and type in the product name, or select the item from the drop-down menu.

To create a new product and add it, type the new product name in the :guilabel:`Product` column,
select :guilabel:`Create [product name]` from the resulting drop-down menu and manually add the unit
price. Alternatively, select :guilabel:`Create and edit...` to be taken to the product form for that
new item.

:guilabel:`Catalog` can also be selected to navigate to a product menu from the chosen vendor. From
here, products can be added to the cart.

.. note::
   To make adjustments to products and prices, access the product form by clicking the
   :icon:`oi-arrow-right` :guilabel:`(right arrow)` icon that becomes available upon hovering over
   the :guilabel:`Product` name.

Send the |RFQ|
--------------

Clicking :guilabel:`Send by Email` reveals a :guilabel:`Compose Email` pop-up window, with a
:guilabel:`Purchase: Request for Quotation` template loaded, ready to send to the vendor's email
address (configured in the **Contacts** app).

After crafting the desired message, click :guilabel:`Send`. Once sent, the |RFQ| moves to the
:guilabel:`RFQ Sent` stage.

Clicking :guilabel:`Print RFQ` downloads a PDF of the |RFQ|.

.. seealso::
   :doc:`../../../essentials/contacts`

.. _purchase/manage_deals/confirm-order:

Confirm order
-------------

Clicking :guilabel:`Confirm Order` directly transforms the |RFQ| into an active |PO|.

.. tip::
   Odoo tracks communications on each order through the chatter of the |PO| form. This shows the
   emails sent between the user and the contact, as well as any internal notes and activities.
   Messages, notes, and activities can also be logged on the chatter.

Once an |RFQ| is confirmed, it creates a |PO|.

On the new |PO|, the :guilabel:`Order Deadline` field changes to :guilabel:`Confirmation Date`,
which displays the date and time the user confirmed the order.

Depending on the user's chosen configuration in the **Purchase** app settings, a *vendor bill* is
created once products have been ordered or received. For more information, refer to the
documentation on :doc:`managing vendor bills <manage>`.

.. note::
   After an order is placed, clicking :guilabel:`Receive Products` records the reception of new
   products into the database.

.. note::
   With the **Inventory** app installed, confirming a |PO| automatically creates a receipt document,
   with the product information and expected arrival dates automatically populated.

.. seealso::
   :doc:`manage`


==================================================
SECTION: suggest.rst
PATH: applications/inventory_and_mrp/purchase/advanced/suggest.rst
==================================================

=============================================
Suggest quantities based on historical demand
=============================================

.. |RFQ| replace:: :abbr:`RFQ (request for quotation)`

For a straightforward push-based replenishment strategy, the *Suggest* feature recommends quantities
to order on requests for quotations (RFQs) based on historical demand.

Key parameters
==============

- *Replenish for*: future coverage window (days).
- *Based on*: period that defines historical demand: last 7 days, 30 days, 3 months, 12 months, or
  the same month or quarter the previous year.
- *Factor*: growth or decline factor (default 100%). After obtaining the total from the period,
  multiply the historical demand by this percentage to determine how much of the demand should be
  replenished. (e.g., input `120%` if sales are projected to grow 20% more than the previous period)

Demand calculation
==================

To estimate demand, Odoo sums all :ref:`validated deliveries
<inventory/delivery/one-step>`, :ref:`components consumed in manufacturing orders
<manufacturing/basic_setup/setup-components>` (MOs), or used to :doc:`resupply subcontractors
<../../manufacturing/subcontracting/subcontracting_resupply>` coming from the warehouse specified
on the RFQ in the *Based on* period. The *average daily demand* is this sum of outgoing moves
divided by the number of days in the *Based on* period, multiplied by *Factor*. The
*estimated demand* is the *average daily demand* multiplied by *Replenish For* days.

.. math::
   :class: overflow-scroll

   Average~Daily~Demand = \frac{Delivered~or~Consumed~Items}{Based~on~Days} \times Factor
   \\ \\ Estimated~Demand = Average~Daily~Demand \times Replenish~for~Days

.. note::
   Only :guilabel:`Assigned` or :guilabel:`Confirmed` moves are taken into account in
   the *average daily demand* calculations, sales quotations or manufacturing orders
   in :guilabel:`Draft` are not taken into account until validated.

.. tip::
   In a multi-warehouse setup, internal deliveries are also counted in demand estimation.
   In the case of a central warehouse dispatching products to individual stores,
   the *average daily demand* of the central warehouse will include internal transfers to
   individual stores.

Recommended quantity
====================

To find the suggested quantity, Odoo deducts the *estimated demand* from the current stock
available quantity and all incoming shipments.

.. math::
   :class: overflow-scroll

   Recommended~Quantity = Estimated~Demand - (Available~Stock + Incoming~Stock)

.. example::
   In :ref:`example 1 <purchase/advanced/example-suggestion>`, Odoo recommends `19` units to
   *Replenish for* `14` days *Based on* the past month's `40` delivered units.

Prerequisite setup
==================

#. **Purchase** and **Inventory** apps must be :ref:`installed <general/install>`.
#. :ref:`Validate at least one delivery order <inventory/delivery/one-step>` for each product.

   Ensures there is a past delivery record so the system can calculate average daily demand.

#. :ref:`Add a vendor to the vendor pricelist <purchase/manage_deals/vendor-pricelist>` with a
   purchase price for each product.

   The *Suggest* feature is vendor-specific, so each product needs a matching vendor for accurate
   purchase quantity and price calculations.

#. Set the *Product Type* to *Goods* and ensure the product is :ref:`Tracked by quantity
   <inventory/product_management/manufacture>`.

   Ensures the system can manage stock levels and calculate recommended replenishment quantities for
   tangible items.

Suggest quantities to order
===========================

To suggest quantities based on past sales, navigate to the :menuselection:`Purchase` app. Create a
:guilabel:`New` |RFQ| or select an existing one.

In the |RFQ|, set the :guilabel:`Vendor` field to the chosen supplier.

In the :guilabel:`Products` tab, click the :guilabel:`Catalog` button to view that vendor's items.

.. important::
   Verify that each product in the catalog is configured with the chosen vendor
   and that the Purchase Order is in the |RFQ| stage

.. tip::
   By default, products listed in the product catalog are filtered by vendor.

   Remove the filter in the search bar to view all items or use the built-in :icon:`oi-group`
   :guilabel:`Group By` for :guilabel:`Product Category`.

Inside the :guilabel:`Catalog`, toggle :guilabel:`Suggest` in the left sidebar to activate
the feature. Complete its fields as follows:

- :guilabel:`Replenish for`: Number of days intended to stock products.
- :guilabel:`Based on`: There are two inputs:

   #. Period: select the time frame that represents historical demand (e.g., :guilabel:`Last 30
      Days`, :guilabel:`April 2024`).

   #. Growth factor %: scale the demand up or down (e.g., 120% for 20% growth, 30% for 70% drop).

- The total in the bottom shows the order value. Odoo multiplies the vendor's *Unit
  Price* by the suggested quantity.

Once the parameters are confirmed, click :guilabel:`Add All` to add all suggestions to the
order. Adjust amounts if needed, then click :guilabel:`Back to Quotation` to confirm the final
numbers on the |RFQ|.

.. _purchase/advanced/example-suggestion:

Example Workflow
================

Recommend at 100% growth
------------------------

A company needs to replenish orchids for 14 days, referencing the last 30 days of historical data,
assuming the revenue growth is the same this month, at 100%.

Delivered/consumed within the period:

- 20 units delivered 15 days ago in a `WH/OUT` operation.
- 20 units delivered 1 day ago
- Total: 40 units in the last 30 days

Variables
~~~~~~~~~

- Replenish for: 14 days
- Based on: 30 days

  - total delivered/consumed in the period: 40 units

- Factor: 100%

.. math::

   Average~Daily~Demand = \frac{40}{30}  \approx 1.33 \text{ units/day}

Suggested quantity
~~~~~~~~~~~~~~~~~~

.. math::

   Suggested~Quantity = 1.33 \times 14 \approx 18.67 \text{ (rounded to 19 units)}

.. figure:: suggest/result-14.png
   :alt: Suggestion to purchase 19 units.

   Suggestion to purchase 19 orchids. Since the *Unit Price* is $3, :math:`$3 \times 19 = $57`,
   which is the total amount displayed.

Planning for Mother's Day
-------------------------

To better plan for the upcoming Mother's day week, the company changes *Based on* to the
same month last year (May 2024). As the business has grown since then, they also decide to add
a 120% growth factor.

Variables
~~~~~~~~~

- Replenish for 7 days
- Based on: May 2024,

  - total delivered/consumed in the entire May 2024 month: 361 units

- Factor: 120%

.. math::

   Average~Daily~Demand = \frac{361}{30} \times 1.20 \approx 14.44 \text{ units/day}

Suggested quantity
~~~~~~~~~~~~~~~~~~

.. math::

   Suggested~Quantity = 14.44 \times 7 \approx 101.08 \text{ (rounded up to 102 units)}

.. figure:: suggest/result-30.png
   :alt: Suggestion to purchase 102 orchids.

   Suggestion to purchase 102 orchids. Each orchid costs $3 with the chosen vendor, so
   :math:`$3 \times 102 = $306`.

.. _purchase/advanced/example-wh-suggestion:

Best practices
==============

#. Validate historical data

   Forecasts are based on validated delivery orders, manufacturing orders, and other inventory
   actions that consume quantities. For delivery orders, the *Effective Date* field is considered
   the date the quantities were consumed.

   .. image:: suggest/effective-date.png
      :alt: Example of effective date field.

#. Maintain accurate vendor pricelists

   Review and update vendor pricelists to reflect the latest pricing and supplier information to
   ensure correct suggestions.

#. Test sales projections based on seasonality

   Reference prior months or quarters to capture seasonal fluctuations and experiment with growth
   and decline factors to project sales.

#. Review suggestions critically

   Although the tool provides a baseline recommendation, always apply business judgment. Market
   changes, promotions, and upcoming events can affect actual demand.


==================================================
SECTION: temporary_reordering.rst
PATH: applications/inventory_and_mrp/purchase/products/temporary_reordering.rst
==================================================

==========================
Temporary reordering rules
==========================

Some businesses require certain products to always have a minimum quantity of stock on-hand at any
given time. To avoid stock falling below a certain threshold, companies can create *reordering
rules* in Odoo to automate purchase orders for specific products.

Reordering rules keep the forecasted stock levels above a certain threshold, without exceeding a
specified upper limit, or maximum amount. When a product with a reordering rule falls below a
specified quantity, Odoo generates an order using the specified *route* (e.g. *Buy* or
*Manufacture*) to replenish the stock.

In certain cases, businesses might opt for *temporary reordering rules* when they do not want
specific products to be replenished automatically.

In Odoo, a "temporary" reordering rule is created in the replenishment dashboard when a product:

#. is configured with a *Buy* route
#. has no reordering rule configured
#. has `0` quantity in stock
#. is included in a sales order (SO).

This rule is deleted upon confirmation of the purchase order (PO) generated for the product.

.. seealso::
   - :doc:`../../inventory/warehouses_storage/replenishment/reordering_rules`
   - :doc:`../../purchase/products/reordering`

Configuration
=============

To configure a product that triggers temporary reordering rules when its stock reaches `0`, begin by
going to :menuselection:`Inventory app --> Products --> Products`, and click :guilabel:`New`.

.. note::
   The same configurations can also be made on an existing product, by going to
   :menuselection:`Inventory app --> Products --> Products`, and selecting an existing product.

On the product form, enter the product name, and ensure the :guilabel:`Can be Sold` and
:guilabel:`Can be Purchased` options are enabled, located beneath the :guilabel:`Product Name`
field.

Then, set the :guilabel:`Product Type` to `Storable Product`, under the :guilabel:`General
Information` tab.

Next, click the :guilabel:`Purchase` tab, and under :guilabel:`Vendor`, click :guilabel:`Add a line`
to select a vendor from the drop-down menu. Then, set a purchase price under :guilabel:`Price`.

.. important::
   A vendor **must** be set for temporary reordering rules to work. While a :abbr:`PO (purchase
   order)` can still be created automatically, attempting to replenish the product from the
   :guilabel:`Replenishment` dashboard in the *Inventory* app triggers a warning to add a vendor on
   the product form.

   .. image:: temporary_reordering/temporary-reordering-warning-popup.png
      :align: center
      :alt: Warning pop-up upon clicking to replenish product with no set vendor.

Before creating a :abbr:`SO (sales order)` for the product, ensure the :guilabel:`On Hand` smart
button on the product form reads `0.00 Units`. Then, ensure that the :guilabel:`Reordering Rules`
smart button reads `0`, indicating there are no rules applied to this product.

.. image:: temporary_reordering/temporary-reordering-smart-buttons.png
   :align: center
   :alt: Product form smart button row displaying reordering rules and on hand buttons.

Trigger temporary reordering rule
=================================

To trigger a temporary reordering rule, create a new sales order for a product by navigating to
:menuselection:`Sales app --> New`.

Then, add a customer in the :guilabel:`Customer` field, and click :guilabel:`Add a product` under
the :guilabel:`Product` column in the :guilabel:`Order Lines` tab. Next, select the desired product
from the drop-down menu. Lastly, :guilabel:`Confirm` the :abbr:`SO (sales order)`.

.. image:: temporary_reordering/temporary-reordering-sales-order.png
   :align: center
   :alt: Sales order for product with no set reordering rules.

.. _purchase/check-replenishment:

Check replenishment report
==========================

To see the temporary reordering rule created for the out-of-stock product included in the sales
order, navigate to :menuselection:`Inventory app --> Operations --> Replenishment`. Doing so opens
the :guilabel:`Replenishment` dashboard.

On this dashboard, locate the product for which the temporary reordering rule was created. On its
product line, its :guilabel:`On Hand` quantity, negative :guilabel:`Forecast` quantity, *Buy*
:guilabel:`Route`, and :guilabel:`To Order` quantity to replenish can be seen.

Additionally, two replenishment options are located to the far-right of the row: :guilabel:`Order
Once` and :guilabel:`Automate`.

.. image:: temporary_reordering/temporary-reordering-replenishment-dashboard.png
   :align: center
   :alt: Replenishment report displaying temporary reordering rule and options.

To use the one-time, temporary reordering rule, click :guilabel:`Order Once`. This action triggers a
confirmation pop-up window in the top-right corner, reading :guilabel:`The following replenishment
order has been generated`, along with a new purchase order number.

.. tip::
   Once the purchase order has been generated after clicking :guilabel:`Order Once`, refresh the
   page. The temporary reordering rule for the product no longer appears in the
   :guilabel:`Replenishment` dashboard.

Complete purchase order
=======================

To view the purchase order created from the :guilabel:`Replenishment` dashboard, navigate to the
:menuselection:`Purchase app`, and select the generated :abbr:`PO (purchase order)` from the
:guilabel:`Requests for Quotation` overview.

From here, click :guilabel:`Confirm Order`, then click :guilabel:`Receive Products`. Finally, click
:guilabel:`Validate` to complete the purchase order.

.. image:: temporary_reordering/temporary-reordering-purchase-order.png
   :align: center
   :alt: Purchase order for product ordered with temporary reordering rule.

Now, the original sales order can be delivered and invoiced.

.. note::
   Once the :abbr:`SO (sales order)` is delivered and invoiced, ensure there are no reordering rules
   on the product form.

   Go to :menuselection:`Inventory app --> Products --> Products`, select the product, and confirm
   that the :guilabel:`Reordering Rules` smart button displays `0`.


==================================================
SECTION: vendor_costs_report.rst
PATH: applications/inventory_and_mrp/purchase/advanced/vendor_costs_report.rst
==================================================

===================
Vendor costs report
===================

.. |RFQ| replace:: :abbr:`RfQ (Request for Quotation)`
.. |RFQs| replace:: :abbr:`RfQs (Requests for Quotation)`
.. |POs| replace:: :abbr:`POs (Purchase Orders)`
.. |caret| replace:: :icon:`fa-caret-down` :guilabel:`(down)` icon

With the *Purchase* application, users can track the fluctuation of vendor costs over time. This
allows users to identify the most expensive vendors, and track seasonal changes.

Create vendor costs reports
===========================

To create a vendor costs report, first navigate to :menuselection:`Purchase app --> Reporting -->
Purchase` to open the :guilabel:`Purchase Analysis` dashboard. By default, the dashboard displays a
line chart overview of the :guilabel:`Untaxed Total` of POs (Purchase Orders) with a
:guilabel:`Confirmation Date` for the current month, or of RFQs (Requests for Quotation) with a
status of *Draft*, *Sent, or *Cancelled*.

.. _purchase/vender-cost-report-filters:

Add filters and groups
----------------------

On the top-right, click the :icon:`oi-view-pivot` :guilabel:`(pivot)` icon to switch to pivot view.

Remove any default filters from the :guilabel:`Search...` bar. Then, click the |caret| to open the
drop-down menu that contains the :guilabel:`Filters`, :guilabel:`Group By`, and
:guilabel:`Favorites` columns.

.. note::
   Unless otherwise specified, the report displays data from both |RFQs| and |POs|. This can be
   changed by selecting either :guilabel:`Requests for Quotation` or :guilabel:`Purchase Orders`
   under the :guilabel:`Filters` column.

Under the :guilabel:`Filters` column, select a date range to use for comparison. The report can be
filtered by either :guilabel:`Order Date` or :guilabel:`Confirmation Date`. Choose one from the
list, and click the |caret| to specify the date range, either by month, quarter, or year.

Next, under the :guilabel:`Group by` column, select :guilabel:`Vendor`. Then, select
:guilabel:`Product`, which is also located in the :guilabel:`Group By` column.

.. note::
   Selecting :guilabel:`Product` is **not** required for this report. However, it is recommended, as
   it provides additional insight into the performance of individual vendors. Additional selections
   can be made under the :guilabel:`Group by` heading as well, including :guilabel:`Product
   Category`, :guilabel:`Status`, and :guilabel:`Purchase Representative`.

   To ensure the report is generated correctly, make sure that :guilabel:`Vendor` is the **first**
   selection made under the :guilabel:`Group By` column.

Next, make a selection under the :guilabel:`Comparison` heading. These options are only available
after the date range is selected under the :guilabel:`Filters` column, and vary based on that range.
:guilabel:`Previous Period` adds a comparison to the previous period, such as the last month or
quarter. :guilabel:`Previous Year` compares the same time period from the previous year.

.. note::
   While multiple time-based filters can be added at once, only one comparison can be selected at a
   time.

.. image:: vendor_costs_report/filters-groups.png
   :align: center
   :alt: The drop-down menu of filters, group by and comparison options for the vendor costs report.

Add measures
------------

After selecting the :guilabel:`Filters`, :guilabel:`Group by`, and :guilabel:`Comparison` settings,
click out of the drop-down menu.

By default, the report displays with the following measures: :guilabel:`Order`, :guilabel:`Total`,
:guilabel:`Untaxed Total`, and :guilabel:`Count`. Click :guilabel:`Measures` at the top-left to open
the drop-down list of available measures. Click :guilabel:`Average Cost` to add it to the report.
Select any additional measures to add to the report, or click on any of the already selected
measures to remove them, if desired.

.. tip::
   It is recommended to run the report with at least :guilabel:`Average Cost`, :guilabel:`Total`, or
   :guilabel:`Untaxed Total` selected from the :guilabel:`Measures` list. Additional measures, such
   as :guilabel:`Days to Receive`, can be added to provide additional insights.

View results
============

After all of the :ref:`filters and measures have been selected
<purchase/vender-cost-report-filters>`, the report generates in the pivot view. Click
:guilabel:`Insert in Spreadsheet` to add the pivot view into an editable spreadsheet format within
the *Documents* app.

.. important::
   The :guilabel:`Insert in Spreadsheet` option is only available if the *Documents Spreadsheet*
   module is installed.

.. image:: vendor_costs_report/sample-vendor-report.png
   :align: center
   :alt: A sample of a vendor costs report with the measures set as total and average costs.

.. note::
   The vendor costs report is also available in *graph* view. Click the :icon:`fa-area-chart`
   :guilabel:`(area chart)` icon to change to graph view. Click the corresponding icon at the top of
   the report to switch to a :icon:`fa-bar-chart` :guilabel:`(bar chart)`, :icon:`fa-line-chart`
   :guilabel:`(line chart)`, or :icon:`fa-pie-chart` :guilabel:`(pie chart)`.

.. seealso::
   To save this report as a *favorite*, see :ref:`search/favorites`.
