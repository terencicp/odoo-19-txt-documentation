

==================================================
SECTION: integrations.rst
PATH: applications/general/integrations.rst
==================================================

============
Integrations
============

.. toctree::

   integrations/mail_plugins
   integrations/unsplash
   integrations/geolocation
   integrations/google_translate
   integrations/cloud_storage


==================================================
SECTION: cloud_storage.rst
PATH: applications/general/integrations/cloud_storage.rst
==================================================

=============
Cloud Storage
=============

The cloud storage integration allows to store :doc:`chatter <../../productivity/discuss/chatter>`
and email attachments on the :ref:`Google Cloud <cloud-storage/google>` or :ref:`Microsoft Azure
<cloud-storage/microsoft>` platform instead of the database's server.

The module can be used to prevent large files from being uploaded to and downloaded from a
database's server or when a database requires more data storage.

.. note::
   - Files generated by Odoo (e.g., sales orders) and Documents/Sign app files are always stored on
     the database's server.
   - A database's storage limit depends on its hosting solution:

     - Odoo Online: 100 GB
     - Odoo.sh:

       - Shared hosting: 512 GB
       - Dedicated hosting: 4 TB

     - On-premise: limited by the infrastructure in place.

.. _cloud-storage/google:

Google Cloud
============

First, register and sign in to `Google Cloud <https://cloud.google.com>`_.

.. _cloud-storage/google/service:

Service account
---------------

#. Open the navigation sidebar on the Google Cloud console, then go to :menuselection:`IAM & Admin
   --> Service Accounts --> Create service account`.
#. Define a :guilabel:`Service account name`, click :guilabel:`Create and continue`, then
   :guilabel:`Done`.

   .. image:: cloud_storage/service-account.png
      :alt: Creating a Google Cloud service account

#. Note down the service account's :guilabel:`Email` as it will be used during the :ref:`cloud
   storage bucket configuration <cloud-storage/google/bucket>`.
#. Click the :icon:`fa-ellipsis-v` (:guilabel:`Actions`) button, then select :guilabel:`Manage
   keys`.

   .. image:: cloud_storage/manage-keys.png
      :alt: Accessing the "Manage keys" action

#. Go to :menuselection:`Add key --> Create new key`, select :guilabel:`JSON` as the :guilabel:`Key
   type`, and click :guilabel:`Create`. Store the downloaded JSON file containing the key securely.
   It will be used when :ref:`configuring Odoo <cloud-storage/google/odoo>`.

   .. image:: cloud_storage/create-key.png
      :alt: Creating a Google Cloud service account's JSON key

.. _cloud-storage/google/bucket:

Cloud storage bucket
--------------------

#. Open the navigation sidebar on the Google Cloud console, then go to :menuselection:`Cloud
   Storage --> Buckets --> Create`.
#. Enter a bucket name following the `bucket naming guidelines <https://cloud.google.com/storage/docs/buckets?_gl=1*h4hwrv*_ga*MTcwNDM2NDE1Ny4xNzQzNzUxOTEy*_ga_WH2QY8WWF5*MTc0Mzc2NDMyOS4zLjEuMTc0Mzc2NDMyOS42MC4wLjA.#naming>`_
   and note it down as it will be used when :ref:`configuring Odoo <cloud-storage/google/odoo>`.
#. Configure the bucket as desired and click :guilabel:`Create` when done.

   .. image:: cloud_storage/create-bucket.png
      :alt: Creating a bucket

#. Click the :icon:`fa-ellipsis-v` (:guilabel:`More actions`) button, then select :guilabel:`Edit
   access`.

   .. image:: cloud_storage/bucket-actions.png
      :alt: Accessing the "Edit access" action of a Google Cloud storage bucket

#. Click :guilabel:`Add principal` and paste the service account's email in the :guilabel:`New
   principals` field.
#. Select :guilabel:`Storage Admin` as :guilabel:`Role` under the :guilabel:`Cloud Storage` section
   and click :guilabel:`Save`.

   .. image:: cloud_storage/bucket-access.png
      :alt: Adding a principal to a Google Cloud storage bucket

.. _cloud-storage/google/odoo:

Odoo configuration
------------------

#. :ref:`Install <general/install>` the :guilabel:`Cloud Storage Google` module.
#. Open the :guilabel:`Settings` app and select :guilabel:`Cloud Storage` in the navigation sidebar.
#. Select :guilabel:`Google Cloud Storage` as the :guilabel:`Cloud Storage Provider for new
   attachments`.
#. Enter the :guilabel:`Google Bucket Name` as :ref:`previously set <cloud-storage/google/bucket>`.
#. Click :guilabel:`Upload your file` next to :guilabel:`Google Service Account Key` and select the
   :ref:`downloaded JSON file <cloud-storage/google/service>`.
#. Set a :guilabel:`Minimum File Size (bytes)` for attachments to be stored on Google Cloud.

.. _cloud-storage/microsoft:

Microsoft Azure
===============

First, register and sign it to `Microsoft Azure <https://azure.microsoft.com>`_.

.. _cloud-storage/microsoft/app:

App registration
----------------

#. On the Microsoft Azure portal, search for the :guilabel:`App registrations` service and open it.
#. Click :guilabel:`New registration`, enter an application :guilabel:`Name`, select
   :guilabel:`Accounts in any organizational directory (Any Microsoft Entra ID tenant -
   Multitenant)` under :guilabel:`Supported account types`, and click :guilabel:`Register`.

   .. image:: cloud_storage/app-registration.png
      :alt: Registering a Microsoft Azure app

#. Note down the :guilabel:`Application (client) ID` and :guilabel:`Directory (tenant) ID` as they
   will be used when :ref:`configuring Odoo <cloud-storage/microsoft/odoo>`.
#. Click :guilabel:`Add a certificate or secret` next to :guilabel:`Client credentials`, click
   :guilabel:`New client secret`, then :guilabel:`Add`.

   .. important::
      For security reasons, leave the :guilabel:`Expires` field on `180 days (6 months)` or choose a
      shorter expiration interval. Before the secret expires, adding a new client secret and
      updating :ref:`Odooâ€™s configuration <cloud-storage/microsoft/odoo>` with the new value is
      necessary.

#. Copy the client secret's :guilabel:`Value` and store it securely. It will be used when
   :ref:`configuring Odoo <cloud-storage/microsoft/odoo>`.

   .. image:: cloud_storage/app-client-secret.png
      :alt: Adding a secret to a Microsoft Azure app

.. _cloud-storage/microsoft/storage:

Storage account
---------------

#. Search for the :guilabel:`Storage accounts` service, open it, and click :guilabel:`Create`.
#. Click :guilabel:`Create new` below the :guilabel:`Resource group` field, enter a
   :guilabel:`Name`, and click :guilabel:`OK`.
#. Enter a unique :guilabel:`Storage account name` and note it down as it will be used when
   :ref:`configuring Odoo <cloud-storage/microsoft/odoo>`.
#. Configure the storage account as desired, and, when done, click :guilabel:`Review + create`, then
   :guilabel:`Create`.

   .. image:: cloud_storage/storage-account.png
      :alt: Creating a Microsoft Azure storage account

.. _cloud-storage/microsoft/container:

Container
~~~~~~~~~

#. Open your storage account resource, for example by searching for its name, and select
   :guilabel:`Containers` under :guilabel:`Data storage` in the navigation sidebar.
#. Enter a :guilabel:`Name`, note it down as it will be used when :ref:`configuring Odoo
   <cloud-storage/microsoft/odoo>`, and click :guilabel:`Create`.

   .. image:: cloud_storage/storage-account-container.png
      :alt: Creating a Microsoft Azure storage container

.. _cloud-storage/microsoft/resource:

Resource sharing
~~~~~~~~~~~~~~~~

#. Select :guilabel:`Resource sharing (CORS)` under :guilabel:`Settings` on the storage account's
   navigation sidebar.
#. Create a first CORS blob service rule:

   - :guilabel:`Allowed origins`: `*`
   - :guilabel:`Allowed methods`: `GET`
   - :guilabel:`Allowed headers`: `Content-Type`
   - :guilabel:`Exposed headers`: `Content-Type`
   - :guilabel:`Max age`: `0`

#. Create a second CORS blob service rule and click :guilabel:`Save`:

   - :guilabel:`Allowed origins`: `*`
   - :guilabel:`Allowed methods`: `PUT`
   - :guilabel:`Allowed headers`: `content-type,x-ms-blob-type`
   - :guilabel:`Exposed headers`: `content-type,x-ms-blob-type`
   - :guilabel:`Max age`: `0`

   .. image:: cloud_storage/resource-sharing.png
      :alt: Creating Microsoft Azure storage account CORS rules

.. _cloud-storage/microsoft/role:

Role assignment
~~~~~~~~~~~~~~~

#. Select :guilabel:`Access control (IAM)` on the storage account's navigation sidebar, then click
   :guilabel:`Add` and select :guilabel:`Add role assignment`.
#. Search for :guilabel:`Storage Blobs Data Contributor` and click :guilabel:`Next`.

   .. note::
      To remove the unnecessary `delete` permission, create a :ref:`custom role
      <cloud-storage/microsoft/custom>` and search for the custom role's name instead.

#. Click :guilabel:`Select members`, enter the name of the :ref:`previously registered application
   <cloud-storage/microsoft/app>`, select it, and click :guilabel:`Select`.
#. Click :guilabel:`Review + assign` twice.

   .. image:: cloud_storage/storage-account-role.png
      :alt: Adding a member to a container

.. _cloud-storage/microsoft/custom:

Custom role
***********

.. note::
   This step is **optional**. However, removing the `delete` permission would prevent anyone
   managing to access the cloud storage's credentials from deleting files.

#. Open your subscription resource, for example by searching for its name, select :guilabel:`Access
   control (IAM)` in the navigation sidebar, click :guilabel:`Add` and select :guilabel:`Add custom
   role`.
#. Select the :guilabel:`JSON` tab and click :guilabel:`Edit`. Copy the code below, add your
   `subscription-id` under `assignableScopes` and change the `roleName` (`Custom role`) if desired,
   paste it, and click :guilabel:`Save`.

.. code-block:: json

   {
       "properties": {
           "roleName": "Custom role",
           "description": "",
           "assignableScopes": [
               "/subscriptions/subscription-id"
           ],
           "permissions": [
               {
                   "actions": ["Microsoft.Storage/storageAccounts/blobServices/generateUserDelegationKey/action"],
                   "notActions": [],
                   "dataActions": ["Microsoft.Storage/storageAccounts/blobServices/containers/blobs/read", "Microsoft.Storage/storageAccounts/blobServices/containers/blobs/add/action"],
                   "notDataActions": []
               }
           ]
       }
   }

.. _cloud-storage/microsoft/odoo:

Odoo configuration
------------------

#. :ref:`Install <general/install>` the :guilabel:`Cloud Storage Azure` module.
#. Open the :guilabel:`Settings` app and select :guilabel:`Cloud Storage` in the navigation sidebar.
#. Select :guilabel:`Azure Cloud Azure` as the :guilabel:`Cloud Storage Provider for new
   attachments`.
#. Enter:

   - the :ref:`storage account name <cloud-storage/microsoft/storage>` in the :guilabel:`Azure
     Account Name` field;
   - the :ref:`container name <cloud-storage/microsoft/container>` in the :guilabel:`Azure Container
     Name` field;
   - the :ref:`directory (tenant) ID <cloud-storage/microsoft/app>` in the :guilabel:`Azure Tenant
     ID` field;
   - the :ref:`application (client) ID <cloud-storage/microsoft/app>` in the :guilabel:`Azure Client
     ID` field; and
   - the :ref:`client secret's value <cloud-storage/microsoft/app>` in the :guilabel:`Azure Client
     Secret` field.

#. Set a :guilabel:`Minimum File Size (bytes)` for attachments to be stored on Microsoft Azure.


==================================================
SECTION: geolocation.rst
PATH: applications/general/integrations/geolocation.rst
==================================================

===========
Geolocation
===========

You can locate contacts or places and generate routes on a map in Odoo.

.. image:: geolocation/contacts.png
   :alt: Map displaying a contact's location.

To use the feature, open the :guilabel:`Settings` app, and, under the :guilabel:`Integrations`,
section, activate :guilabel:`Geo Localization`. Then, choose between using the OpenStreetMap or
Google Places API.

**OpenStreetMap**

OpenStreetMap is a free, open geographic database updated and maintained by volunteers. To use it,
select :guilabel:`Open Street Map`.

  .. important::
     OpenStreetMap might not always be accurate. You can `join the OpenStreetMap community
     <https://www.openstreetmap.org/fixthemap>`_ to fix any issues encountered.

**Google Places API map**

The Google Places API map provides detailed info on places, businesses, and points of interest. It
supports location-based features like search, navigation, and recommendations.

.. important::
   Using the Google Places API could require `payment to Google
   <https://mapsplatform.google.com/pricing/>`_.

To use it, select :guilabel:`Google Place Map` and enter your :ref:`API Key
<address_autocomplete/generate_api_key>`.

.. image:: geolocation/google-places-api-key.png
   :alt: Google Places API key

.. seealso::
   :doc:`/applications/websites/website/configuration/address_autocomplete`


==================================================
SECTION: gmail.rst
PATH: applications/general/integrations/mail_plugins/gmail.rst
==================================================

============
Gmail Plugin
============

The *Gmail Plugin* integrates an Odoo database with a Gmail inbox, so users can keep track of all
their work between Gmail and Odoo, without losing any information.

Odoo Online users
=================

For databases hosted on Odoo Online (or Odoo.sh), follow the steps below to configure the Gmail
Plugin.

Install the Gmail Plugin
------------------------

First, log in to the Gmail account that the user wishes to connect to Odoo.

From the Gmail inbox, click the plus sign icon on the right side panel to get add-ons. If the side
panel is not visible, click on the arrow icon at the bottom right corner of the inbox to reveal it.

.. image:: gmail/gmail-side-panel.png
   :align: center
   :alt: Plus sign icon on the Gmail inbox side panel.

Then, use the search bar to search for `Odoo` and locate the :guilabel:`Odoo Inbox Addin`.

.. image:: gmail/google-workspace-marketplace.png
   :align: center
   :alt: Odoo Inbox Addin on Google Workspace Marketplace.

Or, go directly to the :guilabel:`Odoo Inbox Addin` page on the `Google Workspace Marketplace
<https://workspace.google.com/marketplace/app/odoo_inbox_addin/873497133275>`_.

Once the plugin is located, click :guilabel:`Install`. Then, click :guilabel:`Continue` to start
the installation.

Next, select which Gmail account the user wishes to connect to Odoo. Then click :guilabel:`Allow`
to let Odoo access the Google account. Google will then show a pop-up window confirming that the
installation was successful.

Configure the Odoo database
---------------------------

The :guilabel:`Mail Plugin` feature must be enabled in the Odoo database in order to use the Gmail
Plugin. To enable the feature, go to :menuselection:`Settings --> General Settings`. Under the
:guilabel:`Integrations` section, activate :guilabel:`Mail Plugin`, and then click
:guilabel:`Save`.

.. image:: gmail/mail-plugin-setting.png
   :align: center
   :alt: The Mail Plugin feature in the Settings.

Configure the Gmail inbox
-------------------------

In the Gmail inbox, a purple Odoo icon is now visible on the right side panel. Click on the Odoo
icon to open up the Odoo plugin window. Then, click on any email in the inbox. Click
:guilabel:`Authorize Access` in the plugin window to grant Odoo access to the Gmail inbox.

.. image:: gmail/authorize-access.png
   :align: center
   :alt: The Authorize Access button in the right sidebar of the Odoo plugin panel.

Next, click :guilabel:`Login`. Then, enter the URL of the Odoo database that the user wishes to
connect to the Gmail inbox, and log in to the database.

.. note::
   Use the general URL for the database, not the URL of a specific page in the database. For
   example, use `https://mycompany.odoo.com`, not
   `https://mycompany.odoo.com/web#cids=1&action=menu`.

Finally, click :guilabel:`Allow` to let Gmail access the Odoo database. The browser will then show
a :guilabel:`Success!` message. After that, close the window. The Gmail inbox and Odoo database are
now connected.

Odoo On-Premise users
=====================

For databases hosted on servers other than Odoo Online (or Odoo.sh), follow the steps below to
configure the Gmail Plugin.

.. note::
   As part of their security guidelines, Google requires add-on creators to provide a list of URLs
   that can be used in actions and redirections launched by the add-on. This protects users by
   ensuring, for example, that no add-on redirects users toward a malicious website. (Read more on
   `Google Apps Script <https://developers.google.com/apps-script/manifest/allowlist-url>`_.)

   Since Odoo can only list the `odoo.com` domain and not every on-premise customer's unique server
   domain, on-premise customers cannot install the Gmail Plugin from the Google Workspace
   Marketplace.

Install the Gmail Plugin
------------------------

First, access the `GitHub repository <https://github.com/odoo/mail-client-extensions>`_ for the
Odoo Mail Plugins. Next, click on the green :guilabel:`Code` button. Then, click
:guilabel:`Download ZIP` to download the Mail Plugin files onto the user's computer.

.. image:: gmail/gh-download-zip.png
   :align: center
   :alt: Download the ZIP file from the Odoo GitHub repository for Mail Plugins.

Open the ZIP file on the computer. Then, go to :menuselection:`mail-client-extensions-master -->
gmail --> src --> views`, and open the :file:`login.ts` file using any text editor software,
such as Notepad (Windows), TextEdit (Mac), or Visual Studio Code.

Delete the following three lines of text from the :file:`login.ts` file:

.. code-block::

   if (!/^https:\/\/([^\/?]*\.)?odoo\.com(\/|$)/.test(validatedUrl)) {
        return notify("The URL must be a subdomain of odoo.com");
   }

This removes the `odoo.com` domain constraint from the Gmail Plugin program.

Next, in the ZIP file, go to :menuselection:`mail-client-extensions-master --> gmail`, and open the
file called :guilabel:`appsscript.json`. In the :guilabel:`urlFetchWhitelist` section, replace all
the references to `odoo.com` with the Odoo customer's unique server domain.

Then, in the same :guilabel:`gmail` folder, open the file called :guilabel:`README.md`. Follow the
instructions in the :guilabel:`README.md` file to push the Gmail Plugin files as a Google Project.

.. note::
   The computer must be able to run Linux commands in order to follow the instructions on the
   :guilabel:`README.md` file.

After that, share the Google Project with the Gmail account that the user wishes to connect to Odoo.
Then, click :guilabel:`Publish` and :guilabel:`Deploy from manifest`. Lastly, click
:guilabel:`Install the add-on` to install the Gmail Plugin.

Configure the Odoo database
---------------------------

The :guilabel:`Mail Plugin` feature must be enabled in the Odoo database in order to use the Gmail
Plugin. To enable the feature, go to :menuselection:`Settings --> General Settings`. Under the
:guilabel:`Integrations` section, activate :guilabel:`Mail Plugin`, and then click :guilabel:`Save`.

.. image:: gmail/mail-plugin-setting.png
   :align: center
   :alt: The Mail Plugin feature in the Settings.

Configure the Gmail inbox
-------------------------

In the Gmail inbox, a purple Odoo icon is now visible on the right side panel. Click on the Odoo
icon to open up the Odoo plugin window. Then, click on any email in the inbox. Click
:guilabel:`Authorize Access` in the plugin window to grant Odoo access to the Gmail inbox.

.. image:: gmail/authorize-access.png
   :align: center
   :alt: The Authorize Access button in the right sidebar of the Odoo plugin panel.

Next, click :guilabel:`Login`. Then, enter the URL of the Odoo database that the user wishes to
connect to the Gmail inbox, and log in to the database.

.. note::
   Use the general URL for the database, not the URL of a specific page in the database. For
   example, use `https://mycompany.odoo.com`, not
   `https://mycompany.odoo.com/web#cids=1&action=menu`.

Finally, click :guilabel:`Allow` to let Gmail access the Odoo database. The browser will then show
a :guilabel:`Success!` message. After that, close the window. The Gmail inbox and Odoo database are
now connected.


==================================================
SECTION: google_translate.rst
PATH: applications/general/integrations/google_translate.rst
==================================================

================
Google Translate
================

*Google Translate* can be used to translate user generated text in the Odoo chatter.

Google API console
==================

A majority of the setup for integrating *Google Translate* into Odoo is done with the *Google API
console*. Once the following processes are complete, an *API key* is created to input in Odoo.

.. seealso::
   `Google Translate setup on Google <https://cloud.google.com/translate/docs/setup>`_

Create a new project
--------------------

To get started, go to the `Google API Console <https://console.developers.google.com>`_. Then, log
in with a *Google Workspace* account, if there is one. If not, log in with a personal Gmail account
(this should match the email address that has billing attached to it).

Next, click :guilabel:`Create Project` on the far-right of the :guilabel:`OAuth consent screen`.

.. tip::
   If the *Google API Console* has existing projects, click the drop-down menu next to the
   :guilabel:`Google Cloud` icon, and a pop-over window appears. Next, click :guilabel:`New Project`
   top-right of the pop-over window.

On the :guilabel:`New Project` screen, rename the :guilabel:`Project name` to `Odoo Translate`, and
browse for the :guilabel:`Location`. Set the :guilabel:`Location` as the *Google Workspace
organization*. If a personal Gmail account is being used, leave the :guilabel:`Location` as
:guilabel:`No Organization`.

.. image:: google_translate/new-project.png
   :align: center
   :alt: Project Name and Location for Google OAuth.

Click on :guilabel:`Create` to finish this step.

API library
-----------

Next, the *Cloud Translation API* needs to be installed on this newly-created project. To do that,
click :menuselection:`Library` in the left menu. Then, search the term `Cloud Translation API`, and
click into the result. This should be a *Google Enterprise API* labeled :guilabel:`Cloud Translation
API`.

Click :guilabel:`Enable` to install the library on this project.

.. important::
   Using the *Google Translate* API **requires** a current billing account with `Google
   <https://myaccount.google.com/>`_.

Once a billing account is setup with *Google* and the library is enabled, click :guilabel:`Manage`
to finish configuration on the API.

Create credentials
------------------

Now that the project is set up, and the *Cloud Translation API* is enabled, credentials **must** be
created. This includes the *API key*.

To begin this process, click :menuselection:`Credentials` in the left sidebar menu.

Then, click :guilabel:`Create Credentials` in the top menu, and select :guilabel:`API key` from the
drop-down menu.

.. image:: google_translate/api-key.png
   :align: center
   :alt: Create an API key in the Google API console.

Copy the :guilabel:`API key` for use in the next section.

.. important::
   For security purposes, the usage of the *API key* can be restricted.

   To do that, go to the *API restrictions* by clicking on :guilabel:`Edit API key` in the pop-over
   window, or by clicking on the listed API key on the :guilabel:`Credentials` page. From here, key
   restrictions can be set. This includes setting an application to restrict the use of the API key,
   and whether this API key can call any API.

   It is recommended that the Odoo *Translate API* be restricted to **only** allow requests from the
   configured Odoo database and to the *Cloud Translation API*.

   To add the website restriction, click :guilabel:`Websites`, under the :guilabel:`Set an
   application restriction`. Then, enter the address of the database *Google Translate* is being
   used in, by clicking on :guilabel:`Add`. Lastly, add the :abbr:`URL (Uniform Resource Locator)`,
   and click :guilabel:`Done`.

   To restrict use of the key to a selected API, first, select :guilabel:`Restrict key`, under the
   :guilabel:`API restrictions` section. Then use the drop-down menu to choose the API being
   configured (*Cloud Translation API*).

.. tip::
   - Save the API key: copy the API key and store it somewhere secure.
   - Do **not** share the API key publicly or expose it in client-side code.

Odoo configuration
==================

To access the integration in Odoo, navigate to the :menuselection:`Settings app --> Discuss
section`. Enter the API key into the field labeled :guilabel:`Message Translation`. Then,
:guilabel:`Save` the settings, and *Google Translate* can be used in any chatter throughout the
database.

.. image:: google_translate/odoo-config.png
   :align: center
   :alt: Odoo configuration of the API key from the *Google API Console*.

Translate chatter
=================

To translate a user's text from another language, click the :guilabel:`... (three dot)` icon menu to
the right of the chatter. Then, select :guilabel:`Translate`. The content translates to the
*language* set on the user's preferences.

.. image:: google_translate/google-translate.png
   :align: center
   :alt: Google Translate present in an Odoo database's chatter.

.. seealso::
   :ref:`language/install`


==================================================
SECTION: mail_plugins.rst
PATH: applications/general/integrations/mail_plugins.rst
==================================================

:show-content:

============
Mail Plugins
============

.. toctree::
   :titlesonly:

   mail_plugins/outlook
   mail_plugins/gmail

Mail Plugins are connectors that bridge your mailbox with your Odoo database. With them, you can
interact with your Odoo database directly from your mailbox by:

- Creating leads and centralizing prospects' emails into the CRM app.
- Generating tasks in any Odoo project.
- Creating tickets in the Helpdesk app.
- Searching and storing insights on your contacts.

Mail Plugins are available for :doc:`Outlook <mail_plugins/outlook>` and :doc:`Gmail
<mail_plugins/gmail>`.

.. _mail_plugins/pricing:

Pricing
=======

Mail Plugins are **free** to install and use.

However, they can provide **Lead Enrichment**, which is part of a paid service known as **Lead
Generation**.

Mail plugins allow you to test Lead Enrichment for free, whether you connect the plugins to a
database or not. After a while, the plugins ask you to buy :doc:`../../essentials/in_app_purchase`
credits if you would like to keep using this service.

.. _mail_plugins/lead-generation:

Lead Generation IAP service
---------------------------

Lead Enrichment uses the *Lead Generation IAP service*. Each request consumes one *Lead Generation
credit*.

To buy credits, go to :menuselection:`Settings --> CRM --> Lead Enrichment --> Buy credits` and
select a package.

.. note::
   - If you are out of credits, the only information populated when clicking on the suggested
     company is its website link and logo.
   - Check out the `Lead Generation IAP service Privacy Policy
     <https://iap.odoo.com/privacy#header_3>`_.

.. seealso::
   - :doc:`../../essentials/in_app_purchase`
   - `Odoo Tutorials: Lead Enrichment <https://www.odoo.com/r/p73>`_


==================================================
SECTION: outlook.rst
PATH: applications/general/integrations/mail_plugins/outlook.rst
==================================================

==============
Outlook Plugin
==============

Outlook allows for third-party applications to connect in order to execute database actions from
emails. Odoo has a plugin for Outlook that allows for the creation of an opportunity from the email
panel.

Configuration
=============

The Outlook :doc:`Mail Plugin <../mail_plugins>` needs to be configured both on Odoo and Outlook.

.. _mail-plugin/outlook/enable-mail-plugin:

Enable Mail Plugin
------------------

First, enable the *Mail Plugin* module in the database. Go to :menuselection:`Settings --> General
Settings --> Integrations`, enable :guilabel:`Mail Plugin`, and :guilabel:`Save` the configuration.

.. _mail-plugin/outlook/install-plugin:

Install the Outlook Plugin
--------------------------

Download (:menuselection:`Save Page As --> Web Page XML only`) the following XML file to upload
later: `https://download.odoocdn.com/plugins/outlook/manifest.xml
<https://download.odoocdn.com/plugins/outlook/manifest.xml>`_.

Next, open the Outlook mailbox, and select any email. After completing this, click on the
:guilabel:`Apps` button in the upper right-side, then click :guilabel:`Get add-ins`.

.. image:: outlook/more-actions.png
   :alt: Apps button in Outlook

Following this step, select the :guilabel:`My add-ins` tab on the left-side.

.. image:: outlook/my-add-ins.png
   :alt: My add-ins in Outlook

Under :guilabel:`Custom Addins` towards the bottom, click on :guilabel:`+ Add a custom add-in`, then
select :guilabel:`Add from file...`

.. image:: outlook/custom-add-ins.png
   :alt: Custom add-ins in Outlook

For the next step, attach the `manifest.xml` file downloaded above, and press :guilabel:`OK`. Next,
read the warning and click on :guilabel:`Install`.

.. image:: outlook/add-in-warning.png
   :alt: Custom add-in installation warning in Outlook

.. _mail-plugin/outlook/connect-database:

Connect the database
--------------------

Now, Outlook will be connected to the Odoo database. First, open any email in the Outlook mailbox,
click on the :guilabel:`Apps` button in the upper right-side, and select :guilabel:`Odoo Inbox
Addin`.

.. image:: outlook/odoo-for-outlook.png
   :alt: Odoo for Outlook add-in button

The right-side panel can now display **Company Insights**. At the bottom, click on
:guilabel:`Login`.

.. image:: outlook/panel-login.png
   :alt: Logging in the Odoo database

.. note::
   Only a limited amount of **Company Insights** (*Lead Enrichment*) requests are available as a
   trial database. This feature requires :ref:`prepaid credits <mail_plugins/pricing>`.

.. tip::
   If, after a short while, the panel is still empty, it is possible that the browser cookie
   settings prevented it from loading. Note that these settings also change if the browser is in
   *Incognito* mode.

   To fix this issue, configure the browser to always allow cookies on Odoo's plugin page.

   For Google Chrome, change the browser cookie settings by following the guide at:
   `https://support.google.com/chrome/answer/95647
   <https://support.google.com/chrome/answer/95647>`_ and adding `download.odoo.com` to the list of
   :guilabel:`Sites that can always use cookies`.

   Once this is complete, the Outlook panel needs to be opened again.

Now, enter the Odoo database URL and click on :guilabel:`Login`.

.. image:: outlook/enter-database-url.png
   :alt: Entering the Odoo database URL

Next, click on :guilabel:`Allow` to open the pop-up window.

.. image:: outlook/new-window-warning.png
   :alt: New window pop-up warning

If the user isn't logged into the database, enter the credentials. Click on :guilabel:`Allow` to let
the Outlook Plugin connect to the database.

.. image:: outlook/odoo-permission.png
   :alt: Allowing the Outlook Plugin to connect to a database

.. _mail-plugin/outlook/add-shortcut:

Using the inbox plugin
======================

To use the plugin, open any email in the Outlook mailbox, click on the :guilabel:`Apps` button in
the upper right-side, and select :guilabel:`Odoo Inbox Addin` to open the panel.

.. note::
   The options available in the panel will vary based on the applications installed in the database.

Create a contact
----------------

To create a contact record in Odoo from an email, click the :icon:`fa-plus-circle`
:guilabel:`(circle plus)` icon.

.. note::
   A contact record **must** be created before a lead/opportunity can be created.

Create an opportunity
---------------------

To create an opportunity from an email, click the :icon:`fa-plus` :guilabel:`(plus)` icon next to
:guilabel:`Opportunities`. Doing so opens a new opportunity record in Odoo in a new tab. The subject
of the email is used as the opportunity title, and the content of the email is added to the
:guilabel:`Notes` tab of the opportunity.

Create a task
-------------

To create a task from an email, click the :icon:`fa-plus` :guilabel:`(plus)` icon next to
:guilabel:`Tasks`. Then, enter the title of the project where the task should be created in the
resulting field, and select the appropriate project from the resulting list. This opens a new task
record in Odoo in a new tab. The subject of the email is used as the task title, and the content of
the email is added to the :guilabel:`Description` tab.

Create a ticket
---------------

To create a task from an email, click the :icon:`fa-plus` :guilabel:`(plus)` icon next to
:guilabel:`Tickets`. Doing so opens a new ticket record in Odoo in a new tab. The subject of the
email is used as the ticket title, and the content of the email is added to the
:guilabel:`Description` tab of the ticket.


==================================================
SECTION: unsplash.rst
PATH: applications/general/integrations/unsplash.rst
==================================================

========
Unsplash
========

**Unsplash** is a recognized stock photography library integrated with Odoo.

If your database is hosted on **Odoo Online**, you can access Unsplash pictures without
configuration.

If your database is hosted on **Odoo.sh or on-premise**, proceed as follows:

#. To **generate an Unsplash access key**, create or sign in to an `Unsplash account
   <https://unsplash.com>`_.

#. Access your `applications dashboard <https://unsplash.com/oauth/applications>`_, click
   :guilabel:`New Application`, select all checkboxes, and click :guilabel:`Accept terms`.

#. In the pop-up window, enter your :guilabel:`Application Name`, starting with the
   prefix `Odoo:` (e.g., `Odoo: connection`), so Unsplash recognizes it as an Odoo instance. Then,
   add a :guilabel:`Description` and click :guilabel:`Create application`.

#. On the application details page, scroll down to the :guilabel:`Keys` section and copy the
   :guilabel:`Access Key` and :guilabel:`Application ID`.

#. In Odoo, go to :menuselection:`General Settings` and enable the :guilabel:`Unsplash Image
   Library` feature. Then, enter the Unsplash :guilabel:`Access Key` and :guilabel:`Application ID`.

.. warning::
   As a non-Odoo Online user, you are limited to a test key with a maximum of 50 Unsplash requests
   per hour.
