

==================================================
SECTION: animations.rst
PATH: developer/howtos/website_themes/animations.rst
==================================================

==========
Animations
==========

Odoo uses eye-catching animations that can bring your website to life. By default, we can use three
kinds of animations:

- Animations on appearance
- Animations on scroll
- Animations on hover

.. _website_themes/animations/appearance:

On appearance
=============

In standard, you can add animations to column, text and image elements when they appear, thanks
to the Website Builder. Odoo detects when your element is in the viewport and launches the
animation. A large selection of animations is available:

- Fade in
- Bounce in
- Rotate in
- Zoom in
- …

You can easily define an animation on a column in your custom theme. You need to add two classes:
`o_animate` and `o_anim_fade_in`. The second class changes depending on the type of animation you
want to use.

Add the `o_animate_both_scroll` class to launch the animation every time the column appears on the
screen. The animation is only launched once by default.

You should also define an `animation-duration` and an `animation-delay` directly in the `style`
attribute.

Additionally, you can add an animation direction. For instance, to animate the element from the
bottom of the screen, add a `o_anim_from_bottom` class and set a `--wanim-intensity` in the `style`
attribute to control the animation's direction intensity.

**Use**

.. code-block:: xml

   <div class="col-lg-6 o_animate o_anim_fade_in o_animate_both_scroll o_anim_from_bottom" style="--wanim-intensity: 100; animation-duration: 2s; animation-delay: 1s;">
       <h2>A Section Subtitle</h2>
       <p>Write one or two paragraphs describing your product or services.</p>
   </div>

.. image:: animations/appearance.png
   :alt: Animation on appearance options

.. _website_themes/animations/scroll:

On scroll
=========

In the same way as we have seen above, you can add animations on scroll to column, text and image
elements whenever the viewport scrolls through the animated element.

We can add 6 animation on scroll effects:

- Fade
- Slide
- Bounce
- Rotate
- Zoom Out
- Zoom In

Additionally, we can also set an `in` or `out` effect, an animation `direction` , the animation
`intensity`  and a `scroll zone`.

**Use**

.. code-block:: xml

    <div class="col-lg-6 o_animate o_animate_on_scroll o_animate_out o_anim_fade_in o_anim_from_right" data-scroll-zone-start="50" data-scroll-zone-end="100" style="--wanim-intensity: 100;">
        <h2>A Section Subtitle</h2>
        <p>Write one or two paragraphs describing your product or services.</p>
    </div>

.. list-table::
   :header-rows: 1
   :stub-columns: 1
   :widths: 30 50 50

   * - Option
     - Data attribute
     - Value type
   * - Intensity
     - `--wanim-intensity`
     - Integer (in the CSS)
   * - Scroll Zone Start
     - `data-scroll-zone-start`
     - Integer
   * - Scroll Zone End
     - `data-scroll-zone-end`
     - Integer

.. image:: animations/scroll.png
   :alt: Animation on scroll options

.. seealso::
   `Website Animate
   <https://github.com/odoo/odoo/blob/c272c49657e8b7865bb93e5f1dcc183cc7d44f17/addons/website/static/src/scss/website.scss#L2075>`_

.. _website_themes/animations/hover:

On hover
========

This third kind of animations is only related to images and triggered every time we hover on the
animated image.

We can add 6 animation on hover effects:

- Overlay
- Zoom In
- Zoom Out
- Dolly Zoom
- Outline
- Mirror Blur

**Use**

Enable animations on hover by adding the `o_animate_on_hover` class on your image tag. You can
also define the type of animation in the `data-hover-effect` attribute.

.. code-block:: xml

    <img
        src="..." alt="..."
        class="img img-fluid o_we_custom_image o_animate_on_hover"
        data-hover-effect="overlay"
        data-hover-effect-color="rgba(0, 0, 0, 0.25)"
    />

.. list-table::
   :header-rows: 1
   :stub-columns: 1
   :widths: 30 50 50

   * - Option
     - Data attribute
     - Value type
   * - Animation
     - `data-hover-effect`
     - String
   * - Intensity
     - `data-hover-effect-intensity`
     - Integer
   * - Overlay / Stroke color
     - `data-hover-effect-color`
     - Hexadecimal or RGBA value
   * - Stroke width
     - `data-hover-stroke-width`
     - Integer (saved as `px`)

.. image:: animations/hover.png
   :width: 300
   :alt: Animation on hover options

.. seealso::
   `Hover effect options
   <https://github.com/odoo/odoo/blob/c272c49657e8b7865bb93e5f1dcc183cc7d44f17/addons/website/views/snippets/snippets.xml#L694>`_


==================================================
SECTION: building_blocks.rst
PATH: developer/howtos/website_themes/building_blocks.rst
==================================================

===============
Building blocks
===============

Building blocks, also known as snippets, are how users design and layout pages. They are important
XML elements of your design.

The building blocks are classified into two types:

#. **Structure blocks**: visually used as "whole rows" and distributed into multiples categories
   (:guilabel:`Intro`, :guilabel:`Columns`, :guilabel:`Content`, :guilabel:`Images`,
   :guilabel:`People`, etc)
#. **Inner Content blocks**: used inside other building blocks

At the end of this chapter, you will be able to :ref:`create custom snippets
<website_themes/building_blocks/custom>` and to add them into a dedicated category.

.. _website_themes/building_blocks/file_structure:

File structure
==============

The layout's file structure is the following.

::

   views
   ├── snippets
   │   └── options.xml
   │   └── s_snippet_name.xml

The styles' file structure is the following.

::

   static
   ├── src
   │   └── snippets
   │       └── s_snippet_name
   │           └── 000.js
   │           └── 000.scss
   │           └── 000.xml
   │           └── options.js

.. seealso::
   `XML templates of the different snippets
   <https://github.com/odoo/odoo/blob/ccb78f7af2a4413836a969ff8009dc3df6c2df33/addons/website/views/snippets/snippets.xml>`_

.. admonition:: Demo page

   Demo data have to be installed to access this page:

   ::

      https://your-database.com/website/demo/snippets

.. _website_themes/building_blocks/layout:

Layout
======

Snippets are editable by the user using the Website Builder. Some Bootstrap classes are important as
**they trigger some Website Builder options**.

.. _website_themes/building_blocks/layout/wrapper:

Wrapper
-------

The standard main container of any snippet is a `section`. Any section element can be edited like a
block of content that you can move or duplicate.

.. code-block:: xml

   <section class="s_snippet_name" data-name="..." data-snippet="...">
       <!-- Content -->
   </section>

For inner content snippets, any other HTML tag can be used.

.. code-block:: xml

   <div class="s_snippet_name" data-name="..." data-snippet="...">
       <!-- Content -->
   </div>

.. list-table::
   :header-rows: 1
   :stub-columns: 1
   :widths: 20 80

   * - Attribute
     - Description
   * - class
     - Unique class name for this snippet
   * - data-name
     - Displayed in the right panel as the name of the snippet. If not found, it will fall back to
       *Block*.
   * - data-snippet
     - Used by the system to identify the snippet

The system automatically adds the `data-name` and `data-snippet` attributes during the drag and
drop based on the template's name.

.. warning::
   Those attributes should be specifically added when a snippet is declared on a theme page.

.. warning::
   Avoid adding a `section` tag inside another `section` tag: this will trigger twice the Website
   Builder's options. You can use inner content snippets instead.

.. tip::
   To write the content of a static page with standard snippets, there are two possible approaches:

   - **Pre-build the custom static pages with the Website Builder:** Drag & drop snippets, then
      copy/paste the code into your file and clean it up.

   |  **OR**

   - **Code everything directly:** But beware of compatibility with the Website Builder. It
      requires certain classes, names, id, data, etc. to work properly. A good practice is to seek
      out the snippets code created in standard code in the Odoo source files. Pay attention that
      the Website Builder sometimes adds classes to the snippets after dropped in the page.

.. _website_themes/building_blocks/layout/elements:

Elements
--------

There is a list of "features" we can enable/disable by using specific CSS classes.

.. _website_themes/building_blocks/layout/elements/sizing:

Sizing
~~~~~~

Any large Bootstrap columns directly descending from a `.row` element (respecting Bootstrap
structure) will be triggered by the Website Builder to make them resizable.

.. code-block:: css

   .row > .col-lg-*

Add padding on columns and `<section>`.

.. code-block:: xml

   class="pt80 pb80"

.. note::

   `pb*` and `pt*` are the Odoo classes used to control the handlers. Their values are
   increased by **multiples of 8**, till a **max of 256** (0, 8, 16, 24, 32, 40, 48, ...).

Enable the columns selector.

.. code-block:: xml

   <div class="container s_allow_columns">

Disable the columns amount option.

.. code-block:: xml

   <div class="row s_nb_column_fixed">

Disable the size option for all child columns.

.. code-block:: xml

   <div class="row s_col_no_resize">

Disable the size option for one specific column.

.. code-block:: xml

   <div class="col-lg-* s_col_no_resize">

.. _website_themes/building_blocks/layout/elements/colors:

Colors
~~~~~~

Add a background based on the color palette for columns and `<section>`.

.. code-block:: xml

   class="o_cc o_cc*"

Disable the background color option for all columns.

.. code-block:: xml

   <div class="row s_col_no_bgcolor">

Disable the background color option of one specific column.

.. code-block:: xml

   <div class="col-lg-* s_col_no_bgcolor">

Add a black color filter with an opacity of 50%.

.. code-block:: xml

   <section>
       <div class="o_we_bg_filter bg-black-50"/>
       <div class="container">
           <!-- Content -->
       </div>
   </section>

Add a white color filter with an opacity of 85%.

.. code-block:: xml

   <section>
       <div class="o_we_bg_filter bg-white-85"/>
       <div class="container">
           <!-- Content -->
       </div>
   </section>

Add a custom color filter.

.. code-block:: xml

   <section>
       <div class="o_we_bg_filter" style="background-color: rgba(39, 110, 114, 0.54) !important;"/>
       <div class="container">
           <!-- Content -->
       </div>
   </section>

Add a custom gradient filter.

.. code-block:: xml

   <section>
       <div class="o_we_bg_filter" style="background-image: linear-gradient(135deg, rgba(255, 204, 51, 0.5) 0%, rgba(226, 51, 255, 0.5) 100%) !important;"/>
       <div class="container">
           <!-- Content -->
       </div>
   </section>

.. _website_themes/building_blocks/layout/elements/features:

Features
~~~~~~~~

.. _website_themes/building_blocks/layout/non_editable_areas:

Non-editable areas
******************

Make an element not editable.

.. code-block:: xml

   <div class="o_not_editable">

Make an element not removable.

.. code-block:: xml

   <div class="oe_unremovable">

.. _website_themes/building_blocks/layout/background:

Backgrounds
***********

Add a background image and have it centered.

.. code-block:: xml

   <div class="oe_img_bg o_bg_img_center" style="background-image: url('...')">

Add parallax effect.

.. code-block:: xml

   <section class="parallax s_parallax_is_fixed s_parallax_no_overflow_hidden" data-scroll-background-ratio="1">
       <span class="s_parallax_bg oe_img_bg o_bg_img_center" style="background-image: url('...'); background-position: 50% 75%;"/>
       <div class="container">
           <!-- Content -->
       </div>
   </section>

.. todo:: Update the ref below after the Media section has been created (howto/website_themes/media_videos).

.. note::

   A video background can be set on a section. Refer to the ":doc:`media`" chapter of this documentation.

.. _website_themes/building_blocks/layout/text_highlights:

Text highlights
***************

Text highlights are SVG files that can be incorporated onto specific words or phrases to emphasize them. Text highlights offer customizable options for colors and thickness.

.. image:: building_blocks/text-highlight.jpg
   :alt: Example of text highlight
   :width: 500

.. code-block:: xml

   <h2>
      Title with
      <span class="o_text_highlight o_text_highlight_fill" style="--text-highlight-width: 10px !important; --text-highlight-color: #FFFF00;">
         <span class="o_text_highlight_item">
            highlighted text
            <svg fill="none" class="o_text_highlight_svg o_content_no_merge position-absolute overflow-visible top-0 start-0 w-100 h-100 pe-none">
               <!-- SVG path -->
            </svg>
         </span>
      </span>
   </h2>

.. list-table::
   :header-rows: 1
   :stub-columns: 1
   :widths: 35 65

   * - CSS custom property
     - Description
   * - `--text-highlight-width`
     - Thickness of the SVG borders
   * - `--text-highlight-color`
     - Color of the SVG object

.. _website_themes/building_blocks/layout/grid:

Grid layout
-----------

Grid Layout is a powerful and flexible layout system in CSS that enables users to design complex
building block layouts with ease.

.. _website_themes/building_blocks/layout/grid_use:

Use
~~~

Enable the Grid Layout by adding the `o_grid_mode` CSS class on the `row`. The number of rows in
your grid is defined by the `data-row-count` attribute. The grid always contains 12 columns. The
grid gap, specified in the `style` attribute, determines the gaps (or gutters) between rows and
columns.

.. code-block:: xml

   <div class="row o_grid_mode" data-row-count="13" style="gap: 20px 10px">
      <!-- Content -->
   </div>

.. _website_themes/building_blocks/layout/grid_items:

Items in a grid
~~~~~~~~~~~~~~~

Add items in the grid with the `o_grid_item` class. If the grid item contains an image, use the
`o_grid_item_image` class.

.. code-block:: xml
   :emphasize-lines: 2,3,4,5,6

   <div class="row o_grid_mode" data-row-count="13">
      <div class="o_grid_item g-height-* g-col-lg-*" style="grid-area: 2 / 1 / 7 / 8; z-index: 3;">
         <!-- Content -->
      </div>
      <div class="o_grid_item o_grid_item_image g-height-* g-col-lg-*" style="grid-area: 1 / 6 / 9 / 13; z-index: 2;">
         <img src="..." alt="..." >
      </div>
   </div>

The dimensions and position of a grid item are defined by the grid-area that can be explicitly set
in the `style` attribute along with the z-index.

The `g-height-*` and `g-col-lg-*` classes are generated by the Website Builder for editing purposes.

.. _website_themes/building_blocks/layout/grid_items_padding:

Grid item padding
~~~~~~~~~~~~~~~~~

.. code-block:: xml
   :emphasize-lines: 2

   <div class="row o_grid_mode" data-row-count="13" style="gap: 20px 10px;">
      <div class="o_grid_item g-height-* g-col-lg-*" style="--grid-item-padding-y: 20px; --grid-item-padding-x: 15px; grid-area: 2 / 1 / 7 / 8; z-index: 3;">
         <!-- Content -->
      </div>
   </div>

.. list-table::
   :header-rows: 1
   :stub-columns: 1
   :widths: 35 65

   * - CSS custom property
     - Description
   * - `--grid-item-padding-y`
     - Vertical paddings (Y axis)
   * - `--grid-item-padding-x`
     - Horizontal paddings (X axis)

.. _website_themes/building_blocks/compatibility:

Compatibility system
====================

When a snippet has a `data-vcss`, `data-vjs` and/or `data-vxml` attribute, it means it is an updated
 version, not the original one.

.. code-block:: xml

   <section class="s_snippet_name" data-vcss="001" data-vxml="001" data-js="001">
       <!-- Content -->
   </section>

These data attributes indicate to the system which file version to load for that
snippet (e.g., :file:`001.js`, :file:`002.scss`).

.. _website_themes/building_blocks/custom:

Custom snippet
==============

Some more specific needs will require the creation of custom snippets. Here is how to create a
custom snippet/

.. _website_themes/building_blocks/custom/template:

Template
--------

Create first the snippet template. Then, add it to the list and make it available via the Website
Builder.

1. Declaration
~~~~~~~~~~~~~~

First, create the template of the custom snippet:

.. code-block:: xml
   :caption: ``/website_airproof/views/snippets/s_airproof_snippet.xml``

   <?xml version="1.0" encoding="utf-8"?>
   <odoo>

       <template id="s_airproof_snippet" name="...">
           <section class="s_airproof_snippet">
               <!-- Content -->
           </section>
       </template>

   </odoo>

.. warning::
   `data-name` and `data-snippet` attributes have to be specified when a snippet is declared on a
   theme page. Otherwise, the snippet won't be recognised by the Website Builder and issues might
   occur whenever a database upgrade is done. Additionally, remember that the name attribute is
   shown as the name of your custom snippet in the :guilabel:`Blocks` section of the options panel.

.. tip::
   - Use Bootstrap native classes as much as possible.
   - Prefix all your custom classes.
   - Use underscore lowercase notation to name classes, e.g., `.x_nav`, `.x_nav_item`.
   - Avoid using ID attribute within your `section` as several instances of a snippet may appear
     throughout the page (An ID attribute has to be unique on a page).

Add the custom snippet to the list of standard snippets, so the user can drag and drop it on the
page, directly from the edit panel.

2. Group creation
~~~~~~~~~~~~~~~~~

Add a group at the top of the list (feel free to put it where needed in this list).

.. code-block:: xml
   :caption: ``/website_airproof/views/snippets/options.xml``

   <template id="snippets" inherit_id="website.snippets" name="Airproof - Snippets">
      <!-- Create the group -->
      <xpath expr="//snippets[@id='snippet_groups']/*[1]" position="before">
         <t snippet-group="airproof" t-snippet="website.s_snippet_group" string="Airproof" t-thumbnail="/website_airproof/static/src/img/wbuilder/s_airproof_group_thumbnail.svg"/>
      </xpath>
   </template>

.. list-table::
   :header-rows: 1
   :stub-columns: 1
   :widths: 20 80

   * - Attribute
     - Description
   * - snippet-group
     - ID of the group
   * - t-snippet
     - Inherited template ID
   * - string
     - Group name displayed to the users
   * - t-thumbnail
     - The path to the thumbnail of the group

3. Snippet addition
~~~~~~~~~~~~~~~~~~~

Then add the custom snippet into the `<snippets id="snippet_structure">` which contains
all existing ones on the same level. The Website Builder will split them automatically into
categories by reading the `group` attribute on the `<t t-snippet="">`

.. code-block:: xml
   :caption: ``/website_airproof/views/snippets/options.xml``
   :emphasize-lines: 7-12

   <template id="snippets" inherit_id="website.snippets" name="Airproof - Snippets">
      <!-- Create the group -->
      <xpath expr="//snippets[@id='snippet_groups']/*[1]" position="before">
         <t snippet-group="airproof" t-snippet="website.s_snippet_group" string="Airproof" t-thumbnail="/website_airproof/static/src/img/wbuilder/s_airproof_group_thumbnail.svg"/>
      </xpath>

      <!-- Add the custom snippet to the group -->
      <xpath expr="//snippets[@id='snippet_structure']/*[1]" position="before">
         <t t-snippet="website_airproof.s_airproof_snippet" string="Custom snippet" group="airproof">
            <keywords>Snippet</keywords>
         </t>
      </xpath>
   </template>

.. list-table::
   :header-rows: 1
   :stub-columns: 1
   :widths: 20 80

   * - Attribute
     - Description
   * - t-snippet
     - The snippet template to use
   * - group
     - The group in which the snippet is added.
   * - <keywords>
     - Keywords entered by the user in the search field in the Snippets panel

Inner content snippet
~~~~~~~~~~~~~~~~~~~~~

To make a custom snippet appearing in the :guilabel:`Inner content` list, add it to the `snippet_content`
instead:

.. code-block:: xml
   :caption: ``/website_airproof/views/snippets/options.xml``

   <template id="snippets" inherit_id="website.snippets" name="Airproof - Snippets">
      <!-- Add the custom snippet to the group -->
      <xpath expr="//snippets[@id='snippet_content']/*[1]" position="before">
         <t t-snippet="website_airproof.s_airproof_snippet" string="Custom snippet" t-thumbnail="/website_airproof/static/src/img/wbuilder/s_airproof_snippet.svg" />
      </xpath>
   </template>

.. important::
   - Don't forget to add a `t-thumbnail` and remove the `group` attribute as this kind of building
     blocks is directly available in the right options panel of the Website Builder.
   - Don't forget to :ref:`add the snippet to the list of all available "Inner content" snippets
     <website_themes/building_blocks/custom/options/inner_content>`.

.. _website_themes/building_blocks/custom/options:

Options
-------

Options allow users to edit a snippet's appearance/behavior using the Website Builder. You can create
snippet options easily and automatically add them to the Website Builder.

.. seealso::
   `Standard snippet options <https://github.com/odoo/odoo/blob/247f28fdec788c7eb7c4288db29b931c73a23757/addons/website/views/snippets/snippets.xml>`_

.. _website_themes/building_blocks/custom/options/template:

Template
~~~~~~~~

There are a bunch of commands to set the options of a custom snippet. These options can be created
into :file:`/website_airproof/views/snippets/s_airproof_snippet.xml`.

.. code-block:: xml
   :caption: ``/website_airproof/views/snippets/s_airproof_snippet.xml``

   <template id="s_airproof_snippet_options" inherit_id="website.snippet_options" name="Airproof - Snippets Options">
      <xpath expr="." position="inside">
         <!-- Options -->
      </xpath>
   </template>

Then insert the different available options:

.. code-block:: xml
   :caption: ``/website_airproof/views/snippets/s_airproof_snippet.xml``
   :emphasize-lines: 3-16

   <template id="s_airproof_snippet_options" inherit_id="website.snippet_options" name="Airproof - Snippets Options">
      <xpath expr="." position="inside">
         <div data-selector=".s_airproof_snippet">
            <we-select string="Layout">
               <we-button data-select-class="">Default</we-button>
               <we-button data-select-class="s_airproof_snippet_portrait">Portrait</we-button>
               <we-button data-select-class="s_airproof_snippet_square">Square</we-button>
               <we-button data-select-class="s_airproof_snippet_landscape">Landscape</we-button>
            </we-select>
            <we-title>Space</we-title>
            <we-button-group string="Before">
               <we-button data-select-class="mt-0">1</we-button>
               <we-button data-select-class="mt-3">2</we-button>
               <we-button data-select-class="mt-5">3</we-button>
            </we-button-group>
         </div>
      </xpath>
   </template>

.. _website_themes/building_blocks/custom/options/inner_content:

**Inner content**

Make a custom snippet "inner content" (droppable in an other building block) by extending the
`so_content_addition_selector` variable which contains all CSS selectors referring to the existing
inner content building blocks:

.. code-block:: xml
   :caption: `/website_airproof/views/snippets/options.xml`

   <template id="snippet_options" inherit_id="website.snippet_options" name="Airproof - Snippets Options">
      <xpath expr="//t[@t-set='so_content_addition_selector']" position="after">
         <t t-set="so_content_addition_selector"
            t-value="so_content_addition_selector + ', .s_airproof_snippet'" />
      </xpath>
   </template>

.. seealso::

   `Standard "inner content" snippets declaration on Odoo's GitHub repository <https://github.com/odoo/odoo/blob/cc05d9d50ac668eaa26363e1127f914897a4b125/addons/website/views/snippets/snippets.xml#L988>`_

.. _website_themes/building_blocks/custom/options/binding:

Binding
~~~~~~~

These options use CSS selectors (class, XML tag, id, etc).

.. _website_themes/building_blocks/custom/options/binding/data_selector:

data-selector
*************

Options are wrapped in groups. Groups can have properties that define how the included options
interact with the user interface.

`data-selector` binds all the options included in the group to a particular element matching the
selector value (CSS class, ID, etc). The option will appear when the matching selector is selected.

.. code-block:: xml

   <div data-selector="section, h1, .custom_class, #custom_id">

It can be used in combination with other attributes like `data-target`, `data-exclude` or
`data-apply-to`.

.. _website_themes/building_blocks/custom/options/binding/data_target:

data-target
***********

`data-target=""` allows to apply the option to a child element of the `data-selector=""`.

.. code-block:: xml

   <div
      data-selector=".s_airproof_snippet"
      data-target=".row">

.. _website_themes/building_blocks/custom/options/binding/data_exclude:

data-exclude
************

`data-exclude=""` allows to exclude some particular selectors from the rule.

.. code-block:: xml
   :caption: The option appears if an `<ul>` tag (without `.navbar-nav` class) is selected

   <div
      data-selector="ul"
      data-exclude=".navbar-nav">

.. _website_themes/building_blocks/custom/options/binding/data_drop_in:

data-drop-in
************

`data-drop-in` defines the list of elements where the snippet can be dropped into.

.. code-block:: xml

   <div data-selector=".s_airproof_snippet" data-drop-in=".x_custom_location">

.. _website_themes/building_blocks/custom/options/binding/data_drop_near:

data-drop-near
**************

`data-drop-near` defines the list of elements where the snippet can be dropped beside.

.. code-block:: xml

   <div data-selector=".s_airproof_snippet_card" data-drop-near=".card">

.. _website_themes/building_blocks/custom/options/binding/data_js:

data-js
*******

`data-js` binds a custom JavaScript methods.

.. code-block:: xml

   <div data-selector=".s_airproof_snippet" data-js="CustomMethodName">

.. _website_themes/building_blocks/custom/options/layout_fields:

Layout & fields
~~~~~~~~~~~~~~~

.. _website_themes/building_blocks/custom/options/layout_fields/we_title:

`<we-title>`
************

Add titles between options to categorize them.

.. code-block:: xml

   <we-title>Option subtitle 1</we-title>

.. image:: building_blocks/we-title.jpg
   :alt: Add a subtitle between custom options
   :width: 300

.. _website_themes/building_blocks/custom/options/layout_fields/we_row:

`<we-row>`
**********

Create a row in which elements is displayed next to each other.

.. code-block:: xml

   <we-row string="My option">
      <we-select>...</we-select>
      <we-button-group>...</we-button-group>
   </we-row>

The perfect example for this case is the :guilabel:`Animation` row:

.. image:: building_blocks/we-row.png
   :alt: Group different option fields into the same row.

.. _website_themes/building_blocks/custom/options/layout_fields/we_button:

`<we-button>`
*************

This tag is used inside `<we-select>` and `<we-button-group>`.

.. code-block:: xml
   :emphasize-lines: 2-4

   <we-button-group string="Before">
      <we-button data-select-class="mt-0">1</we-button>
      <we-button data-select-class="mt-3">2</we-button>
      <we-button data-select-class="mt-5">3</we-button>
   </we-button-group>

Add `data-select-class=""` to indicate which class is added to the targeted element when this
choice is selected. Like any XML node, add other attributes allows to improve the style and/or the
user experience.

.. code-block:: xml

   <we-button
      class="fa fa-fw fa-angle-double-right"
      title="Move to last"
      data-position="last" />

.. image:: building_blocks/we-button.jpg
   :alt: Add option choices and style them with some icons
   :width: 300

.. _website_themes/building_blocks/custom/options/layout_fields/we_select:

`<we-select>`
*************

Formats the option as a dropdown list. Add `string=""` to indicate the field name.

.. code-block:: xml

   <we-select string="Layout">...</we-select>

.. image:: building_blocks/we-select.jpg
   :alt: Add a dropddown list field
   :width: 300

.. _website_themes/building_blocks/custom/options/layout_fields/we_button_group:

`<we-button-group>`
*******************

Formats the option as buttons next to each other.

.. code-block:: xml

   <we-button-group string="Before">...</we-button-group>

.. image:: building_blocks/we-button-group.jpg
   :alt: Add a dropddown list field
   :width: 300

.. _website_themes/building_blocks/custom/options/layout_fields/we_checkbox:

`<we-checkbox>`
***************

Formats the option as a toggle switch.

.. code-block:: xml

   <we-checkbox
      string="Tooltip"
      data-select-class="s_airproof_snippet_tooltip" />

.. image:: building_blocks/we-checkbox.jpg
   :alt: Add a toggle switch.
   :width: 300

.. _website_themes/building_blocks/custom/options/layout_fields/we_range:

`<we-range>`
************

Formats the option as a slider.

.. code-block:: xml

   <we-range
      string="Images Spacing"
      data-select-class="o_spc-none|o_spc-small|o_spc-medium|o_spc-big" />

Each step of the range is separated by a `|`. Here, each class name corresponds to a step.

.. image:: building_blocks/we-range.jpg
   :alt: Add a toggle switch.
   :width: 300

.. _website_themes/building_blocks/custom/options/layout_fields/we_input:

`<we-input>`
************

Formats the option as a text field.

.. code-block:: xml
   :emphasize-lines: 3-5
   :caption: `data-unit`, `data-save-unit` and `data-step` are optional

   <we-input
      string="Speed"
      data-unit="s"
      data-save-unit="ms"
      data-step="0.1" />

.. image:: building_blocks/we-input.jpg
   :alt: Add a text field.
   :width: 300

`<we-input>` comes with optional attributes particularly useful in specific case:

.. list-table::
   :header-rows: 1
   :stub-columns: 1
   :widths: 30 70

   * - Attribute
     - Description
   * - `data-unit`
     - Shows the expected unit of measure.
   * - `data-save-unit`
     - Set the unit of measure to which the value entered by the user is converted and saved.
   * - `data-step`
     - Set the numerical value by which the field can be incremented.

.. _website_themes/building_blocks/custom/options/layout_fields/we_colorpicker:

`<we-colorpicker>`
******************

Formats the option as a color/gradient to choose from.

.. code-block:: xml

   <we-colorpicker
      string="Color filter"
      data-select-style="true"
      data-css-property="background-color"
      data-color-prefix="bg-"
      data-apply-to=".s_map_color_filter" />

.. image:: building_blocks/we-colorpicker.jpg
   :alt: Add a colorpicker.
   :width: 300

.. list-table::
   :header-rows: 1
   :stub-columns: 1
   :widths: 30 70

   * - Attribute
     - Description
   * - `data-select-style`
     - Refers to `selectStyle` JavaScript method. Matchs the value of the `style=""` attribute
       applied on the target to thick the right option choice.
   * - `data-css-property`
     - Define the CSS property targeted by the colorpicker.
   * - `data-color-prefix`
     - Define the prefix applied to the CSS class returned.
   * - `data-apply-to`
     - Set the element on which the color is applied.

.. _website_themes/building_blocks/custom/options/methods:

Methods
~~~~~~~

Beside *binding options* allowing to select, target or exclude an element. Option fields have
several useful data attributes refering to standard JavaScript methods.

For example, `data-select-class` refers to the JavaScript method named `selectClass`.

.. _website_themes/building_blocks/custom/options/methods/builtin:

Built-in methods
****************

.. _website_themes/building_blocks/custom/options/methods/builtin/selection:

Selection
^^^^^^^^^

There are several built-in methods available. They are callable by using the related data attribute
directly into the XML template.

.. list-table::
   :header-rows: 1
   :stub-columns: 1
   :widths: 35 65

   * - Data attributes
     - Description
   * - `data-select-class`
     - Allows to select one and only one class in the option classes
       set and set it on the associated snippet.
   * - `data-select-data-attribute` + `data-attribute-name`
     - Allows to select a value and set it on the associated snippet as an attribute. The attribute
       name is given by the `data-attribute-name` attribute.
   * - `data-select-property` + `data-property-name`
     - Allows to select a value and set it on the associated snippet as a property. The attribute
       name is given by the `data-property-name` attribute.
   * - `data-select-style` + `data-css-property`
     - Allows to select a value and set it on the associated snippet as a CSS style. The attribute
       name is given by the `data-css-property` attribute.
   * - `data-select-color-combination`
     - Enable the selection of a color palette.
       **Only for** `<we-colorpicker>`

.. _website_themes/building_blocks/custom/options/methods/builtin/events:

Events
^^^^^^

There are also built-in methods directly linked to events the Website Builder listens to:

.. list-table::
   :header-rows: 1
   :stub-columns: 1
   :widths: 20 80

   * - Name
     - Description
   * - start
     - Occurs when the publisher selects the snippet for the first time in an editing session or
       when the snippet is drag-and-dropped on the page.
   * - destroy
     - Occurs after the publisher has saved the page.
   * - onFocus
     - Occurs each time the snippet is selected by the user or when the snippet is drag-and-dropped
       on the page.
   * - onBlur
     - Occurs when a snippet loses focus.
   * - onClone
     - Occurs just after a snippet is duplicated.
   * - onRemove
     - Occurs just before the snippet is removed.
   * - onBuilt
     - Occurs just after the snippet is drag-and-dropped on a drop zone. When this event is
       triggered, the content is already inserted in the page.
   * - cleanForSave
     - Occurs before the publisher saves the page.

.. seealso::
   - `Web Editor - JavaScript methods related to snippet options on GitHub
     <https://github.com/odoo/odoo/blob/cc05d9d50ac668eaa26363e1127f914897a4b125/addons/web_editor/static/src/js/editor/snippets.options.js#L3512>`_
   - `XML templates of the different standard snippets
     <https://github.com/odoo/odoo/blob/cc05d9d50ac668eaa26363e1127f914897a4b125/addons/website/views/snippets/snippets.xml>`_

.. _website_themes/building_blocks/custom/options/methods/custom:

Custom methods
**************

To create custom JavaScript methods, a link between the options group and the custom methods has to
be created. To do so, a JavaScript class has to be created and called in the XML template with
`data-js`.

Add the `data-js` attribute to your options group:

.. code-block:: xml
   :emphasize-lines: 3

   <template id="s_airproof_snippet_options" inherit_id="website.snippet_options" name="Airproof - Snippets Options">
      <xpath expr="." position="inside">
         <div data-selector=".s_airproof_snippet" data-js="airproofSnippet">
            // Options
         </div>
      </xpath>
   </template>

Then, the class can be created in a JavaScript file:

.. code-block:: javascript
   :caption: ``/website_airproof/static/src/s_airproof_snippet/options.js``

   /** @odoo-module */

   import options from 'web_editor.snippets.options';

   const AirproofSnippet = options.Class.extend({
      // Built-in method example
      start: function() {
         //...
      }
      // Custom method example
      customMethodName: function() {
         //...
      }
   });

   options.registry.AirproofSnippet = AirproofSnippet;

   export default AirproofSnippet;

Finally, the custom method can be called on your custom option through the XML template:

.. code-block:: xml
   :emphasize-lines: 3

   <template id="s_airproof_snippet_options" inherit_id="website.snippet_options" name="Airproof - Snippets Options">
      <xpath expr="." position="inside">
         <div data-selector=".s_airproof_snippet" data-js="airproofSnippet">
            <we-checkbox data-custom-method-name="" />
         </div>
      </xpath>
   </template>

.. _website_themes/building_blocks/custom/dynamic:

Dynamic Content templates
-------------------------

By default, Dynamic Content blocks have a selection of templates available in the Website Builder.
Custom templates can also be added to the list automatically by use the same naming convention for
the template id attribute.

.. _website_themes/building_blocks/custom/dynamic/call:

Call the template
~~~~~~~~~~~~~~~~~

The selected dynamic snippet replace the `<div class="dynamic_snippet_template"/>` placeholder by
the right template based on the `data-template-key` and the custom CSS class:

.. code-block:: xml
   :emphasize-lines: 3,4

   <section
      data-snippet="s_blog_posts"
      data-name="Blog Posts"
      class="s_blog_post_airproof s_dynamic_snippet_blog_posts s_blog_posts_effect_marley s_dynamic pb32 o_cc o_cc2 o_dynamic_empty"
      data-template-key="website_airproof.dynamic_filter_template_blog_post_airproof"
      data-filter-by-blog-id="-1"
      data-number-of-records="3"
      data-number-of-elements="3"
   >
      <div class="container o_not_editable">
         <div class="css_non_editable_mode_hidden">
               <div class="missing_option_warning alert alert-info rounded-0 fade show d-none d-print-none">
                  Your Dynamic Snippet will be displayed here... This message is displayed because you did not provided both a filter and a template to use.<br/>
               </div>
         </div>
         <div class="dynamic_snippet_template"/>
      </div>
   </section>

.. _website_themes/building_blocks/custom/dynamic/examples:

Examples
~~~~~~~~

.. tabs::

   .. tab:: Blog posts

      .. code-block:: xml
         :caption: ``/website_airproof/views/snippets/options.xml``

         <template id="dynamic_filter_template_blog_post_airproof" name="...">
            <div t-foreach="records" t-as="data" class="s_blog_posts_post">
               <t t-set="record" t-value="data['_record']"/>
               <!-- Content -->
            </div>
         </template>

      .. list-table::
         :header-rows: 1
         :stub-columns: 1
         :widths: 20 80

         * - Attribute
           - Description
         * - id
           - The ID of the template. Has to start with `dynamic_filter_template_blog_post_`
         * - name
           - Human-readable name of the template

   .. tab:: Products

      .. code-block:: xml
         :caption: ``/website_airproof/views/snippets/options.xml``

         <template id="dynamic_filter_template_product_product_airproof" name="...">
            <t t-foreach="records" t-as="data" data-number-of-elements="4" data-number-of-elements-sm="1" data-number-of-elements-fetch="8">
               <t t-set="record" t-value="data['_record']"/>
               <!-- Content -->
            </t>
         </template>

      .. list-table::
         :header-rows: 1
         :stub-columns: 1
         :widths: 40 60

         * - Attribute
           - Description
         * - id
           - The ID of the template. Has to start with `dynamic_filter_template_product_product_`
         * - name
           - Human-readable name of the template
         * - data-number-of-elements
           - Number of products per slide on desktop
         * - data-number-of-elements-sm
           - Number of products per slide on mobile
         * - data-number-of-elements-fetch
           - The total amount of fetched products

   .. tab:: Events

      .. code-block:: xml
         :caption: ``/website_airproof/views/snippets/options.xml``

         <template id="dynamic_filter_template_event_event_airproof" name="...">
            <div t-foreach="records" t-as="data" class="s_events_event">
               <t t-set="record" t-value="data['_record']._set_tz_context()"/>
               <!-- Content -->
            </div>
         </template>

      .. list-table::
         :header-rows: 1
         :stub-columns: 1
         :widths: 20 80

         * - Attribute
           - Description
         * - id
           - The ID of the template. Has to start with `dynamic_filter_template_event_event_`
         * - name
           - Human-readable name of the template


==================================================
SECTION: forms.rst
PATH: developer/howtos/website_themes/forms.rst
==================================================

=====
Forms
=====

Forms in Odoo are very powerful. They are directly integrated with other applications and can be
used for many different purposes.

In this chapter, you will discover how to:

- Add a form in your custom theme.
- Change the action of the form.
- Stylize the form thanks to Bootstrap variables.

.. _website_themes/forms/default_forms :

Default form
============

To add a form to a page, copy and paste the code generated by the Website Builder in the page.

It should look something like the following.

.. code-block:: xml

   <form
      action="/website/form/" method="post"
      enctype="multipart/form-data"
      class="o_mark_required"
      data-mark="*" data-pre-fill="true"
      data-success-mode="redirect"
      data-success-page="/contactus-thank-you"
      data-model_name="mail.mail">
        <div class="s_website_form_rows row s_col_no_bgcolor">
             <div class="form-group s_website_form_field col-12 s_website_form_dnone" data-name="Field">
                  <!-- Form fields -->
              </div>
        </div>
   </form>

.. _website_themes/forms/actions :

Actions
=======

There is a `data-model_name` in the form tag. It enables you to define different actions for your
form.

Send an email (this action is used by default).

.. code-block:: xml

   <form data-model_name="mail.mail">

Apply for a job.

.. code-block:: xml

   <form data-model_name="hr.applicant">

Create a customer.

.. code-block:: xml

   <form data-model_name="res.partner">

Create a ticket.

.. code-block:: xml

   <form data-model_name="helpdesk.ticket">

Create an opportunity.

.. code-block:: xml

   <form data-model_name="crm.lead">

Create a task.

.. code-block:: xml

   <form data-model_name="project.task">

.. note::

   The default action is :guilabel:`Send an E-mail` but following the Apps installed on the database, some
   other options can be found, such as: Apply for a job, create a customer, create a ticket, create an
   opportunity, etc.

   Please, note that some of these actions may need specific required fields in order to be
   functional. To not forget some requirements, we highly recommend to preset the form snippet with
   the Website Builder and copy/paste the generated source code.

.. _website_themes/forms/success :

Success
=======

Define what happens once the form is submitted thanks to the `data-success-mode` attribute.

Redirect the user to a page defined in the `data-success-page`.

.. code-block:: xml

   <form data-success-mode="redirect" data-success-page="/contactus-thank-you">

Show a message (on the same page).

.. code-block:: xml

   <form data-success-mode="message">

Add a success message directly under the form tag. Always add the `d-none` class to make
sure that the success message is hidden if the form hasn't been submitted.

.. code-block:: xml

   <div class="s_website_form_end_message d-none">
        <div class="oe_structure">
             <section class="s_text_block pt64 pb64" data-snippet="s_text_block">
                  <div class="container">
                        <h2 class="text-center">This is a success!</h2>
                  </div>
             </section>
        </div>
   </div>


==================================================
SECTION: going_live.rst
PATH: developer/howtos/website_themes/going_live.rst
==================================================

==========
Going live
==========

Once all the web design and development work finished, it's time to deploy it on a development or
production database.

.. _website_themes/going_live/module_import:

Module import
=============

.. _website_themes/going_live/module_import/saas:

Odoo SaaS
---------

Follow these steps the first time you import a module:

#. Create a ZIP file of your module.
#. Connect to the project database.
#. Enable the :ref:`developer mode <developer-mode>`.
#. Go to :guilabel:`Apps`, search for `base_import_module`, and install it if necessary.
#. Click on :guilabel:`Import Module` in the menu.
#. Upload your ZIP file, tick :guilabel:`Force init`, and click the :guilabel:`Import App` button.

.. image:: going_live/screenshot-import-module.png
   :alt: Import a module on Odoo Online

If you need to re-import a module after making some changes, follow the same steps, but before
importing the module, open the developer menu and select :guilabel:`Become Superuser`. To leave the
Superuser mode, log out and log back in.

.. important::
   - Don't forget to untick :guilabel:`Force init` if you import a module for the second time.
     Otherwise, existing data might be lost. (:ref:`Related to noupdate=1 <website_themes/pages/theme_pages/noupdate>`).
   - The ZIP file size must be less than 50 MB.

.. seealso::
   - `Odoo eLearning: Register a Free Domain Name <https://www.odoo.com/slides/slide/register-a-free-domain-name-1663>`_

.. _website_themes/going_live/module_import/sh:

Odoo.sh
-------

Go to :guilabel:`Apps` and click on :guilabel:`Update Apps List` in the menu. Search for your module
in the list and install it.

.. seealso::
   :doc:`Introduction to Odoo.sh <../../../administration/odoo_sh>`

.. _website_themes/going_live/whats_next:

What's next?
============

After importing and installing the module and before going live, make sure to check the SEO and
redirects as well as your domain name.

.. seealso::

   **SEO & Redirects**

   - :doc:`/applications/websites/website/structure/seo`
   - :ref:`website/pages/URL-redirection`

   **Domain name**

   - :ref:`domain-name/existing`


==================================================
SECTION: gradients.rst
PATH: developer/howtos/website_themes/gradients.rst
==================================================

=========
Gradients
=========

In this chapter, you will discover how to:

- Add a gradient to a section or a title.
- Add a custom gradient to the Website Builder palette.

.. _website_themes/gradients/standard:

Standard
========

In standard, several gradients can be selected directly from the Website Builder. However, for
custom themes, gradients have to be added directly in the `section` tag with a `style` attribute.

**Use**

.. code-block:: xml

    <section class="s_text_image" data-snippet="s_text_image" data-name="Text - Image" style="background-image: linear-gradient(135deg, rgb(255, 204, 51) 0%, rgb(226, 51, 255) 100%) !important;">
        <!-- Content -->
    </section>

To apply a gradient to text, use a `font` tag with the `text-gradient` class.

.. code-block:: xml

   <h2>
       <font class="text-gradient" style="background-image: linear-gradient(135deg, rgb(203, 94, 238) 0%, rgb(75, 225, 236) 100%);">A Section Subtitle</font>
   </h2>

.. _website_themes/gradients/custom:

Custom
======

Add a custom gradient to the Website Builder. This way, the user can easily use them without
manually recreating them.

.. code-block:: xml
   :caption: ``/website_airproof/data/gradients.xml``

   <record id="colorpicker" model="ir.ui.view">
      <field name="key">website_airproof.colorpicker</field>
      <field name="name">Custom Gradients</field>
      <field name="type">qweb</field>
      <field name="inherit_id" ref="web_editor.colorpicker"/>
      <field name="arch" type="xml">
         <xpath expr="//div[@data-name='predefined_gradients']/t[@t-set='gradients']" position="after">
            <t t-set="gradients" t-value="gradients + ['linear-gradient(135deg, rgb(203, 94, 238) 0%, rgb(75, 225, 236) 100%)']" />
         </xpath>
      </field>
   </record>


==================================================
SECTION: layout.rst
PATH: developer/howtos/website_themes/layout.rst
==================================================

======
Layout
======

In this chapter, you will learn how to:

- Create a custom header.
- Create a custom footer.
- Modify a standard template.
- Add a copyright section.
- Improve your website's responsiveness.

.. _website_themes/layout/default :

Default
=======

An Odoo page combines cross-page and unique elements. Cross-page elements are the same on every
page, while unique elements are only related to a specific page. By default, a page has two
cross-page elements, the header and the footer, and a unique main element that contains the specific
content of that page.

.. code-block:: xml

   <div id="wrapwrap">
      <header/>
         <main>
            <div id="wrap" class="oe_structure">
               <!-- Page Content -->
            </div>
         </main>
      <footer/>
   </div>

Any Odoo XML file starts with encoding specifications. After that, you must write your code inside
an `<odoo>` tag.

.. code-block:: xml

   <?xml version="1.0" encoding="utf-8" ?>
   <odoo>
      ...
   </odoo>

.. note::
   Using precise template names is important to find information through all modules quickly.
   Template names should only contain lowercase alphanumerics and underscores.

   Always add an empty line at the end of your file. This can be done automatically by configuring
   your IDE.

.. _website_themes/layout/xpath :

XPath
=====

XPath (XML Path Language) is an expression language that enables you to navigate through elements
and attributes in an XML document easily. XPath is used to extend standard Odoo templates.

A view is coded the following way.

.. code-block:: xml

   <template id="..." inherit_id="..." name="...">
      <!-- Content -->
   </template>

.. list-table::
   :header-rows: 1
   :stub-columns: 1
   :widths: 20 80

   * - Attribute
     - Description
   * - id
     - ID of the modified view
   * - inherited_id
     - ID of the standard view (using the following pattern: `module.template`)
   * - name
     - Human-readable name of the modified view

For each XPath, you modify two attributes: **expression** and **position**.

.. example::
   .. code-block:: xml
      :caption: ``/website_airproof/views/website_templates.xml``

      <template id="layout" inherit_id="website.layout" name="Welcome Message">
         <xpath expr="//header" position="before">
            <!-- Content -->
         </xpath>
      </template>

   This XPath adds a welcome message right before the page content.

.. warning::
   Be careful when replacing default elements' attributes. As your theme extends the default one,
   your changes will take priority over any future Odoo update.

.. note::
   - You should update your module every time you create a new template or record.
   - *XML IDs* of inheriting views should use the same *ID* as the original record. It helps to find
     all inheritance at a glance. As final *XML IDs* are prefixed by the module that creates them,
     there is no overlap.

.. _website_themes/layout/xpath/expressions :

Expressions
-----------

XPath uses path expressions to select nodes in an XML document. Selectors are used inside the
expression to target the right element. The most useful ones are listed below.

.. list-table::
   :header-rows: 1
   :stub-columns: 1
   :widths: 20 80

   * - Descendent selectors
     - Description
   * - /
     - Selects from the root node.
   * - //
     - Selects nodes in the document from the current node that matches the selection no matter
       where they are.

.. list-table::
   :header-rows: 1
   :stub-columns: 1
   :widths: 20 80

   * - Attribute selectors
     - Description
   * - \*
     - Selects any XML tag. `*` can be replaced by a specific tag if the selection needs to be
       more precise.
   * - \*[@id="id"]
     - Selects a specific ID.
   * - \*[hasclass("class")]
     - Selects a specific class.
   * - \*[@name="name"]
     - Selects a tag with a specific name.
   * - \*[@t-call="t-call"]
     - Selects a specific t-call.

.. _website_themes/layout/xpath/position :

Position
--------

The position defines where the code is placed inside the template. The possible values are listed
below:

.. list-table::
   :header-rows: 1
   :stub-columns: 1
   :widths: 20 80

   * - Position
     - Description
   * - replace
     - Replaces the targeted node with the XPath content.
   * - inside
     - Adds the XPath content inside the targeted node.
   * - before
     - Adds the XPath content before the targeted node.
   * - after
     - Adds the XPath content after the targeted node.
   * - attributes
     - Adds the XPath content inside an attribute.

.. example::
   This XPath removes the first element with a `.breadcrumb` class.

   .. code-block:: xml

      <xpath expr="//*[hasclass('breadcrumb')]" position="replace"/>

   This XPath adds an extra `<li>` element after the last child of the `<ul>` element.

   .. code-block:: xml

      <xpath expr="//ul" position="inside">
         <li>Last element of the list</li>
      </xpath>

   This XPath adds a `<div>` before the `<nav>` that is a direct child of the `<header>`.

   .. code-block:: xml

      <xpath expr="//header/nav" position="before">
         <div>Some content before the header</div>
      </xpath>

   This XPath removes `x_airproof_header` in the class attribute of the header. In this case, you
   don't need to use the `separator` attribute.

   .. code-block:: xml

      <xpath expr="//header" position="attributes">
         <attribute name="class" remove="x_airproof_header" />
      </xpath>

   This XPath adds `x_airproof_header` in the class attribute of the header. You also need to define
   a `separator` attribute to add a space before the class you are adding.

   .. code-block:: xml

      <xpath expr="//header" position="attributes">
         <attribute name="class" add="x_airproof_header" separator=" "/>
      </xpath>

   This XPath moves the element with `.o_footer_scrolltop_wrapper` class before the element with the
    `footer` ID attribute.

   .. code-block:: xml

      <xpath expr="//div[@id='footer']" position="before">
         <xpath expr="//div[@id='o_footer_scrolltop_wrapper']" position="move" />
      </xpath>

.. tip::
   Using `move` directives inside an other XPath forces you to use only this kind of directives.

   .. example::
      | **Good example:**

      .. code-block:: xml

         <xpath expr="//*[hasclass('o_wsale_products_main_row')]" position="before">
         <xpath expr="//t[@t-if='opt_wsale_categories_top']" position="move" />
         </xpath>
         <xpath expr="//*[hasclass('o_wsale_products_main_row')]" position="before">
         <div><!-- Content --></div>
         </xpath>

      | **Bad example:**

      .. code-block:: xml

         <xpath expr="//*[hasclass('o_wsale_products_main_row')]" position="before">
         <xpath expr="//t[@t-if='opt_wsale_categories_top']" position="move" />
         <div><!-- Content --></div>
         </xpath>


.. seealso::
   You can find more information about XPath in this `cheat sheet <https://devhints.io/xpath>`_.

.. _website_themes/layout/qweb :

QWeb
====

QWeb is the primary templating engine used by Odoo. It is an XML templating engine mainly used to
generate HTML fragments and pages.

.. seealso::
   :doc:`QWeb templates documentation <../../reference/frontend/qweb>`.

.. _website_themes/layout/custom_fields :

Custom fields
=============

Depending on your needs, you can create custom fields to save data in the database.

.. _website_themes/layout/custom_fields/declaration :

Declaration
-----------

First, create a record to declare the field. This field has to be linked to an existing model.

.. code-block:: xml
   :caption: ``/website_airproof/data/fields.xml``

   <record id="x_post_category" model="ir.model.fields">
      <field name="name">x_post_category</field>
      <field name="field_description">...</field>
      <field name="ttype">html</field>
      <field name="state">manual</field>
      <field name="index">0</field>
      <field name="model_id" ref="website_blog.model_blog_post"/>
   </record>

.. note:: Fields creation is also possible (and recommended) through `a model using Python </developer/tutorials/backend>`_.

.. _website_themes/layout/custom_fields/backend :

Back-end
--------

Add the field to the relevant view through an XPath. Therefore, the user can see the field in the
interface and fill it afterwards.

.. code-block:: xml
   :caption: ``/website_airproof/views/backend/website_blog_views.xml``

   <record id="view_blog_post_form_category" model="ir.ui.view">
      <field name="name">view_blog_post_form_category</field>
      <field name="model">blog.post</field>
      <field name="inherit_id" ref="website_blog.view_blog_post_form"/>
      <field name="arch" type="xml">
         <xpath expr="//field[@name='blog_id']" position="before">
            <field name="x_post_category" string="..." placeholder="..."/>
         </xpath>
      </field>
   </record>

.. _website_themes/layout/custom_fields/frontend :

Front-end
---------

The field value can be shown somewhere in a page by calling `model_name.field_name` like this:

.. code-block:: xml
   :caption: ``/website_airproof/views/website_blog_templates.xml``

   <h1 t-field="blog_post.x_post_category"/>

.. _website_themes/layout/background :

Background
==========

You can define a color or an image as the background of your website.

.. _website_themes/layout/background/colors :

Colors
------

.. code-block:: scss
   :caption: ``/website_airproof/static/src/scss/primary_variables.scss``

   $o-color-palettes: map-merge($o-color-palettes,
      (
         'airproof': (
            'o-cc1-bg':                     'o-color-5',
            'o-cc5-bg':                     'o-color-1',
         ),
       )
   );

.. _website_themes/layout/background/image_pattern :

Image/pattern
-------------

.. code-block:: scss
   :caption: ``/website_airproof/static/src/scss/primary_variables.scss``

   $o-website-values-palettes: (
      (
         'body-image': '/website_airproof/static/src/img/background-lines.svg',
         'body-image-type': 'image' or 'pattern'
      )
   );

.. _website_themes/layout/header :

Header
======

By default, the header contains two distinct templates (desktop and mobile) which display the  main
navigation, the company's logo and other optional elements (call-to-action, language selector, etc).
Depending on the situation, choose between enabling/disabling existing elements with a standard
template or building a brand new custom template.

.. _website_themes/layout/header/standard :

Standard
--------

The Odoo Website Builder distinguishes between desktop templates and the mobile template in order to
facilitate the adaptation of the user experience according to the device.

.. _website_themes/layout/header/standard/desktop :

Desktop template
~~~~~~~~~~~~~~~~

Enable one of the header default templates.

.. important::
   Don't forget that you may need to disable the active header template first.

   .. example::

      .. code-block:: xml
         :caption: ``/website_aiproof/data/presets.xml``

         <record id="website.template_header_default" model="ir.ui.view">
            <field name="active" eval="False"/>
         </record>

Explicitly set the desired template in the `primary_variables.scss` file.

.. code-block:: scss
   :caption: ``/website_airproof/static/src/scss/primary_variables.scss``

   $o-website-values-palettes: (
      (
         'header-template': 'Contact',
      ),
   );

.. code-block:: xml
   :caption: ``/website_airproof/data/presets.xml``

   <record id="website.template_header_contact" model="ir.ui.view">
      <field name="active" eval="True"/>
   </record>

.. _website_themes/layout/header/standard/mobile :

Mobile template
~~~~~~~~~~~~~~~

Each header template comes with the `template_header_mobile` template ensuring a seamless user
experience accross every devices.

.. seealso::
   `Mobile header template on Odoo's Git repository <https://github.com/odoo/odoo/blob/43b20e6e52526c415e28c21810cd7023f6feef1e/addons/website/views/website_templates.xml#L354>`_


.. _website_themes/layout/header/custom :

Custom
------

Create your own template and add it to the list.

.. important::
   Don't forget that you may need to disable the active header template first before enabling the
   custom one.

**Option**

Use the following code to add an option for your new custom header on the Website Builder.

.. code-block:: xml
   :caption: ``/website_airproof/views/website_templates.xml``

   <template id="template_header_opt" inherit_id="website.snippet_options" name="Header Template - Option">
      <xpath expr="//we-select[@data-variable='header-template']" position="inside">
         <we-button title="airproof"
            data-customize-website-views="website_airproof.header"
            data-customize-website-variable="'airproof'"  data-img="/website_airproof/static/src/img/wbuilder/template_header_opt.svg"/>
      </xpath>
   </template>

.. list-table::
   :header-rows: 1
   :stub-columns: 1
   :widths: 20 80

   * - Attribute
     - Description
   * - data-customize-website-views
     - The template to enable
   * - data-customize-website-variable
     - The name given to the variable
   * - data-img
     - The thumbnail of the custom template shown in the templates selection on the Website Builder

Now you have to explicitly define that you want to use your custom template in the Odoo SASS
variables.

.. code-block:: scss
   :caption: ``/website_airproof/static/src/scss/primary_variables.scss``

   $o-website-values-palettes: (
      (
         'header-template': 'airproof',
      ),
   );

**Template**

.. code-block:: xml
   :caption: ``/website_airproof/views/website_templates.xml``

   <template id="header" inherit_id="website.layout" name="Airproof - Header" active="True">
      <xpath expr="//header//nav" position="replace">
         <!-- Static Content -->
         <!-- Components -->
         <!-- Editable areas -->
      </xpath>
   </template>

Don't forget to adapt the `template_header_mobile` accordingly to keep consistency between desktop
and mobile:

.. code-block:: xml
   :caption: ``website_airproof/views/website_templates.xml``

   <template id="template_header_mobile" inherit_id="website.template_header_mobile" name="Airproof - Template Header Mobile">
      <!-- Xpaths -->
   </template>

.. _website_themes/layout/header/components :

Components
----------

In your custom header, you can call several sub-templates using the `t-call` directive from QWeb:

.. _website_themes/layout/header/components/logo :

Logo
~~~~

.. code-block:: xml

   <t t-call="website.placeholder_header_brand">
      <t t-set="_link_class" t-valuef="..."/>
   </t>

.. important::

   Don't forget to :ref:`create a record of the website logo <website_themes/media/images/use/logo>`
   logo in the database.

.. _website_themes/layout/headers/components/menu :

Menu
~~~~

.. code-block:: xml

   <t t-foreach="website.menu_id.child_id" t-as="submenu">
      <t t-call="website.submenu">
         <t t-set="item_class" t-valuef="nav-item"/>
         <t t-set="link_class" t-valuef="nav-link"/>
      </t>
   </t>

.. _website_themes/layout/header/components/signin :

Sign in
~~~~~~~

.. code-block:: xml

   <t t-call="portal.placeholder_user_sign_in">
      <t t-set="_item_class" t-valuef="nav-item"/>
      <t t-set="_link_class" t-valuef="nav-link"/>
   </t>

.. _website_themes/layout/header/components/user_dropdown :

User dropdown
~~~~~~~~~~~~~

.. code-block:: xml

   <t t-call="portal.user_dropdown">
      <t t-set="_user_name" t-value="true"/>
      <t t-set="_icon" t-value="false"/>
      <t t-set="_avatar" t-value="false"/>
      <t t-set="_item_class" t-valuef="nav-item dropdown"/>
      <t t-set="_link_class" t-valuef="nav-link"/>
      <t t-set="_dropdown_menu_class" t-valuef="..."/>
   </t>

.. _website_themes/layout/header/components/language_selector :

Language selector
~~~~~~~~~~~~~~~~~

.. code-block:: xml

   <t t-call="website.placeholder_header_language_selector">
      <t t-set="_div_classes" t-valuef="..."/>
   </t>

.. _website_themes/layout/header/components/cta :

Call to action
~~~~~~~~~~~~~~

.. code-block:: xml

   <t t-call="website.placeholder_header_call_to_action">
      <t t-set="_div_classes" t-valuef="..."/>
   </t>

.. _website_themes/layout/header/components/navbar_toggler :

Navbar toggler
~~~~~~~~~~~~~~

.. code-block:: xml

   <t t-call="website.navbar_toggler">
      <t t-set="_toggler_class" t-valuef="..."/>
   </t>

.. seealso::
   You can add a :ref:`header overlay <website_themes/pages/theme_pages/header_overlay>` to position your header over the content of
   your page. It has to be done on each page individually.

.. _website_themes/layout/footer :

Footer
======

By default, the footer contains a section with some static content. You can easily add new elements
or create your own template.

.. _website_themes/layout/footer/standard :

Standard
--------

Enable one of the default footer templates. Don't forget that you may need to disable the active
footer template first.

.. important::
   Don't forget that you may need to disable the active footer template first.

   .. example::

      .. code-block:: xml
         :caption: ``/website_aiproof/data/presets.xml``

         <record id="website.footer_custom" model="ir.ui.view">
            <field name="active" eval="False"/>
         </record>

.. code-block:: scss
   :caption: ``/website_airproof/static/src/scss/primary_variables.scss``

   $o-website-values-palettes: (
      (
         'footer-template': 'Links',
      ),
   );

.. code-block:: xml
   :caption: ``/website_airproof/data/presets.xml``

   <record id="website.template_footer_links" model="ir.ui.view">
      <field name="active" eval="True"/>
   </record>

.. _website_themes/layout/footer/custom :

Custom
------

Create your own template and add it to the list. Don't forget that you may need to disable the
active footer template first.

**Option**

.. code-block:: xml
   :caption: ``/website_airproof/views/website_templates.xml``

   <template id="template_footer_opt" inherit_id="website.snippet_options" name="Footer Template - Option">
      <xpath expr="//we-select[@data-variable='footer-template']" position="inside">
         <we-button title="airproof"
            data-customize-website-views="website_airproof.footer"
            data-customize-website-variable="'airproof'"
            data-img="/website_airproof/static/src/img/wbuilder/template_footer_opt.svg"/>
      </xpath>
   </template>

**Declaration**

.. code-block:: scss
   :caption: ``/website_airproof/static/src/scss/primary_variables.scss``

   $o-website-values-palettes: (
      (
         'footer-template': 'airproof',
      ),
   );

**Template**

.. code-block:: xml
    :caption: ``/website_airproof/views/website_templates.xml``

    <template id="footer" inherit_id="website.layout" name="Airproof - Footer" active="True">
      <xpath expr="//div[@id='footer']" position="replace">
         <div id="footer" class="oe_structure oe_structure_solo" t-ignore="true" t-if="not no_footer">
            <!-- Content -->
         </div>
      </xpath>
    </record>

.. _website_themes/layout/copyright :

Copyright
=========

There is only one template available at the moment for the copyright bar.

To replace the content or modify its structure, you can add your own code to the following XPath.

.. code-block:: xml
    :caption: ``/website_airproof/views/website_templates.xml``

    <template id="copyright" inherit_id="website.layout">
       <xpath expr="//div[hasclass('o_footer_copyright')]" position="replace">
          <div class="o_footer_copyright" data-name="Copyright">
             <!-- Content -->
          </div>
       </xpath>
    </template>

.. _website_themes/layout/dropzone :

Drop zone
=========

Instead of defining the complete layout of a page, you can create building blocks (snippets) and
let the user choose where to drag and drop them, creating the page layout on their own. We call
this *modular design*.

You can define an empty area that the user can fill with snippets.

.. code-block:: xml

   <div id="oe_structure_layout_01" class="oe_structure"/>

.. list-table::
   :header-rows: 1
   :stub-columns: 1
   :widths: 20 80

   * - Class
     - Description
   * - oe_structure
     - Define a drag-and-drop area for the user.
   * - oe_structure_solo
     - Only one snippet can be dropped in this area.
   * - oe_structure_not_nearest
     - If a building block is dropped outside of a Drop zone having this class, the block will be
       moved in the nearest Drop Zone.

You can also populate an existing drop zone with your content.

.. code-block:: xml

    <template id="oe_structure_layout_01" inherit_id="..." name="...">
       <xpath expr="//*[@id='oe_structure_layout_01']" position="replace">
          <div id="oe_structure_layout_01" class="oe_structure oe_structure_solo">
             <!-- Content -->
          </div>
       </xpath>
    </template>

.. _website_themes/layout/responsive :

Responsive
==========

Odoo in general relies on the Bootstrap framework which eases the responsiveness of your website on
 desktop and mobile. On Odoo 16, you can mainly take action on 3 aspects:

#. Automatic computed font sizes depending on the device
#. Column sizes on desktop (the columns are automatically stacked on mobile)
#. Visibility conditions (Show/Hide something on desktop/mobile)

.. seealso::
   - `Bootstrap documentation on display property
     <https://getbootstrap.com/docs/5.3/utilities/display/>`_

.. _website_themes/layout/reponsive/font_sizes :

Font sizes
----------

In Bootstrap 5, responsive font sizes are enabled by default, allowing text to scale more naturally
across device and viewport sizes (relying on the `$enable-rfs` variable).

.. seealso::
   - `Bootstrap documentation about responsive font sizes
     <https://getbootstrap.com/docs/5.3/getting-started/rfs/>`_

.. _website_themes/layout/reponsive/column_sizes :

Column sizes
------------

Bootstrap uses a grid made of rows and columns to layout a page. Thanks to this structure, columns
can be sized differently on mobile and desktop. In this version, the Website Builder allows to set
mobile sizes (`col-12` for example) and desktop ones (`col-lg-4` for example) but not the
medium breakpoints (`col-md-4` for example).

.. warning::
   The medium sizes can be set but the end-user is not able to edit them within the Website Builder.

.. seealso::
   - `Bootstrap documentation on responsive breakpoints <https://getbootstrap.com/docs/5.3/layout/breakpoints/>`_
   - `Bootstrap documentation about the grid <https://getbootstrap.com/docs/5.3/layout/grid/>`_

.. _website_themes/layout/reponsive/visibility_conditions :

Visibility conditions
---------------------

In the Odoo Website Builder, entire sections or specific columns can be hidden on mobile or desktop.
 This functionality leverages Bootstrap along with Odoo-specific classes:

- `o_snippet_mobile_invisible`
- `o_snippet_desktop_invisible`

Hide a section on desktop:

.. code-block:: xml

   <section class="s_text_block o_cc o_cc1 o_colored_level pt16 pb16 d-lg-none o_snippet_desktop_invisible" data-snippet="s_text_block" name="Text">
       <!-- Content -->
   </section>

Hide a column on mobile:

.. code-block:: xml

   <section class="s_text_block o_cc o_cc1 o_colored_level pt16 pb16" data-snippet="s_text_block" name="Text">
      <div class="container s_allow_columns">
         <div class="row">
            <div class="col-12 col-lg-6 d-none d-lg-block o_snippet_mobile_invisible">
               Column 1
            </div>
            <div class="col-12 col-lg-6">
               Column 2
            </div>
         </div>
      </div>
   </section>

.. list-table::
   :header-rows: 1
   :stub-columns: 1
   :widths: 20 80

   * - Class
     - Description
   * - o_snippet_mobile_invisible
     - It tells the Website Builder that the element is hidden and is using visibility conditions
       option.
   * - o_snippet_desktop_invisible
     - It tells the Website Builder that the element is hidden **on desktop and** is using visibility
       conditions option.
   * - d-none
     - Hide the element in every situations.
   * - d-lg-block
     - Show the element from the "large" breakpoint (on desktop).

.. important::
   `o_snippet_mobile_invisible` / `o_snippet_desktop_invisible` classes have to be specified to keep
    the visibility conditions option functional. Even if an element is hidden on desktop, the
    Website Builder displays a list of these elements allowing the end-user to force show the
    element and edit it without switching between mobile and desktop mode.

   .. image:: layout/screenshot-visibility.png
      :alt: Force show a hidden element on the current device.


==================================================
SECTION: media.rst
PATH: developer/howtos/website_themes/media.rst
==================================================

=====
Media
=====

In this chapter we will see how to include media elements such as images, videos or icons within Odoo.

.. _website_themes/media/images:

Images
======

Record images in the database and use them later in your design/code. They will also be
available for the end user through the *media dialog*.

.. image:: media/media-window.png
   :alt: Media window

The Website Builder supports the following image file formats: JPG, GIF, PNG, and SVG.

.. warning::
   Some options offered by the Website Builder are only applicable to media registered into a
   record. You might not see some options if you add an image directly with a relative path to
   your module folder.

.. _website_themes/media/images/declaration:

Declaration
-----------

To use your images in your code and have them included in the builder's gallery (so the client can
reuse them), declare them like this:

.. code-block:: xml
   :caption: ``/website_airproof/data/images.xml``

   <record id="img_about_01" model="ir.attachment">
       <field name="name">About Image 01</field>
       <field name="datas" type="base64" file="website_airproof/static/src/img/content/img_about_01.jpg"/>
       <field name="res_model">ir.ui.view</field>
       <field name="public" eval="True"/>
   </record>

.. list-table::
   :header-rows: 1
   :stub-columns: 1
   :widths: 20 80

   * - Field
     - Description
   * - id
     - The name of your image to be used in your code
   * - name
     - A descriptive name for your image
   * - datas
     - The location of your image

.. _website_themes/media/images/use:

Use
---

.. _website_themes/media/images/use/regular:

Regular images
~~~~~~~~~~~~~~

In your xml templates, call your images as follows:

.. code-block:: xml

   <img src="/web/image/website_airproof.img_about_01" alt=""/>

Being `img_about_01` the id you gave to your image.

.. _website_themes/media/images/use/background:

Background images
~~~~~~~~~~~~~~~~~

.. code-block:: xml

    <section style="background-image: url('/web/image/website_airproof.img_about_01');">

.. _website_themes/media/images/use/logo:

Company logo
~~~~~~~~~~~~

For the company logo, the use is a little bit different. First declare it within the `website.xml`
file and then call it using the right template. For instance, to call inside the header, we will
use `<t t-call="website.placeholder_header_brand">`.

.. code-block:: xml
    :caption: ``/website_airproof/data/images.xml``

    <record id="website.default_website" model="website">
        <field name="logo" type="base64" file="website_airproof/static/src/img/content/logo.png"/>
    </record>

.. note::
   :ref:`Here <theming/module/website>` you can find more information about the company logo setup
   and global website settings presets.

.. tip::
   To make sure that your images don't slow down your web page and don't weigh too much, try to
   respect these few points:

   - **Weight**: < 200Kb.
   - **Size**: not more than 1500px if not needed.
   - **Extension**: use svg or jpg, png or gif.
   - **Name**: no spaces, accents or special characters and separate words with dashes. Use
     relevant words whenever possible.
   - Images larger than 1920px will be heavily compressed by the website builder. If < 1920px, they
     will remain intact.

.. _website_themes/media/videos:

Videos
======

Add videos as background.

.. code-block:: xml

   <section class="o_background_video" data-bg-video-src="...">
       <!-- Content -->
   </section>

.. list-table::
   :header-rows: 1
   :stub-columns: 1
   :widths: 20 80

   * - Attribute
     - Description
   * - data-bg-video-src
     - Video URL.

Add videos as content.

.. code-block:: xml

   <div class="media_iframe_video" data-oe-expression="...">
       <div class="css_editable_mode_display" />
       <div class="media_iframe_video_size" contenteditable="false" />
       <iframe src="..."
           frameborder="0"
           contenteditable="false"
           allowfullscreen="allowfullscreen"/>
   </div>

.. list-table::
   :header-rows: 1
   :stub-columns: 1
   :widths: 20 80

   * - Attribute
     - Description
   * - data-oe-expression
     - Video URL.
   * - src
     - Video URL.

.. _website_themes/media/icons:

Icons
=====

By default, the Font Awesome icons library is included in the Website Builder. You can place icons
anywhere using the CSS Prefix `fa` and the icon's name. Font Awesome is designed to be used with
inline elements. You can use `<i>` tag for brevity, but using a `<span>` is more semantically
correct.

.. code-block:: xml

   <span class="fa fa-picture-o"/>

.. seealso::
   `Font Awesome v4 icons <https://fontawesome.com/v4/icons/>`_

Enable the Website Builder style options.

.. code-block:: xml

   <span class="fa fa-2x fa-picture-o rounded-circle"/>

Increase the icon size (fa-2x, fa-3x, fa-4x, or fa-5x classes).

.. code-block:: xml

   <span class="fa fa-2x fa-picture-o"/>

.. image:: media/icon-options.png
   :alt: Icon options


==================================================
SECTION: navigation.rst
PATH: developer/howtos/website_themes/navigation.rst
==================================================

==========
Navigation
==========

You can easily modify the navigation with the Website Builder to fit your needs.

In this chapter, you will learn how to:

- Delete and create menu items.
- Create a dropdown menu.
- Create a mega menu.

.. _website_themes/navigation/default:

Default
=======

Odoo automatically generates some basic menu items depending on the apps you installed. For example,
the Website app adds two items to the main menu. These items are linked to pages, which are also
automatically created.

Delete default menu items.

.. code-block:: xml
   :caption: ``/website_airproof/data/menu.xml``

   <!-- Contact us -->
   <delete model="website.menu" search="[('url','in', ['/', '/contactus']),
   ('website_id', '=', 1)]"/>

   <!-- Shop -->
   <delete model="website.menu" search="[('url','in', ['/', '/shop']),
   ('website_id', '=', 1)]"/>

.. _website_themes/navigation/menu:

Menu item
=========

**Declaration**

.. code-block:: xml
   :caption: ``/website_airproof/data/menu.xml``

   <record id="menu_about_us" model="website.menu">
       <field name="name">About us</field>
       <field name="url">/about-us</field>
       <field name="parent_id" search="[
           ('url', '=', '/default-main-menu'),
           ('website_id', '=', 1)]"/>
       <field name="website_id">1</field>
       <field name="sequence" type="int">10</field>
   </record>

.. list-table::
   :header-rows: 1
   :stub-columns: 1
   :widths: 20 80

   * - Field
     - Description
   * - name
     - Link text
   * - url
     - Value of the href attribute
   * - parent_id
     - The menu in which the item will be added.
   * - website_id
     - The website on which the item will be added.
   * - sequence
     - Defines the link's position in the top menu.

.. _website_themes/navigation/menu/new_window:

New window
----------

Open the link's URL in a new tab.

.. code-block:: xml

   <record id="..." model="website.menu">
       <field name="new_window" eval="True"/>
   </record>

.. _website_themes/navigation/menu/external_links:

External Links
--------------

Add a link to an external website.

.. code-block:: xml

   <record id="..." model="website.menu">
       <field name="url">https://www.odoo.com</field>
   </record>

.. _website_themes/navigation/menu/anchor:

Anchor
------

Link to a specific section of a page.

.. code-block:: xml

   <record id="..." model="website.menu">
       <field name="url">/about-us#our-team</field>
   </record>

.. _website_themes/navigation/dropdown:

Dropdown menu
=============

**Declaration**

.. code-block:: xml
   :caption: ``/website_airproof/data/menu.xml``

   <record id="menu_services" model="website.menu">
       <field name="name">Services</field>
       <field name="website_id">1</field>
       <field name="parent_id" search="[
           ('url', '=', '/default-main-menu'),
           ('website_id', '=', 1)]"/>
       <field name="sequence" type="int">...</field>
   </record>

Add an item to a dropdown menu.

.. code-block:: xml

   <record id="menu_services_item_1" model="website.menu">
       <field name="name">Item 1</field>
       <field name="url">/dropdown/item-1</field>
       <field name="website_id">1</field>
       <field name="parent_id" ref="website_airproof.menu_services"/>
       <field name="sequence" type="int">...</field>
   </record>

.. list-table::
   :header-rows: 1
   :stub-columns: 1
   :widths: 20 80

   * - Field
     - Description
   * - parent_id
     - The dropdown in which the item will be added.

.. _website_themes/navigation/mega_menu:

Mega menu
=========

A mega menu is a dropdown menu with additional possibilities and not just a list of links. In a
mega menu, you can use any kind of content (text, images, icons, ...).

In Odoo, you can select a mega-menu template in the list. If you don't need a custom layout, you
can re-use the template structure in the `mega_menu_content` field like any static content.

**Declaration**

.. code-block:: xml
   :caption: ``/website_airproof/data/menu.xml``

    <record id="menu_mega_menu" model="website.menu">
        <field name="name">Mega Menu</field>
        <field name="parent_id" search="[
            ('url', '=', '/default-main-menu'),
            ('website_id', '=', 1)]"/>
        <field name="website_id">1</field>
        <field name="sequence" type="int">..</field>
        <field name="is_mega_menu" eval="True"/>
        <field name="mega_menu_classes">...</field>
        <field name="mega_menu_content" type="html">
            <section class="s_mega_menu_multi_menus py-4 o_colored_level o_cc o_cc1">
                <div class="container">
                    <div class="row">
                        <div class="col-12 col-sm py-2 text-center">
                            <h4 class="o_default_snippet_text">First Menu</h4>
                            <nav class="nav flex-column">
                                <a href="#" class="nav-link o_default_snippet_text" data-name="Menu Item">Menu Item 1</a>
                                <a href="#" class="nav-link o_default_snippet_text" data-name="Menu Item">Menu Item 2</a>
                                <a href="#" class="nav-link o_default_snippet_text" data-name="Menu Item">Menu Item 3</a>
                            </nav>
                        </div>
                        <div class="col-12 col-sm py-2 text-center">
                            <h4 class="o_default_snippet_text">Second Menu</h4>
                            <nav class="nav flex-column">
                                <a href="#" class="nav-link o_default_snippet_text" data-name="Menu Item">Menu Item 1</a>
                                <a href="#" class="nav-link o_default_snippet_text" data-name="Menu Item">Menu Item 2</a>
                                <a href="#" class="nav-link o_default_snippet_text" data-name="Menu Item">Menu Item 3</a>
                            </nav>
                        </div>
                        <div class="col-12 col-sm py-2 text-center">
                            <h4 class="o_default_snippet_text">Third Menu</h4>
                            <nav class="nav flex-column">
                                <a href="#" class="nav-link o_default_snippet_text" data-name="Menu Item">Menu Item 1</a>
                                <a href="#" class="nav-link o_default_snippet_text" data-name="Menu Item">Menu Item 2</a>
                                <a href="#" class="nav-link o_default_snippet_text" data-name="Menu Item">Menu Item 3</a>
                            </nav>
                        </div>
                        <div class="col-12 col-sm py-2 text-center">
                            <h4 class="o_default_snippet_text">Last Menu</h4>
                            <nav class="nav flex-column">
                                <a href="#" class="nav-link o_default_snippet_text" data-name="Menu Item">Menu Item 1</a>
                                <a href="#" class="nav-link o_default_snippet_text" data-name="Menu Item">Menu Item 2</a>
                                <a href="#" class="nav-link o_default_snippet_text" data-name="Menu Item">Menu Item 3</a>
                            </nav>
                        </div>
                    </div>
                </div>
            </section>
        </field>
    </record>

.. list-table::
   :header-rows: 1
   :stub-columns: 1
   :widths: 20 80

   * - Field
     - Description
   * - is_mega_menu
     - Enable the mega menu feature.
   * - mega_menu_classes
     - Custom classes to be added to the main element
   * - mega_menu_content
     - The default content of the mega menu

Beside that, you might need to create something more visually advanced with a custom template.
Feel free to check how the `standard templates <{GITHUB_PATH}/addons/website/views/snippets/s_mega_menu_odoo_menu.xml>`_
are built in the Odoo source code.

.. _website_themes/navigation/mega_menu/custom:

Custom template
---------------

Create your own template and add it to the list.

**Layout**

.. code-block:: xml
   :caption: ``/website_airproof/views/website_templates.xml``

   <template id="s_mega_menu_airproof" name="Airproof" groups="base.group_user">
       <section class="s_mega_menu_airproof o_cc o_cc1 pt40">
           <!-- Content -->
       </section>
   </template>

**Option**

Use the following code to add an option for your new custom mega menu on the Website Builder.

.. code-block:: xml
   :caption: ``/website_airproof/views/snippets/options.xml``

   <template id="snippet_options" inherit_id="website.snippet_options" name="Airproof - Mega Menu Options">
       <xpath expr="//*[@data-name='mega_menu_template_opt']/*" position="before">
           <t t-set="_label">Airproof</t>
           <we-button t-att-data-select-label="_label"
               data-select-template="website_airproof.s_mega_menu_airproof"
               data-img="/website_airproof/static/src/img/builder/header_opt.svg"
               t-out="_label"/>
       </xpath>
   </template>


==================================================
SECTION: pages.rst
PATH: developer/howtos/website_themes/pages.rst
==================================================

=====
Pages
=====

In this chapter, you will learn how to declare static pages.

.. _website_themes/pages/default :

Default pages
=============

In Odoo, websites come with a few default static pages (Home, Contact us, 404, ...). They are built
the following way.

.. code-block:: xml
   :caption: `/website/data/website_data.xml`

   <template id="website.homepage" name="Home">
      <t t-call="website.layout">
         <t t-set="pageName" t-value="'homepage'"/>
         <div id="wrap" class="oe_structure oe_empty" />
      </t>
   </template>

Each default page is a template with its own content saved into a record. This is the reason why,
:ref:`custom pages are created within a record <website_themes/pages/theme_pages>`.

The `<t-call='website.layout'>` has some variables that can be set:

Define the meta title.

.. code-block:: xml

   <t t-set="additional_title">My Page Title</t>

.. tip::
   The `t-set` here does not pass the value into a `t-value` or a `t-valuef` attribute.
   This is for translation purpose. The content of a `t-value` or a `t-valuef` is not explicitly
   exported for translation. Beside that, as it's written in XML, a string located between an opening
   and a closing tag is considered translatable by default.

   .. example::
      **Good example:**

      .. code-block:: xml

         <t t-set="additional_title">My title</t>

      **Bad example:**

      .. code-block:: xml

         <t t-set="additional_title" t-valuef="My title"/>

Define the meta description.

.. code-block:: xml

   <t t-set="meta_description">This is the description of the page that will appear on Search
   Engines.</t>

Add a CSS class to the page.

.. code-block:: xml

   <t t-set="pageName" t-valuef="..."/>

Hide the header.

.. code-block:: xml

   <t t-set="no_header" t-value="true"/>

Hide the footer.

.. code-block:: xml

   <t t-set="no_footer" t-value="true"/>

If needed, deactivate default pages.

.. code-block:: xml
   :caption: ``/website_airproof/data/pages/home.xml``

   <record id="website.homepage" model="ir.ui.view">
       <field name="active" eval="False"/>
   </record>

.. code-block:: xml
   :caption: ``/website_airproof/data/pages/contactus.xml``

   <record id="website.contactus" model="ir.ui.view">
       <field name="active" eval="False"/>
   </record>

Alternatively, replace the default content of these pages using XPath.

.. code-block:: xml
   :caption: ``/website_airproof/data/pages/404.xml``

   <template id="404" inherit_id="http_routing.404">
       <xpath expr="//*[@id='wrap']" position="replace">
           <t t-set="additional_title" t-value="'404 - Not found'"/>

           <div id="wrap" class="oe_structure">
               <!-- Content -->
           </div>
       </xpath>
   </template>

.. seealso::
   - :doc:`Odoo Documentation on SEO </applications/websites/website/structure/seo>`

.. _website_themes/pages/theme_pages :

Theme pages
===========

You can add as many pages as you want to your website. Instead of defining a `<template>`, create a
page object.

**Declaration**

.. code-block:: xml
   :caption: ``/website_airproof/data/pages/about_us.xml``

   <?xml version="1.0" encoding="utf-8"?>
   <odoo noupdate="1">
      <record id="page_about_us" model="website.page">
         <field name="name">About us</field>
         <field name="is_published" eval="True"/>
         <field name="key">website_airproof.page_about_us</field>
         <field name="url">/about-us</field>
         <field name="website_id" eval="1" />
         <field name="type">qweb</field>
         <field name="arch" type="xml">
            <t t-name="website_airproof.page_about_us">
               <t t-call="website.layout">
                  <div id="wrap" class="oe_structure">
                     <!-- Content -->
                  </div>
               </t>
            </t>
         </field>
      </record>
   </odoo>

.. admonition:: Multiwebsite and `website_id`

   In a module context, the record created above is available, by default, on every website
   available on the database. It's preferable to specify the `website_id` of the website where the
   page will be findable.

.. list-table::
   :header-rows: 1
   :stub-columns: 1
   :widths: 20 80

   * - Field
     - Description
   * - name
     - Page name (human-readable).
   * - is_published
     - Define if the page is published (visible to visitors).
   * - key
     - View key (must be unique)
   * - url
     - Relative path where the page is reachable.
   * - type
     - View type
   * - arch
     - View architecture (the markup of your page)

With `<t t-call="website.layout">` you use the Odoo default page layout with your code.

.. _website_themes/pages/theme_pages/noupdate :

`noupdate` attribute
--------------------

This attribute prevents data overwriting. It can be added either on a `data` tag wrapping some
records to protect or on the `odoo`tag` in order to protect all records declared into the file.

Protect all records of the file:

.. code-block:: xml

   <?xml version="1.0" encoding="utf-8"?>
   <odoo noupdate="1">
      <record id="menu_company" model="website.menu">
         <!-- Fields -->
      </record>
      <record id="menu_faq" model="website.menu">
         <!-- Fields -->
      </record>
   </odoo>

Protect specific records in the file:

.. code-block:: xml

   <?xml version="1.0" encoding="utf-8"?>
   <odoo>
      <record id="menu_company" model="website.menu">
         <!-- Fields -->
      </record>

      <data noupdate="1">
         <record id="menu_faq" model="website.menu">
            <!-- Fields -->
         </record>
         <record id="menu_legal" model="website.menu">
            <!-- Fields -->
         </record>
      </data>
   </odoo>

**Use case**

There are several static pages created in the module. This one has been installed on the database
and the end-user has updated some of those pages. Some bug fixes must be applied on the
static pages while avoiding any loss of changes made by the end-user.

**Problem**

In case of a module update on the database, every record declared into the module will overwrite
those existing in the database even if the end-user has changed some of these records.

**Solution**

By wrapping the record (or all records declared in the file) into a `<data noupdate="1"></data>`
tag, the record declared is created at the first module installation but not updated after a module
update.

.. spoiler:: What happens if the record has been manually deleted (e.g.: a menu item) ?

   The system detects that this record doesn't exist and will re-create it.

.. spoiler:: Is this method only valid on static page records?

   Of course not. It's technically usable for every type of records.

.. _website_themes/pages/theme_pages/header_overlay :

Header overlay
--------------

Make the header background transparent and stand on top of the page content.

.. code-block:: xml

   <field name="header_overlay" eval="True"/>

.. image:: pages/header-overlay.png
   :alt: Header overlay

.. note::
   To create the content of a static page, use the Odoo way of doing things in order to remain
   editable by the Website Builder. Please note that Odoo takes advantage of Bootstrap framework (5.1.3).

   Find the available classes and components:

   - `Bootstrap cheat sheet <https://getbootstrap.com/docs/5.3/examples/cheatsheet/>`_
   - `Bootstrap documentation <https://getbootstrap.com/docs/5.3/getting-started/introduction/>`_

.. _website_themes/pages/theme_pages/page_templates :

Page templates
--------------

Create preset static page templates available from the New Page dialog window.

**Declaration**

The page templates has to be defined into the :file:`__manifest__.py` of the module through
`new_page_templates` and :file:`new_page_template_templates.xml`:

.. code-block:: python
   :caption: `/website_airproof/__manifest__.py`
   :emphasize-lines: 11,16-19

   {
      'name': 'Airproof Theme',
      'description': '...',
      'category': 'Website/Theme',
      'version': '{BRANCH}.0.0',
      'author': '...',
      'license': '...',
      'depends': ['website'],
      'data': [
         # ...
         'views/new_page_template_templates.xml'
      ],
      'assets': {
         # ...
      },
      'new_page_templates': {
         'airproof': {
            'faq': ['s_airproof_text_block_h1', 's_title', 's_faq_collapse', 's_call_to_action']
      }
   }

**Templates**

Then you have to create the template using a specific naming convention based on the hierarchy into
the :file:`__manifest__.py`. In this case, the name is `new_page_template_sections_airproof_faq`.
The building blocks called in this template are exactly the same as the standard ones except for
the first that has been adapted "on the fly".

Create a new instance of the standard `s_text_block` (`primary` attribute is important) and apply some
adaptations:

.. code-block:: xml
   :caption: `/website_airproof/views/new_page_template_templates.xml`

   <template id="s_airproof_text_block_h1" inherit_id="website.s_text_block" primary="True">
      <xpath expr="//div[hasclass('container')]|//div[hasclass('o_container_small')]" position="replace">
         <div class="container s_allow_columns">
               <h1 class="display-1">FAQ - Help</h1>
         </div>
      </xpath>
   </template>

Instantiate each building block (modified or not) for the page template:

.. code-block:: xml
   :caption: `/website_airproof/views/new_page_template_templates.xml`

   <template id="new_page_template_airproof_faq_s_text_block_h1" inherit_id="website_airproof.s_airproof_text_block_h1" primary="True"/>
   <template id="new_page_template_airproof_faq_s_title" inherit_id="website.s_title" primary="True"/>
   <template id="new_page_template_airproof_faq_s_faq_collapse" inherit_id="website.s_faq_collapse" primary="True"/>
   <template id="new_page_template_airproof_faq_s_call_to_action" inherit_id="website.s_call_to_action" primary="True"/>

Then, create your page template with some `t-snippet-call` within an `#wrap` as explained above:

.. code-block:: xml
   :caption: `/website_airproof/views/new_page_template_templates.xml`

   <template id="new_page_template_sections_airproof_faq" name="Airproof - New Page Template FAQ">
      <div id="wrap">
         <t t-snippet-call="website_airproof.new_page_template_airproof_faq_s_text_block_h1"/>
         <t t-snippet-call="website_airproof.new_page_template_airproof_faq_s_title"/>
         <t t-snippet-call="website_airproof.new_page_template_airproof_faq_s_faq_collapse"/>
         <t t-snippet-call="website_airproof.new_page_template_airproof_faq_s_call_to_action"/>
      </div>
   </template>

Once the page template is created, create a custom group and add it to the existing ones. Find below a list of the
existing groups:

.. code-block:: xml
   :caption: `/website/views/new_page_template_templates.xml`

   <template id="new_page_template_groups">
      <div id="basic">Basic</div>
      <div id="about">About</div>
      <div id="landing">Landing Pages</div>
      <div id="gallery">Gallery</div>
      <div id="services">Services</div>
      <div id="pricing">Pricing Plans</div>
      <div id="team">Team</div>
   </template>

Feel free to add custom groups to the list:

.. code-block:: xml
   :caption: `/website_airproof/views/new_page_template_templates.xml`

   <template id="new_page_template_groups" inherit_id="website.new_page_template_groups" name="Airproof - New Page Template Groups">
      <xpath expr="//div[@id='custom']" position="after">
         <div id="airproof">Airproof</div>
      </xpath>
   </template>

.. image:: pages/new-page-template.png
   :width: 520
   :alt: List of existing static page templates

.. seealso::
   `Go further by altering the building blocks of a custom template <https://github.com/odoo/odoo/blob/64971a0b1b2f8c063def5846f6029d5bb3a574cd/addons/website/views/new_page_template_templates.xml#L38>`_


==================================================
SECTION: setup.rst
PATH: developer/howtos/website_themes/setup.rst
==================================================

=====
Setup
=====

In this chapter, you will learn:

- To set up your local development environment.
- The outline of the Odoo database structure.
- To export and import an Odoo database in your local environment.
- To have an Odoo instance up and running.

.. _website_themes/setup/install :

Install
=======

There are multiple ways to :doc:`install Odoo </administration/on_premise>`, depending on the
intended use case. This documentation assumes you use the :doc:`source install
</administration/on_premise/source>` (running Odoo from the source code), which is best suited
for Odoo designers and developers.

.. _website_themes/setup/databases :

Databases
=========

.. _website_themes/setup/databases/structure :

Structure
---------

Every Odoo application works similarly; they are built with the same logic. A model contains fields
and relational fields that link to other models. Each model has views representing all its fields,
with backend and frontend views.

.. _website_themes/setup/databases/models :

Models
~~~~~~

The basis of Odoo is models. Models use fields to record the data. Records are stored in a database:
they are therefore linked to a model. In Odoo, you can find the different models in the
backend by enabling the :ref:`developer mode <developer-mode>` and then going to
:menuselection:`Settings --> Technical --> Database Structure: Models`.

.. image:: setup/models-page.png
   :alt: Models page

.. _website_themes/setup/databases/fields :

Fields
~~~~~~

In a model, we will centralize fields (field names we need to target in our code).

.. seealso::
   :doc:`/applications/studio/fields`

.. _website_themes/setup/databases/fields/classic :

Classic fields
**************

- Date
- Char
- Selection
- …

.. _website_themes/setup/databases/fields/relational :

Relational fields
*****************

Relational fields call a field from another model. They allow you to link models together and make
them interact easily. In other words, when you use a relational field, you link a record with
another one (located on another model), enabling you to retrieve the content of the fields located
on this linked record.

- **Many2one** fields are filled in by choosing one record from a list of records on another model
  (from *many* records, you select *one*). For example, the *customer* field on a quotation makes
  you choose one customer from a list of several customers on the *contact* model.
- **One2many** fields are reverse searches of existing many2one relations. For example, you could
  list on a contact all their existing quotations (from *one* record, you display *many*).
- **Many2many** fields are filled in by choosing one or several records from a list of records on
  another model. For example, you can put several tags on one product, and several products can use
  the same tags (from *many* records, you can select *many*).

.. _website_themes/setup/databases/views :

Views
~~~~~

Views define how records should be displayed to end-users. They are specified in XML, meaning they
can be edited independently from the models they represent. They are flexible and allow deep
customization of the screens they control.

.. _website_themes/setup/databases/views/backend_vs_frontend :

Backend vs. Frontend
********************

- **Backend views**: Kanban, List, Form, etc.
- **Frontend view**: QWeb

.. _website_themes/setup/databases/views/static_vs_dynamic :

Static vs. Dynamic
******************

- **Static pages** have stable content, such as the homepage. You can define their URL and set some
  properties like published, indexed, etc.
- **Dynamic pages** are dynamically generated, such as the product page. Their URL is dynamic
  and is accessible to all by default (this can be changed by configuring access rights).

.. _website_themes/setup/databases/views/standard_vs_inherited :

Base vs. Inherited vs. Duplicated
*********************************

- **Base view:** View natively implemented by Odoo. It is directly derived from their model.
  A base view should never be altered as it allows updating an Odoo database without overwriting a
  client's modification.

Modifications always take place in either a duplicated or inherited view with some differences:

- **Inherited view** always has an `inherit_id` and applies modifications based on the source
  code of the base view it inherits from.
- **Duplicated view** is a duplication from another one. Most of the time this kind of view is
  created by Odoo when the end-user applies modifications through the Website Builder. This
  mechanism prevents data loss when the module is updated because only the source view will be
  updated, not the duplicated one. If a duplicated view exists, both the original view and the
  duplicated one are visible in the list but only the duplicated one has an `external_id` (an
  `external_id` set means that the view has been created by the source code of a module).

.. _website_themes/setup/databases/import :

Import an existing database
---------------------------

.. note::
   You can directly go to the :doc:`theming` chapter if you do not need to import an existing
   database.

.. _website_themes/setup/databases/import/dump :

Dump
~~~~

.. _website_themes/setup/databases/import/saas :

Odoo SaaS
*********

#. Log in to a user account with sufficient access rights.
#. Go to `<database_url>/saas_worker/dump`.

.. _website_themes/setup/databases/import/sh :

Odoo.sh
*******

#. Connect to Odoo.sh.
#. Select the branch you want to back up.
#. Choose the :guilabel:`BACKUPS` tab.
#. Click the :guilabel:`Create Backup` button.
#. When the process is over, a notification appears. Open it and click the :guilabel:`Go to Backup`
   button.
#. Click the :guilabel:`Download` icon. Select :guilabel:`Testing` under
   :guilabel:`Purpose` and :guilabel:`With filestore` under :guilabel:`Filestore`.

   .. image:: setup/download-backup.png
     :alt: Download backup

#. You will receive a notification when the dump is ready to be downloaded. Open it and click on
   :guilabel:`Download` to get your dump.

   .. image:: setup/database-backup.png
     :alt: Database backup

.. _website_themes/setup/databases/import/filestore :

Move filestore
~~~~~~~~~~~~~~

Copy all the folders included in the filestore folder and paste them to the following location on
your computer:

- macOS: `/Users/<User>/Library/Application Support/Odoo/filestore/<database_name>`
- Linux: `/home/<User>/.local/share/Odoo/filestore/<database_name>`

.. note::
   `/Library` is a hidden folder.

.. _website_themes/setup/databases/import/database_setup :

Database setup
~~~~~~~~~~~~~~

Create an empty database.

.. code-block:: bash

   createdb <database_name>

Import the SQL file in the database that you just created.

.. code-block:: bash

   psql <database_name> < dump.sql

Reset the admin user password.

.. code-block:: bash

   psql \c
   <database_name>
   update res_users set login='admin', password='admin' where id=2;

If necessary, disable the two-factor authentication enforcing policy option.

.. code-block:: bash

    psql <database-name>
    update res_users set totp_secret='' where id=2;

.. _website_themes/setup/getting_started :

Getting started
===============

.. _website_themes/setup/getting_started/running_odoo :

Running Odoo
------------

Once all dependencies are set up, Odoo can be launched by running `odoo-bin`, the command-line
interface of the server. It is located at the root of the Odoo Community directory.

- :ref:`Running Odoo <install/source/running_odoo>`
- `Docker <https://hub.docker.com/_/odoo/>`_

To configure the server, you can specify command-line arguments or a configuration file. The first
method is presented below.

The :ref:`CLI <reference/cmdline>` offers several functionalities related to Odoo. You can use it to
:ref:`run the server <reference/cmdline/server>`, scaffold an Odoo theme, populate a database, or
count the number of lines of code.

.. _website_themes/setup/getting_started/shell_script :

Shell script
------------

A typical way to :ref:`run the server <reference/cmdline/server>` would be to add all command line arguments to a `.sh` script.

.. example::
   .. code-block:: xml

      ./odoo-bin --addons-path=../enterprise,addons --db-filter=<database> -d <database> -i website --dev=xml

.. list-table::
   :header-rows: 1
   :stub-columns: 1
   :widths: 20 80

   * - Folder
     - Description
   * - :option:`--addons-path <odoo-bin --addons-path>`
     - Comma-separated list of directories in which modules are stored. These directories are
       scanned for modules.
   * - :option:`-d <odoo-bin --database>`

       :option:`--database <odoo-bin --database>`
     - database(s) used when installing or updating modules.
   * - :option:`--db-filter <odoo-bin --db-filter>`
     - Hides databases that do not match the filter.
   * - :option:`-i <odoo-bin --init>`

       :option:`--init <odoo-bin --init>`
     - Comma-separated list of modules to install before running the server. (requires `-d`)
   * - :option:`-u <odoo-bin --update>`

       :option:`--update <odoo-bin --update>`
     - Comma-separated list of modules to update before running the server. (requires `-d`)
   * - :option:`--dev <odoo-bin --dev>`
     - Comma-separated list of features. For development purposes only. :ref:`More info
       <reference/cmdline/dev>`

.. _website_themes/setup/getting_started/signin :

Sign in
-------

After the server has started (the INFO log `odoo.modules.loading: Modules loaded.` is printed), open
http://localhost:8069 in your web browser and log in with the base administrator account.

Type **admin** for the email and **admin** for the password.

.. image:: setup/welcome-homepage.png
   :alt: Welcome homepage

.. tip::
   Hit *CTRL+C* to stop the server. Do it twice if needed.

.. _website_themes/setup/getting_started/developer_mode :

Developer mode
--------------

The developer mode, also known as debug mode, is useful for development as it gives access to
additional tools. In the next chapters, it is assumed that you have enabled the developer mode.

.. seealso::
   :doc:`/applications/general/developer_mode`


==================================================
SECTION: shapes.rst
PATH: developer/howtos/website_themes/shapes.rst
==================================================

======
Shapes
======

Shapes are handy if you want to add personality to your website.

In this chapter, you will learn how to add standard and custom background and image shapes.

.. _website_themes/shapes/bg:

Background shapes
=================

Background shapes are SVG files that you can add as a decorative background in your different
sections. Each shape has one or several customizable colors, and some of them are animated.

.. warning::
    Odoo's default shapes use the Odoo default colors palette map as reference. This way, colors
    will be automatically adapted to a new palette everytime it changes:

    .. code-block:: scss

        default_palette = {
            '1': '#3AADAA',
            '2': '#7C6576',
            '3': '#F6F6F6',
            '4': '#FFFFFF',
            '5': '#383E45',
        }

.. _website_themes/shapes/bg/standard:

Standard
--------

A large selection of default background shapes is available.

**Use**

.. code-block:: xml

   <section data-oe-shape-data="{'shape':'web_editor/Zigs/06'}">
       <div class="o_we_shape o_web_editor_Zigs_06"/>
       <div class="container">
           <!-- Content -->
        </div>
   </section>

`data-oe-shape-data` is a JSON object containing information about your shape like the location
of the SVG file, the repeat and flip options, etc.

For example, you can **flip the shape** horizontally or vertically by using the X or Y axis like
this:

.. code-block:: xml

   <section data-oe-shape-data="{'shape':'web_editor/Zigs/06','flip':[x,y]}">
       <div class="o_we_shape o_we_flip_x o_we_flip_y o_web_editor_Zigs_06"/>
       <div class="container">
           <!-- Content -->
       </div>
   </section>

.. _website_themes/shapes/bg/standard/colors:

Colors mapping
~~~~~~~~~~~~~~

You can also change the default colors mapping of your shape either by switching colors in the
current map or by creating a alternate map without modifying the initial one.

.. _website_themes/shapes/bg/standard/colors/switch:

Switch colors mapping
*********************

First, we can use a shape like this:

.. image:: shapes/shapes-initial.png
   :alt: Initial shape

.. code-block:: xml

    <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" preserveAspectRatio="none" width="100%" height="100%">
        <defs>
            <svg id="zigs06_top" viewBox="0 0 30 30" preserveAspectRatio="xMinYMin meet" fill="#383E45" width="100%">
                <path d="M30,7.9C22.5,7.9,22.5,20,15,20S7.5,7.9,0,7.9V0h30V7.9z"/>
            </svg>
            <svg id="zigs06_bottom" viewBox="0 0 30 30" preserveAspectRatio="xMinYMax meet" fill="#FFFFFF" width="100%">
                <path d="M0,22.1C7.5,22.1,7.5,10,15,10s7.5,12.1,15,12.1V30H0V22.1z"/>
            </svg>
        </defs>
        <svg>
            <use xlink:href="#zigs06_top"/>
            <use xlink:href="#zigs06_bottom"/>
        </svg>
    </svg>

Here, we use `#383E45`  and `#FFFFFF` which corresponds to the 5th and 4th colors in the Odoo's
default color palette.

The shape is declared as follows in SCSS:

.. code-block:: sass
   :caption: ``/website_airproof/static/src/scss/primary_variables.scss``

   'Zigs/06': ('position': bottom, 'size': 30px 100%, 'colors': (4, 5), 'repeat-x': true),

.. image:: shapes/shapes-bg.jpg
   :alt: Shape colors

The blackish color is used at the top (`c5`), the lightish (`c4`) at the bottom and in between,
the shape is simply transparent.

We are going to rewrite the `colors` map with some `key: value` couples:

**With color palette reference and custom color**

.. code-block:: scss
   :caption: ``/website_airproof/static/src/scss/primary_variables.scss``

    $o-bg-shapes: change-shape-colors-mapping('web_editor', 'Zigs/06', (4: 3, 5: rgb(187, 27, 152)))

**Or just with references**

.. code-block:: scss
   :caption: ``/website_airproof/static/src/scss/primary_variables.scss``

    $o-bg-shapes: change-shape-colors-mapping('web_editor', 'Zigs/06', (4: 3, 5: 1));

The `c4` (white) will be replaced by `c3` (whitish) and `c5` (black) by `c1` (white).

**Results**

.. image:: shapes/shapes-final.png
   :alt: Shape final

.. image:: shapes/shapes-final-options.png
   :alt: Shape final options

.. _website_themes/shapes/bg/standard/colors/extra:

Add extra colors mapping
************************

Adding extra color mapping allows you to add a color variant to the template of a shape while
keeping the original.

.. code-block:: scss
   :caption: ``/website_airproof/static/src/scss/boostrap_overridden.scss``

   $o-bg-shapes: add-extra-shape-colors-mapping('web_editor', 'Zigs/06', 'second', (4: 3, 5: 1));

.. code-block:: xml

   <section data-oe-shape-data="{'shape':'web_editor/Zigs/06'}">
       <div class="o_we_shape o_web_editor_Zigs_06 o_second_extra_shape_mapping"/>
       <div class="container">
           <!-- Content -->
       </div>
   </section>

.. _website_themes/shapes/bg/custom:

Custom
------

Sometimes, your design might require creating one or several custom shapes.

Firstly, you need to create an SVG file for your shape.

.. code-block:: xml
   :caption: ``/website_airproof/static/shapes/hexagons/01.svg``

   <svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="86" height="100">
       <polygon points="0 25, 43 0, 86 25, 86 75, 43 100, 0 75" style="fill: #3AADAA;"/>
   </svg>

Make sure to use colors from the default Odoo palette for your shape (as explained :ref:`above <website_themes/shapes/bg>`).

.. code-block:: scss

   default_palette = {
       '1': '#3AADAA',
       '2': '#7C6576',
       '3': '#F6F6F6',
       '4': '#FFFFFF',
       '5': '#383E45',
   }
.. _website_themes/shapes/bg/custom/attachment:

Attachment
~~~~~~~~~~

Declare your shape file.

.. code-block:: xml
   :caption: ``/website_airproof/data/shapes.xml``

   <record id="shape_hexagon_01" model="ir.attachment">
       <field name="name">01.svg</field>
       <field name="datas" type="base64" file="website_airproof/static/shapes/hexagons/01.svg"/>
       <field name="url">/web_editor/shape/illustration/hexagons/01.svg</field>
       <field name="public" eval="True"/>
   </record>

.. list-table::
   :header-rows: 1
   :stub-columns: 1
   :widths: 20 80

   * - Field
     - Description
   * - name
     - Name of the shape
   * - datas
     - Path to the shape
   * - url
     - The location of your shape in the web editor. The file is automatically duplicated in
       `/web_editor/shape/illustration` by the Website Builder.
   * - public
     - Makes the shape available for later editing.

.. _website_themes/shapes/bg/custom/scss:

SCSS
~~~~

Define the styles of your shape.

.. code-block:: scss
   :caption: ``/website_airproof/static/src/scss/primary_variables.scss``

   $o-bg-shapes: map-merge($o-bg-shapes,
       (
           'illustration': map-merge(
               map-get($o-bg-shapes, 'illustration') or (),
               (
                   'hexagons/01': ('position': center center, 'size': auto 100%, 'colors': (1), 'repeat-x': true, 'repeat-y': true),
               ),
           ),
       )
   );

.. list-table::
   :header-rows: 1
   :stub-columns: 1
   :widths: 20 80

   * - Key
     - Description
   * - File location
     - `hexagons/01` corresponds to the location of your file in the `shapes` folder.
   * - position
     - Defines the position of your shape.
   * - size
     - Defines the size of your shape.
   * - colors
     - Defines the color c* you want it to have (this will override the color you specified in your
       SVG).
   * - repeat-x
     - Defines if the shape is repeated horizontally. This key is optional and only needs to be
       defined if set to `true`.
   * - repeat-y
     - Defines if the shape is repeated vertically. This key is optional and only needs to be
       defined if set to `true`.

.. _website_themes/shapes/bg/custom/option:

Add the option
~~~~~~~~~~~~~~

Lastly, add your shape to the list of shapes available on the Website Builder.

.. code-block:: xml
   :caption: ``/website_airproof/views/snippets/options.xml``

   <template id="snippet_options_background_options" inherit_id="website.snippet_options_background_options" name="Airproof - Shapes">
      <xpath expr="//*[hasclass('o_we_bg_shape_menu')]/header[hasclass('o_pager_nav')]//*[hasclass('o_pager_nav_btn')][last()]" position="after">
         <button type="button" class="o_pager_nav_btn p-0 text-uppercase" data-scroll-to="x_scroll_bgshapes_airproof">
            <span class="w-100">Airproof</span>
         </button>
      </xpath>
      <xpath expr="//*[hasclass('o_we_bg_shape_menu')]/div[hasclass('o_pager_container')]" position="inside">
         <div class="x_scroll_bgshapes_airproof">
            <we-title>Airproof</we-title>
            <we-select-page string="Airproof">
               <we-button data-shape="illustration/airproof/01" data-select-label="Airproof 01"/>
            </we-select-page>
         </div>
      </xpath>
   </template>

.. _website_themes/shapes/bg/custom/use:

Use it into your pages
~~~~~~~~~~~~~~~~~~~~~~

In your XML pages, you can use your shape in the same way as the others.

.. code-block:: xml

    <section class="..." data-oe-shape-data="{'shape': 'illustration/airproof/01', 'colors': 'c4': '#8595A2', 'c5': 'rgba(0, 255, 0)'}">
        <div class="o_we_shape o_illustration_airproof_01"/>
        <div class="container">
            <!-- Content -->
        </div>
    </section>

You can also redefine colors using the `data-oe-shape-data attribute`, but this is optional.



==================================================
SECTION: theming.rst
PATH: developer/howtos/website_themes/theming.rst
==================================================

=======
Theming
=======

After your development environment is fully set up, you can start building the skeleton of your
theme module. In this chapter, you will discover how to:

- Enable/disable the Website Builder's standard options and templates.
- Define the colors and fonts to use for your design.
- Get the most out of Bootstrap variables.
- Add custom styles and JavaScript.

.. _theming/module:

Theme module
============

Odoo comes with a default theme that provides minimal structure and layout. When you create a new
theme, you are extending the default theme.

Remember to add the directory containing your module to the `addons-path` command-line argument
when running Odoo in your development environment.

.. _theming/module/naming:

Technical naming
----------------

The first step is to create a new directory.

.. code-block:: xml

   website_airproof

.. note::
   Prefix it with `website_` and use only lowercase ASCII alphanumeric characters and underscores.

   In this documentation, we will use **Airproof** (a fictional project) as an example.

.. _theming/module/structure:

File structure
--------------

Themes are packaged like any Odoo module. Even if you are designing a basic website, you need to
package its theme like a module.

::

    website_airproof
    ├── data
    ├── i18n
    ├── static
    │   ├── description
    │   ├── fonts
    │   ├── lib
    │   ├── shapes // Shapes for background
    │   └── src
    │       ├── img
    │       │   ├── content // For those used in the pages of your website
    │       │   └── wbuilder // For those used in the builder
    │       ├── js
    │       ├── scss // Theme specific styles
    │       └── snippets // custom snippets
    ├── views
    ├── __init__.py
    └── __manifest__.py

.. list-table::
   :header-rows: 1
   :stub-columns: 1
   :widths: 20 80

   * - Folder
     - Description
   * - data
     - Presets, menus, pages, images, shapes, … (`*.xml`)
   * - i18n
     - Translations (`*.po`, `*.pot`)
   * - lib
     - External libraries (`*.js`)
   * - static
     - Custom assets (`*.jpg`, `*.gif`, `*.png`, `*.svg`, `*.pdf`, `*.scss`, `*.js`)
   * - views
     - Custom views and templates (`*.xml`)

.. _theming/module/initialization:

Initialization
--------------

An Odoo module is also a Python package with a :file:`__init__.py` file containing import
instructions for various Python files in the module. This file can remain empty for now.


.. _theming/module/declaration:

Declaration
-----------

An Odoo module is declared by its manifest file. This file declares a Python package as an Odoo
module and specifies the module's metadata. It must at least contain the `name` field, which is
always required. It usually contains much more information.

.. code-block:: python
   :caption: ``/website_airproof/__manifest__.py``

   {
      'name': 'Airproof Theme',
      'description': '...',
      'category': 'Website/Theme',
      'version': '{BRANCH}.0',
      'author': '...',
      'license': '...',
      'depends': ['website'],
      'data': [
         # ...
      ],
      'assets': {
         # ...
      },
   }

.. list-table::
   :header-rows: 1
   :stub-columns: 1
   :widths: 20 80

   * - Field
     - Description
   * - name
     - Human-readable name of the module (required)
   * - description
     - Extended description of the module, in `reStructuredText
       <https://en.wikipedia.org/wiki/ReStructuredText>`_
   * - category
     - Classification category within Odoo
   * - version
     - Odoo version this module is addressing
   * - author
     - Name of the module author
   * - license
     - By default, we use the `LGPL-3` license. More information in the :ref:`module manifest
       <reference/module/manifest>` page.
   * - depends
     - Odoo modules must be loaded before this one, either because this module uses features
       they create or because it alters resources they define
   * - data
     - List of XML files
   * - assets
     - List of SCSS and JS files

.. note::
    - The file structure above is just a suggestion.  We could add as many other folders as needed in
      the project, such as `/controllers` to include controllers or `/views/backend` for backend
      views, etc.
    - To create a website theme, you only need to install the Website app. If you need other apps
      (Blogs, Events, eCommerce, ...), you can also add them.
    - Odoo version and major number are mandatory. However, patch number is optional. If you want
      to specify the required version of Odoo to run your module, you should use a five arguments
      structure, using the first two arguments to indicate your current Odoo version (`* = {BRANCH}`).

   .. image:: theming/versioning.png
      :alt: Module versioning
      :width: 300

   Example:
   `{BRANCH}.1.0.0`
   `odoo_major.odoo_minor.module_major.module_minor.module_patch`

.. warning::
   Automated file inclusion using wildcard notations `(ex.: /myfolder/*.scss)` doesn't work in
   Odoo SaaS databases. In this case, include each file manually in the manifest.

.. _theming/options:

Default options
===============

First, try to construct your theme by using Odoo's default options. This ensures two things:

#. You do not re-invent something which already exists. For example, as Odoo provides an option to
   add a border on the footer, you shouldn't recode it yourself. Instead, enable the default option
   first, then extend it if needed.
#. The user can still use all of Odoo's features with your theme. For example, if you recode the
   border on the footer, you may break the default option or make it useless, giving the user a bad
   experience. Also, your recode might not work as well as the default option, as other Odoo
   features may rely on it.

.. tip::
   - Use four spaces per indentation level.
   - Do not use tabs.
   - Never mix spaces and tabs.

.. seealso::
   :doc:`Odoo coding guidelines <../../../contributing/development/coding_guidelines>`

.. _theming/module/variables:

Odoo variables
--------------

Odoo declares many CSS rules, most entirely customizable by overriding the related SCSS variables.
To do so, create a :file:`primary_variables.scss` file and add it to the `_assets_primary_variables`
bundle.

**Declaration**

.. code-block:: python
   :caption: ``/website_airproof/__manifest__.py``

   'assets': {
      'web._assets_primary_variables': [
         'website_airproof/static/src/scss/primary_variables.scss',
      ],
   },

By reading the source code, variables related to options are easily noticeable.

.. code-block:: xml

   <we-button title="..."
      data-name="..."
      data-customize-website-views="..."
      data-customize-website-variable="'Sidebar'"
      data-img="..."/>

These variables can be overridden through the `$o-website-value-palettes` map, for example.

.. _theming/module/variables/global:

Global
~~~~~~

**Declaration**

.. code-block:: scss
   :caption: ``/website_airproof/static/src/scss/primary_variables.scss``

   $o-website-values-palettes: (
      (
         // Templates
         // Colors
         // Fonts
         // Buttons
         // ...
      ),
   );

.. tip::
   That file must only contain definitions and overrides of SCSS variables and mixins.

.. seealso::
   `Primary variables SCSS
   <https://github.com/odoo/odoo/blob/c272c49657e8b7865bb93e5f1dcc183cc7d44f17/addons/website/static/src/scss/primary_variables.scss#L2089>`_

.. _theming/module/variables/fonts:

Fonts
~~~~~

You can embed any font on your website. The Website Builder automatically makes them available in
the font selector.

**Declaration**

.. code-block:: scss
   :caption: ``/website_airproof/static/src/scss/primary_variables.scss``

   $o-theme-font-configs: (
      <font-name>: (
         'family': <css font family list>,
         'url' (optional): <related part of Google fonts URL>,
         'properties' (optional): (
            <font-alias>: (
               <website-value-key>: <value>,
               ...,
            ),
         ...,
      )
   )

**Use**

.. code-block:: scss
   :caption: ``/website_airproof/static/src/scss/primary_variables.scss``

   $o-website-values-palettes: (
      (
         'font':                             '<font-name>',
         'headings-font':                    '<font-name>',
         'navbar-font':                      '<font-name>',
         'buttons-font':                     '<font-name>',
      ),
   );

.. _theming/module/variables/fonts/google:

Google fonts
************

.. code-block:: scss
   :caption: ``/website_airproof/static/src/scss/primary_variables.scss``

   $o-theme-font-configs: (
      'Poppins': (
         'family':                         ('Poppins', sans-serif),
         'url':                            'Poppins:400,500',
         'properties' : (
            'base': (
               'font-size-base':           1rem,
            ),
         ),
      ),
   );

.. _theming/module/variables/fonts/custom:

Custom fonts
************

First, create a specific SCSS file to declare your custom font(s).

.. code-block:: python
   :caption: ``/website_airproof/__manifest__.py``

   'assets': {
      'web.assets_frontend': [
         'website_airproof/static/src/scss/font.scss',
      ],
   },

Then, use the `@font-face` rule to allow you custom font(s) to be loaded on your website.

.. code-block:: scss
   :caption: ``/website_airproof/static/src/scss/font.scss``

   @font-face {
      font-family: "My Custom Font", Helvetica, Helvetica Neue, Arial, sans-serif;
      font-weight: 400;
      font-style: normal;
      src: url('/fonts/my-custom-font.woff') format('woff'),
           url('/fonts/my-custom-font.woff2') format('woff2');
   }

.. code-block:: scss
   :caption: ``/website_airproof/static/src/scss/primary_variables.scss``

   $o-theme-font-configs: (
      'Proxima Nova': (
         'family':                         ('Proxima Nova', sans-serif),
         'properties' : (
            'base': (
               'font-size-base':           1rem,
            ),
         ),
      ),
   );

.. tip::
   It is recommended to use the `.woff` and/or `.woff2` format for your fonts.

.. _theming/module/variables/colors:

Colors
~~~~~~

The Website Builder relies on palettes composed of five named colors. Defining those in your theme
ensures it stays consistent.

.. list-table::
   :header-rows: 1
   :stub-columns: 1
   :widths: 20 80

   * - Color
     - Description
   * - o-color-1
     - Primary
   * - o-color-2
     - Secondary
   * - o-color-3
     - Extra (Light)
   * - o-color-4
     - Whitish
   * - o-color-5
     - Blackish

.. image:: theming/theme-colors.png
   :alt: Theme colors
   :width: 300

**Declaration**

.. code-block:: scss
   :caption: ``/website_airproof/static/src/scss/primary_variables.scss``

   $o-color-palettes: map-merge($o-color-palettes,
      (
         'airproof': (
            'o-color-1':                    #bedb39,
            'o-color-2':                    #2c3e50,
            'o-color-3':                    #f2f2f2,
            'o-color-4':                    #ffffff,
            'o-color-5':                    #000000,
         ),
      )
   );

Add the created palette to the list of palettes offered by the Website Builder.

.. code-block:: scss

   $o-selected-color-palettes-names: append($o-selected-color-palettes-names, 'airproof');

**Use**

.. code-block:: scss
   :caption: ``/website_airproof/static/src/scss/primary_variables.scss``

   $o-website-values-palettes: (
      (
         'color-palettes-name':              'airproof',
      ),
   );

.. image:: theming/theme-colors-airproof.png
   :alt: Theme colors Airproof
   :width: 800

**Color combinations**

Based on the previously defined five color palettes, the Website Builder automatically generates
five color combinations, each defining a color for the background, text, headings, links, primary
buttons, and secondary buttons. These colors can be customized later by the user.

.. image:: theming/theme-colors-big.png
   :alt: Theme colors
   :width: 300

The colors used in a color combination are accessible and can be overridden through
`$o-color-palettes` using a specific prefix (`o-cc` for `color combination`).

.. code-block:: scss
   :caption: ``/website_airproof/static/src/scss/primary_variables.scss``

   $o-color-palettes: map-merge($o-color-palettes,
      (
         'airproof': (

            'o-cc*-bg':                     'o-color-*',
            'o-cc*-text':                   'o-color-*',
            'o-cc*-headings':               'o-color-*',
            'o-cc*-h2':                     'o-color-*',
            'o-cc*-h3':                     'o-color-*',
            'o-cc*-h4':                     'o-color-*',
            'o-cc*-h5':                     'o-color-*',
            'o-cc*-h6':                     'o-color-*',
            'o-cc*-link':                   'o-color-*',
            'o-cc*-btn-primary':            'o-color-*',
            'o-cc*-btn-primary-border':     'o-color-*',
            'o-cc*-btn-secondary':          'o-color-*',
            'o-cc*-btn-secondary-border':   'o-color-*',

         ),
      )
   );

.. note::
   For each `o-cc*`, replace the `*` with the digit (1 - 5) corresponding to the desired color
   combination.

   The default text color is `o-color-5`. If the background is too dark, it will automatically
   change to the `o-color-4` color.

.. seealso::
   `Color combinations SCSS
   <https://github.com/odoo/odoo/blob/c272c49657e8b7865bb93e5f1dcc183cc7d44f17/addons/web_editor/static/src/scss/web_editor.common.scss#L16>`_

.. admonition:: Demo page

   The Website Builder automatically generates a page to view the color combinations of the theme
   color palette: http://localhost:8069/website/demo/color-combinations

.. _theming/module/variables/gradients:

Gradients
~~~~~~~~~

You can also define gradients for the menu, header, footer and copyright bar, directly in your
`primary_variables.scss` file.

**Declaration**

.. code-block:: scss
   :caption: ``/website_airproof/static/src/scss/primary_variables.scss``

   $o-website-values-palettes: (
      (
         'menu-gradient': linear-gradient(135deg, rgb(203, 94, 238) 0%, rgb(75, 225, 236) 100%),
         'header-boxed-gradient': [your-gradient],
         'footer-gradient': [your-gradient],
         'copyright-gradient': [your-gradient],
      ),
   );

.. _theming/module/bootstrap:

Bootstrap variables
-------------------

Odoo includes Bootstrap by default. You can use all variables and mixins of the framework.

If Odoo does not provide the variable you are looking for, there could be a Bootstrap variable that
allows it. Indeed all Odoo layouts respect Bootstrap structures and use Bootstrap components or
their extensions. If you customize a Bootstrap variable, you add a generic style for the whole user
website.

Use a dedicated file added to the :file:`_assets_frontend_helpers` bundle to override Bootstrap
values and *not* the :file:`primary_variables.scss` file.

**Declaration**

.. code-block:: python
   :caption: ``/website_airproof/__manifest__.py``

   'assets': {
      'web._assets_frontend_helpers': [
         ('prepend', 'website_airproof/static/src/scss/bootstrap_overridden.scss'),
      ],
   },

**Use**

.. code-block:: scss
   :caption: ``/website_airproof/static/src/scss/bootstrap_overridden.scss``

   // Typography
   $h1-font-size:                 4rem !default;

   // Navbar
   $navbar-nav-link-padding-x:    1rem!default;

   // Buttons + Forms
   $input-placeholder-color:      o-color('o-color-1') !default;

   // Cards
   $card-border-width:            0 !default;

.. tip::
   That file must only contain definitions and overrides of SCSS variables and mixins.

.. warning::
   Don't override Bootstrap variables that depend on Odoo variables. Otherwise, you might break the
   possibility for the user to customize them using the Website Builder.

   When an option is defined by a variable in `primary_variables.scss` and by a Boostrap variable,
   you should always go for an override through the primary variables. Do it via
   `bootstrap_overridden.scss` only if nothing exists in the primary variables.

.. seealso::
   `Bootstrap overridden SCSS
   <{GITHUB_PATH}/addons/web/static/lib/bootstrap/scss/_variables.scss>`_

.. admonition:: Demo page

   http://localhost:8069/website/demo/bootstrap

.. _theming/module/bootstrap/fonts:

Font sizes
~~~~~~~~~~

Odoo has CSS font size classes to separate style (font sizes) and semantic (tag and styles in
general). Both logic can be combined to be more flexible.

.. seealso::
   `Bootstrap documentation about display headings
   <https://getbootstrap.com/docs/5.3/content/typography/#display-headings>`_

.. _theming/module/bootstrap/fonts/text:

Text style
**********

Odoo's Website Builder allows to select a style for your text. Some are just tag related like the
`Header` with no extra CSS class. Other combine tag and style directly applied on them like the
`Header 1 Display`.

.. image:: theming/header.png
   :alt: Header styles
   :width: 300

.. code-block:: xml

   <!-- h1 with display heading sizes -->
   <h1 class="display-1">Heading 1 with Display Heading 1 size</h1>
   <h1 class="display-2">Heading 1 with Display Heading 2 size</h1>
   <h1 class="display-3">Heading 1 with Display Heading 3 size</h1>
   <h1 class="display-4">Heading 1 with Display Heading 4 size</h1>

   <!-- Lead text - named "Light" in the dropdown -->
   <p class="lead">A text typically used as an introduction.</p>

   <!-- Small text -->
   <p class="o_small">Body text with a smaller size.</p>

.. _theming/module/bootstrap/fonts/sizing:

Sizing classes
**************

The sizing classes are added on a freshly created `span` tag inside the targeted element (See
examples below).

.. image:: theming/sizing.png
   :alt: Sizing classes
   :width: 300

.. _theming/module/bootstrap/fonts/sizing/headings-and-body:

Heading and body text
^^^^^^^^^^^^^^^^^^^^^

Assuming these classes can be applied on any text element, take `h2` as an example below:

.. code-block:: xml

   <!-- h2 sized like an h1 -->
   <h2><span class="h1-fs">Heading</span></h2>

   <!-- h2 sized with other heading sizes -->
   <h2><span class="h2-fs">Heading</span></h2>
   <h2><span class="h3-fs">Heading</span></h2>
   <h2><span class="h4-fs">Heading</span></h2>
   <h2><span class="h5-fs">Heading</span></h2>
   <h2><span class="h6-fs">Heading</span></h2>

   <!-- h2 sized like a normal paragraph (base size, 16px by default) -->
   <h2><span class="base-fs">Heading</span></h2>

   <!-- h2 sized like a small text (14px by default) -->
   <h2><span class="o_small-fs">Heading</span></h2>

.. _theming/module/bootstrap/fonts/sizing/display:

Display headings
^^^^^^^^^^^^^^^^

If larger titles are needed, Odoo uses Bootstrap's Display Headings classes, from `display-1` to `6`.

.. code-block:: xml

   <h2><span class="display-1-fs">Heading</span></h2>
   <h2><span class="display-2-fs">Heading</span></h2>
   <h2><span class="display-3-fs">Heading</span></h2>
   <h2><span class="display-4-fs">Heading</span></h2>

.. note::
   The Website Builder allows the user to configure only sizes from `Display 1` to `Display 4`. You
   can set the other sizes (`5` and `6`) to use them in your code but the user won't be able to
   modify them directly within the Website Builder interface.

.. _theming/module/website:

Website settings
----------------

Global options related to the website can be set through the website record by following the
structure below.

**Declaration**

.. code-block:: xml
   :caption: ``/website_airproof/data/website.xml``

   <?xml version="1.0" encoding="utf-8"?>
   <odoo noupdate="1">
      <record id="website.default_website" model="website">
         <field name="name">Airproof</field>
         <field name="logo" type="base64" file="website_airproof/static/src/img/content/logo_airproof.png"/>
         <field name="favicon" type="base64" file="website_airproof/static/description/favicon.png" />
         <field name="shop_ppg">18</field>
         <field name="shop_ppr">3</field>
         <field name="cookies_bar" eval="True" />
         <field name="contact_us_button_url">/contact-us</field>
         <field name="social_facebook">https://www.facebook.com/Airproof</field>
         <field name="social_instagram">https://www.instagram.com/airproof</field>
         <field name="social_linkedin">https://www.linkedin.com/company/airproof</field>
         <field name="social_youtube">https://www.youtube.com/c/airproof</field>
      </record>
   </odoo>

.. list-table::
   :header-rows: 1
   :stub-columns: 1
   :widths: 20 80

   * - Field
     - Description
   * - name
     - Name of the website (displayed in the browser)
   * - logo
     - Path to the logo (previously created into a record)
   * - favicon
     - Path to the favicon (previously created into a record)
   * - shop_ppg
     - Number of products shown per page in the e-commerce
   * - shop_ppr
     - Number of products shown per rows (in a page) in the e-commerce
   * - cookies_bar
     - Enable/disable the cookies bar
   * - contact_us_button_url
     - URL of the `Contact us` page (For instance, used in the standard header templates).
   * - social_facebook
     - URL of a Facebook profile
   * - social_instagram
     - URL of a Instagram profile
   * - social_linkedin
     - URL of a LinkedIn company profile
   * - social_youtube
     - URL of a YouTube channel

.. note::

   `website.default_website` is the default reference whenever you work with only one website. If
   there are several websites in your database, this record will refer to the default site (the
   first one).

.. _theming/module/views:

Views
-----

For some options, in addition to the Website Builder variable, you also have to activate a specific
view.

By reading the source code, templates related to options are easily found.

.. code-block:: xml

   <we-button title="..."
      data-name="..."
      data-customize-website-views="website.template_header_default"
      data-customize-website-variable="'...'"
      data-img="..."/>

.. code-block:: xml

   <template id="..." inherit_id="..." name="..." active="True"/>
   <template id="..." inherit_id="..." name="..." active="False"/>

.. seealso::

   In such cases, the ``<template id="...">`` syntax should be preferred over
   the ``<record id="..." model="ir.ui.view">`` syntax when defining the record
   in XML.

   See :ref:`reference/data/template`, especially about the ``active`` value.

.. _theming/module/views/presets:

Presets
~~~~~~~

In order to activate and deactivate views as presets, you should include those inside the
`presets.xml` file.

**Use**

.. code-block:: xml
   :caption: ``/website_airproof/data/presets.xml``

   <record id="module.view" model="ir.ui.view">
         <field name="active" eval="False"/>
   </record>

.. example::
   **Changing the menu items' horizontal alignment**

   .. code-block:: xml
      :caption: ``/website_airproof/data/presets.xml``

      <record id="website.template_header_default_align_center" model="ir.ui.view">
         <field name="active" eval="True"/>
      </record>

   The same logic can be used for others Odoo apps as well.

   **eCommerce - Display products categories**

   .. code-block:: xml
      :caption: ``/website_airproof/data/presets.xml``

       <record id="website_sale.products_categories" model="ir.ui.view">
          <field name="active" eval="False"/>
       </record>

   **Portal - Disable the language selector**

   .. code-block:: xml
      :caption: ``/website_airproof/data/presets.xml``

      <record id="portal.footer_language_selector" model="ir.ui.view">
         <field name="active" eval="False"/>
      </record>

.. _theming/assets:

Assets
======

For this part, we will refer to the `assets_frontend` bundle located in the web module. This bundle
specifies the list of assets loaded by the Website Builder, and the goal is to add your SCSS and JS
files to the bundle.

This is a non-exhaustive list of the frequently used bundles for a website:

.. list-table::
   :header-rows: 1
   :stub-columns: 1
   :widths: 20 80

   * - Bundle
     - Description
   * - web._assets_primary_variables
     - Mainly used for the `primary_variables.scss` file
   * - web._assets_secondary_variables
     - Mainly used for the `secondary_variables.scss` file
   * - web._assets_frontend_helpers
     - Mainly used for the `bootstrap_overridden.scss` file
   * - web.assets_frontend
     - You can add all your custom SCSS, JS or QWeb JS files
   * - website.assets_wysiwyg
     - Add your JS files related to the Website Builder options behaviors (for instance, a custom
       method for your custom building block)
   * - website.assets_wysiwyg
     - If you need to extend Boostrap through the Bootstrap Utilities API, for example

.. _theming/assets/styles:

Styles
------

The Website Builder together with Bootstrap are great for defining the basic styles of your website.
But to design something unique, you should go a step further. For this, you can easily add any SCSS
file to your theme.

**Declaration**

.. code-block:: python
   :caption: ``/website_airproof/__manifest__.py``

   'assets': {
      'web.assets_frontend': [
         'website_airproof/static/src/scss/theme.scss',
      ],
   },

Feel free to reuse the variables from your Bootstrap file and the ones used by Odoo in your
:file:`theme.scss` file.

.. example::
   .. code-block:: javascript
      :caption: ``/website_airproof/static/src/scss/theme.scss``

       blockquote {
         border-radius: $rounded-pill;
         color: o-color('o-color-3');
         font-family: o-website-value('headings-font');
       }

.. _theming/assets/interactivity:

Interactivity
-------------

Odoo supports three different kinds of JavaScript files:

- :ref:`plain JavaScript files <frontend/modules/plain_js>` (no module system),
- :ref:`native JavaScript module <frontend/modules/native_js>`, and
- :ref:`Odoo modules <frontend/modules/odoo_module>` (using a custom module system).

Most new Odoo JavaScript codes should use the native JavaScript module system. It's simpler and
brings the benefit of a better developer experience with better integration with the IDE.

**Declaration**

.. code-block:: python
   :caption: ``/website_airproof/__manifest__.py``

   'assets': {
      'web.assets_frontend': [
         'website_airproof/static/src/js/theme.js',
      ],
   },

.. note::
   If you want to include files from an external library, you can add them to the :file:`/lib`
   folder of your module.

.. tip::
   - Use a linter (JSHint, ...).
   - Never add minified JavaScript libraries.
   - Add `'use strict';` at the top of every old-style module (this is automatic for new-style
     modules).
   - Use `js_` prefixed CSS classes on elements you target with JavaScript.
   - Variables and functions should be *camelCased* (`myVariable`) instead of *snake_cased*
     (`my_variable`).
   - Do not name a variable `event`; use `ev` instead. This is to avoid bugs on non-Chrome
     browsers, as Chrome is magically assigning a global `event` variable (so if you use the
     `event` variable without declaring it, it will work fine on Chrome but crash on every other
     browser).
   - Use strict comparisons (`===` instead of `==`).
   - Use double quotes for all textual strings (such as `"Hello"`) and single quotes for all other
     strings, such as a CSS selector `.x_nav_item`.
   - If you're using native standard JS functions (`start()`, `willStart()`, `cleanForSave()`,
     etc), make sure you call `this._super.apply(this, arguments)`; (Check if it's necessary in the
     standard code).

.. seealso::
   - `Odoo JavaScript coding guidelines <https://github.com/odoo/odoo/wiki/Javascript-coding-guidelines>`_
   - :doc:`Overview of the Odoo JavaScript framework
     <../../reference/frontend/javascript_reference>`
   - `Odoo Experience Talk: 10 Tips to take your website design to the next level! <https://www.youtube.com/watch?v=vAgE_fPVXUQ&ab_channel=Odoo>`_


==================================================
SECTION: translations.rst
PATH: developer/howtos/website_themes/translations.rst
==================================================

============
Translations
============

With Odoo, you can translate your website into different languages.

In this chapter, you will learn how to:

- Translate the content of a module.
- Import and export translations.
- Integrate translations to a module.

.. _website_themes/translations/frontend:

Frontend
========

To translate your pages with the Website Builder, go to your website and click on the language
selector to switch to it. If your website was never translated to the target language, click
:guilabel:`Add a language...`, select it in the pop-up window, and click :guilabel:`Add`.

Click :guilabel:`Translate` to start translating. Depending on the language, some text is
automatically translated and highlighted in green, while everything that should be translated
manually is highlighted in yellow.

.. image:: translations/translate-button.png
   :alt: Translate button
   :width: 570

However, you have to understand what's happening under the hood when you translate something
through the Website Builder.

.. _website_themes/translations/frontend/default_pages:

Default pages
-------------

Odoo creates a base view once the Website is installed. If you edit the page with the Builder, a
duplicated view will be created and all your modifications will be saved into this one (and your
translations also). The only exception concerns the homepage (by default, Odoo creates a base and
duplicated view even before you've edited anything).

.. image:: translations/translations-page.png
   :alt: Translations dupliclated page

We recommend to be very careful about the order in which you will carry out translations or
modifications in the source language, either if you created the page through the Website Builder or
through the source code with a record. Note that every single modification of the source language
(`Edit master`) will break the link between the source language and the existing translations. In
other words, you'll have to re-create the translations if you edit the source language.

.. _website_themes/translations/frontend/strings:

Translatable strings
--------------------

.. _website_themes/translations/frontend/strings/t-att:

t-att- / t-attf-
~~~~~~~~~~~~~~~~

If you want to set a translatable string, use preferably `t-attf-` instead of `t-att-` whenever
possible.

**Example**

To write “Hello *username*”, you can do it in the following way:

.. code-block:: xml

   <div t-attf-title="Hello #{user.name}" />

.. warning::

   You could also achieve the same result with an `t-att-title` like the example below. However,
   the result won't be considered natively as a translatable string:

   .. code-block:: xml

      <div t-att-title="'Hello' + user.name" />

.. _website_themes/translations/frontend/strings/exception:

Exception: t-value / t-valuef
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

`t-value` and `t-valuef` are a bit different. None of them are explicitly translatable, so you
could write something like this:

.. code-block:: xml

   <t t-set=”additional_title”>My Page Title Shown in the Browser Tab</t>

As we are writing XML context, text located between two XML tags are translatable.

.. _website_themes/translations/frontend/strings/mixing:

Mixing translatable and non-translatable
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

In a situation where we need to set a translatable text in only one single
place:

.. code-block:: xml

   <t t-set=”title”>Foo</t>

And then we need to call it in different locations:

.. code-block:: xml

    <div t-att-title=”label” />
    ...
    <nav t-att-title=”label” />

Here we just called the translatable content into a non-translatable attribute (`t-att-title`). So
the `t-att-title` is not translatable but the casted variable is.

.. _website_themes/translations/backend:

Backend
=======

Translating pages directly from the backend allows you to translate several languages at the same
time. To do so, go to :menuselection:`Settings --> Technical --> User Interface: Views`, search for
the name of the page you want to translate, and click the :guilabel:`Edit Translations` button.

.. image:: translations/edit-translations.png
   :alt: Edit translations
   :width: 718

.. _website_themes/translations/export:

Export
======

Once you are done translating, you need to export the translations to integrate them into your
module. To export everything at once, open your database, activate :ref:`developer mode
<developer-mode>`, and go to :menuselection:`Settings --> Translations --> Export Translation`.
Select the :guilabel:`Language` you translated, *PO File* under :guilabel:`File Format`, and
*website_airproof* as the :guilabel:`Apps To Export`.

Download the file and move it to the :file:`i18n` folder. If needed, you can manually edit the
:file:`.po` file afterward.

.. _website_themes/translations/po:

PO file
=======

You can translate directly by editing a :file:`.po` file or creating the file yourself. Check out
the :doc:`translating modules documentation <../translations>` to write your translations.

.. code-block:: po
   :caption: ``/website_coconuts/i18n/fr_BE.po``

   #. module: website_airproof
   #: model_terms:ir.ui.view,arch_db:website_airproof.s_custom_snippet
   msgid "..."
   msgstr "..."

.. _website_themes/translations/import:

Import
======

To import your translation files into Odoo, go to :menuselection:`Settings --> Translations -->
Import Translation` and upload them.


==================================================
SECTION: website_themes.rst
PATH: developer/howtos/website_themes.rst
==================================================

:show-content:
:hide-page-toc:
:show-toc:

==============
Website themes
==============

.. image:: website_themes/web-design.png
   :alt: Artistic illustration of "Web design"
   :width: 600

The Odoo Website Builder is an excellent tool for creating a website fully integrated with other
Odoo apps. Using the theme's options and building blocks is easy and allows you to personalize your
web presence the way you want. However, you can take things even further.

In this documentation, you will learn to completely customize your website without touching Odoo's
core files, and this way, preserve the editing options of the Website Builder.

The information compiled in this documentation is based on our past experiences - both failures and
successes. We invite you to use it as a base to build your own website and adapt it to your needs.

.. toctree::
    :maxdepth: 2

    website_themes/setup
    website_themes/theming
    website_themes/layout
    website_themes/navigation
    website_themes/pages
    website_themes/media
    website_themes/building_blocks
    website_themes/shapes
    website_themes/gradients
    website_themes/animations
    website_themes/forms
    website_themes/translations
    website_themes/going_live
